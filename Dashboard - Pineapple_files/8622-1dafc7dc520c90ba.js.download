"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8622],{15659:function(e,t,n){n.d(t,{_:function(){return en},Z:function(){return ee}});var a,r,l,i=n(67294),o=n(6812),c=n(95803),s=n(55654),u=n(40051),d=n(96819),m=n(39646),p=n(38571),v=n(7e4),b=n(36694),f=n(86536),g=n(83220),h=n(61896),E=n(98396),w=n(69397),y=n(99226),x=n(23972),Z=n(34386),k=n(93946),D=n(88441),C=n(86886),P=n(56917),I=n(25932),O=n(31230),j=n(64107),N=n(46118),S=n(90948),z=n(52506),_=n(21905),W=n(66242),A=n(62023),T=n(30833),B=n(23645),F=n(70269),U=n(11163),M=n.n(U);function R(e,t,n,a,r,l,i){try{var o=e[l](i),c=o.value}catch(e){n(e);return}o.done?t(c):Promise.resolve(c).then(a,r)}var G=e=>{var t,n,{apps:a,workspaceId:r}=e,[l,o]=(0,i.useState)(!1),[c,s]=(0,i.useState)({id:"",name:"",subStatus:""}),u=e=>{s(e),o(!0)},d=(t=function*(e){yield F.WL.setItem("appData",e),M().push(P.fR)},n=function(){var e=this,n=arguments;return new Promise(function(a,r){var l=t.apply(e,n);function i(e){R(l,a,r,i,o,"next",e)}function o(e){R(l,a,r,i,o,"throw",e)}i(void 0)})},function(e){return n.apply(this,arguments)});return i.createElement(y.Z,{sx:{display:"flex",flexDirection:"column",flex:1,flexGrow:1}},l&&i.createElement(B.Z,{appName:c.name,appId:c.id,subStatus:c.subStatus,onComplete:function(){var{success:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{success:!1};e&&F.WL.removeItem("appData"),o(!1)},workspaceId:r}),i.createElement(x.Z,{variant:"h6"},"Websites to configure"),i.createElement(x.Z,{variant:"body2",color:"text.secondary",sx:{pb:1.5}},"Finish configuring your website with AI"),i.createElement(C.ZP,{container:!0,spacing:3,mb:2},a.map(e=>i.createElement(C.ZP,{item:!0,key:e.id,xs:12,sm:6,md:6,lg:4},i.createElement(W.Z,{elevation:3},i.createElement(A.Z,null,i.createElement(y.Z,{className:"viewer-page",sx:{display:"flex",flexDirection:"column",flex:1,flexGrow:1}},i.createElement(y.Z,{sx:{display:"flex",flexDirection:"row"}},i.createElement(x.Z,null,"Plan: "),i.createElement(N.u,{planName:null==e?void 0:e.planName,loading:!1,onClick:()=>({})}))),i.createElement(w.Z,{startIcon:i.createElement(f.Z,{size:14}),variant:"outlined",color:"secondary",onClick:()=>d({id:e.id,name:e.name})},"Setup"),i.createElement(k.Z,{color:"error","aria-label":"delete",onClick:()=>u({id:e.id,name:e.name,subStatus:e.subStatus})},i.createElement(T.Z,{size:14}))))))),i.createElement(x.Z,{variant:"h6",sx:{pt:2}},"Ready Websites"))},$=e=>{var{workspaceDataName:t}=e;return i.createElement(y.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"}},i.createElement(y.Z,{sx:{maxWidth:400,p:2}},i.createElement(x.Z,{variant:"h4",align:"center"},"Create your website"),i.createElement(x.Z,{variant:"subtitle1",color:"text.secondary",align:"center"},"Your website powered by AI"),i.createElement(y.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2}},i.createElement("span",{style:{fontSize:50}},"\uD83C\uDF89")),i.createElement(y.Z,{sx:{display:"flex",justifyContent:"center",marginTop:2}},i.createElement(w.Z,{href:"".concat(j.pages.TEMPLATES.pathname,"?workspaceId=").concat(t),variant:"contained",color:"secondary",startIcon:i.createElement(h.Z,null),disabled:!t},"Create Website"))))},q=n(49040),L=n(74471),H=n(41664),Y=n.n(H),K=n(84429);function V(e){var{domainStatus:t,workspaceName:n,appName:a,domainUrl:r,subscriptionStatus:l,hasPaidBasicFeatures:o,livePages:c,subdomain:s}=e;return l===K.hU.paused&&r?i.createElement(Y(),{href:"/".concat(n,"/").concat(a,"?tab=settings&subtab=billing")},i.createElement(x.Z,{variant:"body2",color:"error"},"Your page ".concat(r," is unpublished."))):o?l===K.hU.past_due?i.createElement(Y(),{href:"/".concat(n,"/").concat(a,"?tab=settings&subtab=billing")},i.createElement(x.Z,{variant:"body2",color:"error"},"Subscription Past Due - Suspended")):t===K.WO.error?i.createElement(Y(),{href:"/".concat(n,"/").concat(a,"?tab=settings&subtab=domain")},i.createElement(x.Z,{variant:"body2",color:"error"},"Error: Custom Domain Not Configured")):r||l!==K.hU.active?s||r?c?i.createElement(i.Fragment,null):i.createElement(Y(),{href:"/".concat(n,"/").concat(a,"/editor/index"),style:{color:"darkorange"}},i.createElement(x.Z,{variant:"body2"},"Publish your first live page!")):i.createElement(Y(),{href:"/".concat(n,"/").concat(a,"?subtab=general&tab=settings"),style:{color:"darkorange"}},i.createElement(x.Z,{variant:"body2",color:"error"},"Claim your subdomain, to publish pages.")):i.createElement(Y(),{href:"/".concat(n,"/").concat(a,"?tab=settings&subtab=domain"),style:{color:"darkorange"}},i.createElement(x.Z,{variant:"body2"},"Unlocked: Add Custom Domain \uD83C\uDF89")):void 0}var Q=n(9113);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){var a;a=n[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ee=function(e){var t,n,{workspaceData:a}=e,[r,l]=(0,i.useState)(!0),I=(0,E.Z)(e=>e.breakpoints.down("sm")),{data:O,loading:S}=(0,o.a)(en,{variables:{id:a.id}}),{data:W}=(0,o.a)(_.l,{variables:{workspaceId:a.id}}),{openFeatureRequestModal:A}=(0,L.K)();(0,i.useEffect)(()=>{null!=a&&a.name&&l(!1)},[null==a?void 0:a.name]);var T=e=>{var{rowData:t}=e,{pages:n}=t||{},r="/".concat(a.name,"/").concat(t.name,"/index");if(null!=n&&n.length){var l=(null==n?void 0:n.find(e=>"/index"===e.pathname))||n[0];r=(0,P.Ax)({codeURL:!0,appName:null==t?void 0:t.name,workspaceName:a.name,pathname:null==l?void 0:l.pathname})}return r},B=()=>{A({dialogTitle:"Regenerate Website",showFeatureRequestModal:!0,description:"This will allow you to regenerate your website, with new template and new AI prompt. Reusing your GPT-4 tokens from your paid plan.",subText:"You can reach us via our in-app chat message (bottom-right corner), to get support with regenerating your website manually.",trackId:"feat-req: Regenerate",featureId:q.g.REGENERATE})};function F(e){var{rowData:t}=e,n=T({rowData:t});return i.createElement(w.Z,{component:Y(),href:n,startIcon:i.createElement(s.Z,{size:14}),sx:{mt:1},variant:"outlined",fullWidth:!0,size:"small"},"Editor")}var U=[{headerName:"Template",field:"apps",flex:.4,renderCell:e=>{var t,n,a,r=T({rowData:e.row});return i.createElement(z.Z,{src:(null==e?void 0:null===(t=e.row)||void 0===t?void 0:null===(n=t.website_template)||void 0===n?void 0:null===(a=n.placeholderImage)||void 0===a?void 0:a.url)||"/defaults/image_placeholder_square.svg",buttonText:"Editor",Icon:i.createElement(s.Z,{size:14}),url:r})}},{headerName:"Plan",headerAlign:"left",align:"left",field:"planName",flex:.4,renderCell:e=>{var t,n,r,l,o,c,s,v,b,f,g,h,E,w,C,I,O,S,z=(0,P.Bd)((0,P.Ax)({liveURL:!0,appName:e.row.name,domainUrl:e.row.domainUrl,subdomain:e.row.subdomain,workspaceName:a.name,pathname:"/index"}),e.row.domainUrl,e.row.subdomain),_=null==e?void 0:null===(t=e.row)||void 0===t?void 0:null===(n=t.subscription)||void 0===n?void 0:n.status;return i.createElement(y.Z,{className:"viewer-page",sx:{display:"flex",flexDirection:"column",flex:1,flexGrow:1}},i.createElement(y.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},i.createElement(Y(),{style:{color:"black",display:"flex",alignItems:"center"},href:"/".concat(a.name,"/").concat(e.row.name,"?tab=settings&subtab=billing")},i.createElement(x.Z,null,"Plan: "),i.createElement(N.u,{planName:null==e?void 0:null===(r=e.row)||void 0===r?void 0:r.planName,loading:!1,onClick:()=>({})})),"active"===_&&i.createElement(Z.Z,{title:"BETA: Regenerate website with new template and AI prompt."},i.createElement(k.Z,{onClick:B,size:"small"},i.createElement(u.Z,{size:16,style:{color:"#8d8d8d"}})))),_&&"active"!==_&&i.createElement(y.Z,{sx:{display:"flex",flexDirection:"row"}},i.createElement(Y(),{style:{color:"black",display:"flex",alignItems:"center"},href:"/".concat(a.name,"/").concat(e.row.name,"?tab=settings&subtab=billing")},i.createElement(j.SubscriptionStatusText,{status:_}))),i.createElement(V,{domainStatus:null==e?void 0:null===(l=e.row)||void 0===l?void 0:l.domainStatus,subdomain:null==e?void 0:null===(o=e.row)||void 0===o?void 0:o.subdomain,hasPaidBasicFeatures:null==e?void 0:null===(c=e.row)||void 0===c?void 0:c.hasPaidBasicFeatures,domainUrl:e.row.domainUrl,appName:e.row.name,workspaceName:a.name,subscriptionStatus:_,livePages:!!(null!=e&&null!==(s=e.row)&&void 0!==s&&null!==(v=s.live_pages)&&void 0!==v&&v.length)}),i.createElement(y.Z,{sx:{display:"flex",flexDirection:"row",pt:1,pb:0,alignItems:"center"}},i.createElement(Z.Z,{title:null!=e&&null!==(b=e.row)&&void 0!==b&&null!==(f=b.live_pages)&&void 0!==f&&f.length?"Website is live":"Website not published"},i.createElement(Y(),{href:null!=e&&null!==(g=e.row)&&void 0!==g&&null!==(h=g.live_pages)&&void 0!==h&&h.length?z:"/".concat(a.name,"/").concat(e.row.name,"/editor/index"),color:"#3E3EEE",target:null!=e&&null!==(E=e.row)&&void 0!==E&&null!==(w=E.live_pages)&&void 0!==w&&w.length?"_blank":""},i.createElement(d.Z,{size:12,style:{color:null!=e&&null!==(C=e.row)&&void 0!==C&&null!==(I=C.live_pages)&&void 0!==I&&I.length?"#20d379":"red"}}))),i.createElement(Y(),{href:z,color:"#3E3EEE",target:"_blank"},i.createElement(x.Z,{variant:"body1",color:"#3E3EEE",sx:{pl:.5,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:300}},null==z?void 0:z.replace("https://","")))),i.createElement(y.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",pt:1}},i.createElement(m.Z,{size:14}),i.createElement(Y(),{style:{color:"black",fontWeight:700},href:"/".concat(a.name,"?tab=members")},i.createElement(x.Z,{variant:"body1",sx:{ml:1,mr:1}},"Members: ",(null==W?void 0:null===(O=W.membersConnection)||void 0===O?void 0:null===(S=O.aggregate)||void 0===S?void 0:S.count)||0))),i.createElement(y.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",pt:1}},i.createElement(p.Z,{size:14}),i.createElement(Y(),{style:{color:"black",fontWeight:700},href:"/".concat(a.name,"/").concat(e.row.name)},i.createElement(x.Z,{variant:"body1",sx:{ml:1,mr:1}},"Progress: 5/15")),i.createElement(D.Z,{variant:"determinate",color:"secondary",value:45,style:{width:50}})))}},{headerName:"Analytics",field:"pages",flex:.3,headerAlign:"center",align:"center",sortable:!1,filterable:!1,renderCell:e=>i.createElement(z.Z,{src:"/assets/analytics/analytics full.png",buttonText:"Analytics",Icon:i.createElement(v.Z,{size:14}),url:"/".concat(a.name,"/").concat(e.row.name,"?tab=analytics")})},{field:"actions",headerName:"Actions",sortable:!1,filterable:!1,width:100,flex:.3,headerAlign:"center",align:"center",renderCell:e=>i.createElement(C.ZP,{container:!0,direction:"row",spacing:1,justifyContent:"center",maxWidth:150},i.createElement(F,{rowData:null==e?void 0:e.row}),i.createElement(w.Z,{component:Y(),href:"/".concat(a.name,"/").concat(e.row.name,"?tab=Pages"),startIcon:i.createElement(b.Z,{size:14}),sx:{mt:1},variant:"outlined",fullWidth:!0,size:"small"},"Dashboard"),i.createElement(w.Z,{component:Y(),href:"/".concat(a.name,"/").concat(e.row.name,"?tab=settings"),startIcon:i.createElement(f.Z,{size:14}),sx:{mt:1},variant:"outlined",fullWidth:!0,size:"small"},"Settings"),i.createElement(w.Z,{component:Y(),href:"/".concat(a.name,"/").concat(e.row.name,"?tab=settings&subtab=billing"),startIcon:i.createElement(g.Z,{size:14}),sx:{mt:1},variant:"outlined",fullWidth:!0,size:"small"},"Billing"))}],M=(0,i.useMemo)(()=>{var e,t;return(null==O?void 0:null===(e=O.workspace)||void 0===e?void 0:null===(t=e.apps)||void 0===t?void 0:t.filter(e=>"temp"!==e.status).map(e=>{var t,n,a,r,l;return X(X(X({},e),(0,j.getCurrentSubscription)({planName:null==e?void 0:null===(t=e.subscription)||void 0===t?void 0:t.planName,previousPlanName:null==e?void 0:null===(n=e.subscription)||void 0===n?void 0:n.previousPlanName,previousBillDate:null==e?void 0:null===(a=e.subscription)||void 0===a?void 0:a.previousBillDate,status:null==e?void 0:null===(r=e.subscription)||void 0===r?void 0:r.status})),{},{subStatus:null==e?void 0:null===(l=e.subscription)||void 0===l?void 0:l.status})}))||[]},[null==O?void 0:null===(t=O.workspace)||void 0===t?void 0:t.apps]),R=(0,i.useMemo)(()=>{var e,t;return(null==O?void 0:null===(e=O.workspace)||void 0===e?void 0:null===(t=e.apps)||void 0===t?void 0:t.filter(e=>"temp"===e.status).map(e=>{var t,n,a,r,l;return X(X(X({},e),(0,j.getCurrentSubscription)({planName:null==e?void 0:null===(t=e.subscription)||void 0===t?void 0:t.planName,previousPlanName:null==e?void 0:null===(n=e.subscription)||void 0===n?void 0:n.previousPlanName,previousBillDate:null==e?void 0:null===(a=e.subscription)||void 0===a?void 0:a.previousBillDate,status:null==e?void 0:null===(r=e.subscription)||void 0===r?void 0:r.status})),{},{subStatus:null==e?void 0:null===(l=e.subscription)||void 0===l?void 0:l.status})}))||[]},[null==O?void 0:null===(n=O.workspace)||void 0===n?void 0:n.apps]);if(S)return i.createElement(c.Z,null);if((null==R?void 0:R.length)===0&&(null==M?void 0:M.length)===0)return i.createElement($,{workspaceDataName:a.name});var H=I?U.filter(e=>["apps","actions"].includes(e.field)):[...U];return i.createElement("div",{"data-cy":"apps-container",style:{height:"100%",width:"100%"}},i.createElement(y.Z,{mb:4,sx:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"flex-start"}},i.createElement(w.Z,{sx:{mr:2},component:Y(),href:"".concat(j.pages.TEMPLATES.pathname,"?workspaceId=").concat(a.name),variant:"contained",color:"secondary",startIcon:i.createElement(h.Z,null),disabled:r},"New Website"),a&&(null==a?void 0:a.id)&&i.createElement(Q.Z,{workspaceData:a})),R.length>0&&i.createElement(G,{apps:R,workspaceId:a.id}),S?i.createElement(c.Z,null):M?i.createElement(et,{rows:M,columns:H,autoHeight:!0,rowHeight:200,pageSize:25,rowsPerPageOptions:[25],disableSelectionOnClick:!0,onCellClick:(e,t)=>{var n;(null==e?void 0:null===(n=e.colDef)||void 0===n?void 0:n.field)==="actions"&&t.stopPropagation()}}):i.createElement(x.Z,{variant:"h6",color:"textSecondary"},"Create your first website first"))},et=(0,S.ZP)(I._)({"& .MuiDataGrid-row":{cursor:"default","&:hover":{textDecoration:"none !important",backgroundColor:"unset !important"}}}),en=(0,O.ZP)(l||(a=['\n  query GetWorkspaceById($id: ID!) {\n    workspace(\n      id: $id\n    ) {\n      id\n      name\n#      apps (where: { _or : [{ status_ne: "temp" }, { status_null: true }] }) {\n      apps {\n        id\n        name\n        status\n        domainUrl\n        subdomain\n        domainStatus\n        created_at\n        pages {\n          id\n          pathname\n        }\n        live_pages {\n          id\n        }\n        subscription {\n          planName\n          previousPlanName\n          previousBillDate\n          status\n        }\n        updated_at\n        intercomKey\n        website_template {\n          id\n          placeholderImage {\n            id\n            url\n          }\n        }\n      }\n    }\n  }\n'],r||(r=a.slice(0)),l=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))))},23645:function(e,t,n){n.d(t,{Z:function(){return f}});var a,r,l,i=n(67294),o=n(50319),c=n(84429),s=n(31230),u=n(35551),d=n(50841),m=n(15659),p=n(46860);function v(e,t,n,a,r,l,i){try{var o=e[l](i),c=o.value}catch(e){n(e);return}o.done?t(c):Promise.resolve(c).then(a,r)}var b=(0,s.ZP)(l||(a=["\n  mutation DeleteApp($id: ID!) {\n    deleteApp(input: { where: { id: $id } }) {\n      app {\n        id\n      }\n    }\n  }\n"],r||(r=a.slice(0)),l=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))));function f(e){var t,n,{appName:a,appId:r,onComplete:l,subStatus:s="",workspaceId:f}=e,[g,{loading:h}]=(0,o.D)(b,{onError:e=>y((null==e?void 0:e.message)||'There was an error deleting "'.concat(a,'" website'),{variant:"error"}),onCompleted:()=>{y("Website ".concat(a," successfully deleted"),{variant:"success"})},refetchQueries:[{query:m._,variables:{id:f}}]}),E=s===c.hU.deleted||""===s?'Do you want to delete "'.concat(a,'" website permanently?'):"Can't delete website as you have Active Subscription. ",w=s===c.hU.deleted||""===s?"":"Please cancel your Website's subscription first.",{enqueueSnackbar:y}=(0,d.Ds)(),x=(0,p.z$)(),Z=(t=function*(){h||""===r||(x.track("delete app",{appId:r}),l({success:!(yield g({variables:{id:r}})).errors})),l()},n=function(){var e=this,n=arguments;return new Promise(function(a,r){var l=t.apply(e,n);function i(e){v(l,a,r,i,o,"next",e)}function o(e){v(l,a,r,i,o,"throw",e)}i(void 0)})},function(){return n.apply(this,arguments)});return i.createElement(u.Z,{type:"error",text:E,subText:w,autoFullScreen:!0,handleClose:l,handleOk:Z,saveDisabled:!(s===c.hU.deleted||""===s)||h,successButtonText:"Delete",dialogTitle:"Delete website",open:!0})}},52506:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(67294),r=n(99226),l=n(69397),i=n(89755),o=n.n(i),c=n(41664),s=n.n(c);function u(e){var{Icon:t,url:n,src:i,buttonText:c,size:u="large",width:d=150}=e;return a.createElement(r.Z,{justifyContent:"center",alignItems:"center",component:s(),href:"".concat(n),onClick:e=>e.stopPropagation(),display:"flex",width:"100%",height:"auto",sx:{position:"relative",aspectRatio:"16/9",borderRadius:8,"& .appear-item":{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",flex:1,height:"100%",justifyContent:"center",alignItems:"center",visibility:"hidden"},"&:hover .appear-item":{zIndex:3,background:"rgba(255,255,255,0.63)",visibility:"visible"}}},a.createElement(r.Z,{className:"appear-item",display:"flex",flexDirection:"column"},a.createElement(l.Z,{variant:"contained",startIcon:t,size:u,color:"secondary",sx:{width:d}},c)),a.createElement(o(),{src:i,objectFit:"cover",layout:"fill",className:"Rounded"}))}},9113:function(e,t,n){n.d(t,{Z:function(){return p}});var a,r,l,i=n(67294),o=n(98456),c=n(34386),s=n(99226),u=n(23972),d=n(76661),m=n(46949);function p(e){var t,n,{workspaceData:a}=e,{data:r,loading:l}=(0,m.A2F)({variables:{workspaceId:null==a?void 0:a.id},skip:!(null!=a&&a.id),fetchPolicy:"no-cache"});if(l)return i.createElement(o.Z,{size:16,thickness:5,sx:{mt:1},color:"secondary"});var d=(null==r?void 0:null===(n=r.workspace)||void 0===n?void 0:n.websitesGenerated)||0,p=(t=d)<10?t/10*100:t>60?t/100*100:t>30?t/60*100:t/30*100;return i.createElement(c.Z,{title:"Available tokens for advanced website generations.",defaultValue:200,placement:"top",arrow:!0},i.createElement(s.Z,{sx:{display:"flex",alignItems:"center"}},p>1&&i.createElement(o.Z,{variant:"determinate",value:p,size:20,thickness:5,sx:{color:"green",mr:.5}}),i.createElement(u.Z,{sx:{pt:.5,width:80},color:"text.secondary"},d,"x Tokens")))}(0,d.Ps)(l||(a=["\n  query GetWebsitesGeneratedByWorkspace($workspaceId: ID!) {\n    workspace(id: $workspaceId) {\n      id\n      websitesGenerated\n    }\n  }\n"],r||(r=a.slice(0)),l=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))))},42274:function(e,t,n){n.d(t,{v:function(){return a}});function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";navigator.clipboard.writeText(e).then(()=>{t("".concat(n," copied to clipboard"),{variant:"success"})},()=>{t("Could not copy ".concat(n," to clipboard"),{variant:"warning"})})}},94117:function(e,t,n){var a=n(67294),r=n(90629),l=n(99226),i=n(30474);t.Z=function(e){var{children:t}=e,n=(e=>{var t=a.Children.toArray(e);if(1===t.length&&a.isValidElement(t[0])){var n=t[0].type;return"string"==typeof n?n:(null==n?void 0:n.displayName)||(null==n?void 0:n.name)||"Unknown"}return"MultipleOrUnknown"})(t);return a.createElement(r.Z,{elevation:8,sx:{ml:{xs:1,sm:2,md:2,lg:2,lx:2},mr:{xs:1,sm:2,md:2,lg:2,lx:2},borderRadius:1.5}},a.createElement(l.Z,{py:3,sx:{pr:{xs:1,sm:2,md:3,lg:3,lx:3},pl:{xs:1,sm:2,md:3,lg:3,lx:3}}},a.createElement(i.Z,{level:"main-content-wrapper-".concat(n)},t)))}},21905:function(e,t,n){n.d(t,{l:function(){return W},Z:function(){return _}});var a,r,l=n(67294),i=n(6812),o=n(95803),c=n(76735),s=n(31230),u=n(25932),d=n(67926),m=n(86886),p=n(34386),v=n(93946),b=n(99226),f=n(23972),g=n(30833),h=n(5152),E=n.n(h),w=n(42274),y=n(50841),x=n(69397),Z=n(61896),k=()=>l.createElement(b.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"}},l.createElement(b.Z,{sx:{maxWidth:800,p:2}},l.createElement(f.Z,{variant:"h4",align:"center"},"Collect Emails"),l.createElement(f.Z,{variant:"subtitle1",color:"text.secondary",align:"center"},"Add Email Form to your Website \uD83D\uDC47\uD83C\uDFFB"),l.createElement("video",{src:"https://pub-fe0dd7eb7228492693dca240fab9a373.r2.dev/Members_demo_87ca97aee5-W-65.mp4",width:"100%",controls:!0}),l.createElement(b.Z,{sx:{display:"flex",justifyContent:"center",marginTop:2}},l.createElement(x.Z,{href:"https://www.pineapplebuilder.com/docs/members",target:"_blank",variant:"contained",color:"secondary",startIcon:l.createElement(Z.Z,null)},"Add Email Form"))));function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function C(e,t,n,a,r,l,i){try{var o=e[l](i),c=o.value}catch(e){n(e);return}o.done?t(c):Promise.resolve(c).then(a,r)}function P(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var l=e.apply(t,n);function i(e){C(l,a,r,i,o,"next",e)}function o(e){C(l,a,r,i,o,"throw",e)}i(void 0)})}}var I=E()(()=>n.e(3171).then(n.bind(n,13171))),O=function(e){var t,n,{tableData:a,count:r,refetch:i,workspaceId:o}=e,[c,s]=(0,l.useState)({memberId:"",email:""}),{enqueueSnackbar:h}=(0,y.Ds)(),E=[{headerName:"Email",field:"email",flex:1.5,filterable:!0,sortable:!0,minWidth:150},{headerName:"Category",field:"category",flex:1.5,filterable:!0,sortable:!0,minWidth:150},{headerName:"Updated",field:"updated_at",headerAlign:"right",align:"right",width:150,valueGetter:e=>{var t;return(0,d.Z)(new Date(null==e?void 0:null===(t=e.row)||void 0===t?void 0:t.updated_at),new Date,{addSuffix:!0})}},{field:"actions",headerName:"Actions",sortable:!1,filterable:!1,disableColumnMenu:!0,headerAlign:"right",align:"right",renderCell:e=>l.createElement(m.ZP,{container:!0,direction:"row",spacing:1,justifyContent:"flex-end"},l.createElement(O,{data:e.row}))}],x=(t=P(function*(e){var{memberId:t,email:n}=e;s({memberId:t,email:n})}),function(e){return t.apply(this,arguments)}),Z=(n=P(function*(){s({memberId:"",email:""}),i()}),function(){return n.apply(this,arguments)});function C(e){var{icon:t,onClick:n,title:a}=e;return l.createElement(m.ZP,{item:!0},l.createElement(p.Z,{title:a,"aria-label":a.toLowerCase()},l.createElement(v.Z,{onClick:n,size:"small"},t)))}function O(e){var{data:t}=e,{id:n,email:a}=t||{};return l.createElement(C,{title:"Delete",icon:l.createElement(g.Z,{size:18,color:"#46433C"}),onClick:()=>x({memberId:n,email:a})})}return l.createElement("div",{"data-cy":"pages-container",style:{height:"100%",width:"100%"}},c.memberId&&l.createElement(I,{memberId:c.memberId,email:c.email,onComplete:Z,workspaceId:o}),l.createElement(b.Z,{p:1},l.createElement(f.Z,{variant:"h6"},"Members: ",0===r?"List Empty":r),l.createElement(f.Z,{variant:"subtitle2",color:"text.secondary"},"Gather your customer's emails with simple ",l.createElement("a",{href:"https://www.pineapplebuilder.com/docs/members",target:"_blank"},"form."))),0===r?l.createElement(k,null):l.createElement(u._,{rows:null==a?void 0:a.map(e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){var a;a=n[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e})({},e)),columns:E,autoHeight:!0,pageSize:20,pagination:!0,paginationMode:"client",filterMode:"client",disableColumnMenu:!1,hideFooterPagination:!1,rowsPerPageOptions:[20],onRowClick:function(e){var t;(0,w.v)(null==e?void 0:null===(t=e.row)||void 0===t?void 0:t.email,h,"Email")},onCellClick:(e,t)=>{var n;(null==e?void 0:null===(n=e.colDef)||void 0===n?void 0:n.field)==="actions"&&t.stopPropagation()}}))},j=n(54274),N=n(11163),S=()=>{var e=(0,N.useRouter)();return l.createElement(b.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"}},l.createElement(b.Z,{sx:{maxWidth:800,p:2}},l.createElement(f.Z,{variant:"h4",align:"center"},"Collect Emails"),l.createElement(f.Z,{variant:"subtitle1",color:"text.secondary",align:"center"},"Add Email Form to your Website \uD83D\uDC47\uD83C\uDFFB"),l.createElement("video",{src:"https://pub-fe0dd7eb7228492693dca240fab9a373.r2.dev/Members_demo_87ca97aee5-W-65.mp4",width:"100%",controls:!0}),l.createElement(b.Z,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",marginTop:2}},l.createElement("span",{style:{margin:"auto"}},l.createElement(x.Z,{onClick:()=>{e.push("/?tab=projects",void 0,{shallow:!0})},variant:"contained",color:"secondary",startIcon:l.createElement(j.Z,null)},"Buy Subscription")),l.createElement(f.Z,{sx:{pt:1},variant:"subtitle1",color:"text.secondary",align:"center"},"Buy Basic or Grow subscription for one of your websites to get access."))))};function z(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _=function(e){var t,n,{workspaceId:a}=e,{data:r,loading:s,error:u,refetch:d}=(0,i.a)(A,{variables:{workspaceId:a}}),{data:m,refetch:p}=(0,i.a)(W,{variables:{workspaceId:a}});return s?l.createElement(o.Z,null):u?(null==u?void 0:u.message)==="No active Subscriptions"?l.createElement(S,null):l.createElement(c.Z,null):l.createElement(O,{tableData:r.members,count:null==m?void 0:null===(t=m.membersConnection)||void 0===t?void 0:null===(n=t.aggregate)||void 0===n?void 0:n.count,refetch:()=>{setTimeout(()=>{p(),d()},800)},workspaceId:a})},W=(0,s.ZP)(a||(a=z(["\n  query CountMembers (\n    $workspaceId: ID!\n  ) {\n    membersConnection(\n      where: {\n        workspace: $workspaceId\n      }\n    ) {\n      aggregate{\n        count\n      }\n    }\n  }\n"]))),A=(0,s.ZP)(r||(r=z(["\n  query GetAllMembers($workspaceId: ID!) {\n    members(\n      where: {\n          workspace: { id: $workspaceId }\n      }\n    ) {\n      id\n      name\n      email\n      category\n      updated_at\n    }\n  }\n"])))}}]);