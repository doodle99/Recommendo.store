"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5911],{98285:function(e,t,r){r.d(t,{$U:function(){return yR},CG:function(){return yT},HD:function(){return yL},IG:function(){return yP},JR:function(){return yz},Ju:function(){return yC},Ns:function(){return yI},PC:function(){return yN},PD:function(){return yw},Pl:function(){return yX},Pr:function(){return yU},Px:function(){return yD},SI:function(){return yZ},Tx:function(){return yE},UJ:function(){return yb},YK:function(){return yH},bM:function(){return yY},cu:function(){return yF},hC:function(){return yA},hK:function(){return yj},jy:function(){return yG},kG:function(){return yB},ni:function(){return y_},pz:function(){return yW},rR:function(){return yO},se:function(){return yq},vS:function(){return yM},wB:function(){return yV},wh:function(){return yK},z9:function(){return yk}});var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,b,w,S,k,C,M,T,P,R,E,A,I,L,F,z,O,B,D,_,N,W,j,V,H,U,G,X,Z,Y,q,K=["textOutlineWidth","textShadowX","textShadowY","textShadowBlur","textShadowColor","outline","blur"],J=["controls"],Q=["textContent","innerHTML"],ee=["width"],et=["frameStyle"];function er(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(r),!0).forEach(function(t){var a;a=r[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ei(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function en(e,t,r,a,n,o,l){try{var s=e[o](l),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(a,n)}function eo(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var o=e.apply(t,r);function l(e){en(o,a,n,l,s,"next",e)}function s(e){en(o,a,n,l,s,"throw",e)}l(void 0)})}}/*!
* Pintura v8.71.1 
* (c) 2018-2023 PQINA Inc. - All Rights Reserved
* License: https://pqina.nl/pintura/license/
*/var el=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"}],es=e=>{if(65496===e.getUint16(0)){for(var t,r=e.byteLength,a=2,n=void 0;a<r&&255===e.getUint8(a);){t=e.getUint16(a);var o=el.find(r=>r.value===t&&(!r.subvalue||r.subvalue===e.getUint16(a+2+2)));if(o){var{name:l}=o;n||(n={}),n[l]||(n[l]={offset:a,size:e.getUint16(a+2)})}if(65498===t)break;a+=2+e.getUint16(a+2)}return n}},ec=(e,t)=>{if(65505===e.getUint16(t)){var r=e.getUint16(t+2);if(t+=4,1165519206===e.getUint32(t)){t+=6;var a=e.getUint16(t);if(18761===a||19789===a){var n=18761===a;if(t+=2,42===e.getUint16(t,n)){t+=e.getUint32(t+2,n);var o=a=>{for(var o=[],l=t,s=Math.min(e.byteLength,t+r-16);l<s;l+=12){var c=l;e.getUint16(c,n)===a&&o.push(c)}return o};return{read:t=>{var r=o(t);if(r.length)return e.getUint16(r[0]+8,n)},write:(t,r)=>{var a=o(t);return!!a.length&&(a.forEach(t=>e.setUint16(t+8,r,n)),!0)}}}}}}},ed=(e,t,r)=>{if(e){var a=new DataView(e),n=es(a);if(n&&n.exif){var o=ec(a,n.exif.offset);if(o)return void 0===r?o.read(t):o.write(t,r)}}},eu="__pqina_webapi__",eh=e=>window[eu]?window[eu][e]:window[e],ep=function(){},ev=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ep,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((a,n)=>{var{dataFormat:o="readAsArrayBuffer"}=r,l=new(eh("FileReader"));l.onload=()=>a(l.result),l.onerror=()=>n(l.error),l.onprogress=t,l[o](e)})},eg=(a=eo(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,e.size],r=arguments.length>2?arguments[2]:void 0;return yield ev(e.slice(...t),r)}),function(e){return a.apply(this,arguments)}),em=null,ef=()=>(null===em&&(em=void 0!==window.document),em),e$=null,ey=()=>new Promise(e=>{if(null===e$){var t=ef()?new Image:{};t.onload=()=>{e$=1===t.naturalWidth,t=void 0,e(e$)},t.src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";return}return e(e$)}),ex=e=>e.getContext("2d").getImageData(0,0,e.width,e.height),eb=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=document.createElement(e),n=Object.getOwnPropertyDescriptors(a.__proto__);for(var o in t)"style"===o?a.style.cssText=t[o]:n[o]&&n[o].set||/textContent|innerHTML/.test(o)||"function"==typeof t[o]?a[o]=t[o]:a.setAttribute(o,t[o]);return r.forEach(e=>a.appendChild(e)),a},ew={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},eS=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return -1===r&&(r=1),ew[r](e,t)},ek=e=>{e.width=1,e.height=1;var t=e.getContext("2d");t&&t.clearRect(0,0,1,1)},eC=e=>"data"in e,eM=e=>ef()?RegExp(e).test(window.navigator.userAgent):void 0,eT=null,eP=()=>(null===eT&&(eT=eM(/Android/)),eT),eR=(e,t)=>{var r=eb("canvas",{width:e.width,height:e.height});return r.getContext("2d",t).drawImage(e,0,0),r},eE=(n=eo(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=yield ey(),[a,n]=r||t<5?[e.width,e.height]:[e.height,e.width],o=eb("canvas",{width:a,height:n}),l=o.getContext("2d",{willReadFrequently:!0});if(eC(e)&&!r&&t>1){var s=eb("canvas",{width:e.width,height:e.height});s.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),e=s}if(!r&&t>1&&l.transform.apply(l,eS(e.width,e.height,t)),eC(e)){if(l.putImageData(e,0,0),eP())return eR(o)}else l.drawImage(e,0,0);return e instanceof HTMLCanvasElement&&ek(e),o}),function(e){return n.apply(this,arguments)}),eA=(o=eo(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1===t?e:(yield ey())?e:ex((yield eE(e,t)))}),function(e){return o.apply(this,arguments)}),eI=e=>"object"==typeof e,eL=e=>e instanceof HTMLElement?e:eI(e)?eF(e):e,eF=e=>{var t;return Array.isArray(e)?(t=[],e.forEach((e,r)=>{t[r]=eL(e)})):(t={},Object.keys(e).forEach(r=>{var a=e[r];t[r]=eL(a)})),t},ez=e=>"string"==typeof e,eO=e=>"function"==typeof e,eB=(e,t)=>{var{width:r,height:a,canvasMemoryLimit:n,contextOptions:o}=t,l=r||e.naturalWidth,s=a||e.naturalHeight;l||s||(l=300,s=150);var c=l*s;if(n&&c>n){var d=Math.sqrt(n)/Math.sqrt(c);l=Math.floor(l*d),s=Math.floor(s*d)}var u=eb("canvas");return u.width=l,u.height=s,u.getContext("2d",o).drawImage(e,0,0,l,s),u},eD=(e,t)=>new Promise((r,a)=>{var n=()=>r(eB(e,t));e.complete&&e.width?n():(e.onload=n,e.onerror=()=>a(Error("Failed to load image")))}),e_=(l=eo(function*(e,t){var r=eb("img",{src:URL.createObjectURL(e)}),a=yield eD(r,t);return URL.revokeObjectURL(r.src),a}),function(e,t){return l.apply(this,arguments)}),eN=()=>"createImageBitmap"in window,eW=()=>"OffscreenCanvas"in window,ej=e=>/svg/.test(e.type),eV=()=>Math.random().toString(36).substring(2,9),eH=e=>new Blob(["(","function"==typeof e?e.toString():e,")()"],{type:"application/javascript"}),eU=e=>"function () {self.onmessage = function (message) {(".concat(e.toString(),").apply(null, message.data.content.concat([function (err, response) {\n    response = response || {};\n    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];\n    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);\n}]))}}"),eG=new Map,eX=(e,t,r)=>new Promise((a,n)=>{var o=e.toString(),l=eG.get(o);if(!l){var s=eU(e),c=URL.createObjectURL(eH(s)),d=new Map,u=new Worker(c);l={url:c,worker:u,messages:d,terminationTimeout:void 0,terminate:()=>{clearTimeout(l.terminationTimeout),l.worker.terminate(),URL.revokeObjectURL(c),eG.delete(o)}},u.onmessage=function(e){var{id:t,content:r,error:a}=e.data;if(clearTimeout(l.terminationTimeout),l.terminationTimeout=setTimeout(()=>{d.size>0||l.terminate()},500),d.has(t)){var n=d.get(t);d.delete(t),null!=a?n.reject(a):n.resolve(r)}},eG.set(o,l)}var h=eV();l.messages.set(h,{resolve:a,reject:n}),l.worker.postMessage({id:h,content:t},r)}),eZ=(s=eo(function*(e,t){var r,a,n=(r=eo(function*(){var r=yield e_(e,{canvasMemoryLimit:t,contextOptions:{willReadFrequently:!0}}),a=ex(r);return ek(r),a}),function(){return r.apply(this,arguments)});if(eP())return yield n();if(eN()&&!ej(e)&&eW())try{a=yield eX((e,t,r)=>{createImageBitmap(e).then(e=>{var a=e.width,n=e.height,o=a*n;if(t&&o>t){var l=Math.sqrt(t)/Math.sqrt(o);a=Math.floor(a*l),n=Math.floor(n*l)}var s=new OffscreenCanvas(a,n),c=s.getContext("2d",{willReadFrequently:!0});c.drawImage(e,0,0,a,n);var d=c.getImageData(0,0,s.width,s.height);r(null,d)}).catch(e=>{r(e)})},[e,t])}catch(e){}return a&&a.width?a:yield n()}),function(e,t){return s.apply(this,arguments)}),eY=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new Promise((a,n)=>{try{e.toBlob(e=>{if(!e)return n(Error("Failed to create blob"));a(e)},t,r)}catch(e){n(e)}})},eq=(c=eo(function*(e,t,r){var a=yield eE(e),n=yield eY(a,t,r);return ek(a),n}),function(e,t,r){return c.apply(this,arguments)}),eK=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,e.size];return t?new Blob([t,e.slice(...r)],{type:e.type}):e},eJ={matroska:"mkv"},eQ=e=>{var t=(e.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(t)){var[,r=""]=e.split("/x-");return eJ[r]}return t},e1=e=>e.substr(0,e.lastIndexOf("."))||e,e0=e=>e.split(".").pop(),e2=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/,e4=e=>e2.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":"svg"===e?"svg+xml":e):"",e5=e=>e&&e4(e0(e).toLowerCase()),e3=(e,t)=>{var r=e5(e);if(r===t)return e;var a=eQ(t)||r;return"".concat(e1(e),".").concat(a)},e6=(e,t,r)=>{var a=new Date().getTime(),n=e.type.length&&!/null|text/.test(e.type),o=n?e.type:r,l=e3(t,o);try{return new(eh("File"))([e],l,{lastModified:a,type:n?e.type:o})}catch(t){var s=n?e.slice():e.slice(0,e.size,o);return s.lastModified=a,s.name=l,s}},e8=(e,t)=>e/t,e7=e=>e,e9=Math.PI,te=Math.PI/2,tt=te/2,tr=e=>{var t=Math.abs(e)%Math.PI;return t>tt&&t<Math.PI-tt},ti={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:ta,Right:tn,Bottom:to,Left:tl,TopLeft:ts,TopRight:tc,BottomRight:td,BottomLeft:tu}=ti,th={[ta]:[.5,0],[tn]:[1,.5],[to]:[.5,1],[tl]:[0,.5],[ts]:[0,0],[tc]:[1,0],[td]:[1,1],[tu]:[0,1]},tp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return parseFloat(e.toFixed(t))},tv=(e,t,r)=>r+(e-r)*t,tg=e=>({x:e.x+.5*e.width,y:e.y+.5*e.height,rx:.5*e.width,ry:.5*e.height}),tm=()=>tf(0,0),tf=(e,t)=>({x:e,y:t}),t$=e=>tf(e.width,e.height),ty=e=>tf(e.x,e.y),tx=e=>tf(e.pageX,e.pageY),tb=e=>tf(e.offsetX,e.offsetY),tw=e=>tf(e.x,e.y),tS=(e,t,r)=>(e.x=t,e.y=r,e),tk=e=>(e.x=-e.x,e.y=-e.y,e),tC=e=>{var t=e.x;return e.x=-e.y,e.y=t,e},tM=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tm(),a=Math.cos(t),n=Math.sin(t),o=e.x-r.x,l=e.y-r.y;return e.x=r.x+a*o-n*l,e.y=r.y+n*o+a*l,e},tT=e=>Math.sqrt(e.x*e.x+e.y*e.y),tP=e=>{var t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?tm():(e.x/=t,e.y/=t,e)},tR=e=>Math.atan2(e.y,e.x),tE=(e,t)=>Math.atan2(t.y-e.y,t.x-e.x),tA=(e,t)=>e.x===t.x&&e.y===t.y,tI=(e,t)=>(e.x=t(e.x),e.y=t(e.y),e),tL=(e,t)=>e.x>=0&&e.y>=0&&e.x<=t.width&&e.y<=t.height,tF=(e,t)=>(e.x+=t.x,e.y+=t.y,e),tz=(e,t)=>(e.x-=t.x,e.y-=t.y,e),tO=(e,t)=>(e.x/=t,e.y/=t,e),tB=(e,t)=>(e.x*=t,e.y*=t,e),tD=(e,t)=>e.x*t.x+e.y*t.y,t_=(e,t)=>e.x*t.y-e.y*t.x,tN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tm(),r=e.x-t.x,a=e.y-t.y;return r*r+a*a},tW=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tm();return Math.sqrt(tN(e,t))},tj=(e,t,r)=>(e.x=tv(e.x,t,r.x),e.y=tv(e.y,t,r.y),e),tV=e=>{var t=0,r=0;return e.forEach(e=>{t+=e.x,r+=e.y}),tf(t/e.length,r/e.length)},tH=(e,t,r,a,n)=>(e.forEach(e=>{e.x=t?a-(e.x-a):e.x,e.y=r?n-(e.y-n):e.y}),e),tU=(e,t,r,a)=>{var n=Math.sin(t),o=Math.cos(t);return e.forEach(e=>{e.x-=r,e.y-=a;var t=e.x*o-e.y*n,l=e.x*n+e.y*o;e.x=r+t,e.y=a+l}),e},tG=(e,t)=>({width:e,height:t}),tX=e=>tG(e.width,e.height),tZ=e=>tG(e.width,e.height),tY=e=>tG(e.width,e.height),tq=e=>tG(e[0],e[1]),tK=e=>tG(e.naturalWidth,e.naturalHeight),tJ=e=>/img/i.test(e.nodeName)?tK(e):tZ(e),tQ=(e,t)=>tG(e,t),t1=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e7;return r(e.width)===r(t.width)&&r(e.height)===r(t.height)},t0=(e,t)=>(e.width*=t,e.height*=t,e),t2=e=>tf(.5*e.width,.5*e.height),t4=(e,t)=>{var r=Math.abs(t),a=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),o=a*e.width+n*e.height,l=n*e.width+a*e.height;return e.width=o,e.height=l,e},t5=(e,t)=>{var r=e.width,a=e.height;return tr(t)&&(e.width=a,e.height=r),e},t3=(e,t)=>e.width>=t.width&&e.height>=t.height,t6=(e,t)=>(e.width=t(e.width),e.height=t(e.height),e),t8=e=>Math.sqrt(e.width*e.width+e.height*e.height),t7=(e,t)=>tQ(Math.min(e.width,t.width),Math.min(e.height,t.height)),t9=(e,t)=>({start:e,end:t}),re=e=>t9(tw(e.start),tw(e.end)),rt=(e,t)=>{if(0===t)return e;var r=tB(tP(tf(e.start.x-e.end.x,e.start.y-e.end.y)),t);return e.start.x+=r.x,e.start.y+=r.y,e.end.x-=r.x,e.end.y-=r.y,e},rr=(e,t)=>{if(0===t)return e;var r=tB(tP(tf(e.start.x-e.end.x,e.start.y-e.end.y)),t);return e.end.x+=r.x,e.end.y+=r.y,e},ri=(e,t)=>{var{start:r,end:a}=e;if(0===t)return[tf(r.x,r.y),tf(r.x,r.y),tf(a.x,a.y),tf(a.x,a.y)];var n=Math.atan2(a.y-r.y,a.x-r.x),o=Math.sin(n)*t,l=Math.cos(n)*t;return[tf(o+r.x,-l+r.y),tf(-o+r.x,l+r.y),tf(-o+a.x,l+a.y),tf(o+a.x,-l+a.y)]},ra=[tf(-1,-1),tf(-1,1),tf(1,1),tf(1,-1)],rn=(e,t,r,a)=>({x:e,y:t,width:r,height:a}),ro=e=>rn(e.x,e.y,e.width,e.height),rl=()=>rn(0,0,0,0),rs=(e,t)=>rn(0,0,e,t),rc=e=>rn(0,0,e.width,e.height),rd=e=>rn(e[3],e[0],e[1]-e[3],e[2]-e[0]),ru=e=>rn(e.x||0,e.y||0,e.width||0,e.height||0),rh=e=>{var t=e[0].x,r=e[0].x,a=e[0].y,n=e[0].y;return e.forEach(e=>{t=Math.min(t,e.x),r=Math.max(r,e.x),a=Math.min(a,e.y),n=Math.max(n,e.y)}),rn(t,a,r-t,n-a)},rp=e=>rg(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),rv=(e,t)=>rn(e.x-.5*t.width,e.y-.5*t.height,t.width,t.height),rg=(e,t,r,a)=>rn(e,t,r,a),rm=e=>tf(e.x+.5*e.width,e.y+.5*e.height),rf=(e,t)=>(e.x+=t.x,e.y+=t.y,e),r$=(e,t,r)=>(r=r||rm(e),e.x=t*(e.x-r.x)+r.x,e.y=t*(e.y-r.y)+r.y,e.width=t*e.width,e.height=t*e.height,e),ry=(e,t,r,a)=>{var n=(a.x-e.x)/e.width,o=(a.y-e.y)/e.height,l=Math.max(t.width,e.width),s=Math.max(t.height,e.height);return l=Math.min(r.width,l),s=Math.min(r.height,s),e.x=a.x-n*l,e.y=a.y-o*s,e.width=l,e.height=s,e},rx=(e,t)=>{var[r,a]=th[t],n=r*e.width,o=a*e.height;return tf(e.x+n,e.y+o)},rb=(e,t)=>(e.x*=t,e.y*=t,e.width*=t,e.height*=t,e),rw=(e,t)=>(e.x/=t,e.y/=t,e.width/=t,e.height/=t,e),rS=(e,t)=>(e.x-=t.x,e.y-=t.y,e.width-=t.width,e.height-=t.height,e),rk=(e,t)=>(e.x+=t.x,e.y+=t.y,e.width+=t.width,e.height+=t.height,e),rC=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e7;return r(e.x)===r(t.x)&&r(e.y)===r(t.y)&&r(e.width)===r(t.width)&&r(e.height)===r(t.height)},rM=e=>e8(e.width,e.height),rT=(e,t,r,a,n)=>(e.x=t,e.y=r,e.width=a,e.height=n,e),rP=(e,t)=>(e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e),rR=(e,t,r)=>(r||(r=rm(e)),rB(e).map(e=>tM(e,t,r))),rE=(e,t)=>rn(.5*e.width-.5*t.width,.5*e.height-.5*t.height,t.width,t.height),rA=(e,t)=>!(t.x<e.x)&&!(t.y<e.y)&&!(t.x>e.x+e.width)&&!(t.y>e.y+e.height),rI=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tm();if(0===e.width||0===e.height)return rl();var a=rM(e);t||(t=a);var n=e.width,o=e.height;return t>a?n=o*t:o=n/t,rn(r.x+(e.width-n)*.5,r.y+(e.height-o)*.5,n,o)},rL=(e,t,r)=>{var[a,n,o,l]=rO(e),s=ea({},e);if(a<t.y&&(e.height=e.height-(t.y-a),e.y=t.y),n>t.x+t.width&&(e.width=t.x+t.width-e.x),o>t.y+t.height&&(e.height=t.y+t.height-e.y),l<t.x&&(e.width=e.width-(t.x-l),e.x=t.x),r){var c=Math.min(1,s.width/e.width,s.height/e.height);return rb(s,c)}return e},rF=(e,t)=>{var[r,a,n,o]=rO(e);return r<t.y&&(e.y=Math.max(t.y,e.y)),a>t.width&&(e.x=t.width-e.width),n>t.height&&(e.y=t.height-e.height),o<t.x&&(e.x=Math.max(t.x,e.x)),e},rz=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rM(e),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tm();if(0===e.width||0===e.height)return rl();var a=e.width,n=a/t;return n>e.height&&(a=(n=e.height)*t),rn(r.x+(e.width-a)*.5,r.y+(e.height-n)*.5,a,n)},rO=e=>[Math.min(e.y,e.y+e.height),Math.max(e.x,e.x+e.width),Math.max(e.y,e.y+e.height),Math.min(e.x,e.x+e.width)],rB=e=>[tf(e.x,e.y),tf(e.x+e.width,e.y),tf(e.x+e.width,e.y+e.height),tf(e.x,e.y+e.height)],rD=(e,t)=>{if(e)return e.x=t(e.x),e.y=t(e.y),e.width=t(e.width),e.height=t(e.height),e},r_=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rm(e);return rB(e).map((e,a)=>{var n=ra[a];return tf(tv(e.x,1+n.x*t.x,r.x),tv(e.y,1+n.y*t.y,r.y))})},rN=e=>(e.x=0,e.y=0,e),rW=e=>{var t,r,a,n=e[0];e=tA(n,e[e.length-1])?e:[...e,n];for(var o=n.x,l=n.y,s=0,c=0,d=0,u=0,h=e.length;c<h;c++)t=e[c],r=e[c+1>h-1?0:c+1],s+=a=(t.y-l)*(r.x-o)-(r.y-l)*(t.x-o),d+=(t.x+r.x-2*o)*a,u+=(t.y+r.y-2*l)*a;return tf(o+d/(a=3*s),l+u/a)},rj=(e,t)=>rV(e.start,e.end,t.start,t.end),rV=(e,t,r,a)=>{var n=(a.y-r.y)*(t.x-e.x)-(a.x-r.x)*(t.y-e.y);if(0!==n){var o=((a.x-r.x)*(e.y-r.y)-(a.y-r.y)*(e.x-r.x))/n,l=((t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x))/n;if(!(o<0)&&!(o>1)&&!(l<0)&&!(l>1))return tf(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y))}},rH=function(e,t){for(var{ignoreIdenticalLines:r=!1,breakOnIntersection:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t.length,o=[],l=0;l<n-1;l++)if(!(r&&(tA(e.start,t[l])||tA(e.start,t[l+1])||tA(e.end,t[l])||tA(e.end,t[l+1])))){var s=rV(e.start,e.end,t[l],t[l+1]);if(s){if(a)return[s];o.push(s)}}return o.length?o:void 0},rU=(e,t)=>{var r=0,a=0,n=!1,o=t.length;for(r=0,a=o-1;r<o;a=r++)t[r].y>e.y!=t[a].y>e.y&&e.x<(t[a].x-t[r].x)*(e.y-t[r].y)/(t[a].y-t[r].y)+t[r].x&&(n=!n);return n},rG=(e,t)=>!!(e.find(e=>rU(e,t))||t.find(t=>rU(t,e))),rX=e=>{for(var t=[],r=0;r<e.length;r++){var a=r+1;a===e.length&&(a=0),t.push(t9(tw(e[r]),tw(e[a])))}return t},rZ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return rX(e).map(e=>rt(e,t))},rY=function(e,t,r){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:12,s=[],c=0;c<l;c++)s.push(tf(e.x+t*Math.cos(c*(2*Math.PI)/l),e.y+r*Math.sin(c*(2*Math.PI)/l)));return(n||o)&&tH(s,n,o,e.x,e.y),a&&tU(s,a,e.x,e.y),s},rq=(e,t,r,a)=>{var n=tf(e.x-r.x,e.y-r.y),o=tf(a.x-r.x,a.y-r.y),l=tD(o,o),s=tD(n,o)/l;s=(s=s<0?0:s)>1?1:s;var c=tf(o.x*s+r.x-e.x,o.y*s+r.y-e.y);return tD(c,c)<=t*t},rK=(e,t,r)=>{for(var a=r.length,n=0;n<a-1;n++)if(rq(e,t,r[n],r[n+1]))return!0;return!1},rJ=(e,t,r)=>!!(rU(e,r)||rK(e,t,r))||rq(e,t,r[0],r[r.length-1]),rQ=(e,t,r,a,n,o)=>rJ(e,t,rY(tf(r.x,r.y),r.rx,r.ry,a,n,o,12)),r1=(e,t,r,a,n)=>rJ(e,t,rR(r,a,n||rm(r))),r0=(e,t)=>{var r=rc(e),a=rm(r);return rN(rh(rR(r,t,a)))},r2=(e,t)=>e instanceof HTMLElement&&(!t||RegExp("^".concat(t,"$"),"i").test(e.nodeName)),r4=e=>e instanceof File,r5=(d=eo(function*(e,t,r){return e6((yield eY(e,t,r)),"canvas")}),function(e,t,r){return d.apply(this,arguments)}),r3=e=>e.split("/").pop().split(/\?|\#/).shift(),r6=ef()&&Node.prototype.replaceChildren?(e,t)=>e.replaceChildren(t):(e,t)=>{for(;e.lastChild;)e.removeChild(e.lastChild);void 0!==t&&e.append(t)},r8=ef()&&eb("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"}),r7=e=>(r6(r8,e),r8.parentNode||document.body.append(r8),clearTimeout(H),H=setTimeout(()=>{r8.remove()},500),e),r9=null,ie=()=>(null===r9&&(r9=ef()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),r9),it=e=>new Promise((t,r)=>{var a=!1;!e.parentNode&&ie()&&(a=!0,e.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",r7(e));var n=()=>{var r=e.naturalWidth,n=e.naturalHeight;r&&n&&(a&&e.remove(),clearInterval(o),t({width:r,height:n}))};e.onerror=e=>{clearInterval(o),r(e)};var o=setInterval(n,1);n()}),ir=e=>new Promise((t,r)=>{var a=()=>{t({width:e.videoWidth,height:e.videoHeight})};if(e.readyState>=1)return a();e.onloadedmetadata=a,e.onerror=()=>r(e.error)}),ii=e=>/^image/.test(e.type),ia=e=>new Promise(t=>{var r=ez(e)?e:URL.createObjectURL(e),a=()=>{var e=new Image;e.src=r,t(e)};if(e instanceof Blob&&ii(e))return a();var n=document.createElement("video");n.preload="metadata",n.onloadedmetadata=()=>t(n),n.onerror=a,n.src=r}),io=e=>"VIDEO"===e.nodeName,il=(u=eo(function*(e){var t,r;t=e.src?e:yield ia(e);try{r=io(t)?yield ir(t):yield it(t)}finally{r4(e)&&URL.revokeObjectURL(t.src)}return r}),function(e){return u.apply(this,arguments)}),is=e=>new Promise((t,r)=>{if(e.complete)return t(e);e.onload=()=>t(e),e.onerror=()=>r(Error("Failed to load image"))}),ic=(h=eo(function*(e){var t=yield il(e),r=yield is(e),a=eb("canvas",t);return a.getContext("2d",{willReadFrequently:!0}).drawImage(r,0,0),e6((yield eY(a)),r3(r.src))}),function(e){return h.apply(this,arguments)}),id=e=>/^data:/.test(e),iu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return new(eh("ProgressEvent"))("progress",{loaded:100*e,total:100,lengthComputable:t})},ih=(p=eo(function*(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-uri",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ep;a(iu(0));var n=yield fetch(e);a(iu(.33));var o=yield n.blob();ii(o)||(t="image/".concat(e.includes(",/9j/")?"jpeg":"png")),a(iu(.66));var l=e6(o,r,t);return a(iu(1)),l}),function(e){return p.apply(this,arguments)}),ip=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;return e.getAllResponseHeaders().indexOf(t)>=0?r(e.getResponseHeader(t)):void 0},iv=e=>{if(!e)return null;var t=e.split(/filename=|filename\*=.+''/).splice(1).map(e=>e.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(e=>e.length);return t.length?decodeURI(t[t.length-1]):null};class ig extends Error{constructor(e,t,r){super(e),this.name="EditorError",this.code=t,this.metadata=r}}var im=(e,t)=>{var{headers:r={},credentials:a}=t||{};Object.entries(r).forEach(t=>{var[r,a]=t;return e.setRequestHeader(r,a)}),a&&(e.withCredentials="omit"!==a)},i$=(e,t,r)=>new Promise((a,n)=>{var o=()=>n(new ig("Error fetching image","URL_REQUEST",l)),l=new XMLHttpRequest;l.onprogress=t,l.onerror=o,l.onload=()=>{if(!l.response||l.status>=300||l.status<200)return o();var t=ip(l,"Content-Type"),r=ip(l,"Content-Disposition",iv)||r3(e);a(e6(l.response,r,t||e5(r)))};var{willRequest:s}=r;Promise.resolve(s&&s(e,{resourceType:"image"})).then(t=>{if(!1===t)return n("Image load rejected");l.open("GET",e),im(l,t),l.responseType="blob",l.send()}).catch(console.error)}),iy=(e,t,r)=>id(e)?ih(e,void 0,t):i$(e,t,r),ix=e=>e instanceof Blob&&!(e instanceof File),ib=e=>"close"in e,iw=(v=eo(function*(e,t,r){if(r4(e)||ix(e))return e;if(ez(e))return yield iy(e,t,r);if(r2(e,"canvas"))return yield r5(e);if(r2(e,"img"))return yield ic(e);if(eC(e)||ib(e))return yield r5((yield eE(e)));throw new ig("Invalid image source","invalid-image-source")}),function(e,t,r){return v.apply(this,arguments)}),iS=null,ik=()=>(null===iS&&(iS=ef()&&/^mac/i.test(navigator.platform)),iS),iC=null,iM=()=>(null===iC&&(iC=ef()&&(eM(/iPhone|iPad|iPod/)||ik()&&navigator.maxTouchPoints>=1)),iC),iT=(g=eo(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(yield ey())||iM()||t<5?e:tQ(e.height,e.width)}),function(e){return g.apply(this,arguments)}),iP=e=>/jpeg/.test(e.type),iR=e=>"object"==typeof e&&e.constructor==Object,iE=e=>iR(e)?JSON.stringify(e):e,iA=(e,t,r)=>new Promise((a,n)=>{var{token:o={},beforeSend:l=ep,onprogress:s=ep}=r;o.cancel=()=>c.abort();var c=new XMLHttpRequest;c.upload.onprogress=s,c.onload=()=>c.status>=200&&c.status<300?a(c):n(c),c.onerror=()=>n(c),c.ontimeout=()=>n(c),c.open("POST",encodeURI(e)),l(c),c.send(t instanceof FormData?t:t.reduce((e,t)=>(e.append(...t.map(iE)),e),new FormData))}),iI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return 0===t||(e.translate(r.x,r.y),e.rotate(t),e.translate(-r.x,-r.y)),e},iL=(e,t,r)=>(e.translate(t,r),e),iF=(e,t,r)=>(e.scale(t,r),e),iz=(m=eo(function*(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{flipX:a,flipY:n,rotation:o,crop:l}=r,s=tZ(e),c=a||n,d=!!o,u=l&&(l.x||l.y||l.width||l.height),h=u&&rC(l,rc(s)),p=u&&!h;if(!c&&!d&&!p)return e;var v=eb("canvas",{width:e.width,height:e.height});if(v.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),c){var g=eb("canvas",{width:v.width,height:v.height}).getContext("2d",{willReadFrequently:!0});iF(g,a?-1:1,n?-1:1),g.drawImage(v,a?-v.width:0,n?-v.height:0),g.restore(),ek(v),v=g.canvas}if(d){var m=t6(tY(rh(rR(ru(v),o))),Math.floor),f=eb("canvas",{width:l.width,height:l.height}).getContext("2d",{willReadFrequently:!0});iL(f,-l.x,-l.y),iI(f,o,t2(m)),f.drawImage(v,(m.width-v.width)*.5,(m.height-v.height)*.5),f.restore(),ek(v),v=f.canvas}else if(p)return t=v.getContext("2d",{willReadFrequently:!0}).getImageData(l.x,l.y,l.width,l.height),ek(v),t;return t=v.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,v.width,v.height),ek(v),t}),function(e){return m.apply(this,arguments)}),iO=(e,t)=>{for(var{imageData:r,width:a,height:n}=e,o=r.width,l=r.height,s=Math.round(a),c=Math.round(n),d=r.data,u=new Uint8ClampedArray(s*c*4),h=o/s,p=l/c,v=Math.ceil(.5*h),g=Math.ceil(.5*p),m=0;m<c;m++)for(var f=0;f<s;f++){for(var $=(f+m*s)*4,y=0,x=0,b=0,w=0,S=0,k=0,C=0,M=(m+.5)*p,T=Math.floor(m*p);T<(m+1)*p;T++)for(var P=Math.abs(M-(T+.5))/g,R=(f+.5)*h,E=P*P,A=Math.floor(f*h);A<(f+1)*h;A++){var I=Math.abs(R-(A+.5))/v,L=Math.sqrt(E+I*I);if(!(L<-1)&&!(L>1)&&!((y=2*L*L*L-3*L*L+1)<=0)){var F=d[(I=4*(A+T*o))+3];C+=y*F,b+=y,F<255&&(y=y*F/250),w+=y*d[I],S+=y*d[I+1],k+=y*d[I+2],x+=y}}u[$]=w/x,u[$+1]=S/x,u[$+2]=k/x,u[$+3]=C/b}t(null,{data:u,width:s,height:c})},iB=e=>{if(e instanceof ImageData)return e;try{t=new ImageData(e.width,e.height)}catch(r){var t;t=eb("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},iD=(f=eo(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,{width:a,height:n,fit:o,upscale:l}=t;if(!a&&!n)return e;var s=a,c=n;if(a?n||(c=a):s=n,"force"!==o){var d=s/e.width,u=c/e.height,h=1;if("cover"===o?h=Math.max(d,u):"contain"===o&&(h=Math.min(d,u)),h>1&&!1===l)return e;s=Math.round(e.width*h),c=Math.round(e.height*h)}return(s=Math.max(s,1),c=Math.max(c,1),e.width===s&&e.height===c)?e:r?r(e,s,c):iB(e=yield eX(iO,[{imageData:e,width:s,height:c}],[e.data.buffer]))}),function(e){return f.apply(this,arguments)}),i_=(e,t)=>{var{imageData:r,matrix:a}=e;if(!a)return t(null,r);for(var n=new Uint8ClampedArray(r.width*r.height*4),o=r.data,l=o.length,s=a[0],c=a[1],d=a[2],u=a[3],h=a[4],p=a[5],v=a[6],g=a[7],m=a[8],f=a[9],$=a[10],y=a[11],x=a[12],b=a[13],w=a[14],S=a[15],k=a[16],C=a[17],M=a[18],T=a[19],P=0,R=0,E=0,A=0,I=0,L=0,F=0,z=0,O=0,B=0,D=0,_=0;P<l;P+=4)R=o[P]/255,L=R*s+(E=o[P+1]/255)*c+(A=o[P+2]/255)*d+(I=o[P+3]/255)*u+h,F=R*p+E*v+A*g+I*m+f,z=R*$+E*y+A*x+I*b+w,B=Math.max(0,L*(O=R*S+E*k+A*C+I*M+T))+(1-O),D=Math.max(0,F*O)+(1-O),_=Math.max(0,z*O)+(1-O),n[P]=255*Math.max(0,Math.min(1,B)),n[P+1]=255*Math.max(0,Math.min(1,D)),n[P+2]=255*Math.max(0,Math.min(1,_)),n[P+3]=255*I;t(null,{data:n,width:r.width,height:r.height})},iN=(e,t)=>{var{imageData:r,matrix:a}=e;if(!a)return t(null,r);var n=a.reduce((e,t)=>e+t);n=n<=0?1:n;var o=r.width,l=r.height,s=r.data,c=0,d=0,u=0,h=Math.round(Math.sqrt(a.length)),p=Math.floor(h/2),v=0,g=0,m=0,f=0,$=0,y=0,x=0,b=0,w=0,S=0,k=new Uint8ClampedArray(o*l*4);for(u=0;u<l;u++)for(d=0;d<o;d++){for(y=0,v=0,g=0,m=0,f=0;y<h;y++)for($=0;$<h;$++)x=u+y-p,b=d+$-p,x<0&&(x=l-1),x>=l&&(x=0),b<0&&(b=o-1),b>=o&&(b=0),w=(x*o+b)*4,S=a[y*h+$],v+=s[w]*S,g+=s[w+1]*S,m+=s[w+2]*S,f+=s[w+3]*S;k[c]=v/n,k[c+1]=g/n,k[c+2]=m/n,k[c+3]=f/n,c+=4}t(null,{data:k,width:o,height:l})},iW=(e,t)=>{var r,a,n,o,l,s,c,d,u,h,p,{imageData:v,strength:g}=e;if(!g)return t(null,v);var m=new Uint8ClampedArray(v.width*v.height*4),f=v.width,$=v.height,y=v.data,x=(e,t)=>Math.sqrt((r=e-S)*r+(a=t-k)*a),b=0,w=0,S=.5*f,k=.5*$,C=x(0,0),M=(e,t,r,a)=>{s=t[e]/255,c=t[e+1]/255,d=t[e+2]/255,u=t[e+3]/255,p=(h=1-a)*u+a,r[e]=(h*u*s+a*n)/p*255,r[e+1]=(h*u*c+a*o)/p*255,r[e+2]=(h*u*d+a*l)/p*255,r[e+3]=255*p};for(g>0?(n=0,o=0,l=0):(g=Math.abs(g),n=1,o=1,l=1),w=0;w<$;w++)for(b=0;b<f;b++)M((b+w*f)*4,y,m,x(b,w)*g/C);t(null,{data:m,width:v.width,height:v.height})},ij=(e,t)=>{var r,a,n,{imageData:o,level:l,monochrome:s=!1}=e;if(!l)return t(null,o);for(var c=new Uint8ClampedArray(o.width*o.height*4),d=o.data,u=d.length,h=0,p=()=>(-1+2*Math.random())*255*l,v=s?()=>{var e=p();return[e,e,e]}:()=>[p(),p(),p()];h<u;h+=4)[r,a,n]=v(),c[h]=d[h]+r,c[h+1]=d[h+1]+a,c[h+2]=d[h+2]+n,c[h+3]=d[h+3];t(null,{data:c,width:o.width,height:o.height})},iV=(e,t)=>{var r,a,n,{imageData:o,level:l}=e;if(!l)return t(null,o);for(var s=new Uint8ClampedArray(o.width*o.height*4),c=o.data,d=c.length,u=0;u<d;u+=4)r=c[u]/255,a=c[u+1]/255,n=c[u+2]/255,s[u]=255*Math.pow(r,l),s[u+1]=255*Math.pow(a,l),s[u+2]=255*Math.pow(n,l),s[u+3]=c[u+3];t(null,{data:s,width:o.width,height:o.height})},iH=e=>{for(var t,r=e.length,a=r>=20?6:r>=16?5:3,n=0;n<r;n++)if(1===(t=e[n])&&n%a!=0||0!==t&&1!==t)return!1;return!0},iU=($=eo(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{colorMatrix:r,convolutionMatrix:a,gamma:n,noise:o,vignette:l}=t,s=[];if(a&&s.push([iN,{matrix:a.clarity}]),n>0&&s.push([iV,{level:1/n}]),r&&!iH(r)&&s.push([i_,{matrix:r}]),(o>0||o<0)&&s.push([ij,{level:o}]),(l>0||l<0)&&s.push([iW,{strength:l}]),!s.length)return e;var c=(e,t)=>"(err, imageData) => {\n            (".concat(e[t][0].toString(),")(Object.assign({ imageData: imageData }, filterInstructions[").concat(t,"]), \n                ").concat(e[t+1]?c(e,t+1):"done",")\n        }"),d="function (options, done) {\n        const filterInstructions = options.filterInstructions;\n        const imageData = options.imageData;\n        (".concat(c(s,0),")(null, imageData)\n    }");return iB(e=yield eX(d,[{imageData:e,filterInstructions:s.map(e=>e[1])}],[e.data.buffer]))}),function(e){return $.apply(this,arguments)}),iG=e=>"number"==typeof e,iX=e=>ez(e)&&null!==e.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g),iZ=(e,t)=>e.hasOwnProperty(t),iY=e=>Array.isArray(e),iq=()=>iM()||ik(),iK=()=>/^win/i.test(navigator.platform),iJ=64,iQ=102,i1=112,i0=!1,i2=(e,t)=>(!i0&&ef()&&(iK()&&(iQ=103),iq()&&(iJ=63.5,iQ=110,i1=123),i0=!0),"<svg".concat(t?' aria-label="'.concat(t,'"'):"",' width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="').concat(iJ,'" y="').concat(iQ,'" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="').concat(i1,'px">').concat(e,"</text></svg>")),i4=e=>"data:image/svg+xml,".concat(e.replace("<","%3C").replace(">","%3E")),i5=e=>e instanceof Blob,i3=(e,t)=>"".concat(e/t*100,"%"),i6=e=>"rgba(".concat(Math.round(255*e[0]),", ").concat(Math.round(255*e[1]),", ").concat(Math.round(255*e[2]),", ").concat(iG(e[3])?e[3]:1,")"),i8=e=>Object.values(e).join("_"),i7=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(t=>{setTimeout(t,e)})},i9=e=>!new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data.buffer).some(e=>0!==e),ae=(y=eo(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=eb("canvas",{width:80,height:80}).getContext("2d");return yield i7(t),r.drawImage(e,0,0,80,80),!i9(r)||!(t<=256)||(yield ae(e,t+16))}),function(e){return y.apply(this,arguments)}),at=new Map,ar=function(e){var{safariCacheKey:t="*"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((r,a)=>{var n=new Image;n.onerror=()=>a(Error("Failed to load SVG")),n.onload=()=>{if(!ie()||!e.includes("@font-face")||at.has(t))return r(n);ae(n).then(()=>{at.set(t,!0),r(n)})},n.src="data:image/svg+xml,"+e})},ai=e=>new Promise((t,r)=>{var a=new FileReader;a.onerror=()=>r(a.error),a.onload=()=>t(a.result),a.readAsDataURL(e)}),aa=()=>{var e=[];return{sub:(t,r)=>(e.push({event:t,callback:r}),()=>e=e.filter(e=>e.event!==t||e.callback!==r)),pub:(t,r)=>{e.filter(e=>e.event===t).forEach(e=>e.callback(r))}}},an=null,ao=()=>(null===an&&(an=eM(/Firefox/)),an),al=function(){var{fontSize:e=16,lineHeight:t=20}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return .5*Math.max(0,e-t)},as=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split("\n").length},ac=function(e){var{color:t=[0,0,0],fontSize:r=16,fontFamily:a="sans-serif",fontVariant:n="normal",fontWeight:o="normal",fontStyle:l="normal",textAlign:s="left",letterSpacing:c="normal",lineHeight:d=20}=e,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"font-size:".concat(r*u,"px;font-style:").concat(l,";font-weight:").concat(o,";font-family:").concat(a,";font-variant:").concat(n,";line-height:").concat(d*u,"px;text-align:").concat(s,";letter-spacing:").concat(iG(c)?c+"px":"normal",";color:").concat(i6(t),";")},ad=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{width:a,height:n,disableNewline:o}=t,l=!a,s=!1===o?as(e):void 0,c=l?"auto":"".concat(a*r,"px"),d=l?"normal":"break-word",u=l&&!s?"nowrap":"pre-line",h=al(t)*r;return"max-width:none;min-width:auto;width:".concat(c,";height:").concat(n?"".concat(n*r,"px"):"auto",";margin-top:0;margin-bottom:0;padding-top:").concat(h,"px;word-break:").concat(d,";word-wrap:normal;white-space:").concat(u,";")},au=new Map,ah=e=>{var t=[];for(var r of Array.from(e.childNodes))r.nodeType===Node.TEXT_NODE?t.push(ag(r)):t.push(...ah(r));return t},ap="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",av=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,{width:r=0,height:a="auto",fontSize:n,fontFamily:o,lineHeight:l,fontWeight:s,fontStyle:c,fontVariant:d,letterSpacing:u}=t,h=i8({text:e,fontFamily:o,fontWeight:s,fontStyle:c,fontVariant:d,fontSize:n,lineHeight:l,letterSpacing:u,width:r,height:a}),p=au.get(h);if(p)return p;var v=1;n>1e3&&ao()&&(v=n/1e3,n=1e3,l*=v);var g=r7(eb("pre",{contenteditable:"true",spellcheck:"false",style:"".concat(ap).concat(ac({fontFamily:o,fontWeight:s,fontStyle:c,fontVariant:d,fontSize:n,letterSpacing:u,lineHeight:l}),";").concat(ad(e,t),'"'),innerHTML:e})),m=g.getBoundingClientRect();return p={signature:ah(g).flat().map(e=>e.text).join("_;_"),textSize:t6(tZ(m),e=>Math.ceil(e*v))},au.set(h,p),g.remove(),p},ag=e=>{var t=e.nodeValue;if(!t)return[];var r=t.length,a=document.createRange();a.selectNodeContents(e);for(var n=[],o=0;o<r;o++){a.setStart(e,0),a.setEnd(e,o+1);var l=a.getClientRects().length-1,s=t.charAt(o);n[l]?n[l]+=s:n.push(s)}var c=a.getClientRects();return n.map((e,t)=>({rect:c[t],text:e}))},am=new Map,af=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,{width:r=0,height:a=0}=t;if(r&&a)return tQ(r,a);var{fontSize:n=16,fontFamily:o,lineHeight:l=20,fontWeight:s,fontStyle:c,fontVariant:d,letterSpacing:u}=t,h=i8({text:e,fontFamily:o,fontWeight:s,fontStyle:c,fontVariant:d,fontSize:n,letterSpacing:u,lineHeight:l,width:r}),p=am.get(h);if(p)return p;var v=1;return n>1e3&&ao()&&(v=n/1e3,n=1e3,l/=v),p=tZ(r7(eb("pre",{contenteditable:"true",spellcheck:"false",style:"".concat(ap).concat(ac(ea(ea({},t),{},{fontSize:n,lineHeight:l})),";").concat(ad(e,t),'"'),innerHTML:e})).getBoundingClientRect()),p.height+=Math.max(0,n-l),p=t6(p,e=>e*v),r&&(p.width=r),am.set(h,p),p},a$=e=>e.pathname.split("/").slice(0,-1).join("/"),ay=(e,t)=>{var r,a,{sub:n,pub:o}=aa();return Promise.resolve(t&&t(e,{resourceType:"stylesheet"})).then(t=>{if(!1===t)return o("error",a="requestPrevented");var{headers:n,credentials:l}=t||{};fetch(e,{headers:n,credentials:l}).then(e=>e.text()).then(e=>{o("load",r=e)}).catch(e=>{o("error",a=e)})}),{sub:(e,t)=>"load"===e&&r?t(r):"error"===e&&a?t(a):void n(e,t)}},ax=new Map,ab=(e,t)=>new Promise((r,a)=>{var n=ax.get(e);void 0===n&&(n=ay(e,t),ax.set(e,n)),n.sub("load",r),n.sub("error",a)}),aw=(x=eo(function*(e,t){try{r=yield ab(e,t)}catch(e){return[]}var r,a=eb("style",{innerHTML:r,id:eV()});document.head.append(a);var n=Array.from(document.styleSheets).find(e=>e.ownerNode.id===a.id);return a.remove(),Array.from(n.cssRules)}),function(e,t){return x.apply(this,arguments)}),aS=new Map,ak=e=>e.filter(e=>e instanceof CSSFontFaceRule),aC=e=>e.filter(e=>e instanceof CSSImportRule),aM=(b=eo(function*(e,t){if(aS.has(e.href))return aS.get(e.href);try{for(var r of(a=Array.from(e.cssRules),aC(a))){var a,n=r.href;if(aS.has(n)){var o=aS.get(n);a=[...a,...o];continue}var l=yield aw(n,t);aS.set(n,l),a=[...a,...l]}}catch(r){var s=e.href;a=yield aw(s,t),aS.set(s,a)}return ak(a)}),function(e,t){return b.apply(this,arguments)}),aT=(e,t)=>e.style.getPropertyValue(t),aP=(e,t)=>!!e.style&&aT(e,"font-family").replace(/^"|"$/g,"")==t,aR=(e,t)=>{var r=[];for(var a of e)aP(a,t)&&r.push(a);return r},aE=(w=eo(function*(e){var t=Array.from(document.styleSheets).map(t=>aM(t,e)),r=yield Promise.all(t),a=[];return r.forEach(e=>a.push(...e)),a}),function(e){return w.apply(this,arguments)}),aA=(S=eo(function*(e,t){var r=aR((yield aE(t)),e);return r.length?r.map(e=>{var t=e.parentStyleSheet.href&&new URL(e.parentStyleSheet.href),r=t?t.origin+a$(t)+"/":"",a=e.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],n=Array.from(e.style).filter(e=>"src"!=e).reduce((t,r)=>t+=r+":"+aT(e,r)+";","");return[/^http/.test(a)?a:r+a,n]}):[]}),function(e,t){return S.apply(this,arguments)}),aI=new Map,aL=new Map,aF=e=>!e||/woff2/.test(e)?"woff2":/woff/.test(e)?"woff":/ttf|truetype/.test(e)?"truetype":/otf|opentype/.test(e)?"opentype":/svg/.test(e)?"svg":"woff2",az=(k=eo(function*(e,t){if(!aI.get(e)){var r=aL.get(e);if(!r){var a=yield aA(e,t);if(!a.length){aI.set(e,!0);return}var n=[];for(var[o,l]of a){var s=yield fetch(o).then(e=>e.blob()),c=aF(s.type),d=yield ai(s);n.push("@font-face { src:url(".concat(d,") format('").concat(c,"');").concat(l,";font-display:block; }"))}r=n.join(""),aL.set(e,r)}return r}}),function(e,t){return k.apply(this,arguments)}),aO=(C=eo(function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(e.length){var{color:r,imageWidth:a=300,imageHeight:n=150,paddingTop:o=0,paddingRight:l=32,paddingBottom:s=0,paddingLeft:c=32,fontFamily:d,fontSize:u,pixelRatio:h=1,willRequest:p,outline:v,blur:g}=t,m=1,f="";u>1e3&&ao()&&(m=u/1e3,f="transform-origin:0 0;transform:scale(".concat(m,")"));var $=h/m,y=(a+c+l)*h,x=(n+s+o)*h,b=yield az(d,p),w=e.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g,"\xa0").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),S=o*$,k=l*$,C=s*$,M=c*$,T="top:".concat(S,"px;right:").concat(k,"px;bottom:").concat(C,"px;left:").concat(M,"px"),P=r,R="",E="";if(v||g){var A=i6(r);v&&(P=[0,0,0,0],R="-webkit-text-stroke: ".concat(2*v*$,"px ").concat(A)),g&&(ie()?E="filter:blur(".concat(g*$*.4,"px)"):(P=[0,0,0,0],E="text-shadow: 0 0 ".concat(g*$,"px ").concat(A)))}var I=ac(ea(ea({},t),{},{color:P,fontSize:u}),$),L=ad(e,t,$);return ar('<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(y,'" height="').concat(x,'" viewBox="0 0 ').concat(y," ").concat(x,'"><foreignObject x="0" y="0" width="').concat(y,'" height="').concat(x,'"><div xmlns="http://www.w3.org/1999/xhtml">').concat(b?"<style>".concat(b,"</style>"):"",'<pre contenteditable="true" spellcheck="false" style="position:absolute;').concat(T,";").concat(I,";").concat(L,";").concat(f,";").concat(R,";").concat(E,'">').concat(w,"</pre></div></foreignObject></svg>"),{safariCacheKey:d})}}),function(){return C.apply(this,arguments)}),aB=(e,t)=>JSON.stringify(e)===JSON.stringify(t),aD=e=>eF(ea({},e)),a_=function(e){var t,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rM(e),o=a.width||a.rx,l=a.height||a.ry;if(o&&l)return tX(a);if(o||l){var s=Math.min(t=parseFloat(o||Number.MAX_SAFE_INTEGER),r=parseFloat(l||Number.MAX_SAFE_INTEGER));ez(o)||ez(l)?(t="".concat(s,"%"),r="".concat(s*n,"%")):(t=s,r=s)}else t="".concat(10,"%"),r="".concat(10*n,"%");return{[(a.width?"width":a.rx?"rx":void 0)||"width"]:t,[(a.width?"height":a.rx?"ry":void 0)||"height"]:r}},aN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ea(ea({width:void 0,height:void 0},t),{},{aspectRatio:1,backgroundImage:i4(i2(e))})},aW=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ea(ea(ea({backgroundColor:[0,0,0,0]},aY(t)?{}:{width:void 0,height:void 0,aspectRatio:void 0}),t),{},{backgroundImage:ez(e)?e:i5(e)?URL.createObjectURL(e):e})},aj=(e,t)=>{var r;if(ez(e)||i5(e)){var a=ea(ea({},a_(t)),{},{backgroundSize:"contain"});r=iX(e)?aN(e,a):aW(e,a)}else if(e.src){var n=a_(t,e.shape||e),o=ea(ea({},e.shape),n);if(e.width&&e.height&&!iZ(o,"aspectRatio")){var l=nV(n,"width",t),s=nV(n,"height",t);o.aspectRatio=e8(l,s)}o.backgroundSize||e.shape||e.width&&e.height||(o.backgroundSize="contain"),r=iX(e.src)?aN(e.src,o):aW(e.src,o)}else e.shape&&(r=aD(e.shape));return iZ(r,"backgroundImage")&&(iZ(r,"backgroundColor")||(r.backgroundColor=[0,0,0,0]),iZ(r,"disableStyle")||(r.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),t?nN(r,t):r},aV=e=>tf(e.x1,e.y1),aH=e=>tf(e.x2,e.y2),aU=e=>iZ(e,"text"),aG=e=>aU(e)&&!(a7(e)||iZ(e,"width")),aX=e=>aU(e)&&(a7(e)||iZ(e,"width")),aZ=e=>!aU(e)&&a9(e),aY=e=>iZ(e,"rx"),aq=e=>iZ(e,"x1"),aK=e=>iZ(e,"points"),aJ=e=>aU(e)&&!e.text.length,aQ=e=>aU(e)&&e.isEditing,a1=e=>!iZ(e,"opacity")||e.opacity>0,a0=e=>e.isSelected,a2=e=>e.isEditing,a4=e=>e._isDraft,a5=e=>iZ(e,"width")&&iZ(e,"height"),a3=e=>iG(e.strokeWidth)&&e.strokeWidth>0,a6=e=>{var t=iZ(e,"right"),r=iZ(e,"bottom");return t||r},a8=e=>iZ(e,"backgroundImage")||iZ(e,"text"),a7=e=>(iZ(e,"x")||iZ(e,"left"))&&iZ(e,"right")||(iZ(e,"y")||iZ(e,"top"))&&iZ(e,"bottom"),a9=e=>a5(e)||a7(e),ne=(e,t)=>{var r=e[t];return!!r&&(3===r.length||r[3]>0)},nt=e=>e.strokeWidth&&ne(e,"strokeColor"),nr=e=>(e.isSelected=!0,e),ni=e=>(e._isDraft=!0,e),na=e=>(e._isDraft=!1,e),nn=(e,t)=>!0!==e.disableStyle&&(!iY(e.disableStyle)||!t||!e.disableStyle.includes(t)),no=e=>!0!==e.disableSelect,nl=e=>!0!==e.disableRemove,ns=e=>!0!==e.disableDuplicate&&nv(e),nc=e=>!0!==e.disableReorder,nd=e=>!(e.disableFlip||a4(e)||a6(e))&&a8(e),nu=(e,t)=>!!aU(e)&&!0!==e.disableInput&&(eO(e.disableInput)?e.disableInput(null!=t?t:e.text):t||!0),nh=(e,t)=>!0!==e.disableTextLayout&&(!iY(e.disableTextLayout)||!t||!e.disableTextLayout.includes(t)),np=e=>!0!==e.disableManipulate&&!a4(e)&&!a6(e),nv=e=>np(e)&&!0!==e.disableMove,ng=e=>np(e)&&nv(e)&&!0!==e.disableResize&&(a5(e)||aX(e)||aY(e)||aq(e)||aK(e)&&iZ(e,"pathClose")),nm=e=>np(e)&&!0!==e.disableRotate&&(a5(e)||iZ(e,"text")||aY(e)),nf=e=>(delete e.left,delete e.right,delete e.top,delete e.bottom,e),n$=e=>(delete e.rotation,e),ny=e=>(e.strokeWidth=e.strokeWidth||1,e.strokeColor=e.strokeColor||[0,0,0],e),nx=e=>(e.backgroundColor=e.backgroundColor?e.backgroundColor:e.strokeWidth||e.backgroundImage?void 0:[0,0,0],e),nb=e=>{var t=e.text;t=(t=t.replace(/&(#[0-9]+|[a-z]+);/gi,(e,t)=>"___".concat(t,"___"))).replace(/&/,"&amp;"),e.text=t.replace(/___(#[0-9]+|[a-z]+)___/gi,(e,t)=>"&".concat(t,";"))},nw=e=>{nb(e);var t=e.text;t=(t=t.replace(/</g,"&gt;")).replace(/>/g,"&lt;"),e.text=t},nS=e=>{if(e.fontSize=e.fontSize||"4%",e.fontFamily=e.fontFamily||"sans-serif",e.fontWeight=e.fontWeight||"normal",e.fontStyle=e.fontStyle||"normal",e.fontVariant=e.fontVariant||"normal",e.lineHeight=e.lineHeight||"120%",e.color=e.color||[0,0,0],e.format="html"===e.format?"html":"text",e.textShadow){var[t,r,a,n]=e.textShadow;e.textShadowX=t,e.textShadowY=r,e.textShadowBlur=a,e.textShadowColor=n,delete e.textShadow}if(e.textOutline){var[o,l]=e.textOutline;e.textOutlineWidth=o,e.textOutlineColor=l,delete e.textOutline}return"html"===e.format?nb(e):nw(e),aG(e)?nk(e):nC(e)},nk=e=>(!1!==e.disableNewline&&(delete e.textAlign,e.text=e.text.replace(/\n/g," ")),nf(e)),nC=e=>(e.textAlign=e.textAlign||"left",e),nM=e=>(e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],nx(e)),nT=e=>(e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],nx(e)),nP=e=>(ny(e),n$(e),iZ(e,"pathClose")||(e.disableResize=!0,iZ(e,"disableMove")||(e.disableMove=!0)),nf(e)),nR=e=>(ny(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,n$(e),nf(e)),nE=e=>{ez(e.id)||(e.id=eV()),iZ(e,"rotation")||(e.rotation=0),iZ(e,"opacity")||(e.opacity=1),iZ(e,"disableErase")||(e.disableErase=!0)},nA=e=>(nE(e),aU(e)?nS(e):aZ(e)?nM(e):aK(e)?nP(e):aq(e)?nR(e):aY(e)&&nT(e),e),nI=e=>aU(e)?"text":aZ(e)?"rectangle":aK(e)?"path":aq(e)?"line":aY(e)?"ellipse":void 0,nL=(e,t)=>parseFloat(e)/100*t,nF=RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),nz=RegExp(/^y|top|bottom|^height|ry/,"i"),nO=(e,t,r)=>{var{width:a,height:n}=r;if(Array.isArray(t))return t.map(t=>(eI(t)&&n_(t,{width:a,height:n}),ez(t)&&(t=nO(e,t,{width:a,height:n})),t));if("string"!=typeof t||!t.endsWith("%"))return t;var o=parseFloat(t)/100;return nF.test(e)?tp(a*o,6):nz.test(e)?tp(n*o,6):t},nB=(e,t)=>Math.round(t*(parseFloat(e)/100)),nD=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],n_=(e,t)=>{Object.entries(e).map(r=>{var[a,n]=r;e[a]=nO(a,n,t)}),e.text&&nD.filter(t=>ez(e[t])).forEach(t=>{e[t]=nB(e[t],e.fontSize)})},nN=(e,t)=>(n_(e,t),nY(e,t),e),nW=(e,t)=>{var r;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(e)?r=t.width:/^y|height|ry/.test(e)&&(r=t.height),r},nj=(e,t,r,a)=>{if(!ez(e[t]))return e[t]=r,e;var n=nW(t,a);return e[t]=void 0===n?r:i3(r,n),e},nV=(e,t,r)=>Array.isArray(e[t])?e[t].map(e=>Object.entries(e).reduce((e,t)=>{var[a,n]=t;return e[a]=ez(n)?nL(n,nW(a,r)):n,e},{})):ez(e[t])?nL(e[t],nW(t,r)):e[t],nH=(e,t,r)=>t.reduce((t,a)=>{var n=nV(e,a,r);return t[a]=n,t},{}),nU=(e,t,r)=>(Object.keys(t).forEach(a=>nj(e,a,t[a],r)),e),nG=e=>{var t=rl(),r=e.strokeWidth||0;if(aZ(e))t.x=e.x-.5*r,t.y=e.y-.5*r,t.width=e.width+r,t.height=e.height+r;else if(aq(e)){var{x1:a,y1:n,x2:o,y2:l}=e,s=Math.abs(Math.min(a,o)),c=Math.abs(Math.max(a,o));t.x=s+.5*r,t.y=c+.5*r,t.width=c-s+r,t.height=Math.abs(Math.min(n,l))-Math.abs(Math.min(n,l))+r}else aY(e)&&(t.x=e.x-e.rx+.5*r,t.y=e.y-e.ry+.5*r,t.width=2*e.rx+r,t.height=2*e.ry+r);return t&&iZ(e,"rotation")&&rR(t,e.rotation),rO(t)},nX=(e,t)=>{var r=e.filter(e=>e.x<0||e.y<0||e.x1<0||e.y1<0).reduce((e,t)=>{var[r,a,n,o]=nG(t);return e.top=Math.min(r,e.top),e.left=Math.min(o,e.left),e.bottom=Math.max(n,e.bottom),e.right=Math.max(a,e.right),e},{top:0,right:0,bottom:0,left:0});return r.right>0&&(r.right-=t.width),r.bottom>0&&(r.bottom-=t.height),r},nZ=(e,t,r)=>{var a=aD(e);nN(a,t);var n=r(a);return Array.isArray(n)?n:[n]},nY=(e,t)=>{if(iZ(e,"left")&&(e.x=e.left),iZ(e,"right")&&!ez(e.right)){var r=t.width-e.right;iZ(e,"left")?(e.x=e.left,e.width=Math.max(0,r-e.left)):iZ(e,"width")&&(e.x=r-e.width)}if(iZ(e,"top")&&(e.y=e.top),iZ(e,"bottom")&&!ez(e.bottom)){var a=t.height-e.bottom;iZ(e,"top")?(e.y=e.top,e.height=Math.max(0,a-e.top)):iZ(e,"height")&&(e.y=a-e.height)}return e},nq=(e,t)=>(aK(e)&&e.points.filter(e=>iG(e.x)).forEach(e=>{e.x*=t,e.y*=t}),aq(e)&&iG(e.x1)&&(e.x1*=t,e.y1*=t,e.x2*=t,e.y2*=t),iG(e.x)&&iG(e.y)&&(e.x*=t,e.y*=t),iG(e.width)&&iG(e.height)&&(e.width*=t,e.height*=t),iG(e.rx)&&iG(e.ry)&&(e.rx*=t,e.ry*=t),a3(e)&&(e.strokeWidth*=t),aU(e)&&(e._scale=t,iG(e.fontSize)&&(e.fontSize*=t),iG(e.lineHeight)&&(e.lineHeight*=t),iG(e.width)&&!iG(e.height)&&(e.width*=t)),iZ(e,"cornerRadius")&&iG(e.cornerRadius)&&(e.cornerRadius*=t),e),nK=e=>{if(aZ(e))return tf(e.x+.5*e.width,e.y+.5*e.height);if(aY(e))return tf(e.x,e.y);if(e.text){if(aX(e)){var t=e.height||af(e.text,e).height;return tf(e.x+.5*e.width,e.y+.5*t)}var r=af(e.text,e);return tf(e.x+.5*r.width,e.y+.5*r.height)}return aK(e)?tV(e.points):aq(e)?tV([aV(e),aH(e)]):void 0},nJ=(e,t,r,a,n,o)=>(a<2*o&&(o=a/2),n<2*o&&(o=n/2),e.beginPath(),e.moveTo(t+o,r),e.arcTo(t+a,r,t+a,r+n,o),e.arcTo(t+a,r+n,t,r+n,o),e.arcTo(t,r+n,t,r,o),e.arcTo(t,r,t+a,r,o),e.closePath(),e),nQ=e=>/canvas/i.test(e.nodeName),n1=e=>new URL(e,location.href).origin!==location.origin,n0=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new Promise((r,a)=>{var n=e,o=!1,l=()=>{!o&&(o=!0,eO(t)&&Promise.resolve().then(()=>t(tQ(n.naturalWidth,n.naturalHeight))))};if(n.src||(n=new Image,ez(e)&&n1(e)&&(n.crossOrigin="anonymous"),n.src=ez(e)?e:URL.createObjectURL(e)),n.complete)return l(),r(n);eO(t)&&it(n).then(l).catch(a),n.onload=()=>{l(),r(n)},n.onerror=()=>a(Error("Failed to load image"))})},n2=new Map([]),n4=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((r,a)=>{var{onMetadata:n=ep,onLoad:o=r,onError:l=a,onComplete:s=ep}=t,c=n2.get(e);if(c||(c={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:aa()},n2.set(e,c)),c.bus.sub("meta",n),c.bus.sub("load",o),c.bus.sub("error",l),c.bus.sub("complete",s),nQ(e)){var d=e.cloneNode();c.complete=!0,c.image=d,c.size=tJ(e)}if(c.complete){c.bus.pub("meta",{size:c.size}),c.error?c.bus.pub("error",c.error):c.bus.pub("load",c.image),c.bus.pub("complete"),c.bus=aa();return}c.loading||(c.loading=!0,n0(e,e=>{c.size=e,c.bus.pub("meta",{size:e})}).then(e=>{c.image=e,c.bus.pub("load",e)}).catch(e=>{c.error=e,c.bus.pub("error",e)}).finally(()=>{c.complete=!0,c.loading=!1,c.bus.pub("complete"),c.bus=aa()}))})},n5=(e,t,r,a)=>e.drawImage(t,r.x,r.x,r.width,r.height,a.x,a.y,a.width,a.height),n3=(M=eo(function*(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n5,o=arguments.length>5?arguments[5]:void 0;e.save(),e.clip(),yield n(e,t,r,a,o),e.restore()}),function(e,t,r,a){return M.apply(this,arguments)}),n6=(e,t,r,a,n)=>{var o=ro(e);if(a){var l=rD(rh(a),tp);return l.x*=r.width,l.width*=r.width,l.y*=r.height,l.height*=r.height,{srcRect:l,destRect:o}}var s=rg(0,0,r.width,r.height);if("contain"===t){var c=rz(e,rM(s));o.width=c.width,o.height=c.height,n?(o.x+=n.x,o.y+=n.y):(o.x+=c.x,o.y+=c.y)}else if("cover"===t){var d=rI(o,s.width/s.height);o.width=d.width,o.height=d.height,n?(o.x+=n.x,o.y+=n.y):(o.x+=d.x,o.y+=d.y)}else t?(o.width=t.width,o.height=t.height,n&&(o.x+=n.x,o.y+=n.y)):n&&(o.width=r.width,o.height=r.height,o.x+=n.x,o.y+=n.y);return{srcRect:s,destRect:o}},n8=(e,t)=>(t.cornerRadius>0?nJ(e,t.x,t.y,t.width,t.height,t.cornerRadius):e.rect(t.x,t.y,t.width,t.height),e),n7=(e,t)=>(t.backgroundColor&&e.fill(),e),n9=(e,t)=>(t.strokeWidth&&e.stroke(),e),oe=(T=eo(function*(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{drawImage:n}=a;if(e.lineWidth=t.strokeWidth?t.strokeWidth:1,e.strokeStyle=t.strokeColor?i6(t.strokeColor):"none",e.fillStyle=t.backgroundColor?i6(t.backgroundColor):"none",e.globalAlpha=t.opacity,t.backgroundImage){if(r=nQ(t.backgroundImage)?t.backgroundImage:yield n4(t.backgroundImage),n8(e,t),n7(e,t),"repeat"===t.backgroundRepeat){var o=t.backgroundPosition||{x:0,y:0},{srcRect:l,destRect:s}=n6(t,t.backgroundSize||tJ(r),tJ(r),t.backgroundCorners,{x:0,y:0}),c=document.createElement("canvas");c.width=s.width,c.height=s.height;var d=c.getContext("2d",{willReadFrequently:!1,desynchronized:!0});yield n(d,r,l,ea(ea({},s),{},{x:0,y:0}));var u=e.createPattern(c,"repeat");e.fillStyle=u,e.save(),e.beginPath(),e.rect(t.x+o.x,t.y+o.y,t.width-o.x,t.height-o.y),e.clip(),e.translate(s.x+o.x,s.y+o.y),e.fill(),ek(c),e.restore()}else{var{srcRect:h,destRect:p}=n6(t,t.backgroundSize,tJ(r),t.backgroundCorners,t.backgroundPosition);yield n3(e,r,h,p,n,{feather:t.feather})}return e.beginPath(),n8(e,t),n9(e,t),[]}return n8(e,t),n7(e,t),n9(e,t),[]}),function(e,t){return T.apply(this,arguments)}),ot=(P=eo(function*(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((r=eo(function*(r,n){var{drawImage:o}=a;if(e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?i6(t.strokeColor):"none",e.fillStyle=t.backgroundColor?i6(t.backgroundColor):"none",e.globalAlpha=t.opacity,e.ellipse(t.x,t.y,t.rx,t.ry,0,0,2*Math.PI),t.backgroundColor&&e.fill(),t.backgroundImage){try{l=yield n4(t.backgroundImage)}catch(e){n(e)}var l,{srcRect:s,destRect:c}=n6(rg(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),t.backgroundSize,tJ(l),t.backgroundCorners,t.backgroundPosition);yield n3(e,l,s,c,o),t.strokeWidth&&e.stroke(),r([])}else t.strokeWidth&&e.stroke(),r([])}),function(e,t){return r.apply(this,arguments)}))}),function(e,t){return P.apply(this,arguments)}),or=(R=eo(function*(e,t,r){var a=t.width&&t.height?tZ(t):af(t.text,t),n={x:t.x,y:t.y,width:a.width,height:a.height};if(oe(e,ea(ea(ea({},t),n),{},{options:r})),!t.text.length)return[];var{textOutlineWidth:o=0,textShadowX:l=0,textShadowY:s=0,textShadowBlur:c=0,textShadowColor:d,outline:u,blur:h}=t,p=er(t,K);return t.height&&(e.rect(n.x-o+Math.min(l,0),n.y-o+Math.min(s,0),n.width+o+o+Math.abs(l)+c,n.height+o+Math.abs(s)+c),e.save(),e.clip()),(l||s||c)&&(e.save(),e.translate(l,s),yield oi(e,n,t,ea(ea({},r),{},{paddingLeft:32+c,paddingRight:32+c,paddingTop:c,paddingBottom:c,shapeExtendedProps:{color:d,blur:c}})),e.restore()),o&&(yield oi(e,n,t,ea(ea({},r),{},{paddingLeft:32+o,paddingRight:32+o,paddingTop:o,paddingBottom:o,shapeExtendedProps:{color:t.textOutlineColor,outline:o}}))),t.height&&e.restore(),yield oi(e,n,p,ea(ea({},r),{},{paddingLeft:32,paddingRight:32,paddingTop:0,paddingBottom:0})),[]}),function(e,t,r){return R.apply(this,arguments)}),oi=(E=eo(function*(e,t,r,a){var{willRequest:n,shapeExtendedProps:o,paddingLeft:l,paddingRight:s,paddingTop:c,paddingBottom:d}=a,u=yield aO(r.text,ea(ea(ea(ea({},r),o),t),{},{paddingLeft:l,paddingRight:s,paddingTop:c,paddingBottom:d,imageWidth:t.width,imageHeight:t.height,willRequest:n}));e.drawImage(u,r.x-l,r.y-c,u.width,u.height)}),function(e,t,r,a){return E.apply(this,arguments)}),oa=(A=eo(function*(e,t){var r;return new Promise((r=eo(function*(r){e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?i6(t.strokeColor):"none",e.globalAlpha=t.opacity;var a=aV(t),n=aH(t);e.moveTo(a.x,a.y),e.lineTo(n.x,n.y),t.strokeWidth&&e.stroke(),r([])}),function(e){return r.apply(this,arguments)}))}),function(e,t){return A.apply(this,arguments)}),on=(I=eo(function*(e,t){return new Promise((r,a)=>{if(t.bitmap&&1===t.points.length){ot(e,{x:t.points[0].x,y:t.points[0].y,rx:.5*t.strokeWidth,ry:.5*t.strokeWidth,backgroundColor:t.strokeColor}).then(()=>r([]));return}e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?i6(t.strokeColor):"none",e.fillStyle=t.backgroundColor?i6(t.backgroundColor):"none",e.globalAlpha=t.opacity;var{points:n}=t;e.lineCap=t.strokeCap,e.lineJoin=t.strokeJoin,e.setLineDash(t.strokeDash||[]),t.pathClose&&e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var o=n.length,l=1;l<o;l++)e.lineTo(n[l].x,n[l].y);t.pathClose&&e.closePath(),t.strokeWidth&&e.stroke(),t.backgroundColor&&e.fill(),r([])})}),function(e,t){return I.apply(this,arguments)}),oo=(e,t,r,a)=>((t||r)&&(e.translate(a.x,a.y),e.scale(t?-1:1,r?-1:1),e.translate(-a.x,-a.y)),e),ol=(L=eo(function*(e,t,r){e.globalCompositeOperation="subtract"===t.drawMode?"destination-out":"source-over";var a,n=nK(t);if(iI(e,t.rotation,n),oo(e,t.flipX,t.flipY,n),aZ(t)?a=oe:aY(t)?a=ot:aq(t)?a=oa:aK(t)?a=on:aU(t)&&(a=or),a){var o=yield a(e,t,r);return o.length?[t,...yield os(e,o,r)]:[]}return[]}),function(e,t,r){return L.apply(this,arguments)}),os=(F=eo(function*(e,t,r){var a=[];for(var n of t)e.save(),e.beginPath(),a=[...a,...yield ol(e,n,r)],e.restore();return a}),function(e,t,r){return F.apply(this,arguments)}),oc=(z=eo(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{shapes:r=[],contextBounds:a=e,transform:n=ep,drawImage:o,willRequest:l,canvasMemoryLimit:s,computeShape:c=e7,preprocessShape:d=e7}=t;if(!r.length)return e;var u=eb("canvas");u.width=a.width,u.height=a.height;var h=u.getContext("2d",{willReadFrequently:!0});h.putImageData(e,a.x||0,a.y||0);var p=r.map(aD).map(c).map(d).flat();n(h),yield os(h,p,{drawImage:o,canvasMemoryLimit:s,willRequest:l});var v=h.getImageData(0,0,u.width,u.height);return ek(u),v}),function(e){return z.apply(this,arguments)}),od=(O=eo(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{backgroundColor:r,backgroundImage:a}=t,n=!(!r||r&&0===r[3]);if(!a&&!n)return e;var o=eb("canvas");o.width=e.width,o.height=e.height;var l=o.getContext("2d",{willReadFrequently:!0});if(l.putImageData(e,0,0),l.globalCompositeOperation="destination-over",n&&(l.fillStyle=i6(r),l.fillRect(0,0,o.width,o.height)),a){s=nQ(a)?a:yield n4(a);var s,{srcRect:c,destRect:d}=n6({x:0,y:0,width:e.width,height:e.height},"cover",{width:s.width,height:s.height});l.drawImage(s,c.x,c.y,c.width,c.height,d.x,d.y,d.width,d.height)}var u=l.getImageData(0,0,o.width,o.height);return ek(o),u}),function(e){return O.apply(this,arguments)}),ou=(e,t)=>{var r=Array(20);return r[0]=e[0]*t[0]+e[1]*t[5]+e[2]*t[10]+e[3]*t[15],r[1]=e[0]*t[1]+e[1]*t[6]+e[2]*t[11]+e[3]*t[16],r[2]=e[0]*t[2]+e[1]*t[7]+e[2]*t[12]+e[3]*t[17],r[3]=e[0]*t[3]+e[1]*t[8]+e[2]*t[13]+e[3]*t[18],r[4]=e[0]*t[4]+e[1]*t[9]+e[2]*t[14]+e[3]*t[19]+e[4],r[5]=e[5]*t[0]+e[6]*t[5]+e[7]*t[10]+e[8]*t[15],r[6]=e[5]*t[1]+e[6]*t[6]+e[7]*t[11]+e[8]*t[16],r[7]=e[5]*t[2]+e[6]*t[7]+e[7]*t[12]+e[8]*t[17],r[8]=e[5]*t[3]+e[6]*t[8]+e[7]*t[13]+e[8]*t[18],r[9]=e[5]*t[4]+e[6]*t[9]+e[7]*t[14]+e[8]*t[19]+e[9],r[10]=e[10]*t[0]+e[11]*t[5]+e[12]*t[10]+e[13]*t[15],r[11]=e[10]*t[1]+e[11]*t[6]+e[12]*t[11]+e[13]*t[16],r[12]=e[10]*t[2]+e[11]*t[7]+e[12]*t[12]+e[13]*t[17],r[13]=e[10]*t[3]+e[11]*t[8]+e[12]*t[13]+e[13]*t[18],r[14]=e[10]*t[4]+e[11]*t[9]+e[12]*t[14]+e[13]*t[19]+e[14],r[15]=e[15]*t[0]+e[16]*t[5]+e[17]*t[10]+e[18]*t[15],r[16]=e[15]*t[1]+e[16]*t[6]+e[17]*t[11]+e[18]*t[16],r[17]=e[15]*t[2]+e[16]*t[7]+e[17]*t[12]+e[18]*t[17],r[18]=e[15]*t[3]+e[16]*t[8]+e[17]*t[13]+e[18]*t[18],r[19]=e[15]*t[4]+e[16]*t[9]+e[17]*t[14]+e[18]*t[19]+e[19],r},oh=e=>e.length?e.reduce((e,t)=>ou([...e],t),e.shift()):[],op=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e*t)/t},ov=(e,t)=>{var r=e.width*e.height,a=t.reduce((e,t)=>(t.width>e.width&&t.height>e.height&&(e.width=t.width,e.height=t.height),e),{width:0,height:0});return op(Math.max(.5,.5+(1-a.width*a.height/r)/2),5)};function og(){}var om=e=>e;function of(e,t){for(var r in t)e[r]=t[r];return e}function o$(e){return e()}function oy(){return Object.create(null)}function ox(e){e.forEach(o$)}function ob(e){return"function"==typeof e}function ow(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function oS(e){if(null==e)return og;for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var n=e.subscribe(...r);return n.unsubscribe?()=>n.unsubscribe():n}function ok(e){var t;return oS(e,e=>t=e)(),t}function oC(e,t,r){e.$$.on_destroy.push(oS(t,r))}function oM(e,t,r,a){if(e){var n=oT(e,t,r,a);return e[0](n)}}function oT(e,t,r,a){return e[1]&&a?of(r.ctx.slice(),e[1](a(t))):r.ctx}function oP(e,t,r,a){if(e[2]&&a){var n=e[2](a(r));if(void 0===t.dirty)return n;if("object"==typeof n){for(var o=[],l=Math.max(t.dirty.length,n.length),s=0;s<l;s+=1)o[s]=t.dirty[s]|n[s];return o}return t.dirty|n}return t.dirty}function oR(e,t,r,a,n,o){if(n){var l=oT(t,r,a,o);e.p(l,n)}}function oE(e){if(e.ctx.length>32){for(var t=[],r=e.ctx.length/32,a=0;a<r;a++)t[a]=-1;return t}return -1}function oA(e){var t={};for(var r in e)"$"!==r[0]&&(t[r]=e[r]);return t}function oI(e,t){var r={};for(var a in t=new Set(t),e)t.has(a)||"$"===a[0]||(r[a]=e[a]);return r}function oL(e,t,r){return e.set(r),t}function oF(e){return e&&ob(e.destroy)?e.destroy:og}var oz=()=>window.performance.now(),oO=e=>requestAnimationFrame(e),oB=new Set;function oD(e){oB.forEach(t=>{t.c(e)||(oB.delete(t),t.f())}),0!==oB.size&&oO(oD)}function o_(e){var t;return 0===oB.size&&oO(oD),{promise:new Promise(r=>{oB.add(t={c:e,f:r})}),abort(){oB.delete(t)}}}function oN(e,t){e.appendChild(t)}function oW(e){if(!e)return document;var t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function oj(e,t,r){e.insertBefore(t,r||null)}function oV(e){e.parentNode.removeChild(e)}function oH(e){return document.createElement(e)}function oU(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function oG(e){return document.createTextNode(e)}function oX(){return oG(" ")}function oZ(){return oG("")}function oY(e,t,r,a){return e.addEventListener(t,r,a),()=>e.removeEventListener(t,r,a)}function oq(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function oK(e,t){var r=Object.getOwnPropertyDescriptors(e.__proto__);for(var a in t)null==t[a]?e.removeAttribute(a):"style"===a?e.style.cssText=t[a]:"__value"===a?e.value=e[a]=t[a]:r[a]&&r[a].set?e[a]=t[a]:oq(e,a,t[a])}function oJ(e,t){Object.keys(t).forEach(r=>{var a;a=t[r],r in e?e[r]="boolean"==typeof e[r]&&""===a||a:oq(e,r,a)})}function oQ(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function o1(e,t){e.value=null==t?"":t}function o0(e,t){var{bubbles:r=!1,cancelable:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=document.createEvent("CustomEvent");return n.initCustomEvent(e,r,a,t),n}class o2{constructor(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.is_svg?this.e=oU(t.nodeName):this.e=oH(t.nodeName),this.t=t,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(var t=0;t<this.n.length;t+=1)oj(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(oV)}}var o4=new Map,o5=0;function o3(e,t,r,a,n,o,l){for(var s,c,d,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=16.666/a,p="{\n",v=0;v<=1;v+=h){var g=t+(r-t)*o(v);p+=100*v+"%{".concat(l(g,1-g),"}\n")}var m=p+"100% {".concat(l(r,1-r),"}\n}"),f="__svelte_".concat(function(e){for(var t=5381,r=e.length;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}(m),"_").concat(u),$=oW(e),{stylesheet:y,rules:x}=o4.get($)||(d={stylesheet:(c=oH("style"),oN((s=oW(e)).head||s,c),c.sheet,c.sheet),rules:{}},o4.set($,d),d);x[f]||(x[f]=!0,y.insertRule("@keyframes ".concat(f," ").concat(m),y.cssRules.length));var b=e.style.animation||"";return e.style.animation="".concat(b?"".concat(b,", "):"").concat(f," ").concat(a,"ms linear ").concat(n,"ms 1 both"),o5+=1,f}function o6(){if(!U)throw Error("Function called outside component initialization");return U}function o8(e){o6().$$.on_mount.push(e)}function o7(e){o6().$$.after_update.push(e)}function o9(e){o6().$$.on_destroy.push(e)}function le(){var e=o6();return function(t,r){var{cancelable:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.$$.callbacks[t];if(n){var o=o0(t,r,{cancelable:a});return n.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}function lt(e,t){return o6().$$.context.set(e,t),t}function lr(e){return o6().$$.context.get(e)}function li(e,t){var r=e.$$.callbacks[t.type];r&&r.slice().forEach(e=>e.call(this,t))}var la=[],ln=[],lo=[],ll=[],ls=Promise.resolve(),lc=!1;function ld(){lc||(lc=!0,ls.then(lg))}function lu(e){lo.push(e)}function lh(e){ll.push(e)}var lp=new Set,lv=0;function lg(){var e=U;do{for(;lv<la.length;){var t=la[lv];lv++,U=t,function(e){if(null!==e.fragment){e.update(),ox(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(lu)}}(t.$$)}for(U=null,la.length=0,lv=0;ln.length;)ln.pop()();for(var r=0;r<lo.length;r+=1){var a=lo[r];lp.has(a)||(lp.add(a),a())}lo.length=0}while(la.length);for(;ll.length;)ll.pop()();lc=!1,lp.clear(),U=e}function lm(e,t,r){e.dispatchEvent(o0("".concat(t?"intro":"outro").concat(r)))}var lf=new Set;function l$(){X={r:0,c:[],p:X}}function ly(){X.r||ox(X.c),X=X.p}function lx(e,t){e&&e.i&&(lf.delete(e),e.i(t))}function lb(e,t,r,a){e&&e.o?lf.has(e)||(lf.add(e),X.c.push(()=>{lf.delete(e),a&&(r&&e.d(1),a())}),e.o(t)):a&&a()}var lw={duration:0};function lS(e,t,r,a){var n=t(e,r),o=a?0:1,l=null,s=null,c=null;function d(){if(c){var t,r,a,n;t=c,a=(r=(e.style.animation||"").split(", ")).filter(t?e=>0>e.indexOf(t):e=>-1===e.indexOf("__svelte")),(n=r.length-a.length)&&(e.style.animation=a.join(", "),(o5-=n)||oO(()=>{o5||(o4.forEach(e=>{var{ownerNode:t}=e.stylesheet;t&&oV(t)}),o4.clear())}))}}function u(e,t){var r=e.b-o;return t*=Math.abs(r),{a:o,b:e.b,d:r,duration:t,start:e.start,end:e.start+t,group:e.group}}function h(t){var{delay:r=0,duration:a=300,easing:h=om,tick:p=og,css:v}=n||lw,g={start:oz()+r,b:t};t||(g.group=X,X.r+=1),l||s?s=g:(v&&(d(),c=o3(e,o,t,a,r,h,v)),t&&p(0,1),l=u(g,a),lu(()=>lm(e,t,"start")),o_(t=>{if(s&&t>s.start&&(l=u(s,a),s=null,lm(e,l.b,"start"),v&&(d(),c=o3(e,o,l.b,l.duration,0,h,n.css))),l){if(t>=l.end)p(o=l.b,1-o),lm(e,l.b,"end"),s||(l.b?d():--l.group.r||ox(l.group.c)),l=null;else if(t>=l.start){var r=t-l.start;p(o=l.a+l.d*h(r/l.duration),1-o)}}return!!(l||s)}))}return{run(e){ob(n)?(G||(G=Promise.resolve()).then(()=>{G=null}),G).then(()=>{n=n(),h(e)}):h(e)},end(){d(),l=s=null}}}var lk=window;function lC(e,t){e.d(1),t.delete(e.key)}function lM(e,t){lb(e,1,1,()=>{t.delete(e.key)})}function lT(e,t,r,a,n,o,l,s,c,d,u,h){for(var p=e.length,v=o.length,g=p,m={};g--;)m[e[g].key]=g;var f=[],$=new Map,y=new Map;for(g=v;g--;){var x=h(n,o,g),b=r(x),w=l.get(b);w?a&&w.p(x,t):(w=d(b,x)).c(),$.set(b,f[g]=w),b in m&&y.set(b,Math.abs(g-m[b]))}var S=new Set,k=new Set;function C(e){lx(e,1),e.m(s,u),l.set(e.key,e),u=e.first,v--}for(;p&&v;){var M=f[v-1],T=e[p-1],P=M.key,R=T.key;M===T?(u=M.first,p--,v--):$.has(R)?!l.has(P)||S.has(P)?C(M):k.has(R)?p--:y.get(P)>y.get(R)?(k.add(P),C(M)):(S.add(R),p--):(c(T,l),p--)}for(;p--;){var E=e[p];$.has(E.key)||c(E,l)}for(;v;)C(f[v-1]);return f}function lP(e,t){for(var r={},a={},n={$$scope:1},o=e.length;o--;){var l=e[o],s=t[o];if(s){for(var c in l)c in s||(a[c]=1);for(var d in s)n[d]||(r[d]=s[d],n[d]=1);e[o]=s}else for(var u in l)n[u]=1}for(var h in a)h in r||(r[h]=void 0);return r}function lR(e){return"object"==typeof e&&null!==e?e:{}}function lE(e,t,r){var a=e.$$.props[t];void 0!==a&&(e.$$.bound[a]=r,r(e.$$.ctx[a]))}function lA(e){e&&e.c()}function lI(e,t,r,a){var{fragment:n,after_update:o}=e.$$;n&&n.m(t,r),a||lu(()=>{var t=e.$$.on_mount.map(o$).filter(ob);e.$$.on_destroy?e.$$.on_destroy.push(...t):ox(t),e.$$.on_mount=[]}),o.forEach(lu)}function lL(e,t){var r=e.$$;null!==r.fragment&&(ox(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function lF(e,t,r,a,n,o,l){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],c=U;U=e;var d=e.$$={fragment:null,ctx:[],props:o,update:og,not_equal:n,bound:oy(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:oy(),dirty:s,skip_bound:!1,root:t.target||c.$$.root};l&&l(d.root);var u=!1;if(d.ctx=r?r(e,t.props||{},function(t,r){var a=(arguments.length<=2?0:arguments.length-2)?arguments.length<=2?void 0:arguments[2]:r;return d.ctx&&n(d.ctx[t],d.ctx[t]=a)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](a),u)&&(-1===e.$$.dirty[0]&&(la.push(e),ld(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31),r}):[],d.update(),u=!0,ox(d.before_update),d.fragment=!!a&&a(d.ctx),t.target){if(t.hydrate){var h=Array.from(t.target.childNodes);d.fragment&&d.fragment.l(h),h.forEach(oV)}else d.fragment&&d.fragment.c();t.intro&&lx(e.$$.fragment),lI(e,t.target,t.anchor,t.customElement),lg()}U=c}class lz{$destroy(){lL(this,1),this.$destroy=og}$on(e,t){if(!ob(t))return og;var r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&0!==Object.keys(e).length&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var lO=[];function lB(e,t){return{subscribe:lD(e,t).subscribe}}function lD(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:og,a=new Set;function n(r){if(ow(e,r)&&(e=r,t)){var n=!lO.length;for(var o of a)o[1](),lO.push(o,e);if(n){for(var l=0;l<lO.length;l+=2)lO[l][0](lO[l+1]);lO.length=0}}}return{set:n,update:function(t){n(t(e))},subscribe:function(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:og,s=[o,l];return a.add(s),1===a.size&&(t=r(n)||og),o(e),()=>{a.delete(s),0===a.size&&(t(),t=null)}}}}function l_(e,t,r){var a=!Array.isArray(e),n=a?[e]:e,o=t.length<2;return lB(r,e=>{var r=!1,l=[],s=0,c=og,d=()=>{if(!s){c();var r=t(a?l[0]:l,e);o?e(r):c=ob(r)?r:og}},u=n.map((e,t)=>oS(e,e=>{l[t]=e,s&=~(1<<t),r&&d()},()=>{s|=1<<t}));return r=!0,d(),function(){ox(u),c()}})}var lN=e=>e.reduce((e,t)=>Object.assign(e,t),{}),lW=e=>({updateValue:e}),lj=e=>({defaultValue:e}),lV=e=>({store:e}),lH=e=>({store:(t,r)=>l_(...e(r))}),lU=e=>({store:(t,r)=>{var a,[n,o,l=()=>!1]=e(r),s=!0;return l_(n,(e,t)=>{o(e,e=>{!s&&l(a,e)||(a=e,s=!1,t(e))})})}}),lG=e=>({store:(t,r)=>{var[a,n={},o]=e(r),l=[],s={},c=e=>a(e,s),d=e=>{(l.length||e.length)&&(l=e,u())},u=()=>{var e=l.map(c);o&&e.sort(o),l=[...e],p(e)};Object.entries(n).map(e=>{var[t,r]=e;return r.subscribe(e=>{s[t]=e,e&&u()})});var{subscribe:h,set:p}=lD(t||[]);return{set:d,update:e=>d(e(l)),subscribe:h}}}),lX=(e,t,r)=>{var a,{store:n=e=>lD(e),defaultValue:o=ep,updateValue:l}=r,s=n(o(),t,e),{subscribe:c,update:d=ep}=s,u=e=>{var t=!0;a&&a(),a=c(r=>{if(t)return t=!1;e(r),a(),a=void 0})},h=l?l(e):e7;return s.set=e=>d(t=>h(e,t,u)),s.defaultValue=o,s},lZ=e=>{var t={},r={};return e.forEach(e=>{var[a,...n]=e,o=lN(n),l=t[a]=lX(r,t,o);Object.defineProperty(r,a,{get:()=>ok(l),set:l.set})}),{stores:t,accessors:r}},lY=[["src",lV(()=>{var e,{subscribe:t,set:r}=lD(),a=t=>{e!==t&&r(e=t)};return{set:a,subscribe:t,update:t=>a(t(e))}})],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",lj(()=>"pixelated")],["images",lj(()=>[])],["shapePreprocessor"],["willRequestResource"],["willRequest"]],lq=e=>e.charAt(0).toUpperCase()+e.slice(1),lK=(e,t)=>{Object.keys(t).forEach(r=>{var a=eO(t[r])?{value:t[r],writable:!1}:t[r];Object.defineProperty(e,r,a)})},lJ=(e,t)=>{var r,a,n,o,l,s,c,d,u,h=t.length;for(r=0;r<h;r++)if(a=t[r],n=t[r+1>h-1?0:r+1],o=a.x-e.x,l=a.y-e.y,s=n.x-e.x,c=n.y-e.y,d=o-s,u=l-c,d*l-u*o<-.00001)return!1;return!0},lQ=(e,t)=>{var r=rX(t),a=tm();rB(e).forEach(e=>{tF(e,a),lJ(e,t)||r.forEach(t=>{var r=Math.atan2(t.start.y-t.end.y,t.start.x-t.end.x),n=tf(e.x+1e4*Math.sin(Math.PI-r),e.y+1e4*Math.cos(Math.PI-r)),o=rt(re(t),1e4),l=rj(t9(e,n),o);l&&tF(a,tz(tw(l),e))})});var n=ro(e);return tF(n,a),!!rB(n).every(e=>lJ(e,t))&&(rP(e,n),!0)},l1=(e,t)=>{var r=rB(e),a=rZ(t,5),n=rm(e),o=[];r.forEach(e=>{var t=rr(t9(tw(n),tw(e)),1e6),r=!1;a.map(re).forEach(e=>{var a=rj(t,e);a&&!r&&(o.push(a),r=!0)})});var l=rh(tW(o[0],o[2])<tW(o[1],o[3])?[o[0],o[2]]:[o[1],o[3]]);return l.width<e.width&&(rP(e,l),!0)},l0=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},a=rc(e),n=rm(a),o=r_(a,r,n).map(e=>tM(e,t,n)),l=rh(o);return o.map(e=>tz(e,l))},l2=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rM(e);if(0!==t){var a,n,o,l=Math.atan2(1,r),s=Math.sign(t)*t,c=s%Math.PI,d=s%te;o=c>tt&&c<te+tt?d>tt?s:te-d:d>tt?te-d:s;var u=Math.min(Math.abs(e.height/Math.sin(l+o)),Math.abs(e.width/Math.cos(l-o)));n=(a=Math.cos(l)*u)/r}else(n=(a=e.width)/r)>e.height&&(a=(n=e.height)*r);return tQ(a,n)},l4=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tm(),n=arguments.length>4?arguments[4]:void 0;if(iG(r)&&0!==r||a.x||a.y){var o=rM(e),l=l0(t,r,a),s=l2(t,r,o);if(!(e.width<s.width&&e.height<s.height)){var c=.5*e.width-.5*s.width,d=.5*e.height-.5*s.height;e.width>s.width&&(e.width=s.width,e.x+=c),e.height>s.height&&(e.height=s.height,e.y+=d)}lQ(e,l),l1(e,l)&&lQ(e,l)}else{var u=rM(e);e.width=Math.min(e.width,t.width),e.height=Math.min(e.height,t.height),e.x=Math.max(e.x,0),e.x+e.width>t.width&&(e.x-=e.x+e.width-t.width),e.y=Math.max(e.y,0),e.y+e.height>t.height&&(e.y-=e.y+e.height-t.height);var h=rm(e),p=rz(e,u);p.width=Math.max(n.width,p.width),p.height=Math.max(n.height,p.height),p.x=h.x-.5*p.width,p.y=h.y-.5*p.height,rP(e,p)}},l5=(e,t,r,a,n,o,l,s)=>{var c=tX(l),d=tX(s),u=tp(Math.max(t.width/d.width,t.height/d.height)),h=tp(Math.min(t.width/c.width,t.height/c.height)),p=ro(t);if(h<1||u>1){var v=rm(e),g=rm(t),m=h<1?h:u,f=(g.x+v.x)/2,$=(g.y+v.y)/2,y=p.width/m,x=p.height/m;rT(p,f-.5*y,$-.5*x,y,x)}return o&&l4(p,r,a,n,c),{crop:p}},l3=(e,t,r)=>{var a=rc(e),n=rm(a),o=rm(rN(rh(rR(a,r,n)))),l=tI(tF(n,tz(tM(rm(t),-r,o),o)),tp);return rg(l.x-.5*t.width,l.y-.5*t.height,t.width,t.height)},l6=(e,t,r)=>Math.max(t,Math.min(e,r)),l8=(e,t,r,a,n,o,l,s,c,d)=>{var u=tX(c),h=tX(d);l&&(h.width=Math.min(d.width,n.width),h.height=Math.min(d.height,n.height));var p=!1,v=(t,r)=>{var c=l3(n,a,t),d=rc(n),g=rm(d),m=r_(d,o,g),f=tz(tw(g),rW(m)),$=tM(rm(c),r,g),y=tz(tw(g),$);m.forEach(e=>tM(e,r,g));var x=rh(m),b=tF(tz(tz(rW(m),y),x),f),w=rg(b.x-.5*c.width,b.y-.5*c.height,c.width,c.height);s&&r$(w,s.width/w.width),l&&l1(w,l0(n,r,o));var S=tp(Math.min(w.width/u.width,w.height/u.height),8),k=tp(Math.max(w.width/h.width,w.height/h.height),8);return(S<1||k>1)&&tp(Math.abs(r-t))===tp(Math.PI/2)&&!p?(p=!0,v(e,e+Math.sign(r-t)*Math.PI)):{rotation:r,crop:rD(w,e=>tp(e,8))}},g=Math.sign(t)*Math.round(Math.abs(t)/te)*te;return v(e,l6(t,g+r[0],g+r[1]))},l7=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume","minDuration","maxDuration"],l9=e=>{if(iY(e))return e.map(l9);if(ix(e)||r4(e));else if(eI(e))return ea({},e);return e},se=e=>e.map(e=>Object.entries(e).reduce((e,t)=>{var[r,a]=t;return r.startsWith("_")||(e[r]=a),e},{})),st=e=>{if(e){if(/:/.test(e)){var[t,r]=e.split(":");return t/r}return parseFloat(e)}},sr=(e,t)=>e===t,si=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sr;if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(!r(e[a],t[a]))return!1;return!0},sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 4===e.length?e:[...e,t]},sn=(e,t,r)=>{var a=tI(rm(e),e=>tp(e,8)),n=rc(t),o=rm(n),l=tI(t2(rh(rR(n,r,o))),e=>tp(e,8)),s=Math.abs(l.x-a.x),c=Math.abs(l.y-a.y);return s<1&&c<1},so=(e,t,r)=>t1(t6(l2(t,r,rM(e)),Math.round),t6(tX(e),Math.round)),sl=(e,t,r,a,n)=>{if(!n)return[-1/0,1/0];var o=Math.max(r.width/a.width,r.height/a.height),l=tQ(a.width*o,a.height*o),s=t8(l);if(s<Math.min(e.width,e.height))return[-1/0,1/0];var c=t?e.height:e.width,d=t?e.width:e.height,u=Math.acos(l.height/s),h=u-Math.acos(d/s),p=Math.asin(c/s)-u;if(Number.isNaN(h)&&Number.isNaN(p))return[-1/0,1/0];var v=Number.isNaN(h)?p:Number.isNaN(p)?h:Math.min(h,p);return[-v,v]},ss=(e,t,r,a,n,o)=>{var l=tX(a),s=tX(n);return o?[l,t6(l2(e,t,r),Math.round)]:[l,s]},sc=(e,t)=>{var{context:r,props:a}=t;return e._isFormatted||((e=nA(e))._isFormatted=!0,Object.assign(e,a)),!e._isDraft&&a7(e)&&(!e._context||!rC(r,e._context))&&(nY(e,r),e._context=ea({},r)),e},sd=(e,t)=>(e._isFormatted||(e.disableMove=!0,e.disableSelect=!0,e.disableResize=!0,e.disableRotate=!0),sc(e,t)),su=[["file"],["size"],["loadState"],["processState"],["aspectRatio",lH(e=>{var{size:t}=e;return[t,e=>e?rM(e):void 0]})],["perspectiveX",lj(()=>0)],["perspectiveY",lj(()=>0)],["perspective",lH(e=>{var{perspectiveX:t,perspectiveY:r}=e;return[[t,r],e=>{var[t,r]=e;return{x:t,y:r}}]})],["rotation",lj(()=>0),lW(e=>(t,r,a)=>{if(t===r)return t;var{loadState:n,size:o,rotationRange:l,cropMinSize:s,cropMaxSize:c,crop:d,perspective:u,cropLimitToImage:h,cropOrigin:p}=e;if(!d||!n||!n.beforeComplete)return t;var v=h&&so(d,o,r),g=h&&sn(d,o,r),m=l8(r,t,l,d,o,u,h,p,s,c);if(v&&g){var f=l2(o,t,rM(m.crop));m.crop.x+=.5*m.crop.width,m.crop.y+=.5*m.crop.height,m.crop.x-=.5*f.width,m.crop.y-=.5*f.height,m.crop.width=f.width,m.crop.height=f.height}return a(()=>{e.crop=rD(m.crop,e=>tp(e,8))}),m.rotation})],["flipX",lj(()=>!1)],["flipY",lj(()=>!1)],["flip",lH(e=>{var{flipX:t,flipY:r}=e;return[[t,r],e=>{var[t,r]=e;return{x:t,y:r}}]})],["isRotatedSideways",lU(e=>{var{rotation:t}=e;return[[t],(e,t)=>{var[r]=e;return t(tr(r))},(e,t)=>e!==t]})],["crop",lW(e=>function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,{loadState:a,size:n,cropMinSize:o,cropMaxSize:l,cropLimitToImage:s,cropAspectRatio:c,rotation:d,perspective:u}=e;if(!t&&!r||!a||!a.beforeComplete)return t;t||(t=rc(l2(n,d,c||rM(n))));var h=rD(l5(r,t,n,d,u,s,o,l).crop,e=>tp(e,8));return rC(r,h)?r:h})],["cropAspectRatio",lW(e=>(t,r)=>{var{loadState:a,crop:n,size:o,rotation:l,cropLimitToImage:s}=e,c=st(t);if(c){if(!n||!a||!a.beforeComplete)return c;var d=r?Math.abs(t-r):1;if(sn(n,o,l)&&s&&d>=.1){var u=t5(tX(o),l);e.crop=rD(rz(rc(u),t),tp)}else{var h={width:n.height*c,height:n.height},p=(n.width-h.width)*.5,v=(n.height-h.height)*.5;e.crop=rD(rg(n.x+p,n.y+v,h.width,h.height),tp)}return c}})],["cropOrigin"],["cropMinSize",lj(()=>({width:1,height:1}))],["cropMaxSize",lj(()=>({width:32768,height:32768}))],["cropLimitToImage",lj(()=>!0),lW(e=>(t,r,a)=>{var{crop:n}=e;return n&&!r&&t&&a(()=>e.crop=ro(e.crop)),t})],["cropSize",lU(e=>{var{crop:t}=e;return[[t],(e,t)=>{var[r]=e;r&&t(tQ(r.width,r.height))},(e,t)=>t1(e,t)]})],["cropRectAspectRatio",lH(e=>{var{cropSize:t}=e;return[[t],(e,t)=>{var[r]=e;r&&t(tp(rM(r),5))}]})],["cropRange",lU(e=>{var{size:t,rotation:r,cropRectAspectRatio:a,cropMinSize:n,cropMaxSize:o,cropLimitToImage:l}=e;return[[t,r,a,n,o,l],(e,t)=>{var[r,a,n,o,l,s]=e;r&&t(ss(r,a,n,o,l,s))},(e,t)=>si(e,t)]})],["rotationRange",lU(e=>{var{size:t,isRotatedSideways:r,cropMinSize:a,cropSize:n,cropLimitToImage:o}=e;return[[t,r,a,n,o],(e,t)=>{var[r,a,n,o,l]=e;r&&o&&t(sl(r,a,n,o,l))},(e,t)=>si(e,t)]})],["backgroundColor",lW(()=>e=>sa(e))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["minDuration",lj(()=>1/24)],["maxDuration",lj(()=>1/0)],["trim"],["volume",lj(()=>1)],["redaction",lG(e=>{var{size:t}=e;return[sc,{context:t}]})],["manipulation",lG(e=>{var{size:t}=e;return[sc,{context:t}]})],["annotation",lG(e=>{var{size:t}=e;return[sc,{context:t}]})],["decoration",lG(e=>{var{crop:t}=e;return[sc,{context:t}]})],["selection",lG(e=>{var{size:t}=e;return[sd,{context:t}]})],["frame",lW(()=>e=>{if(e){var t={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return ez(e)?t.frameStyle=e:Object.assign(t,e),t}})],["metadata"],["state",lV((e,t,r)=>{var a=l7.map(e=>t[e]),n=!1,o=lD({}),{subscribe:l}=l_([...a,o],(e,t)=>{if(!n){var r=l7.reduce((t,r,a)=>(t[r]=l9(e[a]),t),{});r.crop&&rD(r.crop,Math.round),r.manipulation=r.manipulation&&se(r.manipulation),r.redaction=r.redaction&&se(r.redaction),r.annotation=r.annotation&&se(r.annotation),r.decoration=r.decoration&&se(r.decoration),r.selection=r.selection&&se(r.selection),t(r)}}),s=e=>{e&&(n=!0,r.cropOrigin=void 0,l7.filter(t=>iZ(e,t)).forEach(t=>{var a=e[t];r[t]=null===a?void 0:l9(a)}),n=!1,o.set({}))};return{set:s,update:e=>s(e(null)),subscribe:l}})]],sh=(B=eo(function*(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,{ontaskstart:n,ontaskprogress:o,ontaskend:l,token:s}=a,c=!1,d={cancel:ep};s.cancel=()=>{c=!0,d.cancel()};var u=function*(t,a){if(c)return{v:void 0};var[s,u]=a;n(t,u);try{e=yield s(e,ea(ea({},r),{},{taskCancelToken:d}),e=>o(t,u,e))}catch(e){throw c=!0,e}l(t,u)};for(var[h,p]of t.entries()){var v=yield*u(h,p);if("object"==typeof v)return v.v}return e}),function(e,t){return B.apply(this,arguments)}),sp=function(){var{minSize:e={width:1,height:1},minDuration:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stores:r,accessors:a}=lZ(su),{pub:n,sub:o}=aa(),l=(e,t)=>{var r=()=>a[e]||{},o=t=>{a[e]=ea(ea(ea({},r()),t),{},{timeStamp:Date.now()})},l=()=>r().error,s=e=>{l()||(o({error:e}),n("".concat(t,"error"),ea({},r())))};return{start(){n("".concat(t,"start"))},onabort(){o({abort:!0}),n("".concat(t,"abort"),ea({},r()))},ontaskstart(e,a){l()||(o({index:e,task:a,taskProgress:void 0,taskLengthComputable:void 0}),n("".concat(t,"taskstart"),ea({},r())))},ontaskprogress(e,a,s){l()||(o({index:e,task:a,taskProgress:s.loaded/s.total,taskLengthComputable:s.lengthComputable}),n("".concat(t,"taskprogress"),ea({},r())),n("".concat(t,"progress"),ea({},r())))},ontaskend(e,a){l()||(o({index:e,task:a}),n("".concat(t,"taskend"),ea({},r())))},ontaskerror(e){s(e)},error(e){s(e)},beforeComplete(e){l()||(o({beforeComplete:!0}),n("before".concat(t),e))},complete(e){l()||(o({complete:!0}),n(t,e))}}};return lK(a,{read:function(r,n){var{reader:o}=n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(o){Object.assign(a,{file:void 0,size:void 0,loadState:void 0});var c={cancel:ep},d=!1,u=l("loadState","load"),h=ea({token:c},u),p={src:r,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(eo(function*(){try{if(u.start(),d)return u.onabort();var r=yield sh(p,o,s,h);if(d)return u.onabort();var{size:n,duration:l,dest:v}=r||{};if(!n||!n.width||!n.height)throw new ig("Image size missing","IMAGE_SIZE_MISSING",r);if(l>0&&l<t)throw new ig("Video too short","VIDEO_TOO_SHORT",ea(ea({},r),{},{minDuration:t}));if(n.width<e.width||n.height<e.height)throw new ig("Image too small","IMAGE_TOO_SMALL",ea(ea({},r),{},{minWidth:e.width,minHeight:e.height}));Object.assign(a,{file:v,size:n,duration:l}),u.beforeComplete(r),u.complete(r)}catch(e){u.error(e)}finally{c=void 0}})),()=>{d=!0,c&&c.cancel(),u.onabort()}}},write:(e,t)=>{if(a.loadState.complete){a.processState=void 0;var r=l("processState","process"),n={src:a.file,imageState:a.state,dest:void 0};if(eO(e)&&(e=e(a.file,a.state)),!e){r.start(),r.complete(n);return}var o={cancel:ep},s=!1,c=ea({token:o},r);return Promise.resolve().then(eo(function*(){try{if(r.start(),s)return r.onabort();var a=yield sh(n,e,t,c);if(s)return r.onabort();r.complete(a)}catch(e){r.error(e)}finally{o=void 0}})),()=>{s=!0,o&&o.cancel()}}},on:o}),{accessors:a,stores:r}},sv=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],sg=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],sm=su.map(e=>{var[t]=e;return t}).filter(e=>!sg.includes(e)),sf=e=>"image".concat(lq(e)),s$=e=>ez(e)||i5(e)||r2(e),sy=e=>iZ(e,"crop"),sx=()=>{var e,t,{stores:r,accessors:a}=lZ(lY),{sub:n,pub:o}=aa(),l=e=>t=>o(e,t),s=()=>a.images?a.images[0]:{},c={},d={};sm.forEach(e=>{Object.defineProperty(a,sf(e),{get:()=>{var t=s();if(t)return t.accessors[e]},set:t=>{c[sf(e)]=t,d[sf(e)]=t;var r=s();r&&(r.accessors[e]=t)}})});var u=()=>a.images&&a.images[0],h=r.src.subscribe(e=>{if(!e)return a.images=[];a.imageReader&&(a.images.length&&(c={}),v(e))}),p=r.imageReader.subscribe(e=>{e&&!a.images.length&&a.src&&v(a.src)}),v=e=>{Promise.resolve().then(()=>m(e,c)).catch(()=>{})},g=(e,t)=>{if(sy(t)){a.imageState=t;return}if(!t.imageCrop){var r,n=e.accessors.size,o=t.imageRotation||0,l=rc(t4(tX(n),o));l.width=tp(Math.abs(l.width),6),l.height=tp(Math.abs(l.height),6);var s=t.imageCropAspectRatio||(t.imageCropLimitToImage?rM(n):rM(l));t.imageCropLimitToImage?r=rz(l,s):((r=rI(l,s)).x=(n.width-r.width)/2,r.y=(n.height-r.height)/2),t.imageCrop=r}if(e.accessors.duration&&!t.imageTrim&&t.imageMaxDuration){var{duration:c}=e.accessors;t.imageTrim=[[0,Math.min(t.imageMaxDuration/c,1)]]}var d=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];d.filter(e=>iZ(t,e)).forEach(e=>{a[e]=t[e],delete t[e]}),Object.assign(a,Object.keys(t).filter(e=>!d.includes(e)).reduce((e,r)=>(e[r]=t[r],e),{}))},m=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,o)=>{var s=u(),h=!(!1===r.cropLimitToImage||!1===r.imageCropLimitToImage||!1===d.imageCropLmitedToImage),p=r.cropMinSize||r.imageCropMinSize||d.imageCropMinSize,v=h?p:s&&s.accessors.cropMinSize,m=r.minDuration||r.imageMinDuration;s&&f(),s=sp({minSize:v,minDuration:m}),sv.map(e=>s.accessors.on(e,l(e)));var $=()=>{c={},y.forEach(e=>e())},y=[];y.push(s.accessors.on("loaderror",e=>{$(),o(e)})),y.push(s.accessors.on("loadabort",()=>{$(),o({name:"AbortError"})})),y.push(s.accessors.on("load",t=>{e=void 0,$(),n(t)})),y.push(s.accessors.on("beforeload",()=>g(s,r))),a.images=[s],r.imageReader&&(a.imageReader=r.imageReader),r.imageWriter&&(a.imageWriter=r.imageWriter),e=s.accessors.read(t,{reader:a.imageReader},{willRequest:a.willRequest})})},f=()=>{var t=u();t&&(e&&e(),t.accessors.loadState=void 0,a.images=[])};return Object.defineProperty(a,"stores",{get:()=>r}),lK(a,{on:n,loadImage:m,abortLoadImage:()=>{e&&e(),a.images=[]},editImage:(e,t)=>new Promise((r,n)=>{m(e,t).then(()=>{var{images:e}=a,t=e[0],o=()=>{l(),s()},l=t.accessors.on("processerror",e=>{o(),n(e)}),s=t.accessors.on("process",e=>{o(),r(e)})}).catch(n)}),removeImage:f,processImage:(e,r)=>new Promise((n,o)=>{try{var l=[],s=()=>{t=void 0,l.forEach(e=>e())};eo(function*(){if(s$(e))try{yield m(e,r)}catch(e){o(e)}else e&&(sy(e)?a.imageState=e:Object.assign(a,e));var c=u();if(!c)return o("no image");l.push(c.accessors.on("processerror",e=>{s(),o(e)})),l.push(c.accessors.on("processabort",()=>{s(),o({name:"AbortError"})})),l.push(c.accessors.on("process",e=>{s(),n(e)})),t=c.accessors.write(a.imageWriter,{redactionRenderStyle:a.imageRedactionRendering,shapePreprocessor:a.shapePreprocessor||e7,imageScrambler:a.imageScrambler,willRequest:a.willRequest,willRequestResource:a.willRequestResource})})()}catch(e){o(e)}}),abortProcessImage:()=>{var e=u();e&&(t&&t(),e.accessors.processState=void 0)},destroy:()=>{h&&h(),p&&p()}}),a},sb=(e,t)=>{var{processImage:r}=sx();return r(e,t)},sw=()=>ie()?iM()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,sS=(e,t)=>Object.keys(e).filter(e=>!t.includes(e)).reduce((t,r)=>(t[r]=e[r],t),{}),sk=e=>new Promise(t=>{if(e.duration===1/0){e.ontimeupdate=()=>{e.ontimeupdate=void 0,t(e)},e.currentTime=Number.MAX_SAFE_INTEGER;return}t(e)}),sC=e=>new Promise((t,r)=>{var a=()=>{sk(e).then(()=>{t(e.duration)})};if(e.readyState>=1)return a();e.onloadedmetadata=a,e.onerror=()=>r(e.error)}),sM=function(){var e,{imageDataResizer:t,canvasMemoryLimit:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=eo(function*(e,a,n,o,l){n.width=Math.max(n.width,1),n.height=Math.max(n.height,1),o.width=Math.max(o.width,1),o.height=Math.max(o.height,1);var{dest:s}=yield sb(a,{imageReader:s2(),imageWriter:s5({format:"canvas",targetSize:ea(ea({},o),{},{upscale:!0}),imageDataResizer:t,canvasMemoryLimit:r}),imageCrop:n}),{feather:c=0}=l||{};if(c>0){var d=eb("canvas");d.width=s.width,d.height=s.height;var u=d.getContext("2d",{willReadFrequently:!0}),h=1/c,p=0;for(p=0;p<c;p++){var v=p*h;u.strokeStyle="rgba(0,0,0,".concat(v*v,")"),u.strokeRect(p+.5,p+.5,s.width-2*p-1,s.height-2*p-1)}u.fillStyle="#000",u.fillRect(p,p,s.width+.5-2*p,s.height+.5-2*p);var g=s.getContext("2d");g.globalCompositeOperation="destination-in",g.drawImage(d,0,0),ek(d)}e.drawImage(s,o.x,o.y,o.width,o.height),ek(s)}),function(t,r,a,n,o){return e.apply(this,arguments)}},sT=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t},a=arguments.length>2?arguments[2]:void 0;return t=eo(function*(t,n,o){o(iu(0,!1));var l=!1,s=yield e(...r(t,n,e=>{l=!0,o(e)}));return a&&a(t,s),l||o(iu(1,!1)),t}),function(e,r,a){return t.apply(this,arguments)}},sP=function(){var{willRequest:e,srcProp:t="src",destProp:r="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(iw,(r,a,n)=>[r[t],n,ea(ea({},a),{},{willRequest:e})],(e,t)=>e[r]=t),"any-to-file"]},sR=function(){var e,{srcProp:t="dest",destProp:r="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT((e=eo(function*(e){if(/octet-stream/.test(e.type)){console.warn('Pintura: File has unknown mime type "'.concat(e.type,'", make sure your server sets the correct Content-Type header.'));var t="image",r=yield ia(e);/video/i.test(r.nodeName)&&(t="video");var a={type:t+"/unknown"};return r4(e)?new File([e],e.name,ea(ea({},a),{},{lastModified:e.lastModified})):new Blob([e],a)}return e}),function(t){return e.apply(this,arguments)}),e=>[e[t]],(e,t)=>e[r]=t),"any-to-file"]},sE=function(){var{srcProp:e="src",destProp:t="size"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(il,t=>[t[e]],(e,r)=>e[t]=r),"read-image-size"]},sA=(D=eo(function*(e){var t=yield ia(e);if(io(t))return yield sC(t)}),function(e){return D.apply(this,arguments)}),sI=function(){var{srcProp:e="src",destProp:t="duration"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(sA,t=>[t[e]],(e,r)=>e[t]=r),"read-media-duration"]},sL=function(){var{srcSize:e="size",srcOrientation:t="orientation",destSize:r="size"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(iT,r=>[r[e],r[t]],(e,t)=>e[r]=t),"image-size-match-orientation"]},sF=function(){var{srcProp:e="src",destProp:t="head"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT((e,t)=>iP(e)?eg(e,t):void 0,t=>[t[e],[0,262144],onprogress],(e,r)=>e[t]=r),"read-image-head"]},sz=function(){var{srcProp:e="head",destProp:t="orientation"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(ed,t=>[t[e],274],function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e[t]=r}),"read-exif-orientation-tag"]},sO=function(){var{srcProp:e="head"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(ed,t=>[t[e],274,1]),"clear-exif-orientation-tag"]},sB=function(){var{srcImageSize:e="size",srcCanvasSize:t="imageData",srcImageState:r="imageState",destImageSize:a="size",destScalar:n="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT((e,t)=>[Math.min(t.width/e.width,t.height/e.height),tZ(t)],a=>[a[e],a[t],a[r]],(e,t)=>{var[r,o]=t;e[n]=r,e[a]=o}),"calculate-canvas-scalar"]},sD=function(){var{srcProp:e="src",destProp:t="imageData",canvasMemoryLimit:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(eZ,t=>[t[e],r],(e,r)=>e[t]=r),"blob-to-image-data"]},s_=function(){var{srcImageData:e="imageData",srcOrientation:t="orientation"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(eA,r=>[r[e],r[t]],(e,t)=>e.imageData=t),"image-data-match-orientation"]},sN=function(){var{srcImageData:e="imageData",srcImageState:t="imageState"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(od,r=>[r[e],{backgroundColor:r[t].backgroundColor,backgroundImage:r[t].backgroundImage}],(e,t)=>e.imageData=t),"image-data-fill"]},sW=function(){var{srcImageData:e="imageData",srcImageState:t="imageState",destScalar:r="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(iz,a=>{var n=a[r],{crop:o}=a[t];return o&&1!==n&&(o=r$(ro(o),n,tm())),[a[e],{crop:o,rotation:a[t].rotation,flipX:a[t].flipX,flipY:a[t].flipY}]},(e,t)=>e.imageData=t),"image-data-crop"]},sj=e=>!!(e.targetSize&&e.targetSize.width||e.targetSize&&e.targetSize.height),sV=e=>{var{targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:r,srcProp:a="imageData",srcImageState:n="imageState",destImageScaledSize:o="imageScaledSize"}=e;return[sT(iD,e=>{var o=Math.min(t.width||Number.MAX_SAFE_INTEGER,e[n].targetSize&&e[n].targetSize.width||Number.MAX_SAFE_INTEGER),l=Math.min(t.height||Number.MAX_SAFE_INTEGER,e[n].targetSize&&e[n].targetSize.height||Number.MAX_SAFE_INTEGER);return[e[a],{width:o,height:l,fit:t.fit||"contain",upscale:!!sj(e[n])||t.upscale||!1},r]},(e,t)=>{t1(e.imageData,t)||(e[o]=tZ(t)),e.imageData=t}),"image-data-resize"]},sH=function(){var{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:r="imageData"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(iU,r=>{var{colorMatrix:a}=r[t],n=a&&Object.keys(a).map(e=>a[e]).filter(Boolean);return[r[e],{colorMatrix:n&&oh(n),convolutionMatrix:r[t].convolutionMatrix,gamma:r[t].gamma,noise:r[t].noise,vignette:r[t].vignette}]},(e,t)=>e[r]=t),"image-data-filter"]},sU=function(){var e,{srcImageData:t="imageData",srcImageState:r="imageState",destImageData:a="imageData",destScalar:n="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT((e=eo(function*(e,t,r,a,n,o){if(!t||!a.length)return e;try{var l,s={dataSizeScalar:ov(e,a)};r&&r[3]>0&&(s.backgroundColor=[...r]),l=yield t(e,s)}catch(e){}var c=eb("canvas");c.width=e.width,c.height=e.height;var d=c.getContext("2d",{willReadFrequently:!0});if(d.putImageData(e,0,0),"auto"===o){var u=Math.sqrt(e.width*e.height);d.filter="blur(".concat(Math.round(u/100),"px)")}var h=new Path2D;a.forEach(e=>{var t=rg(e.x,e.y,e.width,e.height);rb(t,n);var r=rR(ro(t),e.rotation),a=new Path2D;r.forEach((e,t)=>{if(0===t)return a.moveTo(e.x,e.y);a.lineTo(e.x,e.y)}),h.addPath(a)}),d.clip(h,"nonzero"),d.imageSmoothingEnabled=!1,d.drawImage(l,0,0,c.width,c.height),ek(l);var p=d.getImageData(0,0,c.width,c.height);return ek(c),p}),function(t,r,a,n,o,l){return e.apply(this,arguments)}),(e,a)=>{var{imageScrambler:o,redactionRenderStyle:l}=a;return[e[t],o,e[r].backgroundColor,e[r].redaction,e[n],l]},(e,t)=>e[a]=t),"image-data-redact"]},sG=function(){var{srcImageData:e="imageData",srcSize:t="size",srcImageState:r="imageState",srcShapes:a="annotation",destImageData:n="imageData",destImageScaledSize:o="imageScaledSize",destScalar:l="scalar",imageDataResizer:s,canvasMemoryLimit:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(oc,(n,d)=>{var{shapePreprocessor:u,willRequestResource:h,willRequest:p}=d,v=n[r][a];if(!v.length)return[n[e]];var g=n[l],{crop:m}=n[r],f=n[t],$=g,y=n[o];y&&($=Math.min(y.width/m.width,y.height/m.height));var x={width:f.width/g,height:f.height/g};return[n[e],{shapes:v,computeShape:e=>e=nq(e=sS(e=nN(e,x),["left","right","top","bottom"]),$),transform:e=>{var a=n[t],{rotation:s=0,flipX:c,flipY:d,cropLimitToImage:u}=n[r],h=n[l],{crop:p=rc(a)}=n[r],v=n[o],g=v?Math.min(v.width/p.width,v.height/p.height):1,m={width:a.width/h*g,height:a.height/h*g},f=r0(m,s),$={width:f.width,height:f.height},y=.5*m.width-.5*$.width,x=.5*m.height-.5*$.height,b=t2(m);e.translate(-y,-x),e.translate(-p.x*g,-p.y*g),e.translate(b.x,b.y),e.rotate(s),e.translate(-b.x,-b.y),e.scale(c?-1:1,d?-1:1),e.translate(c?-m.width:0,d?-m.height:0),u&&(e.rect(0,0,m.width,m.height),e.clip())},drawImage:sM({imageDataResizer:s,canvasMemoryLimit:c}),preprocessShape:e=>u(e,ea({isPreview:!1},n[r])),canvasMemoryLimit:c,willRequest:p||h}]},(e,t)=>e[n]=t),"image-data-annotate"]},sX=function(){var{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:r="imageData",destImageScaledSize:a="imageScaledSize",imageDataResizer:n,canvasMemoryLimit:o,destScalar:l="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(oc,(r,s)=>{var{shapePreprocessor:c,willRequestResource:d,willRequest:u}=s,{decoration:h}=r[t];if(!h.length)return[r[e]];var p=r[l],{crop:v}=r[t],g=r[a];return g&&(p=Math.min(g.width/v.width,g.height/v.height)),[r[e],{shapes:h,drawImage:sM({imageDataResizer:n,canvasMemoryLimit:o}),computeShape:e=>e=nq(e=sS(e=nN(e,v),["left","right","top","bottom"]),p),preprocessShape:e=>c(e,ea({isPreview:!1},r[t])),canvasMemoryLimit:o,willRequest:u||d}]},(e,t)=>e[r]=t),"image-data-decorate"]},sZ=function(){var{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:r="imageData",destImageScaledSize:a="imageScaledSize",imageDataResizer:n,canvasMemoryLimit:o,destScalar:l="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(oc,(r,s)=>{var{shapePreprocessor:c,willRequestResource:d,willRequest:u}=s,h=r[t].frame;if(!h)return[r[e]];var p=r[l],{crop:v}=r[t];v&&1!==p&&(v=r$(ro(v),p,tm()));var g=ea({},v),m=nX(nZ(h,g,c),g);g.x=Math.abs(m.left),g.y=Math.abs(m.top),g.width+=Math.abs(m.left)+Math.abs(m.right),g.height+=Math.abs(m.top)+Math.abs(m.bottom);var f=r[a];return rb(g,f?Math.min(f.width/v.width,f.height/v.height):1),g.x=Math.floor(g.x),g.y=Math.floor(g.y),g.width=Math.floor(g.width),g.height=Math.floor(g.height),[r[e],{shapes:[h],contextBounds:g,computeShape:t=>nN(t,r[e]),transform:e=>{e.translate(g.x,g.y)},drawImage:sM({imageDataResizer:n,canvasMemoryLimit:o}),preprocessShape:e=>c(e,ea({isPreview:!1},r[t])),canvasMemoryLimit:o,willRequest:u||d}]},(e,t)=>e[r]=t),"image-data-frame"]},sY=function(){var{mimeType:e,quality:t,srcImageData:r="imageData",srcFile:a="src",destBlob:n="blob"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(eq,n=>[n[r],e||e5(n[a].name)||n[a].type,t],(e,t)=>e[n]=t),"image-data-to-blob"]},sq=function(){var{srcImageData:e="imageData",srcOrientation:t="orientation",destCanvas:r="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(eE,r=>[r[e],r[t]],(e,t)=>e[r]=t),"image-data-to-canvas"]},sK=(_=eo(function*(e,t){if(!iP(e)||!t)return e;var r=es(new DataView(t));if(!r||!r.exif)return e;var a=["exif","mpf","xmp"].reduce((e,t)=>r[t]?Math.max(e,r[t].offset+r[t].size):e,0);return eK(e,t.slice(0,a+2),[20])}),function(e,t){return _.apply(this,arguments)}),sJ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"blob",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"head",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"blob";return[sT(sK,r=>[r[e],r[t]],(e,t)=>e[r]=t),"blob-write-image-head"]},sQ=function(){var{renameFile:e,srcBlob:t="blob",srcFile:r="src",destFile:a="dest",defaultFilename:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[sT(e6,a=>[a[t],e?e(a[r]):a[r].name||"".concat(n,".").concat(eQ(a[t].type))],(e,t)=>e[a]=t),"blob-to-file"]},s1=e=>{var t,{url:r="./",dataset:a=e=>[["dest",e.dest,e.dest.name],["imageState",e.imageState]],destStore:n="store",credentials:o,headers:l={}}=e;return[sT((t=eo(function*(e,t){return yield iA(r,e,{onprogress:t,beforeSend:e=>im(e,{headers:l,credentials:o})})}),function(e,r){return t.apply(this,arguments)}),(e,t,r)=>[a(e),r],(e,t)=>e[n]=t),"store"]},s0=e=>[sT(t=>(e&&e.length&&Object.keys(t).forEach(r=>{e.includes(r)||delete t[r]}),t)),"prop-filter"],s2=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{orientImage:t=!0,outputProps:r=["src","dest","size","duration"],preprocessImageFile:a,request:n={}}=e;return[sP({willRequest:()=>n}),sR(),a&&[sT(a,(e,t,r)=>[e.dest,t,r],(e,t)=>e.dest=t),"preprocess-image-file"],sE({srcProp:"dest"}),sI({srcProp:"dest"}),t&&sF({srcProp:"dest"}),t&&sz(),t&&sL(),s0(r)].filter(Boolean)},s4=e=>e&&(ez(e)?s1({url:e}):eO(e)?[e,"store"]:s1(e)),s5=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(ii(t)){var{canvasMemoryLimit:n=sw(),orientImage:o=!0,copyImageHead:l=!0,mimeType:s,quality:c,renameFile:d,targetSize:u,imageDataResizer:h,store:p,format:v="file",outputProps:g=["src","dest","imageState","store"],preprocessImageSource:m,preprocessImageState:f,postprocessImageData:$,postprocessImageBlob:y}=ea(ea({},e),a);return"blob"===v&&(v="file"),[m&&[sT(m,(e,t,r)=>[e.src,t,r,e.imageState],(e,t)=>e.src=t),"preprocess-image-source"],(o||l)&&sF(),o&&sz(),sE(),f&&[sT(f,(e,t,r,a)=>[e.imageState,t,r,{size:e.size,orientation:e.orientation}],(e,t)=>e.imageState=t),"preprocess-image-state"],sD({canvasMemoryLimit:n}),o&&sL(),o&&s_(),sB(),sU(),sW(),sV({imageDataResizer:h,targetSize:u}),sG({imageDataResizer:h,canvasMemoryLimit:n,srcShapes:"manipulation"}),sH(),sN(),sG({imageDataResizer:h,canvasMemoryLimit:n,srcShapes:"annotation"}),sX({imageDataResizer:h,canvasMemoryLimit:n}),sZ({imageDataResizer:h,canvasMemoryLimit:n}),$&&[sT($,(e,t,r)=>[e.imageData,t,r],(e,t)=>e.imageData=t),"postprocess-image-data"],"file"===v?sY({mimeType:s,quality:c}):"canvas"===v?sq():[e=>(e.dest=e.imageData,e)],"file"===v&&o&&sO(),"file"===v&&l&&sJ(),y&&[sT(y,(e,t,r)=>{var{blob:a,imageData:n,src:o}=e;return[{blob:a,imageData:n,src:o},t,r]},(e,t)=>e.blob=t),"postprocess-image-file"],"file"===v&&sQ({defaultFilename:"image",renameFile:d}),"file"===v?s4(p):eO(p)&&[p,"store"],s0(g)].filter(Boolean)}}},s3=(e,t,r,a,n,o,l,s,c,d,u)=>{if(e&&t&&r&&a&&s){s*=o;var h=rm(rN(ro(t))),p=rm(e),v=rm(rc(r)),g=rm(l3(r,a,c)),m=tz(tw(v),g),f=tz(tw(p),h);m.x+=f.x,m.y+=f.y;var $=tk(tw(m));return $.x+=f.x,$.y+=f.y,tF(m,tz(rm(rf(rf(ro(n),l),e)),p)),{origin:$,translation:m,rotation:{x:u?Math.PI:0,y:d?Math.PI:0,z:c},scale:s}}},s6=null,s8=()=>{if(null===s6){if("WebGL2RenderingContext"in window){var e;try{s6=!!(e=eb("canvas")).getContext("webgl2")}catch(e){s6=!1}e&&ek(e),e=void 0}else s6=!1}return s6},s7=e=>(e&e-1)==0,s9=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object.keys(t).filter(e=>!eI(t[e])).reduce((e,n)=>e.replace(new RegExp(r+n+a),t[n]),e)},ce={head:"#version 300 es\n\nin vec4 aPosition;uniform mat4 uMatrix;",text:"\nin vec2 aTexCoord;out vec2 vTexCoord;",matrix:"\ngl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);"},ct={head:"#version 300 es\nprecision highp float;\n\nout vec4 fragColor;",mask:"\nuniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}",init:"\nfloat a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);",colorize:"\nif(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}",maskapply:"\nfloat m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);",maskfeatherapply:"\nfloat leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;",rectaa:"\nvec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);",cornerradius:"\nvec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);",fragcolor:"\nif(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));"},cr=(e,t,r)=>(t=s9(t,r===e.VERTEX_SHADER?ce:ct,"##").trim(),s8())?t:(t=(t=t.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),r===e.VERTEX_SHADER&&(t=t.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),r===e.FRAGMENT_SHADER&&(t=t.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),"".concat(t)),ci=(e,t,r)=>{var a=e.createShader(r),n=cr(e,t,r);return e.shaderSource(a,n),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS)||console.error(e.getShaderInfoLog(a)),a},ca=(e,t,r,a,n)=>{var o=ci(e,t,e.VERTEX_SHADER),l=ci(e,r,e.FRAGMENT_SHADER),s=e.createProgram();e.attachShader(s,o),e.attachShader(s,l),e.linkProgram(s);var c={};return a.forEach(t=>{c[t]=e.getAttribLocation(s,t)}),n.forEach(t=>{c[t]=e.getUniformLocation(s,t)}),{program:s,locations:c,destroy(){e.detachShader(s,o),e.detachShader(s,l),e.deleteShader(o),e.deleteShader(l),e.deleteProgram(s)}}},cn=e=>"VIDEO"!==e.nodeName&&(!!s8()||s7(e.width)&&s7(e.height)),co=(e,t,r)=>{e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,cn(t)?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r.filterParam),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r.wrapParam),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r.wrapParam),cn(t)&&e.generateMipmap(e.TEXTURE_2D)},cl=(e,t,r,a)=>(e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),co(e,r,a),e.bindTexture(e.TEXTURE_2D,null),t),cs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e?[e[0],e[1],e[2],iG(e[3])?t*e[3]:t]:[0,0,0,0]},cc=()=>{var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},cd=(e,t,r,a,n)=>{var o=1/Math.tan(t/2),l=1/(a-n);e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*a*l,e[15]=0},cu=(e,t,r,a,n,o,l)=>{var s=1/(t-r),c=1/(a-n),d=1/(o-l);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+r)*s,e[13]=(n+a)*c,e[14]=(l+o)*d,e[15]=1},ch=(e,t,r,a)=>{e[12]=e[0]*t+e[4]*r+e[8]*a+e[12],e[13]=e[1]*t+e[5]*r+e[9]*a+e[13],e[14]=e[2]*t+e[6]*r+e[10]*a+e[14],e[15]=e[3]*t+e[7]*r+e[11]*a+e[15]},cp=(e,t)=>{e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,e[9]*=t,e[10]*=t,e[11]*=t},cv=(e,t)=>{e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t},cg=(e,t)=>{e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t},cm=(e,t)=>{var r=Math.sin(t),a=Math.cos(t),n=e[4],o=e[5],l=e[6],s=e[7],c=e[8],d=e[9],u=e[10],h=e[11];e[4]=n*a+c*r,e[5]=o*a+d*r,e[6]=l*a+u*r,e[7]=s*a+h*r,e[8]=c*a-n*r,e[9]=d*a-o*r,e[10]=u*a-l*r,e[11]=h*a-s*r},cf=(e,t)=>{var r=Math.sin(t),a=Math.cos(t),n=e[0],o=e[1],l=e[2],s=e[3],c=e[8],d=e[9],u=e[10],h=e[11];e[0]=n*a-c*r,e[1]=o*a-d*r,e[2]=l*a-u*r,e[3]=s*a-h*r,e[8]=n*r+c*a,e[9]=o*r+d*a,e[10]=l*r+u*a,e[11]=s*r+h*a},c$=(e,t)=>{var r=Math.sin(t),a=Math.cos(t),n=e[0],o=e[1],l=e[2],s=e[3],c=e[4],d=e[5],u=e[6],h=e[7];e[0]=n*a+c*r,e[1]=o*a+d*r,e[2]=l*a+u*r,e[3]=s*a+h*r,e[4]=c*a-n*r,e[5]=d*a-o*r,e[6]=u*a-l*r,e[7]=h*a-s*r},cy=e=>e*Math.PI/180,cx=(e,t)=>s8()?e.getContext("webgl2",t):e.getContext("webgl",t)||e.getContext("experimental-webgl",t),cb=(e,t)=>{var r=e.length;return t>=r?e[t%r]:t<0?e[t%r+r]:e[t]},cw=e=>{var t,r,a,n=0,o=e.length;for(t=0;t<o;t++)r=e[t],n+=((a=e[(t+1)%o]).x-r.x)*((a.y+r.y)/2);return n},cS=(e,t,r,a)=>{var n=tf(r.x-t.x,r.y-t.y),o=tf(a.x-r.x,a.y-r.y),l=tf(t.x-a.x,t.y-a.y),s=tf(e.x-t.x,e.y-t.y),c=tf(e.x-r.x,e.y-r.y),d=tf(e.x-a.x,e.y-a.y),u=t_(n,s),h=t_(o,c),p=t_(l,d);return u<=0&&h<=0&&p<=0},ck=e=>{for(var t=e.length,r=0;r<t;r++)if(rH(t9(e[r],cb(e,r+1)),e,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0;return!1},cC=e=>{if(e.length<3||ck(e))return[];0>cw(e)&&e.reverse();for(var t,r,a,n,o,l,s,c,d,u=e.length,h=[...Array(u).keys()],p=[],v=128;h.length>3;){if(v<=0)return[];for(v--,t=0;t<h.length;t++)if(a=h[t],n=cb(h,t-1),o=cb(h,t+1),l=e[a],s=e[n],c=e[o],!(0>t_(tf(s.x-l.x,s.y-l.y),tf(c.x-l.x,c.y-l.y)))){for(r=0,d=!0;r<u;r++)if(r!==a&&r!==n&&r!==o&&cS(e[r],s,l,c)){d=!1;break}if(d){p.push([s,l,c]),h.splice(t,1);break}}}return p.push([e[h[0]],e[h[1]],e[h[2]]]),p},cM=(e,t,r,a,n)=>{var o=tP(tf(a.x-r.x,a.y-r.y)),l=tP(tf(n.x-a.x,n.y-a.y)),s=tP(tf(o.x+l.x,o.y+l.y)),c=tf(-s.y,s.x),d=Math.min(1/tD(c,tf(-o.y,o.x)),5);e[t]=a.x,e[t+1]=a.y,e[t+2]=c.x*d,e[t+3]=c.y*d,e[t+4]=-1,e[t+5]=a.x,e[t+6]=a.y,e[t+7]=c.x*d,e[t+8]=c.y*d,e[t+9]=1},cT=(e,t)=>{var r,a,n,o=0,l=e.length,s=new Float32Array((t?l+1:l)*10),c=e[0],d=e[l-1];for(o=0;o<l;o++)r=e[o-1],a=e[o],n=e[o+1],r||(r=t?d:tf(a.x+(a.x-n.x),a.y+(a.y-n.y))),n||(n=t?c:tf(a.x+(a.x-r.x),a.y+(a.y-r.y))),cM(s,10*o,r,a,n);return t&&cM(s,10*l,d,c,e[1]),s},cP=e=>{var t=new Float32Array(8);return t[0]=e[3].x,t[1]=e[3].y,t[2]=e[0].x,t[3]=e[0].y,t[4]=e[2].x,t[5]=e[2].y,t[6]=e[1].x,t[7]=e[1].y,t},cR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=rB(e),o=e.x+.5*e.width,l=e.y+.5*e.height;return(r||a)&&tH(n,r,a,o,l),0!==t&&tU(n,t,o,l),n},cE=(e,t,r,a,n,o,l)=>{var s=.5*Math.abs(r),c=.5*Math.abs(a),d=Math.abs(r)+Math.abs(a);return rY(tf(e+s,t+c),s,c,n,o,l,Math.max(20,Math.round(d/6)))},cA=(e,t,r,a,n,o,l,s)=>{var c=[];if(o.every(e=>0===e))c.push(tf(e,t),tf(e+r,t),tf(e+r,t+a),tf(e,t+a));else{var[d,u,h,p]=o,v=e+r,g=t+a;c.push(tf(e+d,t)),cI(c,v-u,t+u,u,-1),c.push(tf(v,t+u)),cI(c,v-p,g-p,p,0),c.push(tf(v-p,g)),cI(c,e+h,g-h,h,1),c.push(tf(e,g-h)),cI(c,e+d,t+d,d,2)}return(l||s)&&tH(c,l,s,e+.5*r,t+.5*a),n&&tU(c,n,e+.5*r,t+.5*a),c},cI=(e,t,r,a,n)=>{for(var o=Math.min(20,Math.max(4,Math.round(a/2))),l=0,s=0,c=0,d=0;d<o;d++)s=a*Math.cos(l=n*te+d/o*te),c=a*Math.sin(l),e.push(tf(t+s,r+c))},cL=null,cF=()=>{if(null!==cL)return cL;var e=eb("canvas"),t=cx(e);return cL=t?t.getParameter(t.MAX_TEXTURE_SIZE):void 0,ek(e),e=void 0,cL},cz=()=>ef()&&!!window.chrome,cO=new Float32Array([0,1,0,0,1,1,1,0]),cB=new Float32Array([1,0,0,0,1,1,0,1]),cD=ef()&&ao(),c_=[0,0,0,0,1,0,0,0,0],cN=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],cW=[0,0,0,0],cj=[0,0,0,0],cV=(e,t,r,a,n)=>{if(!r||!a)return cO;var o=a.x/r.width,l=a.y/r.height,s=e/r.width/n,c=t/r.height/n;s-=o;var d=c-=l,u=s,h=c,p=s;return new Float32Array([-o,d,-o,-l,u,h,p,-l])},cH=(e,t)=>Math.floor(l6(e,0,Math.min((t.width-1)*.5,(t.height-1)*.5))),cU=function(e){var t,r,a,n,o,l,s,c,d,u,h,p,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{alpha:g=!1}=v,m={width:0,height:0},f={width:0,height:0},$=cF()||1024,y=cc(),x=cc(),b=0,w=0,S=0,k=1,C=new Map([]),M=()=>{R.stencilOp(R.KEEP,R.KEEP,R.KEEP),R.stencilFunc(R.ALWAYS,1,255),R.stencilMask(255)},T=cy(30),P=Math.tan(T/2),R=cx(e,{alpha:g,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(R){R.getExtension("OES_standard_derivatives"),R.disable(R.DEPTH_TEST),R.enable(R.STENCIL_TEST),R.enable(R.BLEND),R.blendFunc(R.ONE,R.ONE_MINUS_SRC_ALPHA),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!g&&ao())),M();var E=R.createTexture();R.bindTexture(R.TEXTURE_2D,E),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,1,1,0,R.RGBA,R.UNSIGNED_BYTE,new Uint8Array(cW)),C.set(0,E);var A=R.createTexture();C.set(2,A);var I=R.createFramebuffer(),L=R.createTexture();C.set(1,L);var F=R.createFramebuffer(),z=ca(R,"\n##head\n##text\nvoid main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}","\n##head\nin vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){return(c*m)+(o*c.a);}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}",["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),O=R.createBuffer(),B=R.createBuffer();R.bindBuffer(R.ARRAY_BUFFER,B),R.bufferData(R.ARRAY_BUFFER,cO,R.STATIC_DRAW);var D=R.createBuffer();R.bindBuffer(R.ARRAY_BUFFER,D),R.bufferData(R.ARRAY_BUFFER,cB,R.STATIC_DRAW);var _=ca(R,"#version 300 es\n\nin vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}","\n##head\n##mask\nin vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),N=R.createBuffer();cz()&&(R.bindBuffer(R.ARRAY_BUFFER,N),R.bufferData(R.ARRAY_BUFFER,1,R.DYNAMIC_DRAW));var W=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{program:l,locations:s}=_;R.useProgram(l),R.enableVertexAttribArray(s.aPosition),R.enableVertexAttribArray(s.aNormal),R.enableVertexAttribArray(s.aMiter);var c=cT(e,o),h=5*Float32Array.BYTES_PER_ELEMENT,p=2*Float32Array.BYTES_PER_ELEMENT,v=4*Float32Array.BYTES_PER_ELEMENT;R.uniform1f(s.uWidth,t),R.uniform1f(s.uSharpness,a),R.uniform4fv(s.uColor,r),R.uniformMatrix4fv(s.uMatrix,!1,n),R.uniform4f(s.uCanvasColor,b,w,S,k),R.uniform1fv(s.uMaskBounds,u),R.uniform1f(s.uMaskOpacity,d),R.bindBuffer(R.ARRAY_BUFFER,N),R.bufferData(R.ARRAY_BUFFER,c,R.STATIC_DRAW),R.vertexAttribPointer(s.aPosition,2,R.FLOAT,!1,h,0),R.vertexAttribPointer(s.aNormal,2,R.FLOAT,!1,h,p),R.vertexAttribPointer(s.aMiter,1,R.FLOAT,!1,h,v),R.drawArrays(R.TRIANGLE_STRIP,0,c.length/5),R.disableVertexAttribArray(s.aPosition),R.disableVertexAttribArray(s.aNormal),R.disableVertexAttribArray(s.aMiter)},j=ca(R,"\n##head\nvoid main(){\n##matrix\n}","\n##head\n##mask\nuniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;\n##maskapply\nfillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),V=R.createBuffer(),H=(e,t)=>{var{program:r,locations:a}=j;return R.useProgram(r),R.enableVertexAttribArray(a.aPosition),R.uniform4fv(a.uColor,t),R.uniformMatrix4fv(a.uMatrix,!1,n),R.uniform1fv(a.uMaskBounds,u),R.uniform1f(a.uMaskOpacity,d),R.uniform4f(a.uCanvasColor,b,w,S,k),R.bindBuffer(R.ARRAY_BUFFER,V),R.bufferData(R.ARRAY_BUFFER,e,R.STATIC_DRAW),R.vertexAttribPointer(a.aPosition,2,R.FLOAT,!1,0,0),R.drawArrays(R.TRIANGLES,0,e.length/2),R.disableVertexAttribArray(a.aPosition),e},U=ca(R,"\n##head\n##text\nin vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){\n##init\n##colorize\n##rectaa\n##cornerradius\n##maskfeatherapply\nif(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),G=R.createBuffer(),X=R.createBuffer(),Z=R.createBuffer(),Y=function(e,t,a,o,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:E,c=arguments.length>6?arguments[6]:void 0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:cW,g=arguments.length>9&&void 0!==arguments[9]?arguments[9]:cO,m=arguments.length>10&&void 0!==arguments[10]?arguments[10]:p,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,$=arguments.length>12?arguments[12]:void 0,{program:y,locations:x}=U;return R.useProgram(y),R.enableVertexAttribArray(x.aPosition),R.enableVertexAttribArray(x.aTexCoord),R.enableVertexAttribArray(x.aRectCoord),R.uniform4fv(x.uColor,l),R.uniform2fv(x.uSize,[t,a]),R.uniform2fv(x.uPosition,[e[2],e[3]]),R.uniform2fv(x.uRepeat,c),R.uniform1i(x.uInverted,$?1:0),R.uniform1fv(x.uCornerRadius,o),R.uniform4f(x.uCanvasColor,b,w,S,k),R.uniform1fv(x.uMaskFeather,m.map((e,t)=>t%2==0?e:e*r)),R.uniform1fv(x.uMaskBounds,u),R.uniform1f(x.uMaskOpacity,d),R.uniform1f(x.uEdgeFeather,Math.max(0,f)),R.uniformMatrix4fv(x.uMatrix,!1,n),R.uniform1i(x.uTexture,4),R.uniform4fv(x.uTextureColor,v),R.uniform1f(x.uTextureOpacity,h),R.activeTexture(R.TEXTURE0+4),R.bindTexture(R.TEXTURE_2D,s),R.bindBuffer(R.ARRAY_BUFFER,X),R.bufferData(R.ARRAY_BUFFER,g,R.STATIC_DRAW),R.vertexAttribPointer(x.aTexCoord,2,R.FLOAT,!1,0,0),R.bindBuffer(R.ARRAY_BUFFER,Z),R.bufferData(R.ARRAY_BUFFER,cO,R.STATIC_DRAW),R.vertexAttribPointer(x.aRectCoord,2,R.FLOAT,!1,0,0),R.bindBuffer(R.ARRAY_BUFFER,G),R.bufferData(R.ARRAY_BUFFER,e,R.STATIC_DRAW),R.vertexAttribPointer(x.aPosition,2,R.FLOAT,!1,0,0),R.drawArrays(R.TRIANGLE_STRIP,0,e.length/2),R.disableVertexAttribArray(x.aPosition),R.disableVertexAttribArray(x.aTexCoord),R.disableVertexAttribArray(x.aRectCoord),e},q=ca(R,"\n##head\n##text\nout vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){\n##init\nfloat ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),K=R.createBuffer(),J=R.createBuffer(),Q=function(e,t,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:E,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cO,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],{program:h,locations:p}=q;R.useProgram(h),R.enableVertexAttribArray(p.aPosition),R.enableVertexAttribArray(p.aTexCoord),R.uniformMatrix4fv(p.uMatrix,!1,n),R.uniform2fv(p.uRadius,[.5*t,.5*r]),R.uniform1i(p.uInverted,c?1:0),R.uniform4fv(p.uColor,a),R.uniform4f(p.uCanvasColor,b,w,S,k),R.uniform2fv(p.uRepeat,[1,1]),R.uniform1fv(p.uMaskBounds,u),R.uniform1f(p.uMaskOpacity,d),R.uniform1i(p.uTexture,4),R.uniform1f(p.uTextureOpacity,s),R.activeTexture(R.TEXTURE0+4),R.bindTexture(R.TEXTURE_2D,o),R.bindBuffer(R.ARRAY_BUFFER,J),R.bufferData(R.ARRAY_BUFFER,l,R.STATIC_DRAW),R.vertexAttribPointer(p.aTexCoord,2,R.FLOAT,!1,0,0),R.bindBuffer(R.ARRAY_BUFFER,K),R.bufferData(R.ARRAY_BUFFER,e,R.STATIC_DRAW),R.vertexAttribPointer(p.aPosition,2,R.FLOAT,!1,0,0),R.drawArrays(R.TRIANGLE_STRIP,0,e.length/2),R.disableVertexAttribArray(p.aPosition),R.disableVertexAttribArray(p.aTexCoord)},ee=new Map,et={};et[2]={width:0,height:0},et[1]={width:0,height:0};var er=function(e,t,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=Math.min(Math.min(4096,$)/a.width,Math.min(4096,$)/a.height,o),s=Math.floor(l*a.width),c=Math.floor(l*a.height);t1(a,et[e])?R.bindFramebuffer(R.FRAMEBUFFER,t):(R.bindTexture(R.TEXTURE_2D,C.get(e)),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,s,c,0,R.RGBA,R.UNSIGNED_BYTE,null),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.bindFramebuffer(R.FRAMEBUFFER,t),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,C.get(e),0),et[e]=a);var d=a.width*r,u=a.height*r;cu(x,0,d,u,0,-1,1),ch(x,0,u,0),cv(x,1),cg(x,-1),n=x,R.viewport(0,0,s,c),R.colorMask(!0,!0,!0,!0),R.clearColor(0,0,0,0),R.clear(R.COLOR_BUFFER_BIT),p=[1,0,1,0,1,Math.max(m.width,a.width),1,Math.max(m.width,a.width)]},ei=(e,t)=>{var{forceRelease:r=!1}=t||{},{src:a}=ee.get(e);a instanceof HTMLCanvasElement&&!r&&!a.dataset.retain&&ek(a),ee.delete(e),R.deleteTexture(e)},ea=e=>ee.get(e).isRotatedVideo;return{drawPath:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];var t=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,n=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0;if(!(e.length<2)){var s=e.map(e=>({x:e.x*r,y:e.y*r})),c=t*r;if(c>0&&W(s,c,cs(a,l),n),!(s.length<3)&&o&&0!==o[3]&&n){var d=cC(s),u=new Float32Array(6*d.length);d.forEach((e,t)=>{var[r,a,n]=e,o=6*t;u[o+0]=r.x,u[o+1]=r.y,u[o+2]=a.x,u[o+3]=a.y,u[o+4]=n.x,u[o+5]=n.y}),H(u,cs(o,l))}}},drawRect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:void 0,u=arguments.length>9&&void 0!==arguments[9]&&arguments[9],h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0,v=arguments.length>12?arguments[12]:void 0,g=arguments.length>13?arguments[13]:void 0,m=arguments.length>14&&void 0!==arguments[14]?arguments[14]:void 0,f=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1/r,$=arguments.length>16?arguments[16]:void 0,y=arguments.length>17?arguments[17]:void 0,x=rb(ro(e),r),b=o.map(t=>cH(t||0,e)).map(e=>e*r);if(l||s){var w,S=ro(x);S.x-=.5,S.y-=.5,S.width+=1,S.height+=1;var k=cP(cR(S,t,a,n));$&&0===(w=cs($))[3]&&(w[3]=.001);var C=c&&u?[S.width/c.width,S.height/c.height]:[1,1];Y(k,S.width,S.height,b,cs(l,g),s,C,g,w,h?new Float32Array(h):cV(S.width,S.height,c,d,r),m,f*r,y)}p&&(p=Math.min(p,x.width,x.height),W(cA(x.x,x.y,x.width,x.height,t,b,a,n),p*r,cs(v,g),!0))},drawEllipse:function(e,t,a,n,o,l,s,c){var d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:void 0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:void 0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0,v=arguments.length>12?arguments[12]:void 0,g=arguments.length>13?arguments[13]:void 0,m=arguments.length>14?arguments[14]:void 0,f=rb(rg(e.x-t,e.y-a,2*t,2*a),r);if(s||c){var $=ro(f);$.x-=.5,$.y-=.5,$.width+=1,$.height+=1,Q(cP(cR($,n,o,l)),$.width,$.height,cs(s,g),c,h?new Float32Array(h):cV($.width,$.height,d,u,r),g,m)}p&&W(cE(f.x,f.y,f.width,f.height,n,o,l),p*r,cs(v,g),!0)},drawImage:function(e,a,n,o,l,s,c,p,v,g){var f,$=arguments.length>10&&void 0!==arguments[10]?arguments[10]:cN,y=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,x=arguments.length>12?arguments[12]:void 0,b=arguments.length>13&&void 0!==arguments[13]?arguments[13]:1,w=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,S=arguments.length>15&&void 0!==arguments[15]?arguments[15]:h,k=arguments.length>16&&void 0!==arguments[16]?arguments[16]:cj,M=arguments.length>17&&void 0!==arguments[17]?arguments[17]:cW,E=arguments.length>18&&void 0!==arguments[18]&&arguments[18],A=arguments.length>19&&void 0!==arguments[19]&&arguments[19],I=!(arguments.length>20)||void 0===arguments[20]||arguments[20],L=a.width*r,F=a.height*r,_=-.5*L,N=.5*F,W=.5*L,j=-.5*F,V=new Float32Array([_,j,0,_,N,0,W,j,0,W,N,0]);R.bindBuffer(R.ARRAY_BUFFER,O),R.bufferData(R.ARRAY_BUFFER,V,R.STATIC_DRAW);var H=-(a.height/2/P*(m.height/a.height)*1);l*=r,s*=r,n*=r,o*=r;var{program:U,locations:G}=z,X=cc();cd(X,T,t,1,-(2*H)),ch(X,l,-s,H),ch(X,n,-o,0),c$(X,-v),cp(X,g),ch(X,-n,o,0),cf(X,p),cm(X,c),R.useProgram(U),R.enableVertexAttribArray(G.aPosition),R.enableVertexAttribArray(G.aTexCoord),R.uniform1i(G.uTexture,3),R.uniform2f(G.uTextureSize,a.width,a.height),R.activeTexture(R.TEXTURE0+3),R.bindTexture(R.TEXTURE_2D,e);var Z=A?1:0,Y=C.get(Z);R.uniform1i(G.uTextureBlend,Z),R.activeTexture(R.TEXTURE0+Z),R.bindTexture(R.TEXTURE_2D,Y);var q=E?2:0,K=C.get(q);R.uniform1i(G.uTextureOverlay,q),R.activeTexture(R.TEXTURE0+q),R.bindTexture(R.TEXTURE_2D,K),R.bindBuffer(R.ARRAY_BUFFER,O),R.vertexAttribPointer(G.aPosition,3,R.FLOAT,!1,0,0);var J=cD&&ea(e);R.bindBuffer(R.ARRAY_BUFFER,J?D:B),R.vertexAttribPointer(G.aTexCoord,2,R.FLOAT,!1,0,0),R.uniformMatrix4fv(G.uMatrix,!1,X),R.uniform4fv(G.uOverlayColor,M),!x||si(x,c_)?(x=c_,f=-1):f=(f=x.reduce((e,t)=>e+t,0))<=0?1:f,R.uniform1fv(G.uClarityKernel,x),R.uniform1f(G.uClarityKernelWeight,f),R.uniform1f(G.uColorGamma,1/b),R.uniform1f(G.uColorVignette,w),R.uniform1i(G.uAntialias,I?1:0),R.uniform4f(G.uColorOffset,$[4],$[9],$[14],$[19]),R.uniformMatrix4fv(G.uColorMatrix,!1,[$[0],$[1],$[2],$[3],$[5],$[6],$[7],$[8],$[10],$[11],$[12],$[13],$[15],$[16],$[17],$[18]]),R.uniform1f(G.uOpacity,y),R.uniform1f(G.uMaskOpacity,d),R.uniform1fv(G.uMaskBounds,u),R.uniform1fv(G.uMaskCornerRadius,k.map(e=>e*r)),R.uniform1fv(G.uMaskFeather,S.map((e,t)=>t%2==0?e:e*r)),R.drawArrays(R.TRIANGLE_STRIP,0,4),R.disableVertexAttribArray(G.aPosition),R.disableVertexAttribArray(G.aTexCoord)},textureFilterNearest:R.NEAREST,textureFilterLinear:R.LINEAR,textureClamp:R.CLAMP_TO_EDGE,textureRepeat:R.REPEAT,textureCreate:()=>R.createTexture(),textureUpdate:(e,t,r)=>(ee.set(e,{src:t,options:r,isRotatedVideo:"VIDEO"===t.nodeName&&(t.dataset&&90==t.dataset.rotation||270==t.dataset.rotation)}),cl(R,e,t,r)),textureGetSize:e=>{var{src:t,options:r}=ee.get(e),a=tZ(t);return r.scalar?t6(a,e=>e/r.scalar):a},textureDelete:ei,enablePreviewStencil:()=>{R.stencilOp(R.KEEP,R.KEEP,R.REPLACE),R.stencilFunc(R.ALWAYS,1,255),R.stencilMask(255)},applyPreviewStencil:()=>{R.stencilFunc(R.EQUAL,1,255),R.stencilMask(0)},disablePreviewStencil:M,setCanvasColor(e){b=e[0],w=e[1],S=e[2],k=g?e[3]:1,R.clear(R.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{cu(y,0,m.width,m.height,0,-1,1)},updateCanvasMatrix(e,t,a,n,o){var l=e.width,s=e.height,c=m.width*(.5/r),d=m.height*(.5/r),u={x:c+(a.x+t.x),y:d+(a.y+t.y)},h={x:u.x-t.x,y:u.y-t.y},p={x:.5*l,y:.5*s};tM(h,o.z,u),tj(h,n,u);var v={x:h.x-p.x,y:h.y-p.y};ch(y,v.x*r,v.y*r,0),ch(y,p.x*r,p.y*r,0),c$(y,o.z),cm(y,o.x>Math.PI/2?Math.PI:0),cf(y,o.y>Math.PI/2?Math.PI:0),cp(y,n),ch(y,-p.x*r,-p.y*r,0)},drawToCanvas(){R.bindFramebuffer(R.FRAMEBUFFER,null),n=y,R.viewport(0,0,R.drawingBufferWidth,R.drawingBufferHeight),R.colorMask(!0,!0,!0,!0),R.clearColor(b,w,S,k),R.clear(R.COLOR_BUFFER_BIT),p=[1,0,1,0,1,m.width,1,m.width]},drawToImageBlendBuffer(e,t){er(1,F,e,t)},drawToImageOverlayBuffer(e,t){er(2,I,e,t)},enableMask(e,t){var a=e.x*r,n=e.y*r,h=e.width*r,p=e.height*r;l=(c=a)+h,o=m.height-n,s=m.height-(n+p),d=1-t,u=[o,l,s,c]},disableMask(){c=0,l=m.width,o=m.height,d=1,u=[o,l,s=0,c]},resize:(n,o,l)=>{a=1===(r=l)?.75:1,f.width=n,f.height=o,m.width=n*r,m.height=o*r,t=e8(m.width,m.height),e.width=m.width,e.height=m.height,cu(y,0,m.width,m.height,0,-1,1),h=[1,0,1,0,1,f.width,1,f.width]},release(){Array.from(ee.keys()).forEach(e=>ei(e,{forceRelease:!0})),ee.clear(),C.forEach(e=>{R.deleteTexture(e)}),C.clear(),z.destroy(),_.destroy(),j.destroy(),U.destroy(),q.destroy(),e.width=1,e.height=1,e=void 0}}}},cG=(e,t)=>{var r,a,n,o,l,{imageData:s,amount:c=1}=e,d=Math.round(2*Math.max(1,c)),u=Math.round(.5*d),h=s.width,p=s.height,v=new Uint8ClampedArray(h*p*4),g=s.data,m=0,f=0,$=0,y=h*p*4-4;for(o=0;o<p;o++)for(n=0,a=crypto.getRandomValues(new Uint8ClampedArray(p));n<h;n++)l=a[o]/255,f=0,$=0,l<.5&&(f=(-u+Math.round(Math.random()*d))*4),l>.5&&($=(-u+Math.round(Math.random()*d))*(4*h)),r=Math.min(Math.max(0,m+f+$),y),v[m]=g[r],v[m+1]=g[r+1],v[m+2]=g[r+2],v[m+3]=g[r+3],m+=4;t(null,{data:v,width:s.width,height:s.height})},cX=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625],cZ=(N=eo(function*(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var{width:a,height:n}=e,{dataSize:o=96,dataSizeScalar:l=1,scrambleAmount:s=4,blurAmount:c=6,outputFormat:d="canvas",backgroundColor:u=[0,0,0]}=r,h=Math.round(o*l),p=Math.min(h/a,h/n),v=Math.floor(a*p),g=Math.floor(n*p),m=eb("canvas",{width:v,height:g}),f=m.getContext("2d",{willReadFrequently:!0});if(u.length=3,f.fillStyle=i6(u),f.fillRect(0,0,v,g),eC(e)){var $=eb("canvas",{width:a,height:n});$.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),f.drawImage($,0,0,v,g),ek($)}else f.drawImage(e,0,0,v,g);var y=f.getImageData(0,0,v,g),x=[];if(s>0&&x.push([cG,{amount:s}]),c>0)for(var b=0;b<c;b++)x.push([iN,{matrix:cX}]);if(x.length){var w=(e,t)=>"(err, imageData) => {\n(".concat(e[t][0].toString(),")(Object.assign({ imageData: imageData }, filterInstructions[").concat(t,"]), \n").concat(e[t+1]?w(e,t+1):"done",")\n}"),S="function (options, done) {\nconst filterInstructions = options.filterInstructions;\nconst imageData = options.imageData;\n(".concat(w(x,0),")(null, imageData)\n}");t=iB((yield eX(S,[{imageData:y,filterInstructions:x.map(e=>e[1])}],[y.data.buffer])))}else t=y;return"canvas"===d?(f.putImageData(t,0,0),m):t}}),function(e){return N.apply(this,arguments)});function cY(e){return Math.sqrt(1- --e*e)}function cq(e){return"[object Date]"===Object.prototype.toString.call(e)}function cK(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=lD(e),n=e;function o(o,l){if(null==e)return a.set(e=o),Promise.resolve();n=o;var s,c=t,d=!1,{delay:u=0,duration:h=400,easing:p=om,interpolate:v=function e(t,r){if(t===r||t!=t)return()=>t;var a=typeof t;if(a!==typeof r||Array.isArray(t)!==Array.isArray(r))throw Error("Cannot interpolate values of different type");if(Array.isArray(t)){var n=r.map((r,a)=>e(t[a],r));return e=>n.map(t=>t(e))}if("object"===a){if(!t||!r)throw Error("Object cannot be null");if(cq(t)&&cq(r)){t=t.getTime();var o=(r=r.getTime())-t;return e=>new Date(t+e*o)}var l=Object.keys(r),s={};return l.forEach(a=>{s[a]=e(t[a],r[a])}),e=>{var t={};return l.forEach(r=>{t[r]=s[r](e)}),t}}if("number"===a){var c=r-t;return e=>t+e*c}throw Error("Cannot interpolate ".concat(a," values"))}}=of(of({},r),l);if(0===h)return c&&(c.abort(),c=null),a.set(e=n),Promise.resolve();var g=oz()+u;return(t=o_(t=>{if(t<g)return!0;d||(s=v(e,o),"function"==typeof h&&(h=h(e,o)),d=!0),c&&(c.abort(),c=null);var r=t-g;return r>h?(a.set(e=o),!1):(a.set(e=s(p(r/h))),!0)})).promise}return{set:o,update:(t,r)=>o(t(n,e),r),subscribe:a.subscribe}}function cJ(e){var t,r,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=lD(e),{stiffness:l=.15,damping:s=.8,precision:c=.01}=n,d=e,u=e,h=1,p=0,v=!1;function g(n){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u=n;var s=a={};if(null==e||l.hard||m.stiffness>=1&&m.damping>=1)return v=!0,t=null,d=n,o.set(e=u),Promise.resolve();if(l.soft&&(p=1/(60*(!0===l.soft?.5:+l.soft)),h=0),!r){t=null,v=!1;var c={inv_mass:void 0,opts:m,settled:!0,dt:void 0};r=o_(a=>{if(null===t&&(t=a),v)return v=!1,r=null,!1;h=Math.min(h+p,1),c.inv_mass=h,c.opts=m,c.settled=!0,c.dt=(a-t)*60/1e3;var n=function e(t,r,a,n){if("number"==typeof a){var o=n-a,l=(a-r)/(t.dt||1/60),s=(t.opts.stiffness*o-t.opts.damping*l)*t.inv_mass,c=(l+s)*t.dt;return Math.abs(c)<t.opts.precision&&Math.abs(o)<t.opts.precision?n:(t.settled=!1,a+c)}if(iY(a))return a.map((o,l)=>e(t,r[l],a[l],n[l]));if("object"==typeof a){var d={};for(var u in a)d[u]=e(t,r[u],a[u],n[u]);return d}throw Error("Cannot spring ".concat(typeof a," values"))}(c,d,e,u);return t=a,d=e,o.set(e=n),c.settled&&(r=null),!c.settled})}return new Promise(e=>{r.promise.then(()=>{s===a&&e()})})}var m={set:g,update:(t,r)=>g(t(u,e),r),subscribe:o.subscribe,stiffness:l,damping:s,precision:c};return m}var cQ=lB(!1,e=>{var t=window.matchMedia("(prefers-reduced-motion:reduce)"),r=()=>e(t.matches);return r(),t.addListener(r),()=>t.removeListener(r)}),c1=()=>"ResizeObserver"in window,c0=rl(),c2=(e,t,r,a,n)=>{e.rect||(e.rect=rl());var o=e.rect;rT(c0,t,r,a,n),rC(o,c0)||(rP(o,c0),e.dispatchEvent(new CustomEvent("measure",{detail:o})))},c4=Math.round,c5=e=>{var t=e.getBoundingClientRect();c8&&c2(e,c4(t.x),c4(t.y),c4(t.width),c4(t.height))},c3=e=>{c8&&c2(e,e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight)},c6=[],c8=void 0;function c7(){if(!c6.length){c8=void 0;return}c6.forEach(e=>e.measure(e)),c8=requestAnimationFrame(c7)}var c9=new Map([]),de=0,dt=0,dr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{observePosition:r=!1,observeViewRect:a=!1,once:n=!1,disabled:o=!1,isMeasureRoot:l=!1}=t;if(c1()&&l&&(Y||(Y=new ResizeObserver(e=>{e.forEach(e=>{c9.set(e.target,e.contentRect)});var t=Array.from(c9.values()).some(e=>{var{width:t,height:r}=e;return t>0&&r>0});t?t&&!1===c8&&c7():(c8&&cancelAnimationFrame(c8),c8=!1)})),Y.observe(e),de++),!o)return!c1()||r||a?(e.measure=a?c5:c3,c6.push(e),void 0===c8&&(c8=requestAnimationFrame(c7)),e.measure(e),{destroy(){l&&Y&&(c9.delete(e),Y.unobserve(e),0==--de&&(Y.disconnect(),Y=void 0));var t=c6.indexOf(e);c6.splice(t,1),delete e.measure}}):(Z||(Z=new ResizeObserver(e=>{e.forEach(e=>{c8&&c3(e.target)})})),Z.observe(e),c3(e),n?Z.unobserve(e):dt++,{destroy(){l&&Y&&(c9.delete(e),Y.unobserve(e),0==--de&&(Y.disconnect(),Y=void 0)),n||(Z.unobserve(e),0!=--dt||(Z.disconnect(),Z=void 0))}})},di=e=>{var t=!1,r={pointerdown:()=>{t=!1},keydown:()=>{t=!0},keyup:()=>{t=!1},focus:e=>{t&&(e.target.dataset.focusVisible="")},blur:e=>{delete e.target.dataset.focusVisible}};return Object.keys(r).forEach(t=>e.addEventListener(t,r[t],!0)),{destroy(){Object.keys(r).forEach(t=>e.removeEventListener(t,r[t],!0))}}},da=(W=eo(function*(e){return new Promise(t=>{if("file"===e.kind)return t(e.getAsFile());e.getAsString(t)})}),function(e){return W.apply(this,arguments)}),dn=e=>new Promise((t,r)=>{var{items:a}=e.dataTransfer;if(!a)return t([]);Promise.all(Array.from(a).map(da)).then(e=>{t(e.filter(e=>i5(e)&&ii(e)||/^http/.test(e)))}).catch(r)}),dl=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e=>{e.preventDefault()},n=(t=eo(function*(t){t.preventDefault(),t.stopPropagation();try{var a=yield dn(t);e.dispatchEvent(new CustomEvent("dropfiles",ea({detail:{event:t,resources:a}},r)))}catch(e){}}),function(e){return t.apply(this,arguments)});return e.addEventListener("drop",n),e.addEventListener("dragover",a),{destroy(){e.removeEventListener("drop",n),e.removeEventListener("dragover",a)}}},ds=null,dc=()=>{if(null===ds){if(ef()){var e=eb("canvas");ds=!cx(e,{failIfMajorPerformanceCaveat:!0}),ek(e)}else ds=!1}return ds},dd=e=>{var t=.5*e,r=eb("canvas",{"data-retain":!0,width:e,height:e}),a=r.getContext("2d");return a.fillStyle="#f0f",a.fillRect(0,0,t,t),a.fillRect(t,t,t,t),r},du=e=>{var t=parseFloat(e);return/^[0-9]+s$/.test(e)?1e3*t:t},dh=e=>e instanceof WebGLTexture,dp=e=>{var[t,r,a,n]=e;return[n.x,n.y,t.x,t.y,a.x,a.y,r.x,r.y]},dv=e=>e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2,dg=(e,t,r)=>{var{selectionColor:a=[1,1,1],scalar:n=1}=r||{},o=!1;for(var l of t){var s="subtract"===l.drawMode;if(!s||o){e.globalCompositeOperation=s?"destination-out":"source-over",e.save(),e.beginPath();var c=nK(l);iF(e,n,n),iI(e,l.rotation,c),oo(e,l.flipX,l.flipY,c),l.width?oe(e,ea(ea({},l),{},{backgroundColor:a})):l.points?on(e,Object.assign({},l,l.pathClose?{backgroundColor:a,strokeColor:[0,0,0,0]}:{strokeColor:a,strokeJoin:"round",strokeCap:"round"})):l.rx&&ot(e,ea(ea({},l),{},{backgroundColor:a,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"})),e.restore(),o=!0}}};function dm(e){var t,r,a,n;return{c(){t=oH("div"),r=oH("canvas"),oq(t,"class","PinturaCanvas")},m(o,l){oj(o,t,l),oN(t,r),e[36](r),a||(n=[oY(r,"measure",e[37]),oF(dr.call(null,r))],a=!0)},p:og,i:og,o:og,d(r){r&&oV(t),e[36](null),a=!1,ox(n)}}}function df(e,t,r){var a,n,o,l,s,c,d,u,h,p,v=[0,0,0,0],g=tm(),m=ef()&&dd(128),f=le(),{isAnimated:$}=t,{isTransparent:y}=t,{maskRect:x}=t,{maskOpacity:b=1}=t,{maskFrameOpacity:w=.95}=t,{maskMarkupOpacity:S=1}=t,{clipAnnotationsToImage:k=!0}=t,{pixelRatio:C=1}=t,{textPixelRatio:M=C}=t,{backgroundColor:T}=t,{willRender:P=e7}=t,{didRender:R=e7}=t,{willRequest:E}=t,{loadImageData:A=e7}=t,{enableGrid:I=!1}=t,{gridColors:L}=t,{gridSize:F}=t,{gridOpacity:z=0}=t,{images:O=[]}=t,{interfaceImages:B=[]}=t,{selectionColor:D}=t,_=null,N=null,W=null,j=(e,t)=>e.set(t,{hard:!$}),V={precision:10000000000000002e-22},H=0,U=cK(void 0,{duration:0});oC(e,U,e=>r(35,d=e));var G=cJ(1,V);oC(e,G,e=>r(34,s=e));var X=cJ(1,V);oC(e,X,e=>r(50,o=e));var Z=lD();oC(e,Z,e=>r(52,c=e));var Y=lD();oC(e,Y,e=>r(51,l=e));var q={},K=(e,t)=>{if(e.total!==t.length)return!0;var r=e.last,a=t[t.length-1];return!!(r.drawMode!==a.drawMode||aZ(r)&&(!aZ(a)||!rC(r,a))||aY(r)&&(!aY(a)||!(r.x===a.x&&r.y===a.y&&r.rx===a.rx&&r.ry===a.ry))||aK(r)&&(!aK(a)||a.points.length!==r.points.length))},J=(e,t)=>{var r=q[e.id],a=Math.min(1,2048/t.width),n=r?r.element:eb("canvas",{width:t.width*a,height:t.height*a,"data-retain":!0});if(!r||K(r,e.actions)){dg((n=n.cloneNode()).getContext("2d"),e.actions,{selectionColor:[1,0,1],scalar:a});var o=e.actions.length;q[e.id]={total:o,last:ea({},e.actions[o-1]),element:n}}return ea(ea({x:0,y:0},t),{},{fillColor:e.color||[1,1,1],backgroundImage:n})},Q=()=>{cancelAnimationFrame(h),h=requestAnimationFrame(()=>{eT=!0,eF=0,n()})},ee=new Map([]),et=new Map([]),er=e=>!ez(e)&&(ib(e)||eC(e)||nQ(e)||io(e)),ei=(e,t)=>({filterParam:"pixelated"===e?_.textureFilterNearest:_.textureFilterLinear,wrapParam:"repeat"===t?_.textureRepeat:_.textureClamp}),en=(e,t,r)=>{if(!ee.has(e)){ee.set(e,e);var a=ei(t,r);if(er(e)){var n=_.textureCreate();_.textureUpdate(n,e,a),ee.set(e,n)}else A(e).then(t=>{if(_&&t){var r=_.textureCreate();_.textureUpdate(r,t,a),ee.set(e,r),Q()}}).catch(t=>{ee.set(e,t)})}if(io(e)&&(dv(e)||"true"===e.dataset.redraw)){var o=ee.get(e),l=ei(t,r);return _.textureUpdate(o,e,l),e.dataset.redraw=!1,o}return ee.get(e)},eo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id||e.id;if(!e.text.length){et.delete(r);return}var{text:a,textAlign:n,fontFamily:o,fontSize:l=16,fontWeight:s,fontVariant:c,fontStyle:d,letterSpacing:u,lineHeight:h=l,width:p,height:v}=e,{outline:g=0,blur:m=0,paddingTop:f=0,paddingRight:$=32,paddingBottom:y=0,paddingLeft:x=32}=t;p=iG(p)?Math.floor(p):p,v=iG(v)?Math.floor(v):v;var{textSize:b,signature:w}=av(a,ea(ea({},e),{},{width:p,height:v})),S=i8({text:a,textAlign:n,fontFamily:o,fontSize:l,fontWeight:s,fontVariant:c,fontStyle:d,lineHeight:h,letterSpacing:u,outline:g,blur:m,signature:w});if(!ee.has(S)){ee.set(S,a);var k=Math.ceil(b.width),C=Math.ceil(b.height/h)*h;if(0===k||0===C)return;var T=cF(),P=Math.min(1,(T-(x+$)*M)/(k*M),(T-(f+y)*M)/(C*M));aO(a,{fontSize:l,fontFamily:o,fontWeight:s,fontVariant:c,fontStyle:d,letterSpacing:u,textAlign:n,lineHeight:h,width:p,height:v,imageWidth:k,imageHeight:C,paddingLeft:x,paddingTop:f,paddingRight:$,paddingBottom:y,pixelRatio:M*P,willRequest:E,outline:g,blur:m,color:[1,0,1]}).then(e=>{if(_){var t=_.textureCreate();_.textureUpdate(t,e,{filterParam:_.textureFilterLinear,wrapParam:_.textureClamp,scalar:P}),ee.set(S,t),et.set(r,t),Q()}}).catch(console.error)}var R=ee.get(S);return dh(R)?R:et.get(r)},el=new Map,es=e=>{var{id:t,points:r,strokeWidth:a,strokeCap:n,strokeJoin:o,strokeColor:l}=e,s=ee.get(t),c=el.get(t),d=i8({points:r.map(e=>"".concat(e.x,",").concat(e.y)).join(","),strokeWidth:a,strokeCap:n,strokeJoin:o,strokeColor:l});if(c){var{hash:u}=c;if(ee.has(t)){if(d===u)return ee.get(t)}else c=void 0}if(!c){var h=eb("canvas",{width:1,height:1});c={canvas:h,hash:void 0},el.set(e.id,c),s=_.textureCreate(),_.textureUpdate(s,h,{filterParam:_.textureFilterLinear,wrapParam:_.textureClamp}),ee.set(t,s)}var{canvas:p}=c,v=Math.ceil(e.strokeWidth),g=rh(r),m=Math.floor(g.x)-.5*v,f=Math.floor(g.y)-.5*v,$=Math.ceil(g.width+v),y=Math.ceil(g.height+v);p.width=Math.max($,1),p.height=Math.max(y,1);var x=p.getContext("2d");return x.clearRect(0,0,p.width,p.height),$>=1&&y>=1&&(x.translate(-m,-f),on(x,e),x.resetTransform()),_.textureUpdate(s,p,{filterParam:_.textureFilterLinear,wrapParam:_.textureClamp}),el.set(t,{canvas:p,hash:d}),ee.get(t)},ec=(e,t)=>{var r;if(e.backgroundImage)r=en(e.backgroundImage,e.backgroundImageRendering,"repeat"===e.backgroundRepeat?"repeat":void 0);else if(ez(e.text)){if(e.width&&e.width<1||e.height&&e.height<1)return;r=eo(e,t)}else e.bitmap&&e.points&&(r=es(e));return r},ed=e=>{ee.forEach((t,r)=>{!e.find(e=>e===t)&&dh(t)&&(Array.from(et.values()).includes(t)||(ee.delete(r),_.textureDelete(t)))})},eu=e=>{var{texture:t,size:r,origin:a,translation:n,rotation:o,scale:l,colorMatrix:s,opacity:c,convolutionMatrix:d,gamma:u,vignette:h,maskFeather:p,maskCornerRadius:v,overlayColor:g,enableOverlay:m,enableManipulation:f,enableAntialiasing:$}=e,y=0,x=0;if(1===C){var b=Math.abs(1-l)<Number.EPSILON;y=b&&N%2!=0?.5:0,x=b&&W%2!=0?.5:0}return _.drawImage(t,r,a.x,a.y,n.x+y,n.y+x,o.x,o.y,o.z,l,s,l6(c,0,1),d,u,h,p,v,g,m,f,$),t},eh=(e,t,r,a,n,o,l,s,c)=>{var d=ea({},t),u={width:n.width/M*r,height:n.height/M*r},h=tf(0,0),p={width:u.width,height:u.height};return d.x-=c*r,d.y-=o*r,e.width?(d.height=d.height?d.height+o*r/a:u.height,d.width+=(c+l)*r/a,"center"===e.textAlign?h.x=(d.width-p.width/a)*.5:"right"===e.textAlign&&(h.x=d.width-p.width/a)):(d.width=u.width,d.height=u.height),{rect:d,backgroundPosition:h,backgroundSize:p}},ev=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;e.forEach(e=>{var r=ec(e),a="loading"===e.status||e.backgroundImage&&r===e.backgroundImage;a&&Q();var n="error"===e.status||e.backgroundImage&&r instanceof Error,o=dh(r)?r:void 0,l=e._scale||1,s=e._translate||g,c=e.strokeWidth&&e.strokeWidth*l,d=!!e.width,u=!d&&ez(e.text)&&o,h=iY(e.points),p=aY(e);if(h){var v=e.points.map(e=>tf(e.x*l+s.x,e.y*l+s.y));if(e.bitmap){r&&t.push(r);var m=rh(v),f=Math.ceil(e.strokeWidth*l);_.drawRect({x:Math.floor(m.x)-.5*f,y:Math.floor(m.y)-.5*f,width:Math.ceil(m.width+f),height:Math.ceil(m.height+f)},e.rotation,e.flipX,e.flipY,[0,0,0,0],void 0,o,void 0,void 0,void 0,void 0,void 0,void 0,e.opacity,void 0,void 0,!1,!1)}else _.drawPath(v,e.rotation,e.flipX,e.flipY,c,e.strokeColor,e.pathClose,e.backgroundColor,e.opacity)}else if(p){var $=e.x,y=e.y;$*=l,y*=l;var x=tf($+=s.x,y+=s.y);_.drawEllipse(x,e.rx*l,e.ry*l,e.rotation,e.flipX,e.flipY,e.backgroundColor,o,void 0,void 0,e.backgroundCorners&&dp(e.backgroundCorners),c,e.strokeColor,e.opacity,e.inverted),r&&t.push(r),(a||n)&&(e.backgroundColor||e.strokeColor&&e.strokeWidth||_.drawEllipse(x,e.rx*l,e.ry*l,e.rotation,e.flipX,e.flipY,n?[1,0,0,.25*e.opacity]:[0,0,0,.25*e.opacity]),n&&ew(x),a&&ex(x))}else if(u||d){var b,w,S,k=o&&_.textureGetSize(o),C=e.fillColor,T=e.backgroundColor,P=e.strokeColor,R=[e.cornerRadius,e.cornerRadius,e.cornerRadius,e.cornerRadius].map(e=>e*l);b=e.width?ru(e):ea({x:e.x,y:e.y},k),l&&s&&(b.x*=l,b.y*=l,b.x+=s.x,b.y+=s.y,b.width*=l,b.height*=l),r&&t.push(r);var{backgroundRepeat:E="no-repeat"}=e;if(k){if(e.backgroundImage&&(e.backgroundSize||e.backgroundPosition||e.backgroundRepeat)){var A=e8(k.width,k.height);if("repeat"===e.backgroundRepeat&&(w=ea({},k),S={x:0,y:0}),"contain"===e.backgroundSize)w=tY(rz(b,A,b)),S=e.backgroundPosition?e.backgroundPosition:tf((b.width-w.width)*.5,(b.height-w.height)*.5);else if("cover"===e.backgroundSize){var I=rI(b,A,b);w=tY(I),e.backgroundPosition?S=e.backgroundPosition:(S=tf(I.x,I.y),S=tf((b.width-w.width)*.5,(b.height-w.height)*.5))}else e.backgroundSize?(w=e.backgroundSize,S=e.backgroundPosition||{x:0,y:0}):e.backgroundPosition&&(w=ea({},k),S=e.backgroundPosition)}else if(e.text){var L=ea({},b);if(e.backgroundColor||e.strokeColor){T=void 0,P=void 0;var F={width:k.width/M*l,height:k.height/M*l},z=(e.width||F.width-64)*l,O=(e.height||F.height)*l;_.drawRect(ea(ea({},b),{},{width:z,height:O}),e.rotation,e.flipX,e.flipY,R,e.backgroundColor,void 0,void 0,void 0,!1,void 0,c,e.strokeColor,e.opacity,void 0,void 0,void 0,e.inverted)}var B=1;e.fontSize>1e3&&ao()&&(B=e.fontSize/1e3),C=e.color||[0,0,0],e._prerender&&(C[3]=0);var D=eh(e,L,l,B,k,0,32,0,32);b=D.rect,S=D.backgroundPosition,w=D.backgroundSize;var{textShadowX:N,textShadowY:W,textShadowBlur:j}=e;if(N||W||j){var V=Math.ceil(.5*j),H=Math.max(32,V),U=Math.max(32,V),G=ec(e,{id:e.id+"shadow",blur:j,paddingTop:V,paddingRight:H,paddingBottom:V,paddingLeft:U});if(G&&!e._prerender){t.push(G);var{rect:X,backgroundPosition:Z,backgroundSize:Y}=eh(e,L,l,B,_.textureGetSize(G),V,H,V,U),q=rm(b),K=rm(X);K.x+=N,K.y+=W;var J=tM(K,e.rotation,q),ee={x:J.x-.5*X.width,y:J.y-.5*X.height,width:X.width,height:X.height};e.height&&(ee.height-=W),_.drawRect(ee,e.rotation,e.flipX,e.flipY,[0,0,0,0],void 0,G,Y,Z,!1,void 0,void 0,void 0,e.opacity,void 0,0,e.textShadowColor)}}if(e.textOutlineWidth){var et=Math.ceil(.5*e.textOutlineWidth),er=32+et,ei=32+et,en=ec(e,{id:e.id+"outline",outline:e.textOutlineWidth,paddingTop:et,paddingRight:er,paddingBottom:et,paddingLeft:ei});if(en&&!e._prerender){var eo=_.textureGetSize(en);t.push(en);var{rect:el,backgroundPosition:es,backgroundSize:ed}=eh(e,L,l,B,eo,et,er,et,ei);_.drawRect(el,e.rotation,e.flipX,e.flipY,[0,0,0,0],void 0,en,ed,es,!1,void 0,void 0,void 0,e.opacity,void 0,0,e.textOutlineColor)}}}}if(_.drawRect(b,e.rotation,e.flipX,e.flipY,R,T,o,w,S,"repeat"===E,e.backgroundCorners&&dp(e.backgroundCorners),c,P,e.opacity,void 0,e.feather,C,e.inverted),a||n){e.backgroundColor&&0!==e.backgroundColor[3]||e.strokeColor&&e.strokeWidth||_.drawRect(b,e.rotation,e.flipX,e.flipY,R,n?[1,.2549,.2118,.25*e.opacity]:[0,0,0,.25*e.opacity]);var eu=rm(b);n&&ew(eu),a&&ex(eu)}}else r&&t.push(r)})},eg=0,em=[{x:-5,y:-5},{x:5,y:5}],e$=[{x:5,y:-5},{x:-5,y:5}],ey=rY({x:0,y:0},10,10,0,!1,!1,16);ey.length=9;var ex=e=>{eg=Date.now()/50,_.drawEllipse(e,15,15,0,!1,!1,[0,0,0,.5]);var t=tU(ey.map(t=>({x:t.x+e.x,y:t.y+e.y})),eg,e.x,e.y);_.drawPath(t,0,!1,!1,2,[1,1,1])},ew=e=>{_.drawEllipse(e,13,13,0,!1,!1,[1,.2549,.2118,.75]);var t=em.map(t=>({x:t.x+e.x,y:t.y+e.y})),r=e$.map(t=>({x:t.x+e.x,y:t.y+e.y}));_.drawPath(t,0,!1,!1,3,[1,1,1]),_.drawPath(r,0,!1,!1,3,[1,1,1])},eS=(e,t,r,a,n,o)=>_.drawRect(t,0,!1,!1,v,v,e,a,r,!0,void 0,0,void 0,o,void 0,void 0,n),eM=(e,t,r,a,n)=>{var o=tQ(t,t),l=en(m,"pixelated","repeat"),s=tf(-e.x%t,-e.y%t),c=tf(s.x+.5*o.width,s.y);eS(l,e,s,o,r,n),eS(l,e,c,o,a,n)},eT=!1,eP=!0,eR=!1,eE=[],eA=[],eI=[],eL=()=>{eI.length=0;var e=O[0],{manipulationShapes:t,manipulationShapesDirty:r,annotationShapes:a,annotationShapesDirty:n,interfaceShapes:u,decorationShapes:h,frameShapes:p,selectionShapes:g}=P({opacity:e.opacity,rotation:e.rotation,scale:e.scale,images:O,size:tQ(N,W),backgroundColor:[...d],selectionRect:c}),m=[...d],f=c,$=l6(s,0,1),b=l,w=Math.abs(-1+e.rotation.x/Math.PI*2),C=Math.abs(-1+e.rotation.y/Math.PI*2),T=w<.99||C<.99,E=ea({},e.size),A=e.backgroundColor,j=e.backgroundImage,V=t.length>0,H=a.length>0,U=A[3]>0,G=!!k&&S>=1;if($<1&&U){var X=m[0],Z=m[1],Y=m[2],q=1-$,K=A[0]*q,Q=A[1]*q,ee=A[2]*q,et=1-q;m[0]=K+X*et,m[1]=Q+Z*et,m[2]=ee+Y*et,m[3]=1}_.setCanvasColor(y?v:m),V&&(r||eT)?(_.disableMask(),_.drawToImageBlendBuffer(E),eE.length=0,ev(t,eE)):V||(eE.length=0),eI.push(...eE),eP&&(_.drawToImageOverlayBuffer(E,M),eP=!1);var er=H&&(n||eT);if(T?(er||!eR?(_.disableMask(),_.drawToImageOverlayBuffer(E,M),eA.length=0,ev(a,eA)):H||(eA.length=0),eR=!0):eR=!1,_.drawToCanvas(),_.enableMask(f,$),I&&F>=1&&2===L.length&&z&&eM(f,F,L[0],L[1],z),U&&_.drawRect(f,0,!1,!1,v,A),j){_.enableMask(f,1);var ei=Math.max(x.width/j.width,x.height/j.height),eo=j.width*ei,el=j.height*ei,es={x:x.x+.5*x.width-.5*eo,y:x.y+.5*x.height-.5*el,width:eo,height:el};_.drawRect(es,0,!1,!1,v,v,en(j,"linear")),_.enableMask(f,$)}if(G&&_.enablePreviewStencil(),eI.push(...[...O].reverse().map(e=>eu(ea(ea({},e),{},{texture:en(e.data),enableOverlay:T&&H,enableManipulation:V,enableAntialiasing:!0,mask:f,maskOpacity:$,overlayColor:b})))),_.enableMask(f,S),!T&&(G&&_.applyPreviewStencil(),_.resetCanvasMatrix(),_.updateCanvasMatrix(E,e.origin,e.translation,e.scale,e.rotation),eA.length=0,ev(a,eA),G&&_.disablePreviewStencil()),eI.push(...eA),_.resetCanvasMatrix(),_.enableMask(f,S),ev(h,eI),p.length){_.enableMask(f,1);var ec=p.filter(e=>!e.expandsCanvas),eh=p.filter(e=>e.expandsCanvas);ec.length&&ev(ec,eI),eh.length&&(_.enableMask({x:f.x+.5,y:f.y+.5,width:f.width-1,height:f.height-1},o),ev(eh,eI))}if(D&&g.length&&!T){_.resetCanvasMatrix(),_.updateCanvasMatrix(E,e.origin,e.translation,e.scale,e.rotation);var ep=[...D];ep[3]=.5,ev([{id:"selection",color:ep,actions:[...g]}].map(e=>J(e,E)),eI),_.resetCanvasMatrix()}_.disableMask(),ev(u,eI),B.forEach(e=>{if(_.enableMask(e.mask,e.maskOpacity),e.backgroundColor){var t=j&&rI(ea({},e.mask),j.width/j.height),r=j&&en(j,"linear");_.drawRect(e.mask,0,!1,!1,e.maskCornerRadius,e.backgroundColor,r,t,t,void 0,void 0,void 0,void 0,e.opacity,e.maskFeather),r&&eI.push(r)}var a=eu(ea(ea({},e),{},{texture:en(e.data),enableAntialiasing:!1,translation:{x:e.translation.x+e.offset.x-.5*N,y:e.translation.y+e.offset.y-.5*W}}));eI.push(a)}),_.disableMask(),ed(eI),R(),eT=!1},eF=0,eO=()=>{clearTimeout(p);var e=Date.now();if(e-eF<48){p=setTimeout(eO,48);return}eF=e,eL()},eB=()=>dc()?eO:eL;return o7(()=>n()),o8(()=>r(30,_=cU(u,{alpha:y}))),o9(()=>{_&&(el.forEach(e=>{var{canvas:t}=e;return ek(t)}),el.clear(),_.release(),r(30,_=void 0),r(0,u=void 0))}),e.$$set=e=>{"isAnimated"in e&&r(9,$=e.isAnimated),"isTransparent"in e&&r(10,y=e.isTransparent),"maskRect"in e&&r(11,x=e.maskRect),"maskOpacity"in e&&r(12,b=e.maskOpacity),"maskFrameOpacity"in e&&r(13,w=e.maskFrameOpacity),"maskMarkupOpacity"in e&&r(14,S=e.maskMarkupOpacity),"clipAnnotationsToImage"in e&&r(15,k=e.clipAnnotationsToImage),"pixelRatio"in e&&r(16,C=e.pixelRatio),"textPixelRatio"in e&&r(17,M=e.textPixelRatio),"backgroundColor"in e&&r(18,T=e.backgroundColor),"willRender"in e&&r(19,P=e.willRender),"didRender"in e&&r(20,R=e.didRender),"willRequest"in e&&r(21,E=e.willRequest),"loadImageData"in e&&r(22,A=e.loadImageData),"enableGrid"in e&&r(23,I=e.enableGrid),"gridColors"in e&&r(24,L=e.gridColors),"gridSize"in e&&r(25,F=e.gridSize),"gridOpacity"in e&&r(26,z=e.gridOpacity),"images"in e&&r(27,O=e.images),"interfaceImages"in e&&r(28,B=e.interfaceImages),"selectionColor"in e&&r(29,D=e.selectionColor)},e.$$.update=()=>{1&e.$$.dirty[0]&&u&&r(31,H=du(getComputedStyle(u).getPropertyValue("--color-transition-duration"))),262656&e.$$.dirty[0]|1&e.$$.dirty[1]&&T&&U.set(T,{duration:$?H:0}),4096&e.$$.dirty[0]&&j(G,iG(b)?b:1),8192&e.$$.dirty[0]&&j(X,iG(w)?w:1),2048&e.$$.dirty[0]&&x&&Z.set(x),24&e.$$.dirty[1]&&d&&Y.set([d[0],d[1],d[2],l6(s,0,1)]),1207959558&e.$$.dirty[0]&&r(33,a=!!(_&&N&&W&&O.length)),1073807366&e.$$.dirty[0]&&N&&W&&_&&(eF=0,_.resize(N,W,C)),4&e.$$.dirty[1]&&r(32,n=a?eB():ep),6&e.$$.dirty[1]&&a&&n&&n()},[u,N,W,f,U,G,X,Z,Y,$,y,x,b,w,S,k,C,M,T,P,R,E,A,I,L,F,z,O,B,D,_,H,n,a,s,d,function(e){ln[e?"unshift":"push"](()=>{r(0,u=e)})},e=>{r(1,N=e.detail.width),r(2,W=e.detail.height),f("measure",{width:N,height:W})}]}class d$ extends lz{constructor(e){super(),lF(this,e,df,dm,ow,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,loadImageData:22,enableGrid:23,gridColors:24,gridSize:25,gridOpacity:26,images:27,interfaceImages:28,selectionColor:29},null,[-1,-1,-1])}}var dy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Boolean,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return e.filter(t).join(r)};function dx(e,t,r){var a=e.slice();return a[17]=t[r],a}var db=e=>({tab:4&e}),dw=e=>({tab:e[17]});function dS(e){for(var t,r,a,n=[],o=new Map,l=e[2],s=e=>e[17].id,c=0;c<l.length;c+=1){var d=dx(e,l,c),u=s(d);o.set(u,n[c]=dk(u,d))}return{c(){t=oH("ul");for(var a=0;a<n.length;a+=1)n[a].c();oq(t,"class",r=dy(["PinturaTabList",e[0]])),oq(t,"role","tablist"),oq(t,"data-layout",e[1])},m(r,o){oj(r,t,o);for(var l=0;l<n.length;l+=1)n[l].m(t,null);e[14](t),a=!0},p(e,c){1124&c&&(l=e[2],l$(),n=lT(n,c,s,1,e,l,o,t,lM,dk,null,dx),ly()),(!a||1&c&&r!==(r=dy(["PinturaTabList",e[0]])))&&oq(t,"class",r),(!a||2&c)&&oq(t,"data-layout",e[1])},i(e){if(!a){for(var t=0;t<l.length;t+=1)lx(n[t]);a=!0}},o(e){for(var t=0;t<n.length;t+=1)lb(n[t]);a=!1},d(r){r&&oV(t);for(var a=0;a<n.length;a+=1)n[a].d();e[14](null)}}}function dk(e,t){var r,a,n,o,l,s,c,d,u,h,p=t[11].default,v=oM(p,t,t[10],dw);function g(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return t[12](t[17],...r)}function m(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return t[13](t[17],...r)}return{key:e,first:null,c(){r=oH("li"),a=oH("button"),v&&v.c(),o=oX(),oq(a,"type","button"),a.disabled=n=t[17].disabled,oq(r,"role","tab"),oq(r,"aria-controls",l=t[17].href.substr(1)),oq(r,"id",s=t[17].tabId),oq(r,"aria-selected",c=t[17].selected),this.first=r},m(e,t){oj(e,r,t),oN(r,a),v&&v.m(a,null),oN(r,o),d=!0,u||(h=[oY(a,"keydown",g),oY(a,"click",m)],u=!0)},p(e,o){t=e,v&&v.p&&(!d||1028&o)&&oR(v,p,t,t[10],d?oP(p,t[10],o,db):oE(t[10]),dw),(!d||4&o&&n!==(n=t[17].disabled))&&(a.disabled=n),(!d||4&o&&l!==(l=t[17].href.substr(1)))&&oq(r,"aria-controls",l),(!d||4&o&&s!==(s=t[17].tabId))&&oq(r,"id",s),(!d||4&o&&c!==(c=t[17].selected))&&oq(r,"aria-selected",c)},i(e){d||(lx(v,e),d=!0)},o(e){lb(v,e),d=!1},d(e){e&&oV(r),v&&v.d(e),u=!1,ox(h)}}}function dC(e){var t,r,a=e[4]&&dS(e);return{c(){a&&a.c(),t=oZ()},m(e,n){a&&a.m(e,n),oj(e,t,n),r=!0},p(e,r){var[n]=r;e[4]?a?(a.p(e,n),16&n&&lx(a,1)):((a=dS(e)).c(),lx(a,1),a.m(t.parentNode,t)):a&&(l$(),lb(a,1,1,()=>{a=null}),ly())},i(e){r||(lx(a),r=!0)},o(e){lb(a),r=!1},d(e){a&&a.d(e),e&&oV(t)}}}function dM(e,t,r){var a,n,o,{$$slots:l={},$$scope:s}=t,{class:c}=t,{name:d}=t,{selected:u}=t,{tabs:h=[]}=t,{layout:p}=t,v=le(),g=e=>{var t=o.querySelectorAll('[role="tab"] button')[e];t&&t.focus()},m=(e,t)=>{e.preventDefault(),e.stopPropagation(),v("select",t)},f=(e,t)=>{var{key:r}=e;if(/arrow/i.test(r)){var a=h.findIndex(e=>e.id===t);if(/right|down/i.test(r))return g(a<h.length-1?a+1:0);if(/left|up/i.test(r))return g(a>0?a-1:h.length-1)}};return e.$$set=e=>{"class"in e&&r(0,c=e.class),"name"in e&&r(7,d=e.name),"selected"in e&&r(8,u=e.selected),"tabs"in e&&r(9,h=e.tabs),"layout"in e&&r(1,p=e.layout),"$$scope"in e&&r(10,s=e.$$scope)},e.$$.update=()=>{896&e.$$.dirty&&r(2,a=h.map(e=>{var t=e.id===u;return ea(ea({},e),{},{tabId:"tab-".concat(d,"-").concat(e.id),href:"#panel-".concat(d,"-").concat(e.id),selected:t})})),4&e.$$.dirty&&r(4,n=a.length>1)},[c,p,a,o,n,m,f,d,u,h,s,l,(e,t)=>f(t,e.id),(e,t)=>m(t,e.id),function(e){ln[e?"unshift":"push"](()=>{r(3,o=e)})}]}class dT extends lz{constructor(e){super(),lF(this,e,dM,dC,ow,{class:0,name:7,selected:8,tabs:9,layout:1})}}var dP=e=>({panel:16&e}),dR=e=>({panel:e[4][0].id,panelIsActive:!0});function dE(e,t,r){var a=e.slice();return a[14]=t[r].id,a[15]=t[r].shouldDraw,a[16]=t[r].panelId,a[17]=t[r].tabindex,a[18]=t[r].labelledBy,a[19]=t[r].isActive,a[20]=t[r].hidden,a[3]=t[r].visible,a}var dA=e=>({panel:16&e,panelIsActive:16&e}),dI=e=>({panel:e[14],panelIsActive:e[19]});function dL(e){var t,r,a,n,o,l,s=e[11].default,c=oM(s,e,e[10],dR);return{c(){t=oH("div"),r=oH("div"),c&&c.c(),oq(r,"class",a=dy([e[1]])),oq(t,"class",e[0]),oq(t,"style",e[2])},m(a,s){oj(a,t,s),oN(t,r),c&&c.m(r,null),n=!0,o||(l=[oY(t,"measure",e[13]),oF(dr.call(null,t))],o=!0)},p(e,o){c&&c.p&&(!n||1040&o)&&oR(c,s,e,e[10],n?oP(s,e[10],o,dP):oE(e[10]),dR),(!n||2&o&&a!==(a=dy([e[1]])))&&oq(r,"class",a),(!n||1&o)&&oq(t,"class",e[0]),(!n||4&o)&&oq(t,"style",e[2])},i(e){n||(lx(c,e),n=!0)},o(e){lb(c,e),n=!1},d(e){e&&oV(t),c&&c.d(e),o=!1,ox(l)}}}function dF(e){for(var t,r,a,n,o,l=[],s=new Map,c=e[4],d=e=>e[14],u=0;u<c.length;u+=1){var h=dE(e,c,u),p=d(h);s.set(p,l[u]=dO(p,h))}return{c(){t=oH("div");for(var a=0;a<l.length;a+=1)l[a].c();oq(t,"class",r=dy(["PinturaTabPanels",e[0]])),oq(t,"style",e[2])},m(r,s){oj(r,t,s);for(var c=0;c<l.length;c+=1)l[c].m(t,null);a=!0,n||(o=[oY(t,"measure",e[12]),oF(dr.call(null,t,{observePosition:!0}))],n=!0)},p(e,n){1042&n&&(c=e[4],l$(),l=lT(l,n,d,1,e,c,s,t,lM,dO,null,dE),ly()),(!a||1&n&&r!==(r=dy(["PinturaTabPanels",e[0]])))&&oq(t,"class",r),(!a||4&n)&&oq(t,"style",e[2])},i(e){if(!a){for(var t=0;t<c.length;t+=1)lx(l[t]);a=!0}},o(e){for(var t=0;t<l.length;t+=1)lb(l[t]);a=!1},d(e){e&&oV(t);for(var r=0;r<l.length;r+=1)l[r].d();n=!1,ox(o)}}}function dz(e){var t,r=e[11].default,a=oM(r,e,e[10],dI);return{c(){a&&a.c()},m(e,r){a&&a.m(e,r),t=!0},p(e,n){a&&a.p&&(!t||1040&n)&&oR(a,r,e,e[10],t?oP(r,e[10],n,dA):oE(e[10]),dI)},i(e){t||(lx(a,e),t=!0)},o(e){lb(a,e),t=!1},d(e){a&&a.d(e)}}}function dO(e,t){var r,a,n,o,l,s,c,d,u,h=t[15]&&dz(t);return{key:e,first:null,c(){r=oH("div"),h&&h.c(),a=oX(),oq(r,"class",n=dy(["PinturaTabPanel",t[1]])),r.hidden=o=t[20],oq(r,"id",l=t[16]),oq(r,"tabindex",s=t[17]),oq(r,"aria-labelledby",c=t[18]),oq(r,"data-inert",d=!t[3]),this.first=r},m(e,t){oj(e,r,t),h&&h.m(r,null),oN(r,a),u=!0},p(e,p){(t=e)[15]?h?(h.p(t,p),16&p&&lx(h,1)):((h=dz(t)).c(),lx(h,1),h.m(r,a)):h&&(l$(),lb(h,1,1,()=>{h=null}),ly()),(!u||2&p&&n!==(n=dy(["PinturaTabPanel",t[1]])))&&oq(r,"class",n),(!u||16&p&&o!==(o=t[20]))&&(r.hidden=o),(!u||16&p&&l!==(l=t[16]))&&oq(r,"id",l),(!u||16&p&&s!==(s=t[17]))&&oq(r,"tabindex",s),(!u||16&p&&c!==(c=t[18]))&&oq(r,"aria-labelledby",c),(!u||16&p&&d!==(d=!t[3]))&&oq(r,"data-inert",d)},i(e){u||(lx(h),u=!0)},o(e){lb(h),u=!1},d(e){e&&oV(r),h&&h.d()}}}function dB(e){var t,r,a,n,o=[dF,dL],l=[];return r=l[t=e[5]?0:1]=o[t](e),{c(){r.c(),a=oZ()},m(e,r){l[t].m(e,r),oj(e,a,r),n=!0},p(e,n){var[s]=n,c=t;(t=e[5]?0:1)===c?l[t].p(e,s):(l$(),lb(l[c],1,1,()=>{l[c]=null}),ly(),(r=l[t])?r.p(e,s):(r=l[t]=o[t](e)).c(),lx(r,1),r.m(a.parentNode,a))},i(e){n||(lx(r),n=!0)},o(e){lb(r),n=!1},d(e){l[t].d(e),e&&oV(a)}}}function dD(e,t,r){var a,n,{$$slots:o={},$$scope:l}=t,{class:s}=t,{name:c}=t,{selected:d}=t,{panelClass:u}=t,{panels:h=[]}=t,{visible:p}=t,{style:v}=t,g={};return e.$$set=e=>{"class"in e&&r(0,s=e.class),"name"in e&&r(6,c=e.name),"selected"in e&&r(7,d=e.selected),"panelClass"in e&&r(1,u=e.panelClass),"panels"in e&&r(8,h=e.panels),"visible"in e&&r(3,p=e.visible),"style"in e&&r(2,v=e.style),"$$scope"in e&&r(10,l=e.$$scope)},e.$$.update=()=>{968&e.$$.dirty&&r(4,a=h.map(e=>{var t=e===d;t&&r(9,g[e]=!0,g);var a=p?-1!==p.indexOf(e):t;return{id:e,panelId:"panel-".concat(c,"-").concat(e),labelledBy:"tab-".concat(c,"-").concat(e),isActive:t,hidden:!t,visible:a,tabindex:t?0:-1,shouldDraw:t||g[e]}})),16&e.$$.dirty&&r(5,n=a.length>1)},[s,u,v,p,a,n,c,d,h,g,l,o,function(t){li.call(this,e,t)},function(t){li.call(this,e,t)}]}class d_ extends lz{constructor(e){super(),lF(this,e,dD,dB,ow,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var dN=e=>{var t=Object.getOwnPropertyDescriptors(e.prototype);return Object.keys(t).filter(e=>!!t[e].get)};function dW(e){var t,r,a,n,o,l,s=[e[4]];function c(t){e[22](t)}var d=e[10];function u(e){for(var t={},r=0;r<s.length;r+=1)t=of(t,s[r]);return void 0!==e[2]&&(t.name=e[2]),{props:t}}return d&&(t=d,r=u(e),a=new t(r),ln.push(()=>lE(a,"name",c)),e[23](a),a.$on("measure",e[11])),{c(){a&&lA(a.$$.fragment),o=oZ()},m(e,t){a&&lI(a,e,t),oj(e,o,t),l=!0},p(e,t){var r=16&t[0]?lP(s,[lR(e[4])]):{};if(!n&&4&t[0]&&(n=!0,r.name=e[2],lh(()=>n=!1)),d!==(d=e[10])){if(a){l$();var l,h,p=a;lb(p.$$.fragment,1,0,()=>{lL(p,1)}),ly()}d?(l=d,h=u(e),a=new l(h),ln.push(()=>lE(a,"name",c)),e[23](a),a.$on("measure",e[11]),lA(a.$$.fragment),lx(a.$$.fragment,1),lI(a,o.parentNode,o)):a=null}else d&&a.$set(r)},i(e){l||(a&&lx(a.$$.fragment,e),l=!0)},o(e){a&&lb(a.$$.fragment,e),l=!1},d(t){e[23](null),t&&oV(o),a&&lL(a,t)}}}function dj(e){var t,r,a,n=e[5]&&dW(e);return{c(){t=oH("div"),n&&n.c(),oq(t,"data-util",e[2]),oq(t,"class",r=dy(["PinturaUtilPanel",e[1]])),oq(t,"style",e[6])},m(r,o){oj(r,t,o),n&&n.m(t,null),e[24](t),a=!0},p(e,o){e[5]?n?(n.p(e,o),32&o[0]&&lx(n,1)):((n=dW(e)).c(),lx(n,1),n.m(t,null)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),(!a||4&o[0])&&oq(t,"data-util",e[2]),(!a||2&o[0]&&r!==(r=dy(["PinturaUtilPanel",e[1]])))&&oq(t,"class",r),(!a||64&o[0])&&oq(t,"style",e[6])},i(e){a||(lx(n),a=!0)},o(e){lb(n),a=!1},d(r){r&&oV(t),n&&n.d(),e[24](null)}}}function dV(e,t,r){var a,n,o,l,s,c,d,u,h,p,v=le(),{isActive:g=!0}=t,{stores:m}=t,{content:f}=t,{component:$}=t,{locale:y}=t,{class:x}=t,b=lr("isAnimated");oC(e,b,e=>r(21,d=e));var w=cJ(0),S=l_(w,e=>l6(e,0,1));oC(e,S,e=>r(20,c=e));var k=!g,C=lD(g);oC(e,C,e=>r(25,s=e));var M={isActive:l_(C,(a=eo(function*(e,t){if(!e)return t(e);yield(ld(),ls),t(e)}),function(e,t){return a.apply(this,arguments)})),isActiveFraction:l_(S,e=>e),isVisible:l_(S,e=>e>0)},T=f.view,P=dN(T),R=Object.keys(f.props||{}).reduce((e,t)=>(P.includes(t)&&(e[t]=f.props[t]),e),{}),E=Object.keys(M).reduce((e,t)=>(P.includes(t)&&(e[t]=M[t]),e),{}),A=e=>{r(17,u=ea({},e.detail)),L&&g&&v("measure",ea({},u))};lt("measurable",dr);var I=o6().$$.context,L=!1;return o8(()=>{if(r(19,L=!0),!l){r(0,$=new T({target:p,props:ea({},o),context:I})),r(2,h=$.name);var e=$.$on("measure",A);return()=>{e(),$.$destroy()}}}),e.$$set=e=>{"isActive"in e&&r(12,g=e.isActive),"stores"in e&&r(13,m=e.stores),"content"in e&&r(14,f=e.content),"component"in e&&r(0,$=e.component),"locale"in e&&r(15,y=e.locale),"class"in e&&r(1,x=e.class)},e.$$.update=()=>{135169&e.$$.dirty[0]&&u&&g&&$&&v("measure",u),2101248&e.$$.dirty[0]&&w.set(g?1:0,{hard:!1===d}),1310720&e.$$.dirty[0]&&(c<=0&&!k?r(18,k=!0):c>0&&k&&r(18,k=!1)),786432&e.$$.dirty[0]&&L&&v(k?"hide":"show"),1048576&e.$$.dirty[0]&&v("fade",c),1048576&e.$$.dirty[0]&&r(6,n=c<1?"opacity: ".concat(c):void 0),4096&e.$$.dirty[0]&&oL(C,s=g,s),40960&e.$$.dirty[0]&&r(4,o=ea(ea(ea({},R),E),{},{stores:m,locale:y}))},r(5,l=!P.includes("external")),[$,x,h,p,o,l,n,b,S,C,T,A,g,m,f,y,w,u,k,L,c,d,function(e){r(2,h=e)},function(e){ln[e?"unshift":"push"](()=>{r(0,$=e)})},function(e){ln[e?"unshift":"push"](()=>{r(3,p=e)})}]}class dH extends lz{constructor(e){super(),lF(this,e,dV,dj,ow,{isActive:12,stores:13,content:14,component:0,locale:15,class:1,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function dU(e){var t,r,a,n=e[5].default,o=oM(n,e,e[4],null);return{c(){t=oU("svg"),o&&o.c(),oq(t,"class",e[3]),oq(t,"style",e[2]),oq(t,"width",e[0]),oq(t,"height",e[1]),oq(t,"viewBox",r="0 0 "+e[0]+"\n    "+e[1]),oq(t,"xmlns","http://www.w3.org/2000/svg"),oq(t,"aria-hidden","true"),oq(t,"focusable","false"),oq(t,"stroke-linecap","round"),oq(t,"stroke-linejoin","round")},m(e,r){oj(e,t,r),o&&o.m(t,null),a=!0},p(e,l){var[s]=l;o&&o.p&&(!a||16&s)&&oR(o,n,e,e[4],a?oP(n,e[4],s,null):oE(e[4]),null),(!a||8&s)&&oq(t,"class",e[3]),(!a||4&s)&&oq(t,"style",e[2]),(!a||1&s)&&oq(t,"width",e[0]),(!a||2&s)&&oq(t,"height",e[1]),(!a||3&s&&r!==(r="0 0 "+e[0]+"\n    "+e[1]))&&oq(t,"viewBox",r)},i(e){a||(lx(o,e),a=!0)},o(e){lb(o,e),a=!1},d(e){e&&oV(t),o&&o.d(e)}}}function dG(e,t,r){var{$$slots:a={},$$scope:n}=t,{width:o=24}=t,{height:l=24}=t,{style:s}=t,{class:c}=t;return e.$$set=e=>{"width"in e&&r(0,o=e.width),"height"in e&&r(1,l=e.height),"style"in e&&r(2,s=e.style),"class"in e&&r(3,c=e.class),"$$scope"in e&&r(4,n=e.$$scope)},[o,l,s,c,n,a]}class dX extends lz{constructor(e){super(),lF(this,e,dG,dU,ow,{width:0,height:1,style:2,class:3})}}var dZ=(e,t)=>t===e.target||t.contains(e.target),dY=e=>e.map(e=>"CMD"===e?ik()?"⌘":"Ctrl":e).join("+"),dq=(e,t,r)=>(ez(t)?t:e)+(r?" (".concat(dY(r),")"):"");function dK(e){var t,r;return t=new dX({props:{class:"PinturaButtonIcon",$$slots:{default:[dJ]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};536870920&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function dJ(e){var t;return{c(){t=oU("g")},m(r,a){oj(r,t,a),t.innerHTML=e[3]},p(e,r){8&r&&(t.innerHTML=e[3])},d(e){e&&oV(t)}}}function dQ(e){var t;return{c(){oq(t=oH("span"),"class",e[11])},m(r,a){oj(r,t,a),t.innerHTML=e[0]},p(e,r){1&r&&(t.innerHTML=e[0]),2048&r&&oq(t,"class",e[11])},d(e){e&&oV(t)}}}function d1(e){var t,r,a,n,o,l,s,c,d,u,h,p=e[27].default,v=oM(p,e,e[29],null),g=v||(o=(t=e)[3]&&dK(t),l=t[0]&&dQ(t),{c(){r=oH("span"),o&&o.c(),a=oX(),l&&l.c(),oq(r,"class",t[13])},m(e,t){oj(e,r,t),o&&o.m(r,null),oN(r,a),l&&l.m(r,null),n=!0},p(e,t){e[3]?o?(o.p(e,t),8&t&&lx(o,1)):((o=dK(e)).c(),lx(o,1),o.m(r,a)):o&&(l$(),lb(o,1,1,()=>{o=null}),ly()),e[0]?l?l.p(e,t):((l=dQ(e)).c(),l.m(r,null)):l&&(l.d(1),l=null),(!n||8192&t)&&oq(r,"class",e[13])},i(e){n||(lx(o),n=!0)},o(e){lb(o),n=!1},d(e){e&&oV(r),o&&o.d(),l&&l.d()}});return{c(){s=oH("button"),g&&g.c(),oq(s,"type",e[6]),oq(s,"style",e[4]),s.disabled=e[5],oq(s,"class",e[12]),oq(s,"title",c=dq(e[0],e[1],e[2]))},m(t,r){oj(t,s,r),g&&g.m(s,null),e[28](s),d=!0,u||(h=[oY(s,"keydown",function(){ob(e[8])&&e[8].apply(this,arguments)}),oY(s,"click",function(){ob(e[7])&&e[7].apply(this,arguments)}),oY(s,"pointerdown",function(){ob(e[14])&&e[14].apply(this,arguments)}),oF(e[9].call(null,s))],u=!0)},p(t,r){var[a]=r;e=t,v?v.p&&(!d||536870912&a)&&oR(v,p,e,e[29],d?oP(p,e[29],a,null):oE(e[29]),null):g&&g.p&&(!d||10249&a)&&g.p(e,d?a:-1),(!d||64&a)&&oq(s,"type",e[6]),(!d||16&a)&&oq(s,"style",e[4]),(!d||32&a)&&(s.disabled=e[5]),(!d||4096&a)&&oq(s,"class",e[12]),(!d||7&a&&c!==(c=dq(e[0],e[1],e[2])))&&oq(s,"title",c)},i(e){d||(lx(g,e),d=!0)},o(e){lb(g,e),d=!1},d(t){t&&oV(s),g&&g.d(t),e[28](null),u=!1,ox(h)}}}function d0(e,t,r){var a,n,o,l,s,c,d,{$$slots:u={},$$scope:h}=t,{class:p}=t,{label:v}=t,{title:g}=t,{shortcut:m}=t,{labelClass:f}=t,{innerClass:$}=t,{hideLabel:y=!1}=t,{icon:x}=t,{style:b}=t,{disabled:w}=t,{type:S="button"}=t,{onclick:k}=t,{onkeydown:C}=t,{onhold:M}=t,{action:T=()=>{}}=t,{holdThreshold:P=500}=t,{holdSpeedUpFactor:R=.5}=t,{holdSpeedMin:E=20}=t,A=e=>{r(25,c=setTimeout(()=>{M(),A(Math.max(e*R,E))},e))};return e.$$set=e=>{"class"in e&&r(15,p=e.class),"label"in e&&r(0,v=e.label),"title"in e&&r(1,g=e.title),"shortcut"in e&&r(2,m=e.shortcut),"labelClass"in e&&r(16,f=e.labelClass),"innerClass"in e&&r(17,$=e.innerClass),"hideLabel"in e&&r(18,y=e.hideLabel),"icon"in e&&r(3,x=e.icon),"style"in e&&r(4,b=e.style),"disabled"in e&&r(5,w=e.disabled),"type"in e&&r(6,S=e.type),"onclick"in e&&r(7,k=e.onclick),"onkeydown"in e&&r(8,C=e.onkeydown),"onhold"in e&&r(19,M=e.onhold),"action"in e&&r(9,T=e.action),"holdThreshold"in e&&r(20,P=e.holdThreshold),"holdSpeedUpFactor"in e&&r(21,R=e.holdSpeedUpFactor),"holdSpeedMin"in e&&r(22,E=e.holdSpeedMin),"$$scope"in e&&r(29,h=e.$$scope)},e.$$.update=()=>{101187584&e.$$.dirty&&r(26,n=M?()=>{c&&(clearTimeout(c),r(25,c=void 0),document.documentElement.removeEventListener("pointerup",n))}:ep),68681728&e.$$.dirty&&r(14,a=M?()=>{document.documentElement.addEventListener("pointerup",n),A(P)}:ep),131072&e.$$.dirty&&r(13,o=dy(["PinturaButtonInner",$])),294912&e.$$.dirty&&r(12,l=dy(["PinturaButton",y&&"PinturaButtonIconOnly",p])),327680&e.$$.dirty&&r(11,s=dy([y?"implicit":"PinturaButtonLabel",f]))},[v,g,m,x,b,w,S,k,C,T,d,s,l,o,a,p,f,$,y,M,P,R,E,e=>dZ(e,d),()=>d,c,n,u,function(e){ln[e?"unshift":"push"](()=>{r(10,d=e)})},h]}class d2 extends lz{constructor(e){super(),lF(this,e,d0,d1,ow,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var d4=(e,t)=>{var r=e.findIndex(t);if(r>=0)return e.splice(r,1)},d5=e=>iG(e.button)&&0!==e.button,d3=function(e){var t,r,a,n,o,l,s,c,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{inertia:u=!1,inertiaDurationMultiplier:h=80,shouldStartInteraction:p=()=>!0,pinch:v=!1,multiTouch:g,getEventPosition:m=e=>tf(e.clientX,e.clientY),observeKeys:f=!1}=d;function $(t,r){e.dispatchEvent(new CustomEvent(t,{detail:r}))}function y(){n&&n(),n=void 0}var x=[],b=e=>0===e.timeStamp?Date.now():e.timeStamp,w=e=>{var t=b(e),r={timeStamp:t,timeStampInitial:t,position:m(e),origin:m(e),velocity:tm(),velocityHistory:[],velocityAverage:tm(),translation:tm(),interactionState:void 0,event:e};x.push(r),r.interactionState=L(x)},S=e=>{var t=d4(x,t=>t.event.pointerId===e.pointerId);if(t)return t[0]},k=()=>{x.length=0},C=e=>x.findIndex(t=>t.event.pointerId===e.pointerId),M=()=>{var e=tw(x[0].position);if(x[1]){var t=(x[1].position.x-e.x)*.5,r=(x[1].position.y-e.y)*.5;e.x+=t,e.y+=r}return e},T=e=>{e.origin.x=e.position.x,e.origin.y=e.position.y,e.translation.x=0,e.translation.y=0},P=e=>{var t=R(e);if(t){var r=b(e),a=m(e),n=Math.max(1,r-t.timeStamp);t.velocity.x=(a.x-t.position.x)/n,t.velocity.y=(a.y-t.position.y)/n,t.velocityHistory.push(tw(t.velocity)),t.velocityHistory=t.velocityHistory.slice(-3),t.velocityAverage=t.velocityHistory.reduce((e,t,r,a)=>(e.x+=t.x/a.length,e.y+=t.y/a.length,e),tm()),t.translation.x=a.x-t.origin.x,t.translation.y=a.y-t.origin.y,t.timeStamp=r,t.position.x=a.x,t.position.y=a.y,t.event=e}},R=e=>{var t=C(e);if(!(t<0))return x[t]},E=()=>1===x.length,A=()=>2===x.length,I=(e,t)=>e.reduce((e,r)=>e+=tW(t,r.position),0)/e.length,L=e=>{var t=tV(e.map(e=>e.position));return{center:t,distance:I(e,t),velocity:tV(e.map(e=>e.velocity)),translation:tV(e.map(e=>e.translation))}},F=0,z=void 0;e.addEventListener("pointerdown",N);var O=["Meta","Control","Alt","Shift"];function B(e){if(O.includes(e.key)){var{metaKey:t,ctrlKey:r,altKey:a,shiftKey:n}=e;_({metaKey:t,ctrlKey:r,altKey:a,shiftKey:n})}}var D=Date.now(),_=e=>{var t=tw(x[0].translation),r=s;v&&A()&&(r*=tW(x[0].position,x[1].position)/o,tF(t,x[1].translation)),tF(t,l);var a=Date.now();a-D<16||(D=a,$("interactionupdate",ea({position:M(),translation:t,scalar:v?r:void 0,isMultiTouching:A()},e)))};function N(t){if(!(A()||d5(t))&&p(t,e)){if(y(),w(t),f&&(window.addEventListener("keydown",B),window.addEventListener("keyup",B)),E())document.documentElement.addEventListener("pointermove",W),document.documentElement.addEventListener("pointerup",j),document.documentElement.addEventListener("pointercancel",j),document.addEventListener("visibilitychange",H),c=!1,s=1,l=tm(),o=void 0,$("interactionstart",{origin:tw(R(t).origin)});else if(v)c=!0,o=tW(x[0].position,x[1].position),l.x+=x[0].translation.x,l.y+=x[0].translation.y,T(x[0]);else if(!1===g)return k(),G(),$("interactioncancel")}}function W(e){e.preventDefault(),P(e);var{metaKey:t=!1,ctrlKey:r=!1,altKey:a=!1,shiftKey:n=!1}=f?e:{};_({metaKey:t,ctrlKey:r,altKey:a,shiftKey:n})}function j(e){if(R(e)){var d=M(),p=S(e);if(v&&E()){var g=tW(x[0].position,p.position);s*=g/o,l.x+=x[0].translation.x+p.translation.x,l.y+=x[0].translation.y+p.translation.y,T(x[0])}var m=!1,f=!1;if(!c&&p){var y=performance.now(),b=y-p.timeStampInitial;m=64>tN(p.translation)&&b<300,f=!!(z&&m&&y-F<700&&128>tN(z,p.position)),m&&(z=tw(p.position),F=y)}if(!(x.length>0)){G();var w=tw(p.translation),k=tw(p.velocityAverage),C=!1;$("interactionrelease",{isTap:m,isDoubleTap:f,position:d,translation:w,scalar:s,preventInertia:()=>C=!0});var P=tW(k);if(C||!u||P<.25)return U(w,{isTap:m,isDoubleTap:f});r=tw(d),a=tw(w),(t=cK(tw(w),{easing:cY,duration:P*h})).set({x:w.x+50*k.x,y:w.y+50*k.y}).then(()=>{n&&U(ok(t),{isTap:m,isDoubleTap:f})}),n=t.subscribe(V)}}}function V(e){e&&$("interactionupdate",{position:tf(r.x+(e.x-a.x),r.y+(e.y-a.y)),translation:e,scalar:v?s:void 0})}function H(e){if("visible"!==document.visibilityState&&x.length){var t=L(x);y(),$("interactionend",ea({},t)),x.length=0,G()}}function U(e,t){y(),$("interactionend",ea(ea({},t),{},{translation:e,scalar:v?s:void 0}))}function G(){f&&window.removeEventListener("keydown",B),f&&window.removeEventListener("keyup",B),document.documentElement.removeEventListener("pointermove",W),document.documentElement.removeEventListener("pointerup",j),document.documentElement.removeEventListener("pointercancel",j),document.addEventListener("visibilitychange",H)}return{destroy(){y(),e.removeEventListener("pointerdown",N)}}},d6=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{direction:r,shiftMultiplier:a=10,bubbles:n=!1,preventDefault:o=!1,stopKeydownPropagation:l=!0}=t,s="horizontal"===r,c="vertical"===r,d=t=>{var{key:r}=t,d=t.shiftKey,u=/up|down/i.test(r),h=/left|right/i.test(r);if((h||u)&&(!s||!u)&&(!c||!h)){var p=d?a:1;l&&t.stopPropagation(),o&&t.preventDefault(),e.dispatchEvent(new CustomEvent("nudge",{bubbles:n,detail:tf((/left/i.test(r)?-1:/right/i.test(r)?1:0)*p,(/up/i.test(r)?-1:/down/i.test(r)?1:0)*p)}))}};return e.addEventListener("keydown",d),{destroy(){e.removeEventListener("keydown",d)}}};function d8(e,t){return t?t*Math.sign(e)*Math.log10(1+Math.abs(e)/t):e}var d7=(e,t,r)=>{if(!t||!r)return ea({},e);var a=e.x+d8(t.x-e.x,r),n=e.x+e.width+d8(t.x+t.width-(e.x+e.width),r),o=e.y+d8(t.y-e.y,r);return{x:a,y:o,width:n-a,height:e.y+e.height+d8(t.y+t.height-(e.y+e.height),r)-o}},d9=(e,t,r)=>t&&r?tf(e.x+d8(t.x-e.x,r),e.y+d8(t.y-e.y,r)):ea({},e),ue=(e,t)=>{if(e){if(/em/.test(e))return 16*parseInt(e,10);if(/px/.test(e))return parseInt(e,10)}},ut=e=>{var t=e.detail||0,{deltaX:r,deltaY:a,wheelDelta:n,wheelDeltaX:o,wheelDeltaY:l}=e;return iG(o)&&Math.abs(o)>Math.abs(l)?t=-(o/120):iG(r)&&Math.abs(r)>Math.abs(a)?t=r/20:(n||l)&&(t=-((n||l)/120)),t||(t=a/20),(ao()||ie())&&(t*=2),t};function ur(e){var t,r,a,n,o,l,s,c=e[36].default,d=oM(c,e,e[35],null);return{c(){t=oH("div"),r=oH("div"),d&&d.c(),oq(r,"style",e[5]),oq(t,"class",a=dy(["PinturaScrollable",e[0]])),oq(t,"style",e[4]),oq(t,"data-direction",e[1]),oq(t,"data-state",e[6])},m(a,c){oj(a,t,c),oN(t,r),d&&d.m(r,null),e[38](t),o=!0,l||(s=[oY(r,"interactionstart",e[8]),oY(r,"interactionupdate",e[10]),oY(r,"interactionend",e[11]),oY(r,"interactionrelease",e[9]),oF(d3.call(null,r,{inertia:!0})),oY(r,"measure",e[37]),oF(dr.call(null,r)),oY(t,"wheel",e[13],{passive:!1}),oY(t,"scroll",e[15]),oY(t,"focusin",e[14]),oY(t,"nudge",e[16]),oY(t,"measure",e[12]),oF(dr.call(null,t,{observePosition:!0})),oF(n=d6.call(null,t,{direction:"x"===e[1]?"horizontal":"vertical",stopKeydownPropagation:!1}))],l=!0)},p(e,l){d&&d.p&&(!o||16&l[1])&&oR(d,c,e,e[35],o?oP(c,e[35],l,null):oE(e[35]),null),(!o||32&l[0])&&oq(r,"style",e[5]),(!o||1&l[0]&&a!==(a=dy(["PinturaScrollable",e[0]])))&&oq(t,"class",a),(!o||16&l[0])&&oq(t,"style",e[4]),(!o||2&l[0])&&oq(t,"data-direction",e[1]),(!o||64&l[0])&&oq(t,"data-state",e[6]),n&&ob(n.update)&&2&l[0]&&n.update.call(null,{direction:"x"===e[1]?"horizontal":"vertical",stopKeydownPropagation:!1})},i(e){o||(lx(d,e),o=!0)},o(e){lb(d,e),o=!1},d(r){r&&oV(t),d&&d.d(r),e[38](null),l=!1,ox(s)}}}function ui(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,{$$slots:x={},$$scope:b}=t,w=le(),S="idle",k=cJ(0);oC(e,k,e=>r(34,u=e));var{class:C}=t,{scrollBlockInteractionDist:M=5}=t,{scrollStep:T=10}=t,{scrollFocusMargin:P=64}=t,{scrollDirection:R="x"}=t,{scrollAutoCancel:E=!1}=t,{elasticity:A=0}=t,{onscroll:I=ep}=t,{maskFeatherSize:L}=t,{maskFeatherStartOpacity:F}=t,{maskFeatherEndOpacity:z}=t,{scroll:O}=t,B="",D=!0,_=k.subscribe(e=>{var t=tm();t[R]=e,I(t)}),N=e=>Math.max(Math.min(0,e),v[a]-p[a]),W=e=>{var t=tI(tf(e.x-y.x,e.y-y.y),Math.abs);y=tw(e);var r=tN(t),a=t.x-t.y;return!(r>1&&a<-.5)},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{elastic:a=!1,animate:n=!1,preventScrollState:o=!1}=t;!(Math.abs(e-h)>M)||"idle"!==S||g||o||r(27,S="scrolling");var l=N(e),s=a&&A&&!g?l+d8(e-l,A):l,c=!0;n?c=!1:D||(c=!g),D=!1,k.set(s,{hard:c}).then(e=>{g&&(D=!0)})};return o9(()=>{_()}),e.$$set=e=>{"class"in e&&r(0,C=e.class),"scrollBlockInteractionDist"in e&&r(20,M=e.scrollBlockInteractionDist),"scrollStep"in e&&r(21,T=e.scrollStep),"scrollFocusMargin"in e&&r(22,P=e.scrollFocusMargin),"scrollDirection"in e&&r(1,R=e.scrollDirection),"scrollAutoCancel"in e&&r(23,E=e.scrollAutoCancel),"elasticity"in e&&r(24,A=e.elasticity),"onscroll"in e&&r(25,I=e.onscroll),"maskFeatherSize"in e&&r(19,L=e.maskFeatherSize),"maskFeatherStartOpacity"in e&&r(17,F=e.maskFeatherStartOpacity),"maskFeatherEndOpacity"in e&&r(18,z=e.maskFeatherEndOpacity),"scroll"in e&&r(26,O=e.scroll),"$$scope"in e&&r(35,b=e.$$scope)},e.$$.update=()=>{if(2&e.$$.dirty[0]&&r(31,a="x"===R?"width":"height"),2&e.$$.dirty[0]&&r(29,n=R.toUpperCase()),8&e.$$.dirty[0]&&r(33,o=m&&getComputedStyle(m)),8&e.$$.dirty[0]|4&e.$$.dirty[1]&&r(32,l=o&&ue(o.getPropertyValue("--scrollable-feather-size"))),268828676&e.$$.dirty[0]|11&e.$$.dirty[1]&&null!=u&&v&&null!=l&&p){var t=-1*u/l,h=-(v[a]-p[a]-u)/l;r(17,F=l6(1-t,0,1)),r(18,z=l6(1-h,0,1)),r(19,L=l),r(4,B="--scrollable-feather-start-opacity: ".concat(F,";--scrollable-feather-end-opacity: ").concat(z))}67108872&e.$$.dirty[0]&&m&&void 0!==O&&(iG(O)?j(O):j(O.scrollOffset,O)),268435460&e.$$.dirty[0]|1&e.$$.dirty[1]&&r(30,s=v&&p?p[a]>v[a]:void 0),1207959552&e.$$.dirty[0]&&r(6,c=dy([S,s?"overflows":void 0])),1610612736&e.$$.dirty[0]|8&e.$$.dirty[1]&&r(5,d=s?"transform: translate".concat(n,"(").concat(u,"px)"):void 0)},[C,R,p,m,B,d,c,k,()=>{s&&($=!1,f=!0,y=tf(0,0),g=!1,r(27,S="idle"),h=ok(k))},e=>{var{detail:t}=e;s&&(g=!0,r(27,S="idle"))},e=>{var{detail:t}=e;if(s&&!$){if(f&&(f=!1,.1>tN(t.translation)))return;if(E&&"x"===R&&!W(t.translation)){$=!0;return}j(h+t.translation[R],{elastic:!0})}},e=>{var{detail:t}=e;if(s&&!$){var r=N(h+t.translation[R]);D=!1,k.set(r).then(e=>{g&&(D=!0)})}},e=>{var{detail:t}=e;r(28,v=t),w("measure",{x:t.x,y:t.y,width:t.width,height:t.height})},e=>{if(s){e.preventDefault(),e.stopPropagation();var t=e.shiftKey,r=ut(e)*(t?-1:1);j(ok(k)+r*T,{animate:!0})}},e=>{if(s&&g){var t=e.target;e.target.classList.contains("implicit")&&(t=t.parentNode);var r=t["x"===R?"offsetLeft":"offsetTop"],n=r+t["x"===R?"offsetWidth":"offsetHeight"],o=ok(k),l=P+L;o+r<l?j(-r+l):o+n>v[a]-l&&j(v[a]-n-l,{animate:!0})}},()=>{r(3,m["x"===R?"scrollLeft":"scrollTop"]=0,m)},e=>{var{detail:t}=e;if(!m.querySelector("[data-focus-visible]")){var r=-2*t[R];j(ok(k)+r*T,{animate:!0,preventScrollState:!0})}},F,z,L,M,T,P,E,A,I,O,S,v,n,s,a,l,o,u,b,x,e=>r(2,p=e.detail),function(e){ln[e?"unshift":"push"](()=>{r(3,m=e)})}]}class ua extends lz{constructor(e){super(),lF(this,e,ui,ur,ow,{class:0,scrollBlockInteractionDist:20,scrollStep:21,scrollFocusMargin:22,scrollDirection:1,scrollAutoCancel:23,elasticity:24,onscroll:25,maskFeatherSize:19,maskFeatherStartOpacity:17,maskFeatherEndOpacity:18,scroll:26},null,[-1,-1])}}function un(e){var{delay:t=0,duration:r=400,easing:a=om}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:a,css:e=>"opacity: ".concat(e*n)}}function uo(e){var t,r,a,n,o;return{c(){oq(t=oH("span"),"class","PinturaStatusMessage")},m(r,l){oj(r,t,l),t.innerHTML=e[0],a=!0,n||(o=[oY(t,"measure",function(){ob(e[1])&&e[1].apply(this,arguments)}),oF(dr.call(null,t))],n=!0)},p(r,n){var[o]=n;e=r,(!a||1&o)&&(t.innerHTML=e[0])},i(e){a||(lu(()=>{r||(r=lS(t,un,{duration:500},!0)),r.run(1)}),a=!0)},o(e){r||(r=lS(t,un,{duration:500},!1)),r.run(0),a=!1},d(e){e&&oV(t),e&&r&&r.end(),n=!1,ox(o)}}}function ul(e,t,r){var{text:a}=t,{onmeasure:n=ep}=t;return e.$$set=e=>{"text"in e&&r(0,a=e.text),"onmeasure"in e&&r(1,n=e.onmeasure)},[a,n]}class us extends lz{constructor(e){super(),lF(this,e,ul,uo,ow,{text:0,onmeasure:1})}}function uc(e){var t,r,a,n,o,l,s,c,d;return{c(){t=oH("span"),r=oU("svg"),a=oU("g"),n=oU("circle"),o=oU("circle"),l=oX(),s=oH("span"),c=oG(e[3]),oq(n,"class","PinturaProgressIndicatorBar"),oq(n,"r","8.5"),oq(n,"cx","10"),oq(n,"cy","10"),oq(n,"stroke-linecap","round"),oq(n,"opacity",".25"),oq(o,"class","PinturaProgressIndicatorFill"),oq(o,"r","8.5"),oq(o,"stroke-dasharray",e[2]),oq(o,"cx","10"),oq(o,"cy","10"),oq(o,"transform","rotate(-90) translate(-20)"),oq(a,"fill","none"),oq(a,"stroke","currentColor"),oq(a,"stroke-width","2.5"),oq(a,"stroke-linecap","round"),oq(a,"opacity",e[1]),oq(r,"width","20"),oq(r,"height","20"),oq(r,"viewBox","0 0 20 20"),oq(r,"xmlns","http://www.w3.org/2000/svg"),oq(r,"aria-hidden","true"),oq(r,"focusable","false"),oq(s,"class","implicit"),oq(t,"class","PinturaProgressIndicator"),oq(t,"data-status",e[0]),oq(t,"style",d="opacity:".concat(e[4]))},m(e,d){oj(e,t,d),oN(t,r),oN(r,a),oN(a,n),oN(a,o),oN(t,l),oN(t,s),oN(s,c)},p(e,r){var[n]=r;4&n&&oq(o,"stroke-dasharray",e[2]),2&n&&oq(a,"opacity",e[1]),8&n&&oQ(c,e[3]),1&n&&oq(t,"data-status",e[0]),16&n&&d!==(d="opacity:".concat(e[4]))&&oq(t,"style",d)},i:og,o:og,d(e){e&&oV(t)}}}function ud(e,t,r){var a,n,o,l,s,c,d,u=le(),{progress:h}=t,{min:p=0}=t,{max:v=100}=t,{labelBusy:g="Busy"}=t,{opacity:m}=t,f=cJ(m,{precision:.01});oC(e,f,e=>r(4,d=e));var $=cJ(0,{precision:.01}),y=cJ(0,{precision:.01});oC(e,y,e=>r(13,s=e));var x=l_([$],e=>l6(e,p,v));oC(e,x,e=>r(14,c=e));var b=x.subscribe(e=>{1===h&&Math.round(e)>=100&&u("complete")});return o8(()=>{y.set(1)}),o9(()=>{b()}),e.$$set=e=>{"progress"in e&&r(8,h=e.progress),"min"in e&&r(9,p=e.min),"max"in e&&r(10,v=e.max),"labelBusy"in e&&r(11,g=e.labelBusy),"opacity"in e&&r(12,m=e.opacity)},e.$$.update=()=>{4096&e.$$.dirty&&iG(m)&&f.set(m),256&e.$$.dirty&&h&&h!==1/0&&$.set(100*h),18688&e.$$.dirty&&r(3,a=h===1/0?g:"".concat(Math.round(c),"%")),16640&e.$$.dirty&&r(2,n=h===1/0?"26.5 53":"".concat(c/100*53," 53")),8192&e.$$.dirty&&r(1,o=s),256&e.$$.dirty&&r(0,l=h===1/0?"busy":"loading")},[l,o,n,a,d,f,y,x,h,p,v,g,m,s,c]}class uu extends lz{constructor(e){super(),lF(this,e,ud,uc,ow,{progress:8,min:9,max:10,labelBusy:11,opacity:12})}}function uh(e){var t,r,a,n=e[5].default,o=oM(n,e,e[4],null);return{c(){t=oH("span"),o&&o.c(),oq(t,"class",r="PinturaStatusAside ".concat(e[0])),oq(t,"style",e[1])},m(e,r){oj(e,t,r),o&&o.m(t,null),a=!0},p(e,l){var[s]=l;o&&o.p&&(!a||16&s)&&oR(o,n,e,e[4],a?oP(n,e[4],s,null):oE(e[4]),null),(!a||1&s&&r!==(r="PinturaStatusAside ".concat(e[0])))&&oq(t,"class",r),(!a||2&s)&&oq(t,"style",e[1])},i(e){a||(lx(o,e),a=!0)},o(e){lb(o,e),a=!1},d(e){e&&oV(t),o&&o.d(e)}}}function up(e,t,r){var a,{$$slots:n={},$$scope:o}=t,{offset:l=0}=t,{opacity:s=0}=t,{class:c}=t;return e.$$set=e=>{"offset"in e&&r(2,l=e.offset),"opacity"in e&&r(3,s=e.opacity),"class"in e&&r(0,c=e.class),"$$scope"in e&&r(4,o=e.$$scope)},e.$$.update=()=>{12&e.$$.dirty&&r(1,a="transform:translateX(".concat(l,"px);opacity:").concat(s))},[c,a,l,s,o,n]}class uv extends lz{constructor(e){super(),lF(this,e,up,uh,ow,{offset:2,opacity:3,class:0})}}var{document:ug}=lk;function um(e){var t,r,a,n;return{c(){t=oX(),oq(r=oH("button"),"class","PinturaImageButton"),oq(r,"type","button"),oq(r,"title",e[1]),r.disabled=e[2]},m(o,l){oj(o,t,l),oj(o,r,l),r.innerHTML=e[0],e[11](r),a||(n=[oY(ug.body,"load",e[5],!0),oY(ug.body,"error",e[6],!0),oY(r,"pointerdown",e[4])],a=!0)},p(e,t){var[a]=t;1&a&&(r.innerHTML=e[0]),2&a&&oq(r,"title",e[1]),4&a&&(r.disabled=e[2])},i:og,o:og,d(o){o&&oV(t),o&&oV(r),e[11](null),a=!1,ox(n)}}}function uf(e,t,r){var a,n,{html:o}=t,{title:l}=t,{onclick:s}=t,{disabled:c=!1}=t,{ongrab:d=ep}=t,{ondrag:u=ep}=t,{ondrop:h=ep}=t,p=e=>256>tN(n,tf(e.pageX,e.pageY)),v=e=>{document.documentElement.removeEventListener("pointermove",g),document.documentElement.removeEventListener("pointerup",v);var t=tf(e.pageX,e.pageY);if(32>tN(n,t))return s(e);p(e)||h(e)},g=e=>{p(e)||u(e)},m=e=>a&&a.contains(e)&&"IMG"===e.nodeName;return e.$$set=e=>{"html"in e&&r(0,o=e.html),"title"in e&&r(1,l=e.title),"onclick"in e&&r(7,s=e.onclick),"disabled"in e&&r(2,c=e.disabled),"ongrab"in e&&r(8,d=e.ongrab),"ondrag"in e&&r(9,u=e.ondrag),"ondrop"in e&&r(10,h=e.ondrop)},e.$$.update=()=>{8&e.$$.dirty&&a&&a.querySelector("img")&&r(3,a.dataset.loader=!0,a)},[o,l,c,a,e=>{n=tf(e.pageX,e.pageY),d(e),document.documentElement.addEventListener("pointermove",g),document.documentElement.addEventListener("pointerup",v)},e=>{var{target:t}=e;m(t)&&r(3,a.dataset.load=!0,a)},e=>{var{target:t}=e;m(t)&&r(3,a.dataset.error=!0,a)},s,d,u,h,function(e){ln[e?"unshift":"push"](()=>{r(3,a=e)})}]}class u$ extends lz{constructor(e){super(),lF(this,e,uf,um,ow,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function uy(e,t,r){var a=e.slice();return a[14]=t[r],a}function ux(e,t){var r,a,n,o,l,s,c;function d(){return t[10](t[14])}function u(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return t[11](t[14],...r)}function h(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return t[12](t[14],...r)}function p(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return t[13](t[14],...r)}return a=new u$({props:{onclick:d,ongrab:u,ondrag:h,ondrop:p,disabled:t[1]||t[14].disabled,title:t[14].title,html:t[14].thumb}}),{key:e,first:null,c(){r=oH("li"),lA(a.$$.fragment),n=oX(),oq(r,"style",t[6]),this.first=r},m(e,d){oj(e,r,d),lI(a,r,null),oN(r,n),l=!0,s||(c=oF(o=t[8].call(null,r,t[14])),s=!0)},p(e,n){t=e;var s={};5&n&&(s.onclick=d),9&n&&(s.ongrab=u),17&n&&(s.ondrag=h),33&n&&(s.ondrop=p),3&n&&(s.disabled=t[1]||t[14].disabled),1&n&&(s.title=t[14].title),1&n&&(s.html=t[14].thumb),a.$set(s),(!l||64&n)&&oq(r,"style",t[6]),o&&ob(o.update)&&1&n&&o.update.call(null,t[14])},i(e){l||(lx(a.$$.fragment,e),l=!0)},o(e){lb(a.$$.fragment,e),l=!1},d(e){e&&oV(r),lL(a),s=!1,c()}}}function ub(e){for(var t,r,a=[],n=new Map,o=e[0],l=e=>e[14].id,s=0;s<o.length;s+=1){var c=uy(e,o,s),d=l(c);n.set(d,a[s]=ux(d,c))}return{c(){t=oH("ul");for(var e=0;e<a.length;e+=1)a[e].c();oq(t,"class","PinturaImageButtonList")},m(e,n){oj(e,t,n);for(var o=0;o<a.length;o+=1)a[o].m(t,null);r=!0},p(e,r){var[s]=r;127&s&&(o=e[0],l$(),a=lT(a,s,l,1,e,o,n,t,lM,ux,null,uy),ly())},i(e){if(!r){for(var t=0;t<o.length;t+=1)lx(a[t]);r=!0}},o(e){for(var t=0;t<a.length;t+=1)lb(a[t]);r=!1},d(e){e&&oV(t);for(var r=0;r<a.length;r+=1)a[r].d()}}}function uw(e,t,r){var a,n,{items:o}=t,{disabled:l}=t,{onclickitem:s}=t,{ongrabitem:c}=t,{ondragitem:d}=t,{ondropitem:u}=t,h=cJ(0,{stiffness:.25,damping:.9});return oC(e,h,e=>r(9,n=e)),o8(()=>h.set(1)),e.$$set=e=>{"items"in e&&r(0,o=e.items),"disabled"in e&&r(1,l=e.disabled),"onclickitem"in e&&r(2,s=e.onclickitem),"ongrabitem"in e&&r(3,c=e.ongrabitem),"ondragitem"in e&&r(4,d=e.ondragitem),"ondropitem"in e&&r(5,u=e.ondropitem)},e.$$.update=()=>{512&e.$$.dirty&&r(6,a="opacity:".concat(n))},[o,l,s,c,d,u,a,h,(e,t)=>t.mount&&t.mount(e.firstChild,t),n,e=>s(e.id),(e,t)=>c&&c(e.id,t),(e,t)=>d&&d(e.id,t),(e,t)=>u&&u(e.id,t)]}class uS extends lz{constructor(e){super(),lF(this,e,uw,ub,ow,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var uk=()=>ef()&&window.devicePixelRatio||1,uC=null,uM=e=>(null===uC&&(uC=1===uk()?Math.round:e=>e),uC(e)),uT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){if(t.preventScroll&&ie()){var r=document.body.scrollTop;e.focus(),document.body.scrollTop=r;return}e.focus(t)}},uP=e=>/textarea/i.test(e.nodeName),uR=e=>/date|email|number|search|text|url/.test(e.type),uE=e=>uP(e)||uR(e)||e.isContentEditable,uA=e=>({}),uI=e=>({}),uL=e=>({}),uF=e=>({});function uz(e){for(var t,r,a=[e[7]],n={$$slots:{default:[uB]},$$scope:{ctx:e}},o=0;o<a.length;o+=1)n=of(n,a[o]);return t=new d2({props:n}),e[44](t),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=128&r[0]?lP(a,[lR(e[7])]):{};131072&r[1]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(r){e[44](null),lL(t,r)}}}function uO(e){for(var t,r,a=[e[7]],n={},o=0;o<a.length;o+=1)n=of(n,a[o]);return t=new d2({props:n}),e[43](t),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=128&r[0]?lP(a,[lR(e[7])]):{};t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(r){e[43](null),lL(t,r)}}}function uB(e){var t,r=e[42].label,a=oM(r,e,e[48],uF);return{c(){a&&a.c()},m(e,r){a&&a.m(e,r),t=!0},p(e,n){a&&a.p&&(!t||131072&n[1])&&oR(a,r,e,e[48],t?oP(r,e[48],n,uL):oE(e[48]),uF)},i(e){t||(lx(a,e),t=!0)},o(e){lb(a,e),t=!1},d(e){a&&a.d(e)}}}function uD(e){var t,r,a,n,o,l,s,c=e[42].details,d=oM(c,e,e[48],uI);return{c(){t=oH("div"),d&&d.c(),r=oX(),oq(a=oH("span"),"class","PinturaPanelTip"),oq(a,"style",e[10]),oq(t,"class",n=dy(["PinturaPanel","pintura-editor-panel",e[2]])),oq(t,"tabindex","-1"),oq(t,"style",e[11])},m(n,c){oj(n,t,c),d&&d.m(t,null),oN(t,r),oN(t,a),e[45](t),o=!0,l||(s=[oY(t,"close",e[46]),oY(t,"keydown",e[18]),oY(t,"measure",e[47]),oF(dr.call(null,t))],l=!0)},p(e,r){d&&d.p&&(!o||131072&r[1])&&oR(d,c,e,e[48],o?oP(c,e[48],r,uA):oE(e[48]),uI),(!o||1024&r[0])&&oq(a,"style",e[10]),(!o||4&r[0]&&n!==(n=dy(["PinturaPanel","pintura-editor-panel",e[2]])))&&oq(t,"class",n),(!o||2048&r[0])&&oq(t,"style",e[11])},i(e){o||(lx(d,e),o=!0)},o(e){lb(d,e),o=!1},d(r){r&&oV(t),d&&d.d(r),e[45](null),l=!1,ox(s)}}}function u_(e){var t,r,a,n,o,l,s,c,d,u=[uO,uz],h=[];a=h[r=e[1]?0:1]=u[r](e);var p=e[6]&&uD(e);return{c(){t=oX(),a.c(),n=oX(),p&&p.c(),o=oX(),l=oZ()},m(a,u){oj(a,t,u),h[r].m(a,u),oj(a,n,u),p&&p.m(a,u),oj(a,o,u),oj(a,l,u),s=!0,c||(d=[oY(document.body,"pointerdown",function(){ob(e[9])&&e[9].apply(this,arguments)}),oY(document.body,"pointerup",function(){ob(e[8])&&e[8].apply(this,arguments)})],c=!0)},p(t,l){var s=r;(r=(e=t)[1]?0:1)===s?h[r].p(e,l):(l$(),lb(h[s],1,1,()=>{h[s]=null}),ly(),(a=h[r])?a.p(e,l):(a=h[r]=u[r](e)).c(),lx(a,1),a.m(n.parentNode,n)),e[6]?p?(p.p(e,l),64&l[0]&&lx(p,1)):((p=uD(e)).c(),lx(p,1),p.m(o.parentNode,o)):p&&(l$(),lb(p,1,1,()=>{p=null}),ly())},i(e){s||(lx(a),lx(p),lx(!1),s=!0)},o(e){lb(a),lb(p),lb(!1),s=!1},d(e){e&&oV(t),h[r].d(e),e&&oV(n),p&&p.d(e),e&&oV(o),e&&oV(l),c=!1,ox(d)}}}function uN(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,b,w,S,k,C,M,{$$slots:T={},$$scope:P}=t,{buttonClass:R}=t,{buttonLabel:E}=t,{buttonLabelClass:A}=t,{buttonHideLabel:I}=t,{buttonIcon:L}=t,{buttonTitle:F}=t,{panelClass:z}=t,{isActive:O=!1}=t,{onshow:B=e=>{var{panel:t}=e;return uT(t,{preventScroll:!0})}}=t,{onhide:D=ep}=t,_=lr("isAnimated");oC(e,_,e=>r(41,b=e));var N=lr("rootPortal");oC(e,N,e=>r(36,m=e));var W=lr("rootRect");oC(e,W,e=>r(40,x=e));var j=()=>r(26,k=a&&a.getBoundingClientRect()),V=tm(),H=cJ(0);oC(e,H,e=>r(38,$=e));var U=tm(),G=lD({x:0,y:0});oC(e,G,e=>r(37,f=e));var X=cJ(-5,{stiffness:.1,damping:.35,precision:.001});oC(e,X,e=>r(39,y=e));var Z=e=>dZ(e,m)||S.isEventTarget(e),Y=!1,q=e=>{uE(e.target)||(O||j(),r(30,M=e),r(0,O=!O))},K=e=>{/down/i.test(e.key)&&(r(0,O=!0),r(30,M=e))};return o9(()=>{if(m&&C){var e=C;(ld(),ls).then(()=>{e.parentNode&&e.remove()})}}),e.$$set=e=>{"buttonClass"in e&&r(19,R=e.buttonClass),"buttonLabel"in e&&r(1,E=e.buttonLabel),"buttonLabelClass"in e&&r(20,A=e.buttonLabelClass),"buttonHideLabel"in e&&r(21,I=e.buttonHideLabel),"buttonIcon"in e&&r(22,L=e.buttonIcon),"buttonTitle"in e&&r(23,F=e.buttonTitle),"panelClass"in e&&r(2,z=e.panelClass),"isActive"in e&&r(0,O=e.isActive),"onshow"in e&&r(24,B=e.onshow),"onhide"in e&&r(25,D=e.onhide),"$$scope"in e&&r(48,P=e.$$scope)},e.$$.update=()=>{if(16&e.$$.dirty[0]&&(a=S&&S.getElement()),536870913&e.$$.dirty[0]&&r(8,v=O?e=>{Y&&(r(29,Y=!1),Z(e)||r(0,O=!1))}:void 0),1&e.$$.dirty[0]|1024&e.$$.dirty[1]&&H.set(O?1:0,{hard:!1===b}),1&e.$$.dirty[0]|1024&e.$$.dirty[1]&&X.set(O?0:-5,{hard:!1===b}),256&e.$$.dirty[1]&&r(33,n=1- -(y/5)),1&e.$$.dirty[0]|512&e.$$.dirty[1]&&x&&O&&j(),67108873&e.$$.dirty[0]|512&e.$$.dirty[1]&&x&&w&&k&&O){var t=k.x-x.x+.5*k.width-.5*w.width,T=k.y-x.y+k.height,P=x.width-12,z=x.height-12,_=t,N=T,W=_+w.width,J=N+w.height;(_<12&&(r(28,U.x=_-12,U),t=12),W>P&&(r(28,U.x=W-P,U),t=P-w.width),J>z)?(r(27,V.y=-1,V),12<T-w.height-k.height?(r(28,U.y=0,U),T-=w.height+k.height):(r(28,U.y=T-(J-z),U),T-=J-z)):r(27,V.y=1,V),oL(G,f=tI(tf(t,T),uM),f)}128&e.$$.dirty[1]&&r(6,o=$>0),128&e.$$.dirty[1]&&r(35,l=$<1),134217728&e.$$.dirty[0]|320&e.$$.dirty[1]&&r(34,s="translateX(".concat(Math.round(f.x)+12*V.x,"px) translateY(").concat(Math.round(f.y)+12*V.y+V.y*y,"px)")),152&e.$$.dirty[1]&&r(11,c=l?"opacity: ".concat($,"; pointer-events: ").concat($<1?"none":"all","; transform: ").concat(s,";"):"transform: ".concat(s)),4&e.$$.dirty[1]&&r(31,d=.5+.5*n),4&e.$$.dirty[1]&&r(32,u=n),402653192&e.$$.dirty[0]|67&e.$$.dirty[1]&&r(10,h=f&&w&&"opacity:".concat(u,";transform:scaleX(").concat(d,")rotate(45deg);top:").concat(V.y<0?U.y+w.height:0,"px;left:").concat(U.x+.5*w.width,"px")),1&e.$$.dirty[0]&&r(9,p=O?e=>{Z(e)||r(29,Y=!0)}:void 0),96&e.$$.dirty[0]|32&e.$$.dirty[1]&&o&&m&&C&&C.parentNode!==m&&m.append(C),1&e.$$.dirty[0]&&!O&&r(30,M=void 0),1090519137&e.$$.dirty[0]&&O&&o&&C&&B({e:M,panel:C}),33554497&e.$$.dirty[0]&&o&&!O&&D(),16252930&e.$$.dirty[0]&&r(7,g={label:E,icon:L,class:dy(["PinturaPanelButton",R]),onkeydown:K,onclick:q,hideLabel:I,labelClass:A,title:F})},[O,E,z,w,S,C,o,g,v,p,h,c,_,N,W,H,G,X,e=>{/esc/i.test(e.key)&&(r(0,O=!1),a.focus())},R,A,I,L,F,B,D,k,V,U,Y,M,d,u,n,s,l,m,f,$,y,x,b,T,function(e){ln[e?"unshift":"push"](()=>{r(4,S=e)})},function(e){ln[e?"unshift":"push"](()=>{r(4,S=e)})},function(e){ln[e?"unshift":"push"](()=>{r(5,C=e)})},e=>{e.stopPropagation(),r(0,O=!1)},e=>r(3,w=tZ(e.detail)),P]}class uW extends lz{constructor(e){super(),lF(this,e,uN,u_,ow,{buttonClass:19,buttonLabel:1,buttonLabelClass:20,buttonHideLabel:21,buttonIcon:22,buttonTitle:23,panelClass:2,isActive:0,onshow:24,onhide:25},null,[-1,-1])}}var uj={Up:38,Down:40,Left:37,Right:39};function uV(e){var t,r,a,n,o,l,s,c,d=e[15].default,u=oM(d,e,e[14],null);return{c(){t=oH("li"),r=oH("input"),a=oX(),n=oH("label"),u&&u.c(),oq(r,"type","radio"),oq(r,"class","implicit"),oq(r,"id",e[7]),oq(r,"name",e[0]),r.value=e[3],r.disabled=e[6],r.hidden=e[5],r.checked=e[4],oq(n,"for",e[7]),oq(n,"title",e[2]),oq(t,"class",o=dy(["PinturaRadioGroupOption",e[1]])),oq(t,"data-hidden",e[5]),oq(t,"data-disabled",e[6]),oq(t,"data-selected",e[4])},m(o,d){if(oj(o,t,d),oN(t,r),oN(t,a),oN(t,n),u&&u.m(n,null),l=!0,!s){var h;c=[oY(r,"change",(h=e[16],function(e){return e.stopPropagation(),h.call(this,e)})),oY(r,"keydown",e[9]),oY(r,"click",e[10])],s=!0}},p(e,a){var[s]=a;(!l||128&s)&&oq(r,"id",e[7]),(!l||1&s)&&oq(r,"name",e[0]),(!l||8&s)&&(r.value=e[3]),(!l||64&s)&&(r.disabled=e[6]),(!l||32&s)&&(r.hidden=e[5]),(!l||16&s)&&(r.checked=e[4]),u&&u.p&&(!l||16384&s)&&oR(u,d,e,e[14],l?oP(d,e[14],s,null):oE(e[14]),null),(!l||128&s)&&oq(n,"for",e[7]),(!l||4&s)&&oq(n,"title",e[2]),(!l||2&s&&o!==(o=dy(["PinturaRadioGroupOption",e[1]])))&&oq(t,"class",o),(!l||32&s)&&oq(t,"data-hidden",e[5]),(!l||64&s)&&oq(t,"data-disabled",e[6]),(!l||16&s)&&oq(t,"data-selected",e[4])},i(e){l||(lx(u,e),l=!0)},o(e){lb(u,e),l=!1},d(e){e&&oV(t),u&&u.d(e),s=!1,ox(c)}}}function uH(e,t,r){var a,n,{$$slots:o={},$$scope:l}=t,{name:s}=t,{class:c}=t,{label:d}=t,{id:u}=t,{value:h}=t,{checked:p}=t,{onkeydown:v}=t,{onclick:g}=t,{hidden:m=!1}=t,{disabled:f=!1}=t,$=Object.values(uj),y=lr("keysPressed");return oC(e,y,e=>r(17,n=e)),e.$$set=e=>{"name"in e&&r(0,s=e.name),"class"in e&&r(1,c=e.class),"label"in e&&r(2,d=e.label),"id"in e&&r(11,u=e.id),"value"in e&&r(3,h=e.value),"checked"in e&&r(4,p=e.checked),"onkeydown"in e&&r(12,v=e.onkeydown),"onclick"in e&&r(13,g=e.onclick),"hidden"in e&&r(5,m=e.hidden),"disabled"in e&&r(6,f=e.disabled),"$$scope"in e&&r(14,l=e.$$scope)},e.$$.update=()=>{2049&e.$$.dirty&&r(7,a="".concat(s,"-").concat(u))},[s,c,d,h,p,m,f,a,y,e=>{v(e)},e=>{n.some(e=>$.includes(e))||g(e)},u,v,g,l,o,function(t){li.call(this,e,t)}]}class uU extends lz{constructor(e){super(),lF(this,e,uH,uV,ow,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var uG=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((e,t)=>(iY(t)?iY(t[1]):!!t.options)?e.concat(iY(t)?t[1]:t.options):(e.push(t),e),[])},uX=(e,t,r)=>{var a;return iY(e)?a=ea({id:t,value:e[0],label:e[1]},e[2]||{}):(a=e).id=null!=a.id?a.id:t,r?r(a):a},uZ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=0;return e.map(e=>(r++,iY(e))?iY(e[1])?{id:r,label:e[0],options:e[1].map(e=>uX(e,++r,t))}:uX(e,r,t):e.options?{id:e.id||r,label:e.label,options:e.options.map(e=>uX(e,++r,t))}:uX(e,r,t))},uY=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return e&&e(...r)},uq=(e,t,r)=>eO(e)?e(t,r):e,uK=(e,t)=>e.map(e=>{var[r,a,n]=e;if(iY(a))return[uq(r,t),uK(a,t)];var o=[r,uq(a,t)];if(n){var l=ea({},n);n.icon&&(l.icon=uq(n.icon,t)),o.push(l)}return o}),uJ=(e,t)=>uK(e,t),uQ=e=>/enter| /i.test(e),u1=(e,t)=>Array.isArray(e)&&Array.isArray(t)?si(e,t):e===t;function u0(e,t,r){var a=e.slice();return a[27]=t[r],a}var u2=e=>({option:1024&e[0]}),u4=e=>({option:e[27]});function u5(e,t,r){var a=e.slice();return a[27]=t[r],a}var u3=e=>({option:1024&e[0]}),u6=e=>({option:e[27]}),u8=e=>({option:1024&e[0]}),u7=e=>({option:e[27]});function u9(e){for(var t,r,a,n,o,l=[],s=new Map,c=e[1]&&he(e),d=e[10],u=e=>e[27].id,h=0;h<d.length;h+=1){var p=u0(e,d,h),v=u(p);s.set(v,l[h]=hh(v,p))}return{c(){t=oH("fieldset"),c&&c.c(),r=oX(),a=oH("ul");for(var o=0;o<l.length;o+=1)l[o].c();oq(a,"class","PinturaRadioGroupOptions"),oq(t,"class",n=dy(["PinturaRadioGroup",e[3]])),oq(t,"data-layout",e[5]),oq(t,"title",e[7])},m(e,n){oj(e,t,n),c&&c.m(t,null),oN(t,r),oN(t,a);for(var s=0;s<l.length;s+=1)l[s].m(a,null);o=!0},p(e,h){e[1]?c?c.p(e,h):((c=he(e)).c(),c.m(t,r)):c&&(c.d(1),c=null),8419153&h[0]&&(d=e[10],l$(),l=lT(l,h,u,1,e,d,s,a,lM,hh,null,u0),ly()),(!o||8&h[0]&&n!==(n=dy(["PinturaRadioGroup",e[3]])))&&oq(t,"class",n),(!o||32&h[0])&&oq(t,"data-layout",e[5]),(!o||128&h[0])&&oq(t,"title",e[7])},i(e){if(!o){for(var t=0;t<d.length;t+=1)lx(l[t]);o=!0}},o(e){for(var t=0;t<l.length;t+=1)lb(l[t]);o=!1},d(e){e&&oV(t),c&&c.d();for(var r=0;r<l.length;r+=1)l[r].d()}}}function he(e){var t,r,a;return{c(){t=oH("legend"),r=oG(e[1]),oq(t,"class",a=e[2]&&"implicit")},m(e,a){oj(e,t,a),oN(t,r)},p(e,n){2&n[0]&&oQ(r,e[1]),4&n[0]&&a!==(a=e[2]&&"implicit")&&oq(t,"class",a)},d(e){e&&oV(t)}}}function ht(e){var t,r;return t=new uU({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[ho]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16&r[0]&&(a.name=e[4]),1024&r[0]&&(a.label=e[27].label),1024&r[0]&&(a.id=e[27].id),1024&r[0]&&(a.value=e[27].value),1024&r[0]&&(a.disabled=e[27].disabled),1024&r[0]&&(a.hidden=e[27].hidden),256&r[0]&&(a.class=e[8]),1025&r[0]&&(a.checked=e[12](e[27])===e[0]),1024&r[0]&&(a.onkeydown=e[13](e[27])),1024&r[0]&&(a.onclick=e[14](e[27])),8389696&r[0]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function hr(e){for(var t,r,a,n,o,l,s,c,d,u=[],h=new Map,p=e[22].group,v=oM(p,e,e[23],u7),g=v||(a=e[27].label+"",{c(){t=oH("span"),r=oG(a),oq(t,"class","PinturaRadioGroupOptionGroupLabel")},m(e,a){oj(e,t,a),oN(t,r)},p(e,t){1024&t[0]&&a!==(a=e[27].label+"")&&oQ(r,a)},d(e){e&&oV(t)}}),m=e[27].options,f=e=>e[27].id,$=0;$<m.length;$+=1){var y=u5(e,m,$),x=f(y);h.set(x,u[$]=hu(x,y))}return{c(){n=oH("li"),g&&g.c(),o=oX(),l=oH("ul");for(var t=0;t<u.length;t+=1)u[t].c();s=oX(),oq(l,"class","PinturaRadioGroupOptions"),oq(n,"class",c=dy(["PinturaRadioGroupOptionGroup",e[9]]))},m(e,t){oj(e,n,t),g&&g.m(n,null),oN(n,o),oN(n,l);for(var r=0;r<u.length;r+=1)u[r].m(l,null);oN(n,s),d=!0},p(e,t){v?v.p&&(!d||8389632&t[0])&&oR(v,p,e,e[23],d?oP(p,e[23],t,u8):oE(e[23]),u7):g&&g.p&&(!d||1024&t[0])&&g.p(e,d?t:[-1,-1]),8418641&t[0]&&(m=e[27].options,l$(),u=lT(u,t,f,1,e,m,h,l,lM,hu,null,u5),ly()),(!d||512&t[0]&&c!==(c=dy(["PinturaRadioGroupOptionGroup",e[9]])))&&oq(n,"class",c)},i(e){if(!d){lx(g,e);for(var t=0;t<m.length;t+=1)lx(u[t]);d=!0}},o(e){lb(g,e);for(var t=0;t<u.length;t+=1)lb(u[t]);d=!1},d(e){e&&oV(n),g&&g.d(e);for(var t=0;t<u.length;t+=1)u[t].d()}}}function hi(e){var t,r;return t=new dX({props:{$$slots:{default:[ha]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};8389632&r[0]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function ha(e){var t,r=e[27].icon+"";return{c(){t=oU("g")},m(e,a){oj(e,t,a),t.innerHTML=r},p(e,a){1024&a[0]&&r!==(r=e[27].icon+"")&&(t.innerHTML=r)},d(e){e&&oV(t)}}}function hn(e){var t,r,a=e[27].label+"";return{c(){t=oH("span"),r=oG(a),oq(t,"class",e[6])},m(e,a){oj(e,t,a),oN(t,r)},p(e,n){1024&n[0]&&a!==(a=e[27].label+"")&&oQ(r,a),64&n[0]&&oq(t,"class",e[6])},d(e){e&&oV(t)}}}function ho(e){var t,r,a,n,o,l,s=e[22].option,c=oM(s,e,e[23],u4),d=c||(n=e[27].icon&&hi(e),o=!e[27].hideLabel&&hn(e),{c(){n&&n.c(),t=oX(),o&&o.c(),r=oX()},m(e,l){n&&n.m(e,l),oj(e,t,l),o&&o.m(e,l),oj(e,r,l),a=!0},p(e,a){e[27].icon?n?(n.p(e,a),1024&a[0]&&lx(n,1)):((n=hi(e)).c(),lx(n,1),n.m(t.parentNode,t)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),e[27].hideLabel?o&&(o.d(1),o=null):o?o.p(e,a):((o=hn(e)).c(),o.m(r.parentNode,r))},i(e){a||(lx(n),a=!0)},o(e){lb(n),a=!1},d(e){n&&n.d(e),e&&oV(t),o&&o.d(e),e&&oV(r)}});return{c(){d&&d.c()},m(e,t){d&&d.m(e,t),l=!0},p(e,t){c?c.p&&(!l||8389632&t[0])&&oR(c,s,e,e[23],l?oP(s,e[23],t,u2):oE(e[23]),u4):d&&d.p&&(!l||1088&t[0])&&d.p(e,l?t:[-1,-1])},i(e){l||(lx(d,e),l=!0)},o(e){lb(d,e),l=!1},d(e){d&&d.d(e)}}}function hl(e){var t,r;return t=new dX({props:{$$slots:{default:[hs]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};8389632&r[0]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function hs(e){var t,r=e[27].icon+"";return{c(){t=oU("g")},m(e,a){oj(e,t,a),t.innerHTML=r},p(e,a){1024&a[0]&&r!==(r=e[27].icon+"")&&(t.innerHTML=r)},d(e){e&&oV(t)}}}function hc(e){var t,r,a=e[27].label+"";return{c(){t=oH("span"),r=oG(a),oq(t,"class",e[6])},m(e,a){oj(e,t,a),oN(t,r)},p(e,n){1024&n[0]&&a!==(a=e[27].label+"")&&oQ(r,a),64&n[0]&&oq(t,"class",e[6])},d(e){e&&oV(t)}}}function hd(e){var t,r,a,n,o,l,s=e[22].option,c=oM(s,e,e[23],u6),d=c||(n=e[27].icon&&hl(e),o=!e[27].hideLabel&&hc(e),{c(){n&&n.c(),t=oX(),o&&o.c(),r=oX()},m(e,l){n&&n.m(e,l),oj(e,t,l),o&&o.m(e,l),oj(e,r,l),a=!0},p(e,a){e[27].icon?n?(n.p(e,a),1024&a[0]&&lx(n,1)):((n=hl(e)).c(),lx(n,1),n.m(t.parentNode,t)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),e[27].hideLabel?o&&(o.d(1),o=null):o?o.p(e,a):((o=hc(e)).c(),o.m(r.parentNode,r))},i(e){a||(lx(n),a=!0)},o(e){lb(n),a=!1},d(e){n&&n.d(e),e&&oV(t),o&&o.d(e),e&&oV(r)}});return{c(){d&&d.c()},m(e,t){d&&d.m(e,t),l=!0},p(e,t){c?c.p&&(!l||8389632&t[0])&&oR(c,s,e,e[23],l?oP(s,e[23],t,u3):oE(e[23]),u6):d&&d.p&&(!l||1088&t[0])&&d.p(e,l?t:[-1,-1])},i(e){l||(lx(d,e),l=!0)},o(e){lb(d,e),l=!1},d(e){d&&d.d(e)}}}function hu(e,t){var r,a,n;return a=new uU({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[hd]},$$scope:{ctx:t}}}),{key:e,first:null,c(){r=oZ(),lA(a.$$.fragment),this.first=r},m(e,t){oj(e,r,t),lI(a,e,t),n=!0},p(e,r){t=e;var n={};16&r[0]&&(n.name=t[4]),1024&r[0]&&(n.label=t[27].label),1024&r[0]&&(n.id=t[27].id),1024&r[0]&&(n.value=t[27].value),1024&r[0]&&(n.disabled=t[27].disabled),1024&r[0]&&(n.hidden=t[27].hidden),256&r[0]&&(n.class=t[8]),1025&r[0]&&(n.checked=t[12](t[27])===t[0]),1024&r[0]&&(n.onkeydown=t[13](t[27])),1024&r[0]&&(n.onclick=t[14](t[27])),8389696&r[0]&&(n.$$scope={dirty:r,ctx:t}),a.$set(n)},i(e){n||(lx(a.$$.fragment,e),n=!0)},o(e){lb(a.$$.fragment,e),n=!1},d(e){e&&oV(r),lL(a,e)}}}function hh(e,t){var r,a,n,o,l,s=[hr,ht],c=[];function d(e,t){return e[27].options?0:1}return n=c[a=d(t)]=s[a](t),{key:e,first:null,c(){r=oZ(),n.c(),o=oZ(),this.first=r},m(e,t){oj(e,r,t),c[a].m(e,t),oj(e,o,t),l=!0},p(e,r){var l=a;(a=d(t=e))===l?c[a].p(t,r):(l$(),lb(c[l],1,1,()=>{c[l]=null}),ly(),(n=c[a])?n.p(t,r):(n=c[a]=s[a](t)).c(),lx(n,1),n.m(o.parentNode,o))},i(e){l||(lx(n),l=!0)},o(e){lb(n),l=!1},d(e){e&&oV(r),c[a].d(e),e&&oV(o)}}}function hp(e){var t,r,a,n=e[11].length&&u9(e);return{c(){n&&n.c(),t=oX(),r=oZ()},m(e,o){n&&n.m(e,o),oj(e,t,o),oj(e,r,o),a=!0},p(e,r){e[11].length?n?(n.p(e,r),2048&r[0]&&lx(n,1)):((n=u9(e)).c(),lx(n,1),n.m(t.parentNode,t)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly())},i(e){a||(lx(n),lx(!1),a=!0)},o(e){lb(n),lb(!1),a=!1},d(e){n&&n.d(e),e&&oV(t),e&&oV(r)}}}function hv(e,t,r){var a,n,o,{$$slots:l={},$$scope:s}=t,c=le(),{label:d}=t,{hideLabel:u=!0}=t,{class:h}=t,{name:p="radio-group-".concat(eV())}=t,{selectedIndex:v=-1}=t,{options:g=[]}=t,{onchange:m}=t,{layout:f}=t,{optionMapper:$}=t,{optionFilter:y}=t,{value:x}=t,{optionLabelClass:b}=t,{title:w}=t,{locale:S}=t,{optionClass:k}=t,{optionGroupClass:C}=t,M=e=>e.findIndex(e=>void 0===e[0]),T=e=>o.findIndex(t=>t.id===e.id),P=(e,t)=>{r(0,v=T(e));var a=ea({index:v},e);uY(m,a,t),c("change",a)};return e.$$set=e=>{"label"in e&&r(1,d=e.label),"hideLabel"in e&&r(2,u=e.hideLabel),"class"in e&&r(3,h=e.class),"name"in e&&r(4,p=e.name),"selectedIndex"in e&&r(0,v=e.selectedIndex),"options"in e&&r(15,g=e.options),"onchange"in e&&r(16,m=e.onchange),"layout"in e&&r(5,f=e.layout),"optionMapper"in e&&r(17,$=e.optionMapper),"optionFilter"in e&&r(18,y=e.optionFilter),"value"in e&&r(19,x=e.value),"optionLabelClass"in e&&r(6,b=e.optionLabelClass),"title"in e&&r(7,w=e.title),"locale"in e&&r(20,S=e.locale),"optionClass"in e&&r(8,k=e.optionClass),"optionGroupClass"in e&&r(9,C=e.optionGroupClass),"$$scope"in e&&r(23,s=e.$$scope)},e.$$.update=()=>{1343488&e.$$.dirty[0]&&r(11,a=uJ(y?g.filter(y):g,S)),133120&e.$$.dirty[0]&&r(10,n=uZ(a,$)),1024&e.$$.dirty[0]&&r(21,o=uG(n)),2654209&e.$$.dirty[0]&&v<0&&(r(0,v=o.findIndex(e=>u1(e.value,x))),v<0&&r(0,v=M(g)))},[v,d,u,h,p,f,b,w,k,C,n,a,T,e=>t=>{uQ(t.key)&&P(e,t)},e=>t=>{P(e,t)},g,m,$,y,x,S,o,l,s]}class hg extends lz{constructor(e){super(),lF(this,e,hv,hp,ow,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function hm(e){var t,r,a,n,o,l,s,c,d,u;return{c(){t=oH("div"),r=oH("button"),a=oG("▲"),o=oX(),l=oH("button"),s=oG("▼"),oq(r,"type","button"),oq(r,"tabindex","-1"),oq(r,"aria-label",n="increase ".concat(e[7])),oq(l,"type","button"),oq(l,"tabindex","-1"),oq(l,"aria-label",c="decrease ".concat(e[7])),oq(t,"class","PinturaInputSpinners")},m(n,c){oj(n,t,c),oN(t,r),oN(r,a),oN(t,o),oN(t,l),oN(l,s),d||(u=[oY(r,"click",e[17]),oY(l,"click",e[18])],d=!0)},p(e,t){128&t&&n!==(n="increase ".concat(e[7]))&&oq(r,"aria-label",n),128&t&&c!==(c="decrease ".concat(e[7]))&&oq(l,"aria-label",c)},d(e){e&&oV(t),d=!1,ox(u)}}}function hf(e){var t,r,a,n,o,l,s="number"===e[1]&&e[9]&&hm(e);return{c(){t=oH("div"),r=oH("input"),n=oX(),s&&s.c(),oq(r,"class","PinturaInputField"),oq(r,"title",e[7]),oq(r,"type",e[1]),oq(r,"min",e[4]),oq(r,"max",e[5]),oq(r,"step",e[6]),oq(r,"inputmode",e[3]),r.value=a=e[14]?e[13]:e[0],oq(r,"style",e[11]),oq(r,"placeholder",e[8]),oq(r,"maxlength",e[12]),r.disabled=e[2],oq(r,"spellcheck","false"),oq(r,"autocorrect","off"),oq(r,"autocapitalize","off"),oq(t,"class","PinturaInput")},m(a,c){oj(a,t,c),oN(t,r),e[26](r),oN(t,n),s&&s.m(t,null),o||(l=[oY(r,"input",e[16]),oY(r,"blur",function(){ob(e[14]&&e[15])&&(e[14]&&e[15]).apply(this,arguments)}),oY(r,"keydown",e[19]),oY(r,"keyup",e[20])],o=!0)},p(n,o){var[l]=o;e=n,128&l&&oq(r,"title",e[7]),2&l&&oq(r,"type",e[1]),16&l&&oq(r,"min",e[4]),32&l&&oq(r,"max",e[5]),64&l&&oq(r,"step",e[6]),8&l&&oq(r,"inputmode",e[3]),24577&l&&a!==(a=e[14]?e[13]:e[0])&&r.value!==a&&(r.value=a),2048&l&&oq(r,"style",e[11]),256&l&&oq(r,"placeholder",e[8]),4096&l&&oq(r,"maxlength",e[12]),4&l&&(r.disabled=e[2]),"number"===e[1]&&e[9]?s?s.p(e,l):((s=hm(e)).c(),s.m(t,null)):s&&(s.d(1),s=null)},i:og,o:og,d(r){r&&oV(t),e[26](null),s&&s.d(),o=!1,ox(l)}}}function h$(e,t,r){var a,n,o,l,s,c,d,{value:u}=t,{type:h="text"}=t,{disabled:p=!1}=t,{inputmode:v}=t,{min:g}=t,{max:m}=t,{step:f}=t,{onchange:$=ep}=t,{onkeydown:y=ep}=t,{title:x}=t,{stepMultiplier:b=10}=t,{placeholder:w}=t,{enableSpinButtons:S=!0}=t,k=()=>{var e=c.value;return"number"===h&&(!iG(e="numeric"===v?parseInt(e,10):parseFloat(e))||Number.isNaN(e)?e=g||0:a&&(e=l6(e,g,m))),e},C=u,M=()=>{var e=l6(k()+(d?f*b:f),g,m);e!==u&&(r(24,C=e),r(0,u=e),$(u))},T=()=>{var e=l6(k()-(d?f*b:f),g,m);e!==u&&(r(24,C=e),r(0,u=e),$(u))};return e.$$set=e=>{"value"in e&&r(0,u=e.value),"type"in e&&r(1,h=e.type),"disabled"in e&&r(2,p=e.disabled),"inputmode"in e&&r(3,v=e.inputmode),"min"in e&&r(4,g=e.min),"max"in e&&r(5,m=e.max),"step"in e&&r(6,f=e.step),"onchange"in e&&r(21,$=e.onchange),"onkeydown"in e&&r(22,y=e.onkeydown),"title"in e&&r(7,x=e.title),"stepMultiplier"in e&&r(23,b=e.stepMultiplier),"placeholder"in e&&r(8,w=e.placeholder),"enableSpinButtons"in e&&r(9,S=e.enableSpinButtons)},e.$$.update=()=>{48&e.$$.dirty&&r(14,a=iG(g)&&iG(m)),16778241&e.$$.dirty&&r(13,n=c===document.activeElement?C:u),32&e.$$.dirty&&r(25,o=m?(m+"").length:void 0),33554440&e.$$.dirty&&r(12,l="numeric"===v&&o?o:void 0),33554432&e.$$.dirty&&r(11,s=o?"min-width:".concat(o,"em"):void 0)},[u,h,p,v,g,m,f,x,w,S,c,s,l,n,a,()=>{r(24,C=k()),$(u)},()=>{r(24,C=c.value),$(k())},M,T,e=>{d=e.shiftKey,y(e);var{key:t}=e;/up|down/i.test(t)&&(/up/i.test(t)&&M(),/down/i.test(t)&&T(),e.preventDefault(),e.stopPropagation())},e=>{var{key:t}=e;/up|down/i.test(t)&&(e.preventDefault(),e.stopPropagation())},$,y,b,C,o,function(e){ln[e?"unshift":"push"](()=>{r(10,c=e)})}]}class hy extends lz{constructor(e){super(),lF(this,e,h$,hf,ow,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:21,onkeydown:22,title:7,stepMultiplier:23,placeholder:8,enableSpinButtons:9})}}var hx=e=>({}),hb=e=>({});function hw(e){var t,r,a,n,o=(e[2]||e[21])+"",l=e[6]&&hk(e);return{c(){l&&l.c(),t=oX(),oq(r=oH("span"),"class",a=dy(["PinturaButtonLabel",e[3],e[5]&&"implicit"]))},m(e,a){l&&l.m(e,a),oj(e,t,a),oj(e,r,a),r.innerHTML=o,n=!0},p(e,s){e[6]?l?(l.p(e,s),64&s[0]&&lx(l,1)):((l=hk(e)).c(),lx(l,1),l.m(t.parentNode,t)):l&&(l$(),lb(l,1,1,()=>{l=null}),ly()),(!n||2097156&s[0])&&o!==(o=(e[2]||e[21])+"")&&(r.innerHTML=o),(!n||40&s[0]&&a!==(a=dy(["PinturaButtonLabel",e[3],e[5]&&"implicit"])))&&oq(r,"class",a)},i(e){n||(lx(l),n=!0)},o(e){lb(l),n=!1},d(e){l&&l.d(e),e&&oV(t),e&&oV(r)}}}function hS(e){var t,r;return t=new hy({props:{value:e[10],onchange:e[17],type:"number",inputmode:"numeric",min:e[8].reduce(hz,1/0),max:e[8].reduce(hO,-1/0),enableSpinButtons:!1}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};1024&r[0]&&(a.value=e[10]),131072&r[0]&&(a.onchange=e[17]),256&r[0]&&(a.min=e[8].reduce(hz,1/0)),256&r[0]&&(a.max=e[8].reduce(hO,-1/0)),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function hk(e){var t,r;return t=new dX({props:{class:"PinturaButtonIcon",$$slots:{default:[hC]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};536870976&r[0]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function hC(e){var t;return{c(){t=oU("g")},m(r,a){oj(r,t,a),t.innerHTML=e[6]},p(e,r){64&r[0]&&(t.innerHTML=e[6])},d(e){e&&oV(t)}}}function hM(e){var t,r,a,n,o,l,s=[hS,hw],c=[];return a=c[r=e[18]?0:1]=s[r](e),{c(){t=oH("span"),a.c(),oq(t,"slot","label"),oq(t,"title",n=uq(e[1],e[16])),oq(t,"class",o=dy(["PinturaButtonInner",e[18]&&"PinturaComboBox",e[4]]))},m(e,a){oj(e,t,a),c[r].m(t,null),l=!0},p(e,d){var u=r;(r=e[18]?0:1)===u?c[r].p(e,d):(l$(),lb(c[u],1,1,()=>{c[u]=null}),ly(),(a=c[r])?a.p(e,d):(a=c[r]=s[r](e)).c(),lx(a,1),a.m(t,null)),(!l||65538&d[0]&&n!==(n=uq(e[1],e[16])))&&oq(t,"title",n),(!l||262160&d[0]&&o!==(o=dy(["PinturaButtonInner",e[18]&&"PinturaComboBox",e[4]])))&&oq(t,"class",o)},i(e){l||(lx(a),l=!0)},o(e){lb(a),l=!1},d(e){e&&oV(t),c[r].d()}}}function hT(e){var t,r,a=e[31].label+"";return{c(){t=oH("span"),r=oG(a),oq(t,"slot","group")},m(e,a){oj(e,t,a),oN(t,r)},p(e,t){1&t[1]&&a!==(a=e[31].label+"")&&oQ(r,a)},d(e){e&&oV(t)}}}function hP(e){var t,r;return t=new dX({props:{style:eO(e[14])?e[14](e[31].value):e[14],$$slots:{default:[hR]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16384&r[0]|1&r[1]&&(a.style=eO(e[14])?e[14](e[31].value):e[14]),536870912&r[0]|1&r[1]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function hR(e){var t,r=e[31].icon+"";return{c(){t=oU("g")},m(e,a){oj(e,t,a),t.innerHTML=r},p(e,a){1&a[1]&&r!==(r=e[31].icon+"")&&(t.innerHTML=r)},d(e){e&&oV(t)}}}function hE(e){var t,r,a,n,o,l=e[31].label+"",s=e[31].sublabel&&hA(e);return{c(){t=oH("span"),r=new o2(!1),a=oX(),s&&s.c(),r.a=a,oq(t,"style",n=eO(e[15])?e[15](e[31].value):e[15]),oq(t,"class",o=dy(["PinturaDropdownOptionLabel",e[11]]))},m(e,n){oj(e,t,n),r.m(l,t),oN(t,a),s&&s.m(t,null)},p(e,a){1&a[1]&&l!==(l=e[31].label+"")&&r.p(l),e[31].sublabel?s?s.p(e,a):((s=hA(e)).c(),s.m(t,null)):s&&(s.d(1),s=null),32768&a[0]|1&a[1]&&n!==(n=eO(e[15])?e[15](e[31].value):e[15])&&oq(t,"style",n),2048&a[0]&&o!==(o=dy(["PinturaDropdownOptionLabel",e[11]]))&&oq(t,"class",o)},d(e){e&&oV(t),s&&s.d()}}}function hA(e){var t,r=e[31].sublabel+"";return{c(){oq(t=oH("span"),"class","PinturaDropdownOptionSublabel")},m(e,a){oj(e,t,a),t.innerHTML=r},p(e,a){1&a[1]&&r!==(r=e[31].sublabel+"")&&(t.innerHTML=r)},d(e){e&&oV(t)}}}function hI(e){var t,r,a,n=e[31].icon&&hP(e),o=!e[31].hideLabel&&hE(e);return{c(){t=oH("span"),n&&n.c(),r=oX(),o&&o.c(),oq(t,"slot","option")},m(e,l){oj(e,t,l),n&&n.m(t,null),oN(t,r),o&&o.m(t,null),a=!0},p(e,a){e[31].icon?n?(n.p(e,a),1&a[1]&&lx(n,1)):((n=hP(e)).c(),lx(n,1),n.m(t,r)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),e[31].hideLabel?o&&(o.d(1),o=null):o?o.p(e,a):((o=hE(e)).c(),o.m(t,null))},i(e){a||(lx(n),a=!0)},o(e){lb(n),a=!1},d(e){e&&oV(t),n&&n.d(),o&&o.d()}}}function hL(e){var t,r,a,n,o,l,s=e[27].controls,c=oM(s,e,e[29],hb);return a=new hg({props:{class:"PinturaOptionsList PinturaScrollableContent",name:e[7],value:e[10],selectedIndex:e[9],optionFilter:e[12],optionMapper:e[13],optionLabelClass:dy(["PinturaDropdownOptionLabel",e[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:e[19],onchange:e[22],$$slots:{option:[hI,e=>{var{option:t}=e;return{31:t}},e=>{var{option:t}=e;return[0,t?1:0]}],group:[hT,e=>{var{option:t}=e;return{31:t}},e=>{var{option:t}=e;return[0,t?1:0]}]},$$scope:{ctx:e}}}),{c(){t=oH("div"),c&&c.c(),r=oX(),lA(a.$$.fragment),oq(t,"slot","details"),oq(t,"class","PinturaOptionsListWrapper")},m(s,d){oj(s,t,d),c&&c.m(t,null),oN(t,r),lI(a,t,null),n=!0,o||(l=oY(t,"keydown",e[24]),o=!0)},p(e,t){c&&c.p&&(!n||536870912&t[0])&&oR(c,s,e,e[29],n?oP(s,e[29],t,hx):oE(e[29]),hb);var r={};128&t[0]&&(r.name=e[7]),1024&t[0]&&(r.value=e[10]),512&t[0]&&(r.selectedIndex=e[9]),4096&t[0]&&(r.optionFilter=e[12]),8192&t[0]&&(r.optionMapper=e[13]),2048&t[0]&&(r.optionLabelClass=dy(["PinturaDropdownOptionLabel",e[11]])),524288&t[0]&&(r.options=e[19]),536922112&t[0]|1&t[1]&&(r.$$scope={dirty:t,ctx:e}),a.$set(r)},i(e){n||(lx(c,e),lx(a.$$.fragment,e),n=!0)},o(e){lb(c,e),lb(a.$$.fragment,e),n=!1},d(e){e&&oV(t),c&&c.d(e),lL(a),o=!1,l()}}}function hF(e){function t(t){e[28](t)}var r,a,n,o={onshow:e[23],buttonClass:dy(["PinturaDropdownButton",e[0],e[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[hL],label:[hM]},$$scope:{ctx:e}};return void 0!==e[20]&&(o.isActive=e[20]),r=new uW({props:o}),ln.push(()=>lE(r,"isActive",t)),{c(){lA(r.$$.fragment)},m(e,t){lI(r,e,t),n=!0},p(e,t){var n={};33&t[0]&&(n.buttonClass=dy(["PinturaDropdownButton",e[0],e[5]&&"PinturaDropdownIconOnly"])),540016638&t[0]&&(n.$$scope={dirty:t,ctx:e}),!a&&1048576&t[0]&&(a=!0,n.isActive=e[20],lh(()=>a=!1)),r.$set(n)},i(e){n||(lx(r.$$.fragment,e),n=!0)},o(e){lb(r.$$.fragment,e),n=!1},d(e){lL(r,e)}}}var hz=(e,t)=>{var[r]=t;return r<e?r:e},hO=(e,t)=>{var[r]=t;return r>e?r:e};function hB(e,t,r){var a,n,o,{$$slots:l={},$$scope:s}=t,{class:c}=t,{title:d}=t,{label:u}=t,{labelClass:h}=t,{innerClass:p}=t,{hideLabel:v=!1}=t,{icon:g}=t,{name:m}=t,{options:f=[]}=t,{selectedIndex:$=-1}=t,{value:y}=t,{optionLabelClass:x}=t,{optionFilter:b}=t,{optionMapper:w}=t,{optionIconStyle:S}=t,{optionLabelStyle:k}=t,{locale:C}=t,{onchange:M=ep}=t,{onload:T=ep}=t,{ondestroy:P=ep}=t,{enableInput:R=!1}=t,E=e=>{var t=e.find(e=>void 0===e[0]);if(t)return t[1]};return o8(()=>T({options:f})),o9(()=>P({options:f})),e.$$set=e=>{"class"in e&&r(0,c=e.class),"title"in e&&r(1,d=e.title),"label"in e&&r(2,u=e.label),"labelClass"in e&&r(3,h=e.labelClass),"innerClass"in e&&r(4,p=e.innerClass),"hideLabel"in e&&r(5,v=e.hideLabel),"icon"in e&&r(6,g=e.icon),"name"in e&&r(7,m=e.name),"options"in e&&r(8,f=e.options),"selectedIndex"in e&&r(9,$=e.selectedIndex),"value"in e&&r(10,y=e.value),"optionLabelClass"in e&&r(11,x=e.optionLabelClass),"optionFilter"in e&&r(12,b=e.optionFilter),"optionMapper"in e&&r(13,w=e.optionMapper),"optionIconStyle"in e&&r(14,S=e.optionIconStyle),"optionLabelStyle"in e&&r(15,k=e.optionLabelStyle),"locale"in e&&r(16,C=e.locale),"onchange"in e&&r(17,M=e.onchange),"onload"in e&&r(25,T=e.onload),"ondestroy"in e&&r(26,P=e.ondestroy),"enableInput"in e&&r(18,R=e.enableInput),"$$scope"in e&&r(29,s=e.$$scope)},e.$$.update=()=>{65792&e.$$.dirty[0]&&r(19,a=C?uJ(f,C):f),525312&e.$$.dirty[0]&&r(21,n=a.reduce((e,t)=>{if(e)return e;var[r,a]=Array.isArray(t)?t:[t,t];if(u1(r,y))return a},void 0)||E(a)||y)},[c,d,u,h,p,v,g,m,f,$,y,x,b,w,S,k,C,M,R,a,o,n,e=>{r(21,n=e.value),M(e),r(20,o=!1)},e=>{var{e:t,panel:r}=e;if(t&&t.key&&/up|down/i.test(t.key))return uT(r.querySelector("input:not([disabled])"));uT(r.querySelector("fieldset"))},e=>{/tab/i.test(e.key)&&e.preventDefault()},T,P,l,function(e){r(20,o=e)},s]}class hD extends lz{constructor(e){super(),lF(this,e,hB,hF,ow,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:16,onchange:17,onload:25,ondestroy:26,enableInput:18},null,[-1,-1])}}function h_(e){var t;return{c(){oq(t=oH("div"),"slot","details")},m(r,a){oj(r,t,a),e[14](t)},p:og,d(r){r&&oV(t),e[14](null)}}}function hN(e){function t(t){e[15](t)}var r,a,n,o={buttonLabel:e[0],buttonClass:e[1],buttonIcon:e[2],buttonHideLabel:e[3],buttonTitle:e[4],buttonLabelClass:e[5],onshow:e[6],onhide:e[7],$$slots:{details:[h_]},$$scope:{ctx:e}};return void 0!==e[9]&&(o.isActive=e[9]),r=new uW({props:o}),ln.push(()=>lE(r,"isActive",t)),{c(){lA(r.$$.fragment)},m(e,t){lI(r,e,t),n=!0},p(e,t){var[n]=t,o={};1&n&&(o.buttonLabel=e[0]),2&n&&(o.buttonClass=e[1]),4&n&&(o.buttonIcon=e[2]),8&n&&(o.buttonHideLabel=e[3]),16&n&&(o.buttonTitle=e[4]),32&n&&(o.buttonLabelClass=e[5]),64&n&&(o.onshow=e[6]),128&n&&(o.onhide=e[7]),65792&n&&(o.$$scope={dirty:n,ctx:e}),!a&&512&n&&(a=!0,o.isActive=e[9],lh(()=>a=!1)),r.$set(o)},i(e){n||(lx(r.$$.fragment,e),n=!0)},o(e){lb(r.$$.fragment,e),n=!1},d(e){lL(r,e)}}}function hW(e,t,r){var a,{buttonLabel:n}=t,{buttonClass:o}=t,{buttonIcon:l}=t,{buttonHideLabel:s}=t,{buttonTitle:c}=t,{buttonLabelClass:d}=t,{root:u}=t,{ondestroy:h=ep}=t,{onshow:p=ep}=t,{onhide:v=ep}=t,g=!1;return o9(h),e.$$set=e=>{"buttonLabel"in e&&r(0,n=e.buttonLabel),"buttonClass"in e&&r(1,o=e.buttonClass),"buttonIcon"in e&&r(2,l=e.buttonIcon),"buttonHideLabel"in e&&r(3,s=e.buttonHideLabel),"buttonTitle"in e&&r(4,c=e.buttonTitle),"buttonLabelClass"in e&&r(5,d=e.buttonLabelClass),"root"in e&&r(10,u=e.root),"ondestroy"in e&&r(11,h=e.ondestroy),"onshow"in e&&r(6,p=e.onshow),"onhide"in e&&r(7,v=e.onhide)},e.$$.update=()=>{1280&e.$$.dirty&&a&&u&&a.firstChild!==u&&(a.hasChildNodes()?a.replaceChild(u,a.firstChild):a.append(u))},[n,o,l,s,c,d,p,v,a,g,u,h,()=>r(9,g=!1),()=>r(9,g=!0),function(e){ln[e?"unshift":"push"](()=>{r(8,a=e)})},function(e){r(9,g=e)}]}class hj extends lz{constructor(e){super(),lF(this,e,hW,hN,ow,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}}var hV=(e,t)=>Math.round(e*(t=1/t))/t,hH=(e,t,r)=>(e-t)/(r-t),hU=e=>({}),hG=e=>({});function hX(e){var t,r,a,n,o,l,s,c;return r=new dX({props:{$$slots:{default:[hZ]},$$scope:{ctx:e}}}),o=new dX({props:{$$slots:{default:[hY]},$$scope:{ctx:e}}}),{c(){t=oH("button"),lA(r.$$.fragment),a=oX(),n=oH("button"),lA(o.$$.fragment),oq(t,"type","button"),oq(t,"aria-label","Increase"),oq(n,"type","button"),oq(n,"aria-label","Decrease")},m(d,u){oj(d,t,u),lI(r,t,null),oj(d,a,u),oj(d,n,u),lI(o,n,null),l=!0,s||(c=[oY(t,"pointerdown",e[20](1)),oY(n,"pointerdown",e[20](-1))],s=!0)},p(e,t){var a={};128&t[1]&&(a.$$scope={dirty:t,ctx:e}),r.$set(a);var n={};128&t[1]&&(n.$$scope={dirty:t,ctx:e}),o.$set(n)},i(e){l||(lx(r.$$.fragment,e),lx(o.$$.fragment,e),l=!0)},o(e){lb(r.$$.fragment,e),lb(o.$$.fragment,e),l=!1},d(e){e&&oV(t),lL(r),e&&oV(a),e&&oV(n),lL(o),s=!1,ox(c)}}}function hZ(e){var t;return{c(){oq(t=oU("path"),"d","M8 12 h8 M12 8 v8")},m(e,r){oj(e,t,r)},p:og,d(e){e&&oV(t)}}}function hY(e){var t;return{c(){oq(t=oU("path"),"d","M9 12 h6")},m(e,r){oj(e,t,r)},p:og,d(e){e&&oV(t)}}}function hq(e){var t,r,a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y=e[36].default,x=oM(y,e,e[38],null),b=e[36].knob,w=oM(b,e,e[38],hG),S=e[9]&&hX(e);return{c(){t=oH("div"),r=oH("div"),a=oH("input"),o=oX(),l=oH("div"),x&&x.c(),c=oX(),d=oH("div"),u=oH("div"),w&&w.c(),v=oX(),S&&S.c(),oq(a,"type","range"),oq(a,"id",e[3]),oq(a,"min",e[0]),oq(a,"max",e[1]),oq(a,"step",e[2]),a.value=e[14],oq(a,"style",n=e[10]?"pointer-events:none":""),oq(l,"class",s=dy(["PinturaSliderTrack",e[5]])),oq(l,"style",e[4]),oq(u,"class",h=dy(["PinturaSliderKnob",e[7]])),oq(u,"style",e[6]),oq(d,"class","PinturaSliderKnobController"),oq(d,"style",e[17]),oq(r,"class","PinturaSliderControl"),oq(r,"style",p="--slider-position:".concat(Math.round(e[15]))),oq(t,"class",g=dy(["PinturaSlider",e[12]])),oq(t,"data-direction",e[8])},m(n,s){oj(n,t,s),oN(t,r),oN(r,a),e[37](a),oN(r,o),oN(r,l),x&&x.m(l,null),oN(r,c),oN(r,d),oN(d,u),w&&w.m(u,null),oN(t,v),S&&S.m(t,null),m=!0,f||($=[oY(a,"input",e[18]),oY(a,"nudge",e[19]),oF(d6.call(null,a)),oY(r,"pointerdown",function(){ob(e[11]&&e[13])&&(e[11]&&e[13]).apply(this,arguments)})],f=!0)},p(o,c){e=o,(!m||8&c[0])&&oq(a,"id",e[3]),(!m||1&c[0])&&oq(a,"min",e[0]),(!m||2&c[0])&&oq(a,"max",e[1]),(!m||4&c[0])&&oq(a,"step",e[2]),(!m||16384&c[0])&&(a.value=e[14]),(!m||1024&c[0]&&n!==(n=e[10]?"pointer-events:none":""))&&oq(a,"style",n),x&&x.p&&(!m||128&c[1])&&oR(x,y,e,e[38],m?oP(y,e[38],c,null):oE(e[38]),null),(!m||32&c[0]&&s!==(s=dy(["PinturaSliderTrack",e[5]])))&&oq(l,"class",s),(!m||16&c[0])&&oq(l,"style",e[4]),w&&w.p&&(!m||128&c[1])&&oR(w,b,e,e[38],m?oP(b,e[38],c,hU):oE(e[38]),hG),(!m||128&c[0]&&h!==(h=dy(["PinturaSliderKnob",e[7]])))&&oq(u,"class",h),(!m||64&c[0])&&oq(u,"style",e[6]),(!m||131072&c[0])&&oq(d,"style",e[17]),(!m||32768&c[0]&&p!==(p="--slider-position:".concat(Math.round(e[15]))))&&oq(r,"style",p),e[9]?S?(S.p(e,c),512&c[0]&&lx(S,1)):((S=hX(e)).c(),lx(S,1),S.m(t,null)):S&&(l$(),lb(S,1,1,()=>{S=null}),ly()),(!m||4096&c[0]&&g!==(g=dy(["PinturaSlider",e[12]])))&&oq(t,"class",g),(!m||256&c[0])&&oq(t,"data-direction",e[8])},i(e){m||(lx(x,e),lx(w,e),lx(S),m=!0)},o(e){lb(x,e),lb(w,e),lb(S),m=!1},d(r){r&&oV(t),e[37](null),x&&x.d(r),w&&w.d(r),S&&S.d(),f=!1,ox($)}}}function hK(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,{$$slots:b={},$$scope:w}=t,{min:S=0}=t,{max:k=100}=t,{step:C=1}=t,{id:M}=t,{value:T=0}=t,{valueMin:P}=t,{valueMax:R}=t,{trackStyle:E}=t,{trackClass:A}=t,{knobStyle:I}=t,{knobClass:L}=t,{ongrab:F=ep}=t,{onchange:z=ep}=t,{onrelease:O=ep}=t,{onexceed:B=ep}=t,{direction:D="x"}=t,{getValue:_=e7}=t,{setValue:N=e7}=t,{enableSpinButtons:W=!0}=t,{enableForceUseKnob:j=!1}=t,{enableStopPropagation:V=!0}=t,{enablePointerdownListener:H=!0}=t,{maxInteractionDistance:U=6}=t,{class:G}=t,X=e=>N(hV(l6(e,S,k),C),T),Z=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{grabbed:o=!1,released:l=!1}=a,s=X(S+e/t*n),c=P||S,d=R||k;if(r(21,T=ez(s)?s:l6(s,c,d)),$!==s){if($=s,!ez(s)&&(s<c||s>d)&&B(T,s),T===f)return;f=T,o&&F(T),z(T),l&&O(T)}},Y=e=>{var t=e[u]-m;Z(g+t,v)},q=e=>{v=void 0,document.documentElement.removeEventListener("pointermove",Y),document.documentElement.removeEventListener("pointerup",q),z(T),O(T)},K=()=>{r(21,T=X(a+J*C)),z(T)},J=1,Q=!1,ee=e=>{clearTimeout(x),Q||K(),O(T),document.removeEventListener("pointerup",ee)};return e.$$set=e=>{"min"in e&&r(0,S=e.min),"max"in e&&r(1,k=e.max),"step"in e&&r(2,C=e.step),"id"in e&&r(3,M=e.id),"value"in e&&r(21,T=e.value),"valueMin"in e&&r(22,P=e.valueMin),"valueMax"in e&&r(23,R=e.valueMax),"trackStyle"in e&&r(4,E=e.trackStyle),"trackClass"in e&&r(5,A=e.trackClass),"knobStyle"in e&&r(6,I=e.knobStyle),"knobClass"in e&&r(7,L=e.knobClass),"ongrab"in e&&r(24,F=e.ongrab),"onchange"in e&&r(25,z=e.onchange),"onrelease"in e&&r(26,O=e.onrelease),"onexceed"in e&&r(27,B=e.onexceed),"direction"in e&&r(8,D=e.direction),"getValue"in e&&r(28,_=e.getValue),"setValue"in e&&r(29,N=e.setValue),"enableSpinButtons"in e&&r(9,W=e.enableSpinButtons),"enableForceUseKnob"in e&&r(10,j=e.enableForceUseKnob),"enableStopPropagation"in e&&r(30,V=e.enableStopPropagation),"enablePointerdownListener"in e&&r(11,H=e.enablePointerdownListener),"maxInteractionDistance"in e&&r(31,U=e.maxInteractionDistance),"class"in e&&r(12,G=e.class),"$$scope"in e&&r(38,w=e.$$scope)},e.$$.update=()=>{270532608&e.$$.dirty[0]&&r(14,a=void 0!==T?_(T):0),3&e.$$.dirty[0]&&(n=k-S),16387&e.$$.dirty[0]&&r(33,o=hH(a,S,k)),4&e.$$.dirty[1]&&r(15,l=100*o),256&e.$$.dirty[0]&&r(34,s=D.toUpperCase()),256&e.$$.dirty[0]&&r(35,c="x"===D?"Width":"Height"),16&e.$$.dirty[1]&&(d="offset".concat(c)),e.$$.dirty[1],8&e.$$.dirty[1]&&(u="page".concat(s)),32768&e.$$.dirty[0]|8&e.$$.dirty[1]&&r(17,h="transform: translate".concat(s,"(").concat(l,"%)"))},[S,k,C,M,E,A,I,L,D,W,j,H,G,e=>{var t=!1;V&&e.stopPropagation(),clearTimeout(y);var r=p.getBoundingClientRect();if(v=p[d],g=(m=e[u])-r[D],j){if(Math.abs(g-o*v)>U)return;t=!0,e.stopPropagation()}return document.activeElement!==p&&p.focus(),Z(g,v,{grabbed:!0}),document.documentElement.addEventListener("pointermove",Y),document.documentElement.addEventListener("pointerup",q),t},a,l,p,h,e=>{v||(r(21,T=N(parseFloat(e.target.value))),T!==f&&(f=T,z(T)))},e=>{var t=p[d];Z(a/n*t+e.detail[D],t),clearTimeout(y),y=setTimeout(()=>{O(T)},250)},e=>t=>{clearTimeout(y),J=e,Q=!1,x=setInterval(()=>{Q=!0,K()},100),document.addEventListener("pointercancel",ee),document.addEventListener("pointerup",ee)},T,P,R,F,z,O,B,_,N,V,U,e=>{var t=p.getBoundingClientRect(),r=e[u]-t[D],a=p[d];return Math.abs(r-o*a)},o,s,c,b,function(e){ln[e?"unshift":"push"](()=>{r(16,p=e)})},w]}class hJ extends lz{constructor(e){super(),lF(this,e,hK,hq,ow,{min:0,max:1,step:2,id:3,value:21,valueMin:22,valueMax:23,trackStyle:4,trackClass:5,knobStyle:6,knobClass:7,ongrab:24,onchange:25,onrelease:26,onexceed:27,direction:8,getValue:28,setValue:29,enableSpinButtons:9,enableForceUseKnob:10,enableStopPropagation:30,enablePointerdownListener:11,maxInteractionDistance:31,class:12,eventDistanceToKnob:32,handlePointerDown:13},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[32]}get handlePointerDown(){return this.$$.ctx[13]}}function hQ(e){var t,r;return t=new dX({props:{class:"PinturaButtonIcon",$$slots:{default:[h1]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};1048580&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function h1(e){var t;return{c(){t=oU("g")},m(r,a){oj(r,t,a),t.innerHTML=e[2]},p(e,r){4&r&&(t.innerHTML=e[2])},d(e){e&&oV(t)}}}function h0(e){var t,r,a=uq(e[8],e[6])+"";return{c(){t=oH("span"),r=oG(a),oq(t,"class","PinturaButtonLabelPrefix")},m(e,a){oj(e,t,a),oN(t,r)},p(e,t){320&t&&a!==(a=uq(e[8],e[6])+"")&&oQ(r,a)},d(e){e&&oV(t)}}}function h2(e){var t,r,a,n,o,l,s,c,d,u=e[2]&&hQ(e),h=e[8]&&h0(e);return{c(){t=oH("span"),u&&u.c(),r=oX(),h&&h.c(),a=oX(),n=oH("span"),o=oG(e[9]),oq(n,"class",l=dy(["PinturaButtonLabel",e[3],e[5]&&"implicit"])),oq(t,"slot","label"),oq(t,"title",s=uq(e[1],e[6])),oq(t,"class",c=dy(["PinturaButtonInner",e[4]]))},m(e,l){oj(e,t,l),u&&u.m(t,null),oN(t,r),h&&h.m(t,null),oN(t,a),oN(t,n),oN(n,o),d=!0},p(e,p){e[2]?u?(u.p(e,p),4&p&&lx(u,1)):((u=hQ(e)).c(),lx(u,1),u.m(t,r)):u&&(l$(),lb(u,1,1,()=>{u=null}),ly()),e[8]?h?h.p(e,p):((h=h0(e)).c(),h.m(t,a)):h&&(h.d(1),h=null),(!d||512&p)&&oQ(o,e[9]),(!d||40&p&&l!==(l=dy(["PinturaButtonLabel",e[3],e[5]&&"implicit"])))&&oq(n,"class",l),(!d||66&p&&s!==(s=uq(e[1],e[6])))&&oq(t,"title",s),(!d||16&p&&c!==(c=dy(["PinturaButtonInner",e[4]])))&&oq(t,"class",c)},i(e){d||(lx(u),d=!0)},o(e){lb(u),d=!1},d(e){e&&oV(t),u&&u.d(),h&&h.d()}}}function h4(e){for(var t,r,a,n,o,l=[e[12],{value:e[7]},{onchange:e[11]}],s={},c=0;c<l.length;c+=1)s=of(s,l[c]);return r=new hJ({props:s}),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"slot","details")},m(l,s){oj(l,t,s),lI(r,t,null),a=!0,n||(o=oY(t,"keydown",e[10]),n=!0)},p(e,t){var a=6272&t?lP(l,[4096&t&&lR(e[12]),128&t&&{value:e[7]},2048&t&&{onchange:e[11]}]):{};r.$set(a)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r),n=!1,o()}}}function h5(e){var t,r;return t=new uW({props:{panelClass:"PinturaSliderPanel",buttonClass:dy(["PinturaSliderButton",e[0],e[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[h4],label:[h2]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var[a]=r,n={};33&a&&(n.buttonClass=dy(["PinturaSliderButton",e[0],e[5]&&"PinturaSliderIconOnly"])),1053694&a&&(n.$$scope={dirty:a,ctx:e}),t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function h3(e,t,r){var a,n=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"],o=oI(t,n),{class:l}=t,{title:s}=t,{label:c=Math.round}=t,{icon:d}=t,{labelClass:u}=t,{innerClass:h}=t,{hideLabel:p=!1}=t,{locale:v}=t,{value:g}=t,{onchange:m=ep}=t,{labelPrefix:f}=t,{min:$,max:y,getValue:x=e7}=o,b=e=>eO(c)?c(x(e),$,y,e):c,w=e=>r(9,a=b(e));return e.$$set=e=>{r(12,o=oI(t=of(of({},t),oA(e)),n)),"class"in e&&r(0,l=e.class),"title"in e&&r(1,s=e.title),"label"in e&&r(13,c=e.label),"icon"in e&&r(2,d=e.icon),"labelClass"in e&&r(3,u=e.labelClass),"innerClass"in e&&r(4,h=e.innerClass),"hideLabel"in e&&r(5,p=e.hideLabel),"locale"in e&&r(6,v=e.locale),"value"in e&&r(7,g=e.value),"onchange"in e&&r(14,m=e.onchange),"labelPrefix"in e&&r(8,f=e.labelPrefix)},e.$$.update=()=>{8320&e.$$.dirty&&w(g)},[l,s,d,u,h,p,v,g,f,a,e=>{/tab/i.test(e.key)&&e.preventDefault()},e=>{w(e),m(e)},o,c,m]}class h6 extends lz{constructor(e){super(),lF(this,e,h3,h5,ow,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function h8(e){var t,r,a=uq(e[0],e[1])+"";return{c(){t=oH("span"),r=oG(a),oq(t,"class",e[3])},m(e,a){oj(e,t,a),oN(t,r)},p(e,n){3&n&&a!==(a=uq(e[0],e[1])+"")&&oQ(r,a),8&n&&oq(t,"class",e[3])},d(e){e&&oV(t)}}}function h7(e){var t,r,a,n,o=e[0]&&h8(e);return a=new pF({props:{items:e[2]}}),{c(){t=oH("li"),o&&o.c(),r=oX(),lA(a.$$.fragment),oq(t,"class","PinturaShapeStyle")},m(e,l){oj(e,t,l),o&&o.m(t,null),oN(t,r),lI(a,t,null),n=!0},p(e,n){var[l]=n;e[0]?o?o.p(e,l):((o=h8(e)).c(),o.m(t,r)):o&&(o.d(1),o=null);var s={};4&l&&(s.items=e[2]),a.$set(s)},i(e){n||(lx(a.$$.fragment,e),n=!0)},o(e){lb(a.$$.fragment,e),n=!1},d(e){e&&oV(t),o&&o.d(),lL(a)}}}function h9(e,t,r){var a,{title:n}=t,{locale:o}=t,{items:l}=t,{hideTitle:s=!1}=t;return e.$$set=e=>{"title"in e&&r(0,n=e.title),"locale"in e&&r(1,o=e.locale),"items"in e&&r(2,l=e.items),"hideTitle"in e&&r(4,s=e.hideTitle)},e.$$.update=()=>{16&e.$$.dirty&&r(3,a="PinturaShapeStyleLabel"+(s?" implicit":""))},[n,o,l,a,s]}class pe extends lz{constructor(e){super(),lF(this,e,h9,h7,ow,{title:0,locale:1,items:2,hideTitle:4})}}var pt=(e,t,r)=>{var a=Math.max(e,t,r),n=a-Math.min(e,t,r),o=n&&(a==e?(t-r)/n:a==t?2+(r-e)/n:4+(e-t)/n);return[60*(o<0?o+6:o)/360,a&&n/a,a]},pr=(e,t,r)=>{var a,n,o,l=Math.floor(6*e),s=6*e-l,c=r*(1-t),d=r*(1-s*t),u=r*(1-(1-s)*t);switch(l%6){case 0:a=r,n=u,o=c;break;case 1:a=d,n=r,o=c;break;case 2:a=c,n=r,o=u;break;case 3:a=c,n=d,o=r;break;case 4:a=u,n=c,o=r;break;case 5:a=r,n=c,o=d}return[a,n,o]};function pi(e){var t,r,a;return{c(){t=oH("div"),r=oH("span"),oq(t,"class","PinturaColorPreview"),oq(t,"title",e[0]),oq(t,"style",a="--color:".concat(e[1]))},m(e,a){oj(e,t,a),oN(t,r)},p(e,r){var[n]=r;1&n&&oq(t,"title",e[0]),2&n&&a!==(a="--color:".concat(e[1]))&&oq(t,"style",a)},i:og,o:og,d(e){e&&oV(t)}}}function pa(e,t,r){var a,{color:n}=t,{title:o}=t;return e.$$set=e=>{"color"in e&&r(2,n=e.color),"title"in e&&r(0,o=e.title)},e.$$.update=()=>{4&e.$$.dirty&&r(1,a=n?i6(n):"transparent")},[o,a,n]}class pn extends lz{constructor(e){super(),lF(this,e,pa,pi,ow,{color:2,title:0})}}var po=e=>{var[,t,r,a,n]=e.split("");e=e.length>=4&&e.length<=5?"#".concat(t).concat(t).concat(r).concat(r).concat(a).concat(a).concat(n?"".concat(n).concat(n):""):e;var[o,l,s,c,d]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(o)return[l,s,c,d].filter(e=>void 0!==e).map(e=>parseInt(e,16)/255)},pl=e=>(e=e.trim(),/^rgba/.test(e))?e.substr(5).split(",").map(parseFloat).map((e,t)=>e/(3===t?1:255)):/^rgb/.test(e)?e.substr(4).split(",").map(parseFloat).map(e=>e/255):/^#/.test(e)?po(e):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(e)?e.split(",").map(e=>parseInt(e,10)).map(e=>e/255):void 0;function ps(e){var t,r;return{c(){t=oH("span"),r=oG(e[0])},m(e,a){oj(e,t,a),oN(t,r)},p(e,t){1&t[0]&&oQ(r,e[0])},d(e){e&&oV(t)}}}function pc(e){r=new pn({props:{color:e[4],title:uq(e[8],e[10])}});var t,r,a,n,o=!e[9]&&ps(e);return{c(){t=oH("span"),lA(r.$$.fragment),a=oX(),o&&o.c(),oq(t,"slot","label"),oq(t,"class","PinturaButtonLabel")},m(e,l){oj(e,t,l),lI(r,t,null),oN(t,a),o&&o.m(t,null),n=!0},p(e,a){var n={};16&a[0]&&(n.color=e[4]),1280&a[0]&&(n.title=uq(e[8],e[10])),r.$set(n),e[9]?o&&(o.d(1),o=null):o?o.p(e,a):((o=ps(e)).c(),o.m(t,null))},i(e){n||(lx(r.$$.fragment,e),n=!0)},o(e){lb(r.$$.fragment,e),n=!1},d(e){e&&oV(t),lL(r),o&&o.d()}}}function pd(e){d=new hJ({props:{class:"PinturaHuePicker",knobStyle:"background-color:".concat(e[20]),onchange:e[26],value:e[15],min:0,max:1,step:.01}});var t,r,a,n,o,l,s,c,d,u,h,p,v,g,m=e[11]&&pu(e),f=e[14]&&ph(e);return{c(){t=oH("div"),r=oH("div"),a=oH("div"),n=oH("div"),c=oX(),lA(d.$$.fragment),u=oX(),m&&m.c(),h=oX(),f&&f.c(),oq(n,"role","button"),oq(n,"aria-label","Saturation slider"),oq(n,"class","PinturaPickerKnob"),oq(n,"tabindex","0"),oq(n,"style",o="background-color:".concat(e[19],";")),oq(a,"class","PinturaPickerKnobController"),oq(a,"style",l="transform:translate(".concat(e[24],"%,").concat(e[23],"%)")),oq(r,"class","PinturaSaturationPicker"),oq(r,"style",s="background-color: ".concat(e[20])),oq(t,"class","PinturaPicker")},m(o,l){oj(o,t,l),oN(t,r),oN(r,a),oN(a,n),e[37](r),oN(t,c),lI(d,t,null),oN(t,u),m&&m.m(t,null),oN(t,h),f&&f.m(t,null),p=!0,v||(g=[oY(n,"nudge",e[29]),oF(d6.call(null,n,{preventDefault:!0})),oY(r,"pointerdown",e[28])],v=!0)},p(e,c){(!p||524288&c[0]&&o!==(o="background-color:".concat(e[19],";")))&&oq(n,"style",o),(!p||25165824&c[0]&&l!==(l="transform:translate(".concat(e[24],"%,").concat(e[23],"%)")))&&oq(a,"style",l),(!p||1048576&c[0]&&s!==(s="background-color: ".concat(e[20])))&&oq(r,"style",s);var u={};1048576&c[0]&&(u.knobStyle="background-color:".concat(e[20])),32768&c[0]&&(u.value=e[15]),d.$set(u),e[11]?m?(m.p(e,c),2048&c[0]&&lx(m,1)):((m=pu(e)).c(),lx(m,1),m.m(t,h)):m&&(l$(),lb(m,1,1,()=>{m=null}),ly()),e[14]?f?f.p(e,c):((f=ph(e)).c(),f.m(t,null)):f&&(f.d(1),f=null)},i(e){p||(lx(d.$$.fragment,e),lx(m),p=!0)},o(e){lb(d.$$.fragment,e),lb(m),p=!1},d(r){r&&oV(t),e[37](null),lL(d),m&&m.d(),f&&f.d(),v=!1,ox(g)}}}function pu(e){var t,r;return t=new hJ({props:{class:"PinturaOpacityPicker",knobStyle:"background-color:".concat(e[17]),trackStyle:"background-image:linear-gradient(to right,".concat(e[18],",").concat(e[19],")"),onchange:e[27],value:e[16],min:0,max:1,step:.01}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};131072&r[0]&&(a.knobStyle="background-color:".concat(e[17])),786432&r[0]&&(a.trackStyle="background-image:linear-gradient(to right,".concat(e[18],",").concat(e[19],")")),65536&r[0]&&(a.value=e[16]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function ph(e){var t,r,a;return{c(){oq(t=oH("input"),"class","PinturaColorPickerInput"),oq(t,"type","text"),t.value=e[22]},m(n,o){oj(n,t,o),r||(a=oY(t,"input",e[30]),r=!0)},p(e,r){4194304&r[0]&&t.value!==e[22]&&(t.value=e[22])},d(e){e&&oV(t),r=!1,a()}}}function pp(e){var t,r;return t=new hg({props:{label:uq(e[10].labelColorPalette,e[10]),class:dy(["PinturaColorPresets",e[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:e[1],value:e[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:e[2].map(e[38]),selectedIndex:e[3],optionMapper:e[7],optionLabelClass:e[6],onchange:e[39],$$slots:{option:[pm,e=>{var{option:t}=e;return{51:t}},e=>{var{option:t}=e;return[0,t?1048576:0]}],group:[pv,e=>{var{option:t}=e;return{51:t}},e=>{var{option:t}=e;return[0,t?1048576:0]}]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};1024&r[0]&&(a.label=uq(e[10].labelColorPalette,e[10])),512&r[0]&&(a.class=dy(["PinturaColorPresets",e[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&r[0]&&(a.name=e[1]),16&r[0]&&(a.value=e[4]),1028&r[0]&&(a.options=e[2].map(e[38])),8&r[0]&&(a.selectedIndex=e[3]),128&r[0]&&(a.optionMapper=e[7]),64&r[0]&&(a.optionLabelClass=e[6]),512&r[0]|3145728&r[1]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function pv(e){var t,r,a=e[51].label+"";return{c(){t=oH("span"),r=oG(a),oq(t,"slot","group")},m(e,a){oj(e,t,a),oN(t,r)},p(e,t){1048576&t[1]&&a!==(a=e[51].label+"")&&oQ(r,a)},d(e){e&&oV(t)}}}function pg(e){var t,r,a=e[51].label+"";return{c(){t=oH("span"),r=oG(a),oq(t,"class","PinturaButtonLabel")},m(e,a){oj(e,t,a),oN(t,r)},p(e,t){1048576&t[1]&&a!==(a=e[51].label+"")&&oQ(r,a)},d(e){e&&oV(t)}}}function pm(e){r=new pn({props:{title:e[51].label,color:e[51].value}});var t,r,a,n,o=!e[9]&&pg(e);return{c(){t=oH("span"),lA(r.$$.fragment),a=oX(),o&&o.c(),oq(t,"slot","option")},m(e,l){oj(e,t,l),lI(r,t,null),oN(t,a),o&&o.m(t,null),n=!0},p(e,a){var n={};1048576&a[1]&&(n.title=e[51].label),1048576&a[1]&&(n.color=e[51].value),r.$set(n),e[9]?o&&(o.d(1),o=null):o?o.p(e,a):((o=pg(e)).c(),o.m(t,null))},i(e){n||(lx(r.$$.fragment,e),n=!0)},o(e){lb(r.$$.fragment,e),n=!1},d(e){e&&oV(t),lL(r),o&&o.d()}}}function pf(e){var t,r,a,n=e[13]&&pd(e),o=e[12]&&pp(e);return{c(){t=oH("div"),n&&n.c(),r=oX(),o&&o.c(),oq(t,"slot","details"),oq(t,"class","PinturaColorPickerPanel")},m(e,l){oj(e,t,l),n&&n.m(t,null),oN(t,r),o&&o.m(t,null),a=!0},p(e,a){e[13]?n?(n.p(e,a),8192&a[0]&&lx(n,1)):((n=pd(e)).c(),lx(n,1),n.m(t,r)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),e[12]?o?(o.p(e,a),4096&a[0]&&lx(o,1)):((o=pp(e)).c(),lx(o,1),o.m(t,null)):o&&(l$(),lb(o,1,1,()=>{o=null}),ly())},i(e){a||(lx(n),lx(o),a=!0)},o(e){lb(n),lb(o),a=!1},d(e){e&&oV(t),n&&n.d(),o&&o.d()}}}function p$(e){var t,r;return t=new uW({props:{buttonClass:dy(["PinturaColorPickerButton",e[5]]),$$slots:{details:[pf],label:[pc]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};32&r[0]&&(a.buttonClass=dy(["PinturaColorPickerButton",e[5]])),33554399&r[0]|2097152&r[1]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function py(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,b,w,{label:S}=t,{name:k}=t,{options:C=[]}=t,{selectedIndex:M=-1}=t,{value:T}=t,{buttonClass:P}=t,{optionLabelClass:R}=t,{optionMapper:E}=t,{onchange:A}=t,{title:I}=t,{hidePresetLabel:L=!0}=t,{locale:F}=t,{enableOpacity:z=!0}=t,{enablePresets:O=!0}=t,{enablePicker:B=!0}=t,{enableInput:D=!1}=t,_=(e,t)=>{if(h=[e[0],e[1],e[2]],t){var a=pt(...h);r(15,s=a[0]),r(32,c=a[1]),r(33,d=a[2]),r(16,u=iG(e[3])?e[3]:1)}r(17,p=i6(e)),r(18,v=i6([...h,0])),r(19,g=i6([...h,1])),r(20,m=i6(pr(s,1,1)))},N=()=>{var e=[...pr(s,c,d),u];_(e),A(e)},W=e=>{var t=3===e.length?[...e,1]:e;_(t,!0),A(t)},j=(e,t)=>{r(32,c=e),r(33,d=t),0===u&&r(16,u=1),N()},V=(e,t)=>{j(l6(e.x/t.width,0,1),1-l6(e.y/t.height,0,1))},H=e=>{var t=tz(tx(e),b);V(tF(tw(x),t),y)},U=e=>{y=void 0,document.documentElement.removeEventListener("pointermove",H),document.documentElement.removeEventListener("pointerup",U)},G=(e,t,r)=>{var a=e.map(e=>Math.round(255*e).toString(16).toLowerCase().padStart(2,"0"));return(!t&&a.length>3||"ff"===a[3])&&a.pop(),r&&(a=a.map(e=>e.substring(0,1))),"#".concat(a.join(""))};return e.$$set=e=>{"label"in e&&r(0,S=e.label),"name"in e&&r(1,k=e.name),"options"in e&&r(2,C=e.options),"selectedIndex"in e&&r(3,M=e.selectedIndex),"value"in e&&r(4,T=e.value),"buttonClass"in e&&r(5,P=e.buttonClass),"optionLabelClass"in e&&r(6,R=e.optionLabelClass),"optionMapper"in e&&r(7,E=e.optionMapper),"onchange"in e&&r(31,A=e.onchange),"title"in e&&r(8,I=e.title),"hidePresetLabel"in e&&r(9,L=e.hidePresetLabel),"locale"in e&&r(10,F=e.locale),"enableOpacity"in e&&r(11,z=e.enableOpacity),"enablePresets"in e&&r(12,O=e.enablePresets),"enablePicker"in e&&r(13,B=e.enablePicker),"enableInput"in e&&r(14,D=e.enableInput)},e.$$.update=()=>{16&e.$$.dirty[0]|8&e.$$.dirty[1]&&T&&(!f||!si(T,f))&&(r(34,f=[...T]),_(T,!0)),2&e.$$.dirty[1]&&r(24,a=100*c),4&e.$$.dirty[1]&&r(23,n=100-100*d),16&e.$$.dirty[1]&&r(36,o=!!w&&w.length>=4&&w.length<=5),18448&e.$$.dirty[0]|32&e.$$.dirty[1]&&r(22,l=D&&T?G(T,z,o):void 0)},[S,k,C,M,T,P,R,E,I,L,F,z,O,B,D,s,u,p,v,g,m,$,l,n,a,W,e=>{r(15,s=e),0===u&&r(16,u=1),N()},e=>{r(16,u=e),N()},e=>{e.stopPropagation(),y=tQ($.offsetWidth,$.offsetHeight),x=tb(e),b=tx(e),V(x,y),document.documentElement.addEventListener("pointermove",H),document.documentElement.addEventListener("pointerup",U)},e=>{y=tQ($.offsetWidth,$.offsetHeight);var t=a/100*y.width,r=n/100*y.height;V({x:t+e.detail.x,y:r+e.detail.y},y)},e=>{var{value:t}=e.target,a=t.length;if(t.startsWith("#")&&!(a<4)&&6!==a&&8!==a&&!(a>9)&&(z||!(a>7))){var n=pl(t);n&&(r(35,w=t),_(n),A(n))}},A,c,d,f,w,o,function(e){ln[e?"unshift":"push"](()=>{r(21,$=e)})},e=>{var[t,r]=e;return[t,eO(r)?r(F):r]},e=>W(e.value)]}class px extends lz{constructor(e){super(),lF(this,e,py,p$,ow,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:31,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14},null,[-1,-1])}}function pb(e){var t,r,a;return r=new pF({props:{items:e[0]}}),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"class","PinturaShorthandControl PinturaShapeStyle")},m(e,n){oj(e,t,n),lI(r,t,null),a=!0},p(e,t){var[a]=t,n={};1&a&&(n.items=e[0]),r.$set(n)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r)}}}function pw(e,t,r){var a,n,{value:o}=t,{onchange:l}=t,{controls:s=[]}=t,c=e=>{var{controls:t}=e;return er(e,J)};return e.$$set=e=>{r(6,t=of(of({},t),oA(e))),"value"in e&&r(1,o=e.value),"onchange"in e&&r(2,l=e.onchange),"controls"in e&&r(3,s=e.controls)},e.$$.update=()=>{r(4,a=c(t)),30&e.$$.dirty&&r(0,n=s.map((e,t)=>{var[r,n,s]=e;return[r,n,ea(ea(ea({},a),s),{},{value:o[t],onchange:e=>{var r=[...o];r[t]=e,l(r)}})]}))},t=oA(t),[n,o,l,s,a]}class pS extends lz{constructor(e){super(),lF(this,e,pw,pb,ow,{value:1,onchange:2,controls:3})}}function pk(e,t,r){var a=e.slice();return a[9]=t[r][0],a[0]=t[r][1],a[10]=t[r][2],a[2]=t[r][3],a}function pC(e){var t,r,a,n,o,l=[e[10]],s=e[3][e[9]]||e[9];function c(e){for(var t={},r=0;r<l.length;r+=1)t=of(t,l[r]);return{props:t}}return s&&(t=s,r=c(),a=new t(r)),{c(){a&&lA(a.$$.fragment),n=oZ()},m(e,t){a&&lI(a,e,t),oj(e,n,t),o=!0},p(e,t){var r=4&t?lP(l,[lR(e[10])]):{};if(s!==(s=e[3][e[9]]||e[9])){if(a){l$();var o,d,u=a;lb(u.$$.fragment,1,0,()=>{lL(u,1)}),ly()}s?(o=s,d=c(),lA((a=new o(d)).$$.fragment),lx(a.$$.fragment,1),lI(a,n.parentNode,n)):a=null}else s&&a.$set(r)},i(e){o||(a&&lx(a.$$.fragment,e),o=!0)},o(e){a&&lb(a.$$.fragment,e),o=!1},d(e){e&&oV(n),a&&lL(a,e)}}}function pM(e){var t,r=e[9],a=e[9]&&pE(e);return{c(){a&&a.c(),t=oZ()},m(e,r){a&&a.m(e,r),oj(e,t,r)},p(e,n){e[9]?r?ow(r,e[9])?(a.d(1),(a=pE(e)).c(),a.m(t.parentNode,t)):a.p(e,n):((a=pE(e)).c(),a.m(t.parentNode,t)):r&&(a.d(1),a=null),r=e[9]},i:og,o(e){lb(a)},d(e){e&&oV(t),a&&a.d(e)}}}function pT(e){var t,r,a=e[10].innerHTML+"";return{c(){t=new o2(!1),r=oZ(),t.a=r},m(e,n){t.m(a,e,n),oj(e,r,n)},p(e,r){4&r&&a!==(a=e[10].innerHTML+"")&&t.p(a)},i:og,o:og,d(e){e&&oV(r),e&&t.d()}}}function pP(e){var t,r=e[10].textContent+"";return{c(){t=oG(r)},m(e,r){oj(e,t,r)},p(e,a){4&a&&r!==(r=e[10].textContent+"")&&oQ(t,r)},i:og,o:og,d(e){e&&oV(t)}}}function pR(e){var t,r;return t=new pF({props:{items:e[2],discardEmptyItems:!0}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};4&r&&(a.items=e[2]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function pE(e){var t,r,a,n,o,l=[pR,pP,pT],s=[];function c(e,t){return e[2]&&e[2].length?0:e[10].textContent?1:e[10].innerHTML?2:-1}~(r=c(e))&&(a=s[r]=l[r](e));for(var d=[e[4](e[10])],u={},h=0;h<d.length;h+=1)u=of(u,d[h]);return{c(){t=oH(e[9]),a&&a.c(),n=oX(),/-/.test(e[9])?oJ(t,u):oK(t,u)},m(e,a){oj(e,t,a),~r&&s[r].m(t,null),oN(t,n),o=!0},p(e,o){var h=r;(r=c(e))===h?~r&&s[r].p(e,o):(a&&(l$(),lb(s[h],1,1,()=>{s[h]=null}),ly()),~r?((a=s[r])?a.p(e,o):(a=s[r]=l[r](e)).c(),lx(a,1),a.m(t,n)):a=null),u=lP(d,[4&o&&e[4](e[10])]),/-/.test(e[9])?oJ(t,u):oK(t,u)},i(e){o||(lx(a),o=!0)},o(e){lb(a),o=!1},d(e){e&&oV(t),~r&&s[r].d()}}}function pA(e,t){var r,a,n,o,l,s,c=[pM,pC],d=[];function u(e,t){return(4&t&&(a=null),null==a&&(a=!e[5](e[9])),a)?0:1}return o=d[n=u(t,-1)]=c[n](t),{key:e,first:null,c(){r=oZ(),o.c(),l=oZ(),this.first=r},m(e,t){oj(e,r,t),d[n].m(e,t),oj(e,l,t),s=!0},p(e,r){var a=n;(n=u(t=e,r))===a?d[n].p(t,r):(l$(),lb(d[a],1,1,()=>{d[a]=null}),ly(),(o=d[n])?o.p(t,r):(o=d[n]=c[n](t)).c(),lx(o,1),o.m(l.parentNode,l))},i(e){s||(lx(o),s=!0)},o(e){lb(o),s=!1},d(e){e&&oV(r),d[n].d(e),e&&oV(l)}}}function pI(e){for(var t,r,a=[],n=new Map,o=e[2],l=e=>e[0]+e[1],s=0;s<o.length;s+=1){var c=pk(e,o,s),d=l(c);n.set(d,a[s]=pA(d,c))}return{c(){for(var e=0;e<a.length;e+=1)a[e].c();t=oZ()},m(e,n){for(var o=0;o<a.length;o+=1)a[o].m(e,n);oj(e,t,n),r=!0},p(e,r){var[s]=r;62&s&&(o=e[2],l$(),a=lT(a,s,l,1,e,o,n,t.parentNode,lM,pA,t,pk),ly())},i(e){if(!r){for(var t=0;t<o.length;t+=1)lx(a[t]);r=!0}},o(e){for(var t=0;t<a.length;t+=1)lb(a[t]);r=!1},d(e){for(var r=0;r<a.length;r+=1)a[r].d(e);e&&oV(t)}}}function pL(e,t,r){var a,n,{items:o}=t,{discardEmptyItems:l=!0}=t,{key:s=""}=t,c={Button:d2,ImageButton:u$,ImageButtonList:uS,Dropdown:hD,RadioGroup:hg,Input:hy,Panel:hj,ProgressIndicator:uu,ShapeStyle:pe,ToggleSlider:h6,ColorPicker:px,ShorthandControl:pS},d=e=>!ez(e)||!!c[e],u=e=>{if(!e)return!1;var[t,,r,a=[]]=e;return!!d(t)||a.some(u)||r.textContent||r.innerHTML};return e.$$set=e=>{"items"in e&&r(6,o=e.items),"discardEmptyItems"in e&&r(7,l=e.discardEmptyItems),"key"in e&&r(0,s=e.key)},e.$$.update=()=>{1&e.$$.dirty&&r(1,a=s),192&e.$$.dirty&&r(2,n=(o&&l?o.filter(u):o)||[])},[s,a,n,c,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{textContent:t,innerHTML:r}=e;return er(e,Q)},d,o,l]}class pF extends lz{constructor(e){super(),lF(this,e,pL,pI,ow,{items:6,discardEmptyItems:7,key:0})}}var pz=e=>e.selectionStart=e.selectionEnd=e.value.length,pO=null,pB=()=>(null===pO&&(pO=ef()&&"visualViewport"in window),pO),pD=e=>{if(!pB())return!1;var t=visualViewport.height,r=()=>{e(visualViewport.height<t?"visible":"hidden")};return visualViewport.addEventListener("resize",r),()=>visualViewport.removeEventListener("resize",r)};function p_(e){for(var t,r,a=[{onclick:e[1]},e[3]],n={},o=0;o<a.length;o+=1)n=of(n,a[o]);return t=new d2({props:n}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=10&r[0]?lP(a,[2&r[0]&&{onclick:e[1]},8&r[0]&&lR(e[3])]):{};t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function pN(e){for(var t,r,a=[{onclick:e[0]},{class:"PinturaInputFormButtonConfirm"},e[2]],n={},o=0;o<a.length;o+=1)n=of(n,a[o]);return t=new d2({props:n}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=5&r[0]?lP(a,[1&r[0]&&{onclick:e[0]},a[1],4&r[0]&&lR(e[2])]):{};t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function pW(e){var t,r,a,n,o,l,s,c,d=e[3]&&p_(e),u=e[24].default,h=oM(u,e,e[23],null),p=e[2]&&pN(e);return{c(){t=oH("div"),r=oH("div"),d&&d.c(),a=oX(),n=oH("div"),h&&h.c(),o=oX(),p&&p.c(),oq(n,"class","PinturaInputFormFields"),oq(r,"class","PinturaInputFormInner"),oq(t,"class","PinturaInputForm"),oq(t,"data-layout",e[4]),oq(t,"style",e[6])},m(u,v){oj(u,t,v),oN(t,r),d&&d.m(r,null),oN(r,a),oN(r,n),h&&h.m(n,null),oN(r,o),p&&p.m(r,null),e[25](t),l=!0,s||(c=[oY(n,"keydown",e[10]),oY(t,"focusin",e[7]),oY(t,"focusout",e[8]),oY(t,"measure",e[9]),oF(dr.call(null,t))],s=!0)},p(e,n){e[3]?d?(d.p(e,n),8&n[0]&&lx(d,1)):((d=p_(e)).c(),lx(d,1),d.m(r,a)):d&&(l$(),lb(d,1,1,()=>{d=null}),ly()),h&&h.p&&(!l||8388608&n[0])&&oR(h,u,e,e[23],l?oP(u,e[23],n,null):oE(e[23]),null),e[2]?p?(p.p(e,n),4&n[0]&&lx(p,1)):((p=pN(e)).c(),lx(p,1),p.m(r,null)):p&&(l$(),lb(p,1,1,()=>{p=null}),ly()),(!l||16&n[0])&&oq(t,"data-layout",e[4]),(!l||64&n[0])&&oq(t,"style",e[6])},i(e){l||(lx(d),lx(h,e),lx(p),l=!0)},o(e){lb(d),lb(h,e),lb(p),l=!1},d(r){r&&oV(t),d&&d.d(),h&&h.d(r),p&&p.d(),e[25](null),s=!1,ox(c)}}}function pj(e,t,r){var a,n,o,l,s,c,{$$slots:d={},$$scope:u}=t,{onconfirm:h}=t,{oncancel:p}=t,{autoFocus:v=!0}=t,{autoPositionCursor:g=!0}=t,{buttonConfirm:m}=t,{buttonCancel:f}=t,{layout:$="stack"}=t,{parentRect:y}=t,{align:x}=t,{justify:b}=t,{parentMargin:w=16}=t,{panelOffset:S=tm()}=t,k=!1,C=void 0,M=void 0,T="",P=0,R=(e,t,r,a,n)=>{var o,l;return o="center"===a?e.x+.5*e.width-.5*t.width:"right"===a?e.x+e.width-t.width-n:e.x+n,l="center"===r?e.y+.5*e.height-.5*t.height:"bottom"===r?e.y+e.height-t.height-n:e.y+n,"left:".concat(o,"px;top:").concat(l,"px;right:auto;bottom:auto;")},E=e=>/textarea/i.test(e),A=e=>{var t,r=e=>t=e.touches[0].screenY,a=e=>{var r=e.touches[0].screenY,a=e.target;/textarea/i.test(a.nodeName)?(r>t?0==a.scrollTop&&e.preventDefault():r<t?a.scrollTop+a.offsetHeight==a.scrollHeight&&e.preventDefault():e.preventDefault(),t=r):e.preventDefault()};return e.addEventListener("touchstart",r),e.addEventListener("touchmove",a),()=>{e.removeEventListener("touchstart",r),e.removeEventListener("touchmove",a)}},I=()=>{var e=s.querySelector("input, textarea");e.focus(),P>=1||e.select()},L=()=>{k=!0,!z&&(iM()||eP())&&r(19,T="top:1em;bottom:auto;"),iM()&&A(s),r(20,P=1)},F=()=>{k=!1,r(20,P=0)},z=pD(e=>{if(!o){r(19,T="top: 4.5em; bottom: auto");return}if("hidden"===e&&!k){I();return}clearTimeout(M),M=void 0,r(19,T="top:".concat(visualViewport.height-C.height-S.y,"px")),"visible"===e?(r(5,s.dataset.stick=!0,s),I(),L()):F()});return o8(()=>{v&&I()}),o9(()=>{z&&z()}),e.$$set=e=>{"onconfirm"in e&&r(0,h=e.onconfirm),"oncancel"in e&&r(1,p=e.oncancel),"autoFocus"in e&&r(11,v=e.autoFocus),"autoPositionCursor"in e&&r(12,g=e.autoPositionCursor),"buttonConfirm"in e&&r(2,m=e.buttonConfirm),"buttonCancel"in e&&r(3,f=e.buttonCancel),"layout"in e&&r(4,$=e.layout),"parentRect"in e&&r(13,y=e.parentRect),"align"in e&&r(14,x=e.align),"justify"in e&&r(15,b=e.justify),"parentMargin"in e&&r(16,w=e.parentMargin),"panelOffset"in e&&r(17,S=e.panelOffset),"$$scope"in e&&r(23,u=e.$$scope)},e.$$.update=()=>{385024&e.$$.dirty[0]&&r(21,a=y&&C?R(y,C,x,b,w):void 0),32&e.$$.dirty[0]&&r(22,n=s&&getComputedStyle(s)),4194304&e.$$.dirty[0]&&(o=n&&"1"===n.getPropertyValue("--editor-modal")),3670016&e.$$.dirty[0]&&r(6,l="opacity:".concat(P,";").concat(a||T))},[h,p,m,f,$,s,l,e=>{(E(e.target)||uR(e.target))&&(c=Date.now(),g&&pz(e.target),clearTimeout(M),M=setTimeout(L,200))},e=>{Date.now()-c>50||(e.stopPropagation(),I())},e=>{var{detail:t}=e;r(18,C={width:t.width,height:t.height})},e=>"Enter"===e.key?h():"Escape"===e.key?p():void 0,v,g,y,x,b,w,S,C,T,P,a,n,u,d,function(e){ln[e?"unshift":"push"](()=>{r(5,s=e)})}]}class pV extends lz{constructor(e){super(),lF(this,e,pj,pW,ow,{onconfirm:0,oncancel:1,autoFocus:11,autoPositionCursor:12,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:13,align:14,justify:15,parentMargin:16,panelOffset:17},null,[-1,-1])}}var pH=(e,t)=>{e.fastSeek&&e.fastSeek(t),e.currentTime=t},pU=["aspectRatio","isRotatedSideways","flip","cropSize"],pG=su.map(e=>{var[t]=e;return t}).filter(e=>!pU.includes(e)),pX=function(e,t,r){var a=[];return{set:t,update:r,publish:e=>{a.forEach(t=>t(e))},subscribe:t=>(a.push(t),e(t),()=>{a=a.filter(e=>e!==t)})}},pZ=()=>{var e,t,r=pG.reduce((e,r)=>(e[r]=pX(e=>{if(!t)return e();t.stores[r].subscribe(e)()},e=>{t&&t.stores[r].set(e)},e=>{t&&t.stores[r].update(e)}),e),{});return{update:a=>{if(t=a,e&&(e.forEach(e=>e()),e=void 0),!a){r.file.publish(void 0),r.loadState.publish(void 0);return}e=pG.map(e=>a.stores[e].subscribe(t=>{r[e].publish(t)}))},stores:r,destroy:()=>{e&&e.forEach(e=>e())}}},pY=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return r=>{"ping"===r.type&&(t&&r.stopPropagation(),e(r.detail.type,r.detail.data))}},pq=(e,t)=>new CustomEvent("ping",{detail:{type:e,data:t},cancelable:!0,bubbles:!0}),pK=(e,t)=>(t?s9(e,t):e).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),pJ=(e,t)=>{var r=matchMedia(e);return r.addListener(t),t(r),{get matches(){return r.matches},destroy:()=>r.removeListener(t)}},pQ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e7,{subscribe:r,set:a}=lD(void 0);return{subscribe:r,destroy:pJ(e,e=>{var{matches:r}=e;return a(t(r))}).destroy}},p1=()=>{if(!iM())return!1;var[,e,t]=(navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[]).map(e=>parseInt(e,10)||0);return e>13||13===e&&t>=4},p0=(e,t)=>{var{sub:r,pub:a}=aa(),n=[],o=lD(0),l=[],s=()=>l.forEach(e=>e({index:ok(o),length:n.length})),c={get index(){return ok(o)},set index(i){i=l6(i=Number.isInteger(i)?i:0,0,n.length-1),o.set(i),t(n[c.index]),s()},get state(){return n[n.length-1]},length:()=>n.length,undo(){var e=c.index--;return a("undo",e),e},redo(){var e=c.index++;return a("redo",c.index),e},revert(){n.length=1,c.index=0,a("revert")},write(r){r&&t(ea(ea({},e()),r));var l=e(),d=n[n.length-1];JSON.stringify(l)!==JSON.stringify(d)&&(n.length=c.index+1,n.push(l),o.set(n.length-1),s(),a("writehistory"))},set(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.length=0,c.index=0;var t=Array.isArray(e)?e:[e];n.push(...t),c.index=n.length-1},get:()=>[...n],subscribe:e=>(l.push(e),e({index:c.index,length:n.length}),()=>l.splice(l.indexOf(e),1)),on:r};return c},p2=(j=eo(function*(e){return ex((yield eE(e)))}),function(e){return j.apply(this,arguments)}),p4=e=>/video/.test(e.type),p5=e=>new Promise((t,r)=>{var a=eb("video");a.onseeked=()=>{var e=eb("canvas");ir(a).then(r=>{var{width:n,height:o}=r;e.width=n,e.height=o;var l=e.getContext("2d",{willReadFrequently:!0}),s=()=>{l.drawImage(a,0,0,e.width,e.height);var r=l.getImageData(0,0,e.width,e.height);ek(e),URL.revokeObjectURL(a.src),t(r)};ie()?setTimeout(s,16):s()})},a.onloadeddata=()=>{a.currentTime=0},a.onerror=e=>{console.error(e),r(a.error)},a.src=URL.createObjectURL(e),a.load()}),p3=(e,t,r)=>new Promise((a,n)=>{eo(function*(){p4(e)&&a((yield p5(e)));var o,l=yield t.read(e),s=e=>eZ(e,r).then(e=>t.apply(e,l)).then(a).catch(n);if(ej(e)||!eN()||ie()||iM())return s(e);try{o=yield eX((e,t)=>createImageBitmap(e).then(e=>t(null,e)).catch(t),[e])}catch(e){}return o&&o.width?(yield ey())?cz()&&l>1?a((yield p2(o))):void a(o):a(t.apply(o,l)):s(e)})()}),p6=(e,t)=>{var r;return new Promise((r=eo(function*(r){if(e.width<t.width&&e.height<t.height)return r(e);var a=Math.min(t.width/e.width,t.height/e.height),n=a*e.width,o=a*e.height,l=eb("canvas",{width:n,height:o}),s=l.getContext("2d",{willReadFrequently:!0}),c=eC(e)?yield eE(e):e;s.drawImage(c,0,0,n,o),r(ex(l))}),function(e){return r.apply(this,arguments)}))},p8=null,p7=()=>{if(null===p8){var e=eb("canvas");p8=!!cx(e),ek(e),e=void 0}return p8},p9=e=>/^image/.test(e.type)&&!/svg/.test(e.type),ve=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],vt={precision:1e-4},vr={precision:.01*vt.precision},vi=function(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{resize:n=1,opacity:o=0}=a,l={opacity:[cJ(o,ea(ea({},vt),{},{stiffness:.1})),e7],resize:[cJ(n,ea(ea({},vt),{},{stiffness:.1})),e7],translation:[cJ(void 0,vt),e7],rotation:[cJ(void 0,vr),e7],origin:[cJ(void 0,vt),e7],scale:[cJ(void 0,vr),e7],gamma:[cJ(void 0,vr),e=>e||1],vignette:[cJ(void 0,vr),e=>e||0],colorMatrix:[cJ([...ve],vt),e=>e||[...ve]],convolutionMatrix:[lD(void 0),e=>e&&e.clarity||void 0],backgroundColor:[cJ(void 0,vt),(e,t,r)=>{if(Array.isArray(e)){if(Array.isArray(t)){var a=[...e];0===t[3]?(a[3]=0,r(a)):0===a[3]&&((e=[...t])[3]=0)}return e}}],backgroundImage:[lD(void 0),e7]},s=Object.entries(l).map(e=>{var[t,r]=e;return[t,r[0]]}),c=s.map(e=>{var[,t]=e;return t}),d=Object.entries(l).reduce((e,t)=>{var[a,n]=t,[o,l]=n;return e[a]=(e,t)=>o.set(l(e,r[a],e=>{o.set(e,{hard:!0})}),t),e},{}),u=l_(c,a=>((r=a.reduce((e,t,r)=>(e[s[r][0]]=t,e),{})).data=e,r.size=t,r.scale*=a[1],r));return u.get=()=>r,u.set=(e,t)=>{var r={hard:!t};Object.entries(e).forEach(e=>{var[t,a]=e;d[t]&&d[t](a,r)})},u},va=()=>{var e=[],t=[],r=[],a=(t,a)=>{var o=e.indexOf(t);o<0||(r[o]=a,n())},n=()=>{t.forEach(e=>e(r))},o=e=>{e.unsub=e.subscribe(t=>a(e,t)),n()};return{get length(){return e.length},clear:()=>{e.forEach(e=>e.unsub()),e.length=0,r.length=0},unshift:t=>{e.unshift(t),o(t)},get:t=>e[t],push:t=>{e.push(t),o(t)},remove:t=>{t.unsub();var a=e.indexOf(t);e.splice(a,1),r.splice(a,1)},forEach:t=>e.forEach(t),filter:t=>e.filter(t),subscribe:e=>(t.push(e),e(r),()=>{t.splice(t.indexOf(e),1)})}},vn=e=>e[0]<.25&&e[1]<.25&&e[2]<.25,vo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(t=>{var{accept:r="image/*"}=e,a=eb("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:r}),n=()=>{var[e]=a.files;a.parentNode&&a.remove(),a.removeEventListener("change",n),t(e)};a.addEventListener("change",n),iM()&&document.body.append(a),a.click()})},vl=e=>{try{return e()}catch(e){console.error(e)}},vs=e=>{var[t,r]=e;return t+(r-t)*.5},vc=e=>Math.round(100*e),vd=e=>tf(e.clientX,e.clientY),vu=(e,t,r)=>tz(tz(vd(e),t),r);function vh(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,b,w,S,k,C,M,T,P,R,E,A,{root:I}=t,{locale:L}=t,{stores:F}=t,{allowPan:z=!0}=t,{allowZoom:O=!0}=t,{enablePan:B=!0}=t,{enableZoom:D=!0}=t,{enableZoomControls:_=D}=t,{enableZoomInput:N=!0}=t,{enablePanInput:W=!0}=t,{enablePanLimit:j=!0}=t,{panLimitGutterScalar:V=0}=t,{zoomOptions:H=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=t,{zoomAdjustStep:U=.25}=t,{zoomAdjustFactor:G=.1}=t,{zoomAdjustWheelFactor:X=1}=t,{elasticity:Z=5}=t,{imageSelectionRectCentered:Y}=t,{imageSelectionRectScalar:q}=t,{zoomLevel:K=null}=t,{zoomControls:J}=t,{zoomMultiTouching:Q=!1}=t,{isAnimated:ee,isInteracting:et,rootRect:er,stageRect:ei,stageScalar:en,imageSelectionPan:eo,imageSelectionZoom:el,imageSelectionStageFitScalar:es,imageSelectionRect:ec,imageSelectionStoredState:ed,imagePreviewUpscale:eu}=F;oC(e,ee,e=>r(68,w=e)),oC(e,et,e=>r(67,x=e)),oC(e,er,e=>r(65,$=e)),oC(e,ei,e=>r(64,f=e)),oC(e,en,e=>r(45,b=e)),oC(e,eo,e=>r(63,v=e)),oC(e,el,e=>r(42,p=e)),oC(e,es,e=>r(43,g=e)),oC(e,ec,e=>r(66,y=e)),oC(e,ed,e=>r(69,S=e)),oC(e,eu,e=>r(44,m=e));var eh=!1,ep=void 0,ev=void 0,eg=void 0,em=void 0,ef=e=>{var t=I.querySelector(".PinturaMain > .PinturaUtilMain")||I.querySelector('div[tabindex="0"] .PinturaUtilMain');return!(!t||!t.contains(e.target)||uE(e.target))},e$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{pan:t=v,zoom:r=p}=e;oL(ed,S={translation:t,zoom:r},S)},ey=()=>v&&0===v.x&&0===v.y,ex=()=>{ey()||oL(eo,v=tm(),v)},eb=()=>{oL(el,p=D?S.zoom:void 0,p),oL(eo,v=B?tw(S.translation):ey()?v:tm(),v),ek.set(p)},ew=()=>{oL(el,p=void 0,p),ex(),ek.set(void 0,{hard:!0})},eS=()=>{ew(),e$()},ek=cJ(void 0,{precision:.01});ek.subscribe(e=>{if(void 0===e){oL(el,p=void 0,p),ey()||oL(eo,v=tm(),v);return}var t=p;e<=1?ey()||oL(eo,v=tm(),v):e<=t&&oL(eo,v=tB(v,.8),v),oL(el,p=e,p)});var eC=e=>{ek.update(t=>{var r=e(t||g);return e$({zoom:r}),r})},eM=e=>{e?ek.set(e,{hard:!1===w}):(e=void 0,ek.set(void 0,{hard:!0})),oL(el,p=e,p),e$({zoom:e})},eT=(e,t)=>e.findIndex(e=>e===t),eP=(e,t)=>{var r=q*t,a=ea({},Y),n=1-l6(V,0,1);r$(a,r<n?r:n);var o=ea({},Y);r$(o,r),rf(o,e);var l=ea({},o);return o.x>a.x&&(l.x=a.x),o.y>a.y&&(l.y=a.y),o.x+o.width<a.x+a.width&&(l.x=a.x+a.width-o.width),o.y+o.height<a.y+a.height&&(l.y=a.y+a.height-o.height),tz(rm(l),rm(a))},eR=e=>{var{translation:t,zoom:r=1,elastify:a=!0}=e;if(ep){var n=tf(ep.x+t.x,ep.y+t.y);if(!j)return n;var o=eP(n,r);return a?d9(o,n,Z):o}},eE=()=>{C=void 0,oL(et,x=!0,x),r(33,eh=W),k=!1,eg=!1,ep=ea({},v),ev=m?p||g:o?p||1:p||g},eA=e=>{var{scalar:t,translation:n,isMultiTouching:o}=e.detail;if(ep&&(o||W)){o&&tB(n,.5),(W||o)&&(k=!0),Q||r(12,Q=o);var l=a?l6(ev*t,s,c):1,d=eR({translation:n,zoom:l,elastify:!0});eg=tT(d)<(em=tT(v)),a&&el.set(l),eo.set(d),C=Q&&{translation:e.detail.translation,scalar:t}}},eI=e=>{oL(et,x=!1,x),r(33,eh=!1),r(12,Q=!1),eg&&em<50&&(ep=void 0,ev=void 0,eo.set(tm()))},eL=e=>{oL(et,x=!1,x),r(33,eh=!1),r(12,Q=!1),Promise.resolve().then(()=>{if(k&&ep){var t=C||e.detail,r=a?l6(ev*t.scalar,s,c):1,n=eR({elastify:!1,translation:t.translation,zoom:r});eo.set(n)}ep=void 0,ev=void 0,W&&e.detail.isDoubleTap&&eS(),e$()})},eF=Date.now(),ez=0,eO=!1,eB=!1,eD=e=>{if(ef(e)&&(e.preventDefault(),e.stopPropagation(),!eB)){clearTimeout(M);var t=ut(e),r=Date.now(),a=r-eF;eF=r;var n=Math.abs(t/a)>.2;ez=n?ez+1:0;var o=1+-1*t*X/(n?50:100);e_(vu(e,$,f),o,{isZoomingFast:n})}},e_=(e,t,r)=>{var{isZoomingFast:a}=r,n=m?p||g:o?p||1:p||g,l=n*t,d=tm(),u=v,h=m?g:o?1:g,f=Math.abs(l-h),$=n>h,x=n<h,b=l>n,w=l<n,S=$&&w||x&&b,k=ez>=5;if(a||(eO=!1),ez>0&&!eO&&(eO=S),k&&eO){eS(),eB=!0,setTimeout(()=>{eB=!1},100);return}if(!k){!a&&S&&f<=.05&&(M=setTimeout(()=>{eS()},250)),oL(el,p=l6(l,s,c),p);var C=ro(y);r$(C,n),rf(C,u);var T=rm(C),P=ro(C);r$(P,1+(p-n),e);var R=tO(tz(rm(P),T),n);tS(d,u.x+R.x,u.y+R.y),w&&a?oL(eo,v=tB(tw(v),.85),v):oL(eo,v=eP(d,n),v),e$()}},eN=e=>(e?"add":"remove")+"EventListener",eW=e=>{e.preventDefault(),P=ea({},v),E=ro(y),R=vu(e,$,f),T=m?p||g:o?p||1:p||g},ej=e=>{e.preventDefault(),oL(el,p=l6(e.scale*T,s,c),p);var t=ro(E);r$(t,T),rf(t,P);var r=rm(t),a=ro(t);r$(a,1+(p-T),R);var n=tO(tz(rm(a),r),T);oL(eo,v=eP({x:P.x+n.x,y:P.y+n.y},p),v)},eV=e=>{e.preventDefault()},eH=e=>{I[eN(e)]("wheel",eD),iM()||(I[eN(e)]("gesturestart",eW),I[eN(e)]("gesturechange",ej),I[eN(e)]("gestureend",eV))},eU=e=>{var t=eN(e);I[t]("interactionstart",eE),I[t]("interactionupdate",eA),I[t]("interactionrelease",eI),I[t]("interactionend",eL)};return o8(()=>{A=d3(I,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:ef})}),o9(()=>{eH(!1),eU(!1),A.destroy(),A=void 0}),e.$$set=e=>{"root"in e&&r(13,I=e.root),"locale"in e&&r(14,L=e.locale),"stores"in e&&r(15,F=e.stores),"allowPan"in e&&r(16,z=e.allowPan),"allowZoom"in e&&r(17,O=e.allowZoom),"enablePan"in e&&r(18,B=e.enablePan),"enableZoom"in e&&r(19,D=e.enableZoom),"enableZoomControls"in e&&r(20,_=e.enableZoomControls),"enableZoomInput"in e&&r(21,N=e.enableZoomInput),"enablePanInput"in e&&r(22,W=e.enablePanInput),"enablePanLimit"in e&&r(23,j=e.enablePanLimit),"panLimitGutterScalar"in e&&r(24,V=e.panLimitGutterScalar),"zoomOptions"in e&&r(25,H=e.zoomOptions),"zoomAdjustStep"in e&&r(26,U=e.zoomAdjustStep),"zoomAdjustFactor"in e&&r(27,G=e.zoomAdjustFactor),"zoomAdjustWheelFactor"in e&&r(28,X=e.zoomAdjustWheelFactor),"elasticity"in e&&r(29,Z=e.elasticity),"imageSelectionRectCentered"in e&&r(30,Y=e.imageSelectionRectCentered),"imageSelectionRectScalar"in e&&r(31,q=e.imageSelectionRectScalar),"zoomLevel"in e&&r(32,K=e.zoomLevel),"zoomControls"in e&&r(11,J=e.zoomControls),"zoomMultiTouching"in e&&r(12,Q=e.zoomMultiTouching)},e.$$.update=()=>{2752512&e.$$.dirty[0]&&r(35,a=O&&D&&N),327680&e.$$.dirty[0]&&r(34,n=z&&B),196608&e.$$.dirty[0]&&(z||O?eb():ew()),16384&e.$$.dirty[1]&&(o=b>=1),33570816&e.$$.dirty[0]|28672&e.$$.dirty[1]&&r(39,l=[(m||b<1)&&[g,vc(g)+"%",{sublabel:L.labelZoomFit}],...H.map(e=>[e,vc(e)+"%"])].filter(Boolean).map(e=>(1===e[0]&&(e[2]={sublabel:L.labelZoomActual}),e)).sort((e,t)=>{var r=e[0]||g,a=t[0]||g;return r<a?-1:a<r?1:0})),4352&e.$$.dirty[1]&&r(37,s=Math.min(l.reduce((e,t)=>{var[r]=t;return r<e?r:e},Number.MAX_SAFE_INTEGER),g)),256&e.$$.dirty[1]&&r(36,c=l.reduce((e,t)=>{var[r]=t;return r>e?r:e},Number.MIN_SAFE_INTEGER)),2&e.$$.dirty[1]&&null!==K&&eM(K),30720&e.$$.dirty[1]&&r(41,u=p||(m||b<1?g:1)),1280&e.$$.dirty[1]&&r(38,d=eT(l.map(e=>{var[t]=e;return t}),u)),1024&e.$$.dirty[1]&&r(40,h=vc(u)+"%"),202522624&e.$$.dirty[0]|3040&e.$$.dirty[1]&&r(11,J=(O||O)&&_?[["Button","zoom-out",{hideLabel:!0,label:L.labelZoomOut,icon:L.iconZoomOut,disabled:p===s,onclick:()=>eC(e=>Math.max(s,e-U)),onhold:()=>eC(e=>Math.max(s,e*(1-G)))}],["Dropdown","zoom-level",{label:h,labelClass:"PinturaFixedWidthCharacters",options:l,selectedIndex:d,onchange:e=>eM(e.value)}],["Button","zoom-in",{hideLabel:!0,label:L.labelZoomIn,icon:L.iconZoomIn,disabled:p===c,onclick:()=>eC(e=>Math.min(c,e+U)),onhold:()=>eC(e=>Math.min(c,e*(1+G)))}]]:[]),8192&e.$$.dirty[0]|16&e.$$.dirty[1]&&I&&eH(a),8192&e.$$.dirty[0]|8&e.$$.dirty[1]&&I&&eU(n),4202496&e.$$.dirty[0]|12&e.$$.dirty[1]&&I&&I.style.setProperty("--cursor",n&&W?eh?"grabbing":"grab":"")},[ee,et,er,ei,en,eo,el,es,ec,ed,eu,J,Q,I,L,F,z,O,B,D,_,N,W,j,V,H,U,G,X,Z,Y,q,K,eh,n,a,c,s,d,l,h,u,p,g,m,b]}class vp extends lz{constructor(e){super(),lF(this,e,vh,null,ow,{root:13,locale:14,stores:15,allowPan:16,allowZoom:17,enablePan:18,enableZoom:19,enableZoomControls:20,enableZoomInput:21,enablePanInput:22,enablePanLimit:23,panLimitGutterScalar:24,zoomOptions:25,zoomAdjustStep:26,zoomAdjustFactor:27,zoomAdjustWheelFactor:28,elasticity:29,imageSelectionRectCentered:30,imageSelectionRectScalar:31,zoomLevel:32,zoomControls:11,zoomMultiTouching:12},null,[-1,-1,-1,-1])}}var vv=(V=eo(function*(e){var t=yield vg(e);return vy(new DataView(t))}),function(e){return V.apply(this,arguments)}),vg=e=>new Promise(t=>{var r=new FileReader;r.onload=()=>t(r.result),r.readAsArrayBuffer(e)}),vm=(e,t,r)=>{for(var a=!1,n=-1,o=t;o<r;o++)if(a||1953653099!==e.getUint32(o)||(a=!0,o+=4),a&&64==e.getUint8(o)){n=o;break}if(n<0)return 0;var l=e.getUint32(n-28),s=e.getUint32(n-20),c=e.getUint32(n-32),d=e.getUint32(n-16);return 65536===l&&4294901760===s?90:4294901760===c&&4294901760===d?180:4294901760===l&&65536===s?270:0},vf=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength,a=[],n=t+r;t<n;){var o=e.getUint32(t);if(o<0)break;var l=e.getUint32(t+4);if(a.push({type:l,size:o,offset:t,bodyOffset:t+8,bodySize:o-8}),o<8)break;t+=o}return a},v$=e=>{var t=vf(e).find(e=>1836019574===e.type);if(!t)return 0;var r=vf(e,t.bodyOffset,t.bodySize);r.filter(e=>1953653099===e.type).forEach(t=>{r.push(...vf(e,t.bodyOffset,t.bodySize))});var a=[1836476516,1953196132];for(var{type:n,bodyOffset:o}of r.filter(e=>a.includes(e.type))){var l=e.getUint8(o),s=o+4;s+=(1836476516===n?32:36)+(1===l?12:0);var c=e.getInt32(s),d=e.getInt32(s+4);if(0===c&&d>0)return 90;if(c<0&&0===d)return 180;if(0===c&&d<0)return 270}return 0},vy=function(e){var t,{limit:r=1024}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=4,1718909296!==e.getUint32(t))return 0;t+=4;var a=e.getUint32(t);return 1836069938===a?vm(e,t,r):1903435808===a?v$(e):0},{window:vx}=lk;function vb(e){var t,r,a,n=e[42]&&vw(e),o=e[39]&&vA(e);return{c(){n&&n.c(),t=oX(),o&&o.c(),r=oZ()},m(e,l){n&&n.m(e,l),oj(e,t,l),o&&o.m(e,l),oj(e,r,l),a=!0},p(e,a){e[42]?n?(n.p(e,a),2048&a[1]&&lx(n,1)):((n=vw(e)).c(),lx(n,1),n.m(t.parentNode,t)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),e[39]?o?(o.p(e,a),256&a[1]&&lx(o,1)):((o=vA(e)).c(),lx(o,1),o.m(r.parentNode,r)):o&&(l$(),lb(o,1,1,()=>{o=null}),ly())},i(e){a||(lx(n),lx(o),a=!0)},o(e){lb(n),lb(o),a=!1},d(e){n&&n.d(e),e&&oV(t),o&&o.d(e),e&&oV(r)}}}function vw(e){var t,r,a,n,o,l,s=[vk,vS],c=[];function d(e,t){return e[40]?0:e[35]?1:-1}return~(a=d(e))&&(n=c[a]=s[a](e)),{c(){t=oH("div"),r=oH("p"),n&&n.c(),oq(r,"style",e[73]),oq(t,"class","PinturaStatus"),oq(t,"style",o="opacity: ".concat(e[55]))},m(e,n){oj(e,t,n),oN(t,r),~a&&c[a].m(r,null),l=!0},p(e,u){var h=a;(a=d(e))===h?~a&&c[a].p(e,u):(n&&(l$(),lb(c[h],1,1,()=>{c[h]=null}),ly()),~a?((n=c[a])?n.p(e,u):(n=c[a]=s[a](e)).c(),lx(n,1),n.m(r,null)):n=null),(!l||2048&u[2])&&oq(r,"style",e[73]),(!l||16777216&u[1]&&o!==(o="opacity: ".concat(e[55])))&&oq(t,"style",o)},i(e){l||(lx(n),l=!0)},o(e){lb(n),l=!1},d(e){e&&oV(t),~a&&c[a].d()}}}function vS(e){t=new us({props:{text:e[35].text||"",onmeasure:e[214]}});var t,r,a,n,o=e[35].aside&&vC(e);return{c(){lA(t.$$.fragment),r=oX(),o&&o.c(),a=oZ()},m(e,l){lI(t,e,l),oj(e,r,l),o&&o.m(e,l),oj(e,a,l),n=!0},p(e,r){var n={};16&r[1]&&(n.text=e[35].text||""),t.$set(n),e[35].aside?o?(o.p(e,r),16&r[1]&&lx(o,1)):((o=vC(e)).c(),lx(o,1),o.m(a.parentNode,a)):o&&(l$(),lb(o,1,1,()=>{o=null}),ly())},i(e){n||(lx(t.$$.fragment,e),lx(o),n=!0)},o(e){lb(t.$$.fragment,e),lb(o),n=!1},d(e){lL(t,e),e&&oV(r),o&&o.d(e),e&&oV(a)}}}function vk(e){var t,r,a,n;return t=new us({props:{text:e[40],onmeasure:e[214]}}),a=new uv({props:{class:"PinturaStatusIcon",offset:e[83],opacity:e[84],$$slots:{default:[vE]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment),r=oX(),lA(a.$$.fragment)},m(e,o){lI(t,e,o),oj(e,r,o),lI(a,e,o),n=!0},p(e,r){var n={};512&r[1]&&(n.text=e[40]),t.$set(n);var o={};2097152&r[2]&&(o.offset=e[83]),4194304&r[2]&&(o.opacity=e[84]),8&r[0]|536870912&r[18]&&(o.$$scope={dirty:r,ctx:e}),a.$set(o)},i(e){n||(lx(t.$$.fragment,e),lx(a.$$.fragment,e),n=!0)},o(e){lb(t.$$.fragment,e),lb(a.$$.fragment,e),n=!1},d(e){lL(t,e),e&&oV(r),lL(a,e)}}}function vC(e){var t,r;return t=new uv({props:{class:"PinturaStatusButton",offset:e[83],opacity:e[84],$$slots:{default:[vP]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};2097152&r[2]&&(a.offset=e[83]),4194304&r[2]&&(a.opacity=e[84]),16&r[1]|536870912&r[18]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function vM(e){var t,r;return t=new uu({props:{progress:e[35].progressIndicator.progress}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16&r[1]&&(a.progress=e[35].progressIndicator.progress),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function vT(e){for(var t,r,a=[e[35].closeButton,{hideLabel:!0}],n={},o=0;o<a.length;o+=1)n=of(n,a[o]);return t=new d2({props:n}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=16&r[1]?lP(a,[lR(e[35].closeButton),a[1]]):{};t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function vP(e){var t,r,a,n=e[35].progressIndicator.visible&&vM(e),o=e[35].closeButton&&e[35].text&&vT(e);return{c(){n&&n.c(),t=oX(),o&&o.c(),r=oZ()},m(e,l){n&&n.m(e,l),oj(e,t,l),o&&o.m(e,l),oj(e,r,l),a=!0},p(e,a){e[35].progressIndicator.visible?n?(n.p(e,a),16&a[1]&&lx(n,1)):((n=vM(e)).c(),lx(n,1),n.m(t.parentNode,t)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),e[35].closeButton&&e[35].text?o?(o.p(e,a),16&a[1]&&lx(o,1)):((o=vT(e)).c(),lx(o,1),o.m(r.parentNode,r)):o&&(l$(),lb(o,1,1,()=>{o=null}),ly())},i(e){a||(lx(n),lx(o),a=!0)},o(e){lb(n),lb(o),a=!1},d(e){n&&n.d(e),e&&oV(t),o&&o.d(e),e&&oV(r)}}}function vR(e){var t,r=e[3].iconSupportError+"";return{c(){t=oU("g")},m(e,a){oj(e,t,a),t.innerHTML=r},p(e,a){8&a[0]&&r!==(r=e[3].iconSupportError+"")&&(t.innerHTML=r)},d(e){e&&oV(t)}}}function vE(e){var t,r;return t=new dX({props:{$$slots:{default:[vR]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};8&r[0]|536870912&r[18]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function vA(e){var t,r,a,n,o,l,s,c,d,u,h,p,v,g,m=e[10]&&vI(e),f=e[46]&&e[45]&&vL(e),$=[vD,vB],y=[];function x(t){e[427](t)}function b(t){e[428](t)}function w(t){e[429](t)}n=y[a=e[46]?0:1]=$[a](e),l=new d$({props:{isAnimated:e[54],isTransparent:e[20],pixelRatio:e[58],textPixelRatio:e[6],backgroundColor:e[57],maskRect:e[59],maskOpacity:e[74]?e[74].maskOpacity:1,maskMarkupOpacity:e[7],maskFrameOpacity:e[5],clipAnnotationsToImage:e[86],images:e[56],interfaceImages:e[87],loadImageData:e[28],enableGrid:e[11],gridSize:e[88],gridColors:[e[89],e[90]],gridOpacity:e[91],selectionColor:e[92],willRequest:e[82]||e[93],willRender:e[424],didRender:e[425]}});var S={root:e[2],locale:e[3],stores:e[200],allowPan:e[95],enablePan:e[17],enablePanLimit:e[21],panLimitGutterScalar:e[22],enablePanInput:e[96],allowZoom:e[97],enableZoom:e[18],enableZoomInput:void 0!==e[19]?e[19]:e[98],enableZoomControls:e[99],zoomOptions:e[13]||e[23],zoomAdjustStep:e[14]||e[24],zoomAdjustFactor:e[15]||e[25],zoomAdjustWheelFactor:e[16]||e[26],imageSelectionRectCentered:e[100],imageSelectionRectScalar:e[101],elasticity:vH*e[8]};return void 0!==e[0]&&(S.zoomLevel=e[0]),void 0!==e[33]&&(S.zoomControls=e[33]),void 0!==e[34]&&(S.zoomMultiTouching=e[34]),u=new vp({props:S}),ln.push(()=>lE(u,"zoomLevel",x)),ln.push(()=>lE(u,"zoomControls",b)),ln.push(()=>lE(u,"zoomMultiTouching",w)),{c(){m&&m.c(),t=oX(),f&&f.c(),r=oX(),n.c(),o=oX(),lA(l.$$.fragment),s=oX(),c=oH("div"),d=oX(),lA(u.$$.fragment),oq(c,"class","PinturaRootPortal")},m(n,h){m&&m.m(n,h),oj(n,t,h),f&&f.m(n,h),oj(n,r,h),y[a].m(n,h),oj(n,o,h),lI(l,n,h),oj(n,s,h),oj(n,c,h),e[426](c),oj(n,d,h),lI(u,n,h),g=!0},p(e,s){e[10]?m?(m.p(e,s),1024&s[0]&&lx(m,1)):((m=vI(e)).c(),lx(m,1),m.m(t.parentNode,t)):m&&(l$(),lb(m,1,1,()=>{m=null}),ly()),e[46]&&e[45]?f?(f.p(e,s),49152&s[1]&&lx(f,1)):((f=vL(e)).c(),lx(f,1),f.m(r.parentNode,r)):f&&(l$(),lb(f,1,1,()=>{f=null}),ly());var c=a;(a=e[46]?0:1)===c?y[a].p(e,s):(l$(),lb(y[c],1,1,()=>{y[c]=null}),ly(),(n=y[a])?n.p(e,s):(n=y[a]=$[a](e)).c(),lx(n,1),n.m(o.parentNode,o));var d={};8388608&s[1]&&(d.isAnimated=e[54]),1048576&s[0]&&(d.isTransparent=e[20]),134217728&s[1]&&(d.pixelRatio=e[58]),64&s[0]&&(d.textPixelRatio=e[6]),67108864&s[1]&&(d.backgroundColor=e[57]),268435456&s[1]&&(d.maskRect=e[59]),4096&s[2]&&(d.maskOpacity=e[74]?e[74].maskOpacity:1),128&s[0]&&(d.maskMarkupOpacity=e[7]),32&s[0]&&(d.maskFrameOpacity=e[5]),16777216&s[2]&&(d.clipAnnotationsToImage=e[86]),33554432&s[1]&&(d.images=e[56]),33554432&s[2]&&(d.interfaceImages=e[87]),268435456&s[0]&&(d.loadImageData=e[28]),2048&s[0]&&(d.enableGrid=e[11]),67108864&s[2]&&(d.gridSize=e[88]),402653184&s[2]&&(d.gridColors=[e[89],e[90]]),536870912&s[2]&&(d.gridOpacity=e[91]),1073741824&s[2]&&(d.selectionColor=e[92]),1048576&s[2]|1&s[3]&&(d.willRequest=e[82]||e[93]),512&s[0]|541982784&s[1]|2&s[3]&&(d.willRender=e[424]),124&s[2]&&(d.didRender=e[425]),l.$set(d);var g={};4&s[0]&&(g.root=e[2]),8&s[0]&&(g.locale=e[3]),4&s[3]&&(g.allowPan=e[95]),131072&s[0]&&(g.enablePan=e[17]),2097152&s[0]&&(g.enablePanLimit=e[21]),4194304&s[0]&&(g.panLimitGutterScalar=e[22]),8&s[3]&&(g.enablePanInput=e[96]),16&s[3]&&(g.allowZoom=e[97]),262144&s[0]&&(g.enableZoom=e[18]),524288&s[0]|32&s[3]&&(g.enableZoomInput=void 0!==e[19]?e[19]:e[98]),64&s[3]&&(g.enableZoomControls=e[99]),8396800&s[0]&&(g.zoomOptions=e[13]||e[23]),16793600&s[0]&&(g.zoomAdjustStep=e[14]||e[24]),33587200&s[0]&&(g.zoomAdjustFactor=e[15]||e[25]),67174400&s[0]&&(g.zoomAdjustWheelFactor=e[16]||e[26]),128&s[3]&&(g.imageSelectionRectCentered=e[100]),256&s[3]&&(g.imageSelectionRectScalar=e[101]),256&s[0]&&(g.elasticity=vH*e[8]),!h&&1&s[0]&&(h=!0,g.zoomLevel=e[0],lh(()=>h=!1)),!p&&4&s[1]&&(p=!0,g.zoomControls=e[33],lh(()=>p=!1)),!v&&8&s[1]&&(v=!0,g.zoomMultiTouching=e[34],lh(()=>v=!1)),u.$set(g)},i(e){g||(lx(m),lx(f),lx(n),lx(l.$$.fragment,e),lx(u.$$.fragment,e),g=!0)},o(e){lb(m),lb(f),lb(n),lb(l.$$.fragment,e),lb(u.$$.fragment,e),g=!1},d(n){m&&m.d(n),n&&oV(t),f&&f.d(n),n&&oV(r),y[a].d(n),n&&oV(o),lL(l,n),n&&oV(s),n&&oV(c),e[426](null),n&&oV(d),lL(u,n)}}}function vI(e){var t,r,a,n,o;return r=new pF({props:{items:e[70]}}),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"class","PinturaNav PinturaNavTools")},m(l,s){oj(l,t,s),lI(r,t,null),a=!0,n||(o=[oY(t,"measure",e[411]),oF(dr.call(null,t))],n=!0)},p(e,t){var a={};256&t[2]&&(a.items=e[70]),r.$set(a)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r),n=!1,ox(o)}}}function vL(e){var t,r,a;return r=new ua({props:{elasticity:e[8]*vG,scrollDirection:e[76]?"y":"x",$$slots:{default:[vO]},$$scope:{ctx:e}}}),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"class","PinturaNav PinturaNavMain")},m(e,n){oj(e,t,n),lI(r,t,null),a=!0},p(e,t){var a={};256&t[0]&&(a.elasticity=e[8]*vG),16384&t[2]&&(a.scrollDirection=e[76]?"y":"x"),8192&t[1]|393216&t[2]|536870912&t[18]&&(a.$$scope={dirty:t,ctx:e}),r.$set(a)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r)}}}function vF(e){var t,r=e[586].icon+"";return{c(){t=oU("g")},m(e,a){oj(e,t,a),t.innerHTML=r},p(e,a){268435456&a[18]&&r!==(r=e[586].icon+"")&&(t.innerHTML=r)},d(e){e&&oV(t)}}}function vz(e){var t,r,a,n,o,l=e[586].label+"";return t=new dX({props:{$$slots:{default:[vF]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment),r=oX(),a=oH("span"),n=oG(l)},m(e,l){lI(t,e,l),oj(e,r,l),oj(e,a,l),oN(a,n),o=!0},p(e,r){var a={};805306368&r[18]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a),(!o||268435456&r[18])&&l!==(l=e[586].label+"")&&oQ(n,l)},i(e){o||(lx(t.$$.fragment,e),o=!0)},o(e){lb(t.$$.fragment,e),o=!1},d(e){lL(t,e),e&&oV(r),e&&oV(a)}}}function vO(e){for(var t,r,a=[e[80],{tabs:e[79]}],n={$$slots:{default:[vz,e=>{var{tab:t}=e;return{586:t}},e=>{var{tab:t}=e;return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t?268435456:0]}]},$$scope:{ctx:e}},o=0;o<a.length;o+=1)n=of(n,a[o]);return(t=new dT({props:n})).$on("select",e[412]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=393216&r[2]?lP(a,[262144&r[2]&&lR(e[80]),131072&r[2]&&{tabs:e[79]}]):{};805306368&r[18]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function vB(e){function t(t){e[420](t)}var r,a,n,o={class:"PinturaMain",content:ea(ea({},e[47].find(e[419])),{},{props:e[27][e[44]]}),locale:e[3],stores:e[200]};return void 0!==e[1][e[44]]&&(o.component=e[1][e[44]]),r=new dH({props:o}),ln.push(()=>lE(r,"component",t)),r.$on("measure",e[226]),r.$on("show",e[421]),r.$on("hide",e[422]),r.$on("fade",e[423]),{c(){lA(r.$$.fragment)},m(e,t){lI(r,e,t),n=!0},p(e,t){var n={};134217728&t[0]|73728&t[1]&&(n.content=ea(ea({},e[47].find(e[419])),{},{props:e[27][e[44]]})),8&t[0]&&(n.locale=e[3]),!a&&2&t[0]|8192&t[1]&&(a=!0,n.component=e[1][e[44]],lh(()=>a=!1)),r.$set(n)},i(e){n||(lx(r.$$.fragment,e),n=!0)},o(e){lb(r.$$.fragment,e),n=!1},d(e){lL(r,e)}}}function vD(e){for(var t,r,a=[{class:"PinturaMain"},{visible:e[63]},e[80],{panels:e[78]}],n={$$slots:{default:[v_,e=>{var{panel:t,panelIsActive:r}=e;return{584:t,585:r}},e=>{var{panel:t,panelIsActive:r}=e;return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(t?67108864:0)|(r?134217728:0)]}]},$$scope:{ctx:e}},o=0;o<a.length;o+=1)n=of(n,a[o]);return(t=new d_({props:n})).$on("measure",e[418]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=327682&r[2]?lP(a,[a[0],2&r[2]&&{visible:e[63]},262144&r[2]&&lR(e[80]),65536&r[2]&&{panels:e[78]}]):{};134217738&r[0]|65664&r[1]|2&r[2]|738197504&r[18]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function v_(e){function t(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e[413](e[584],...r)}function r(t){e[414](t,e[584])}var a,n,o,l={content:ea(ea({},e[47].find(t)),{},{props:e[27][e[584]]}),locale:e[3],isActive:e[585],stores:e[200]};return void 0!==e[1][e[584]]&&(l.component=e[1][e[584]]),a=new dH({props:l}),ln.push(()=>lE(a,"component",r)),a.$on("measure",e[226]),a.$on("show",function(){return e[415](e[584])}),a.$on("hide",function(){return e[416](e[584])}),a.$on("fade",function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e[417](e[584],...r)}),{c(){lA(a.$$.fragment)},m(e,t){lI(a,e,t),o=!0},p(r,o){e=r;var l={};134217728&o[0]|65536&o[1]|67108864&o[18]&&(l.content=ea(ea({},e[47].find(t)),{},{props:e[27][e[584]]})),8&o[0]&&(l.locale=e[3]),134217728&o[18]&&(l.isActive=e[585]),!n&&2&o[0]|67108864&o[18]&&(n=!0,l.component=e[1][e[584]],lh(()=>n=!1)),a.$set(l)},i(e){o||(lx(a.$$.fragment,e),o=!0)},o(e){lb(a.$$.fragment,e),o=!1},d(e){lL(a,e)}}}function vN(e){var t,r;return{c(){oq(t=oH("span"),"class","PinturaEditorOverlay"),oq(t,"style",r="opacity:".concat(e[102]))},m(e,r){oj(e,t,r)},p(e,a){512&a[3]&&r!==(r="opacity:".concat(e[102]))&&oq(t,"style",r)},d(e){e&&oV(t)}}}function vW(e){for(var t,r,a=[{layout:"row"},{parentRect:e[51]},e[61]],n={$$slots:{default:[vj]},$$scope:{ctx:e}},o=0;o<a.length;o+=1)n=of(n,a[o]);return t=new pV({props:n}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=1074790400&r[1]?lP(a,[a[0],1048576&r[1]&&{parentRect:e[51]},1073741824&r[1]&&lR(e[61])]):{};1073741824&r[1]|1&r[2]|536870912&r[18]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function vj(e){var t,r,a;return{c(){(t=oH("input")).value=r=e[61].text,oq(t,"placeholder",a=e[61].placeholder),oq(t,"type","text"),oq(t,"spellcheck","false"),oq(t,"autocorrect","off"),oq(t,"autocapitalize","off")},m(r,a){oj(r,t,a),e[430](t)},p(e,n){1073741824&n[1]&&r!==(r=e[61].text)&&t.value!==r&&(t.value=r),1073741824&n[1]&&a!==(a=e[61].placeholder)&&oq(t,"placeholder",a)},d(r){r&&oV(t),e[430](null)}}}function vV(e){lu(e[410]);var t,r,a,n,o,l,s=e[41]&&vb(e),c=e[102]>0&&vN(e),d=e[61]&&vW(e);return{c(){t=oH("div"),s&&s.c(),r=oX(),c&&c.c(),a=oX(),d&&d.c(),oq(t,"id",e[4]),oq(t,"class",e[77]),oq(t,"data-env",e[75]),oq(t,"dir",e[12])},m(u,h){oj(u,t,h),s&&s.m(t,null),oN(t,r),c&&c.m(t,null),oN(t,a),d&&d.m(t,null),e[431](t),n=!0,o||(l=[oY(vx,"keydown",e[217]),oY(vx,"keyup",e[218]),oY(vx,"blur",e[219]),oY(vx,"paste",e[223]),oY(vx,"resize",e[410]),oY(t,"ping",function(){ob(e[69])&&e[69].apply(this,arguments)}),oY(t,"contextmenu",e[220]),oY(t,"touchstart",e[215],{passive:!1}),oY(t,"touchmove",function(){ob(e[72])&&e[72].apply(this,arguments)}),oY(t,"pointermove",function(){ob(e[71])&&e[71].apply(this,arguments)}),oY(t,"transitionend",e[205]),oY(t,"dropfiles",e[221]),oY(t,"measure",e[432]),oY(t,"click",function(){ob(e[43]?e[222]:ep)&&(e[43]?e[222]:ep).apply(this,arguments)}),oF(dr.call(null,t,{observeViewRect:!0,isMeasureRoot:!0})),oF(di.call(null,t)),oF(dl.call(null,t))],o=!0)},p(o,l){(e=o)[41]?s?(s.p(e,l),1024&l[1]&&lx(s,1)):((s=vb(e)).c(),lx(s,1),s.m(t,r)):s&&(l$(),lb(s,1,1,()=>{s=null}),ly()),e[102]>0?c?c.p(e,l):((c=vN(e)).c(),c.m(t,a)):c&&(c.d(1),c=null),e[61]?d?(d.p(e,l),1073741824&l[1]&&lx(d,1)):((d=vW(e)).c(),lx(d,1),d.m(t,null)):d&&(l$(),lb(d,1,1,()=>{d=null}),ly()),(!n||16&l[0])&&oq(t,"id",e[4]),(!n||32768&l[2])&&oq(t,"class",e[77]),(!n||8192&l[2])&&oq(t,"data-env",e[75]),(!n||4096&l[0])&&oq(t,"dir",e[12])},i(e){n||(lx(s),lx(d),n=!0)},o(e){lb(s),lb(d),n=!1},d(r){r&&oV(t),s&&s.d(),c&&c.d(),d&&d.d(),e[431](null),o=!1,ox(l)}}}var vH=1,vU="stage-overlay",vG=10;function vX(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,b,w,S,k,C,M,T,P,R,E,A,I,L,F,z,O,B,D,_,N,W,j,V,H,U,G,X,Z,Y,q,K,J,Q,ee,et,er,ei,en,eo,el,es,ec,ed,eu,eh,ev,eg,em,ef,e$,ey,eb,ew,eS,eC,eM,eT,eE,eA,eI,eL,eF,eO,eB,eD,e_,eN,eW,ej,eH,eU,eG,eX,eZ,eY,eq,eK,eJ,eQ,e1,e0,e2,e4,e5,e3,e6,e8,e9,te,tt,tr,ti,ta,tn,to,tl,ts,tc,td,tu,th,tv,tg,t$,tx,tb,tw,tS,tk,tC,tM,tT,tP,tR,tE,tA,tL,tF,tz,tO,tB,tD,t_,tN,tW,tj,tV,tH,tU,tG,tX,tZ,tY,tq,tK,tJ,t1,t0,t2,t4,t5,t3,t6,t8,t9,re,rt,rr,ri,ra,rn,rs,rd,ru,rp,rv,rm,ry,rx,rT,rP,rA,rI,rL,rO,rB,r_,rW,rj,rV,rH,rU,rG,rX,rZ,rY,rq,rK,rJ,rQ,r1,r0,r5,r3,r6,r8,r7,r9,it,ir,ii,ia,io,il,is,ic,id,iu,ih,ip,iv,ig,im,i$,iy,ib,iw,iS,ik,iC,iT,iP,iR=og,iE=og;oC(e,cQ,e=>r(398,I=e)),e.$$.on_destroy.push(()=>iR()),e.$$.on_destroy.push(()=>iE());var iA=aa(),iI=le(),{class:iL}=t,{layout:iF}=t,{stores:iz}=t,{locale:iO}=t,{id:iB}=t,{util:iD}=t,{utils:i_}=t,{animations:iN="auto"}=t,{disabled:iW=!1}=t,{status:ij}=t,{previewUpscale:iV=!1}=t,{previewPad:iH=!1}=t,{previewMaskOpacity:iU=.95}=t,{previewImageDataMaxSize:iX}=t,{previewImageTextPixelRatio:iZ}=t,{markupMaskOpacity:iY=1}=t,{zoomMaskOpacity:iq=.85}=t,{elasticityMultiplier:iK=10}=t,{willRevert:iJ=()=>Promise.resolve(!0)}=t,{willProcessImage:iQ=()=>Promise.resolve(!0)}=t,{willRenderCanvas:i1=e7}=t,{willRenderToolbar:i0=e7}=t,{willSetHistoryInitialState:i2=e7}=t,{enableButtonExport:i4=!0}=t,{enableButtonRevert:i3=!0}=t,{enableNavigateHistory:i6=!0}=t,{enableToolbar:i8=!0}=t,{enableUtils:i7=!0}=t,{enableButtonClose:i9=!1}=t,{enableDropImage:ae=!1}=t,{enablePasteImage:at=!1}=t,{enableBrowseImage:ar=!1}=t,{enableTransparencyGrid:ai=!1}=t,{layoutDirectionPreference:an="auto"}=t,{layoutHorizontalUtilsPreference:al="left"}=t,{layoutVerticalUtilsPreference:as="bottom"}=t,{layoutVerticalToolbarPreference:ac="top"}=t,{layoutVerticalControlGroupsPreference:ad="bottom"}=t,{layoutVerticalControlTabsPreference:au="bottom"}=t,{textDirection:ah}=t,{markupEditorZoomLevel:ap=null}=t,{markupEditorZoomLevels:av}=t,{markupEditorZoomAdjustStep:ag}=t,{markupEditorZoomAdjustFactor:am}=t,{markupEditorZoomAdjustWheelFactor:af}=t,{markupEditorInteractionMode:a$=!1}=t,{muteAudio:ay=!0}=t,{willSetMediaInitialTimeOffset:ax=(e,t)=>e*vs(t[0])}=t,{enablePan:ab=!0}=t,{enableZoom:aw=!0}=t,{enableZoomControls:aS=!0}=t,{enableZoomInput:ak}=t,{enablePanInput:aC}=t,{enableCanvasAlpha:aM=!1}=t,{enablePanLimit:aT}=t,{panLimitGutterScalar:aP}=t,{zoomPresetOptions:aR=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=t,{zoomAdjustStep:aE=.25}=t,{zoomAdjustFactor:aA=.1}=t,{zoomAdjustWheelFactor:aI=1}=t,{zoomLevel:aL=null}=t,{imagePreviewSrc:aF}=t,{imageOrienter:az={read:()=>1,apply:e=>e}}=t,{pluginComponents:aO}=t,{pluginOptions:aB={}}=t,a_=iA.sub,aN={},{root:aW}=t,aj=()=>{r_.setAttribute("data-redraw","true"),na.set({})},aV=lD(!0);oC(e,aV,e=>r(464,r7=e));var aH=lD(void 0);oC(e,aH,e=>r(406,G=e));var aU=lD(0);oC(e,aU,e=>r(407,X=e));var aX=lD(0),aZ=lD(!1),aY=()=>aU.set(nt()/ne()),aK=e=>{aZ.set("play"===e.type),iA.pub(e.type)},aQ=e=>{if(a5()){var t=Date.now();if(!ew||!(t-ew<16)){ew=t;var r=Z*e;if(r.toFixed(1)!==eb){eb=r.toFixed(1);var a=r_,n=()=>{a.removeEventListener("seeked",n),aj()};a.addEventListener("seeked",n),pH(a,r)}}}},a0=!1,a2=()=>{if(eG&&a5()){eC=eJ,oL(aH,G=void 0,G);var e=r_;a0=!1;var t=1/24,r=ne(),a=Math.abs(eq*r-X*r)<=t,n=r-r*X<=t;(a||n)&&oL(aU,X=eY,X),nr(ne()*X),e.play().catch(()=>{});var o=()=>{a5()||(eS=requestAnimationFrame(o),oL(aU,X=nt()/ne(),X),eC>=0&&X>=eq&&(oL(aU,X=eq,X),a4()),eJ>-1&&(a0=!0),a0&&-1===eJ&&eQ>0&&(oL(aU,X=eZ[eQ][0],X),nr(X*ne())),aj())};o()}},a4=()=>{!eG||a5()||(oL(aH,G=void 0,G),eC=void 0,r_.pause(),cancelAnimationFrame(eS),aj())},a5=()=>r_&&r_.paused,a3=()=>{if(eG)return a5()?a2():a4()},a6=()=>{eG&&(r_.muted=!0)},a8=()=>{eG&&(r_.muted=!1)},a7=()=>{eG&&oL(a9,U=!U,U)},a9=lD(ay);oC(e,a9,e=>r(405,U=e));var ne=()=>{if(eG)return r_.duration},nt=()=>{if(eG)return r_.currentTime},nr=e=>{eG&&(r_.currentTime=e,aX.set(e))},ni=e=>{eG&&(r_.volume=Math.min(1,e))};lt("previewcontrols",{play:a2,pause:a4,togglePlayPause:a3,mute:a6,unmute:a8,toggleMute:a7,setCurrentTime:nr,getCurrentTime:nt,getDuration:ne,currentTime:aX,frameOffset:aU,framePeekOffset:aH,isPlaying:aZ,isMuted:a9});var na=lD({});oC(e,na,e=>r(53,ir=e)),lt("redrawTrigger",na);var nn=lD(iK);oC(e,nn,e=>r(480,V=e)),lt("elasticityMultiplier",nn);var no=[],nl=cJ();oC(e,nl,e=>r(102,ef=e));var ns=cF()||1024,nc=tQ(ns,ns),nd=sw(),nu=e=>Promise.resolve(j&&j(e,{resourceType:"image"})).then(t=>{if(!1!==t){var{headers:r,credentials:a}=t||{};return fetch(e,{headers:r,credentials:a}).then(e=>{if(200!==e.status)throw"".concat(e.status," (").concat(e.statusText,")");return e.blob()}).then(e=>p3(e,az,nd)).then(e=>p6(e,e2))}}),{imageSourceToImageData:nh=e=>ez(e)?nu(e):r2(e)?new Promise(t=>t(ex(e))):ix(e)||r4(e)?p3(e,az,nd).then(e=>p6(e,e2)):void 0}=t,np=pZ(),{file:nv,size:ng,duration:nm,trim:nf,volume:n$,minDuration:ny,maxDuration:nx,loadState:nb,processState:nw,cropAspectRatio:nS,cropLimitToImage:nk,crop:nC,cropMinSize:nM,cropMaxSize:nT,cropRange:nP,cropOrigin:nR,cropRectAspectRatio:nE,rotation:nA,rotationRange:nI,targetSize:nL,flipX:nF,flipY:nz,backgroundColor:nO,backgroundImage:nB,colorMatrix:nD,convolutionMatrix:n_,gamma:nW,vignette:nj,noise:nV,decoration:nH,annotation:nU,manipulation:nG,redaction:nY,frame:nq,selection:nK,state:nJ}=np.stores;oC(e,nv,e=>r(382,iC=e)),oC(e,ng,e=>r(355,rV=e)),oC(e,nm,e=>r(408,Z=e)),oC(e,nf,e=>r(403,W=e)),oC(e,n$,e=>r(404,H=e)),oC(e,nx,e=>r(409,Y=e)),oC(e,nb,e=>r(374,ip=e)),oC(e,nw,e=>r(373,ih=e)),oC(e,nS,e=>r(477,F=e)),oC(e,nk,e=>r(86,Q=e)),oC(e,nC,e=>r(393,y=e)),oC(e,nA,e=>r(358,rG=e)),oC(e,nF,e=>r(357,rU=e)),oC(e,nz,e=>r(356,rH=e)),oC(e,nO,e=>r(364,r3=e)),oC(e,nH,e=>r(49,rj=e)),oC(e,nU,e=>r(50,rX=e)),oC(e,nG,e=>r(361,r1=e)),oC(e,nY,e=>r(362,r0=e)),oC(e,nq,e=>r(48,rW=e)),oC(e,nK,e=>r(60,D=e)),oC(e,nJ,e=>r(466,a=e));var n1=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((a,n)=>{if(p4(e)){var o;(ao()?vv(e):Promise.resolve()).then(t=>{var r=document.createElement("video");r.onerror=()=>console.error(r.error),r.playsInline=!0,r.preload="auto",r.onloadeddata=()=>{r.onloadeddata=void 0,r.dataset.rotation=t||"0",sk(r).then(()=>{var e=ax(r.duration,W||[[0,1]]);e>0?(r.onseeked=()=>{r.onseeked=void 0,a(r)},r.currentTime=e):(r.currentTime=e,a(r))})},r.src=URL.createObjectURL(e),r.load()});return}var l=!1;t.cancel=()=>l=!0;var s=Date.now();nh(e).then(e=>{var t=Date.now()-s;clearTimeout(o),o=setTimeout(()=>{l||a(e)},Math.max(0,r-t))}).catch(n)})},{images:n0,shapePreprocessor:n2,imageScrambler:n4,imageRedactionRendering:n5,willRequest:n3,willRequestResource:n6}=iz;oC(e,n0,e=>r(402,N=e)),oC(e,n2,e=>r(401,_=e)),oC(e,n4,e=>r(365,r6=e)),oC(e,n5,e=>r(363,r5=e)),oC(e,n3,e=>r(82,j=e)),oC(e,n6,e=>r(93,el=e));var n8=l_(nB,(e,t)=>{if(!e)return t(void 0);eM&&(eM.cancel(),eM=void 0),n1(e,eM={cancel:ep}).then(t).catch(e=>{})}),n7=nJ.subscribe(e=>iA.pub("update",e)),n9=lD();lt("ui",lD({})),lt("selection",nK);var oe=lD(!0);oC(e,oe,e=>r(95,ec=e));var ot=lD(!0);oC(e,ot,e=>r(97,eu=e));var or=lD(!0);oC(e,or,e=>r(400,B=e));var oi=lD(!0);oC(e,oi,e=>r(478,z=e));var oa=lD(!0);oC(e,oa,e=>r(98,eh=e));var on=lD();oC(e,on,e=>r(99,ev=e));var oo=lD();oC(e,oo,e=>r(479,O=e));var ol=l_([oo,oi],()=>void 0!==O?O:z);oC(e,ol,e=>r(96,ed=e));var os=lD([0,0,0]);oC(e,os,e=>r(57,c=e));var oc=lD([1,1,1]);oC(e,oc,e=>r(462,rQ=e));var od=cJ([1,1,1]);oC(e,od,e=>r(461,rJ=e));var ou=lD();oC(e,ou,e=>r(92,eo=e));var op=lD(),om=lD();oC(e,om,e=>r(52,r9=e));var of=lD();oC(e,of,e=>r(359,rY=e));var o$=()=>{var e=F,t=rM(rY);e&&e===t||(nS.set(rM(rY)),lU())},oy=lD(rl());oC(e,oy,e=>r(81,n=e));var ox=lD(0);oC(e,ox,e=>r(399,L=e));var ob=lD(rl());oC(e,ob,e=>r(85,J=e));var ow=lD();oC(e,ow,e=>r(459,rB=e));var ok=pQ("(pointer: fine)",e=>e?"pointer-fine":"pointer-coarse");oC(e,ok,e=>r(380,iS=e));var oM=pQ("(hover: hover)",e=>e?"pointer-hover":"pointer-no-hover");oC(e,oM,e=>r(379,iw=e));var oT=lD(!1),oP=lD(!1);oC(e,oP,e=>r(360,rK=e));var oR=lB(void 0,e=>{var t=cJ(0),r=[oP.subscribe(e=>{t.set(e?1:0)}),t.subscribe(e)];return()=>r.forEach(e=>e())});oC(e,oR,e=>r(460,rq=e));var oE=lD();oC(e,oE,e=>r(465,i$=e));var oA=lD();oC(e,oA,e=>r(54,ia=e)),lt("isAnimated",oA);var oI=lD(iV);oC(e,oI,e=>r(383,iT=e));var oF=lD(!1);oC(e,oF,e=>r(471,S=e)),lt("imageIsStatic",oF);var oz=lD();oC(e,oz,e=>r(472,k=e));var oO=lD();oC(e,oO,e=>r(469,b=e));var oB=lB(void 0,e=>{var t=lD(void 0),r=[nC.subscribe(()=>{if(y){if(S)return t.set(ro(y));var e=d7(y,b,5*iK);t.set(e)}}),t.subscribe(e)];return()=>r.forEach(e=>e())}),oD=lD();oC(e,oD,e=>r(468,$=e));var o_=lD();oC(e,o_,e=>r(470,w=e));var oN=lD(void 0);oC(e,oN,e=>r(475,R=e));var oW=lD(tm());oC(e,oW,e=>r(476,E=e));var oj=(e,t)=>{if(!t||!e)return{top:0,right:0,bottom:0,left:0};var r=nX(nZ(t,e,e4),e);return{top:Math.abs(r.top),right:Math.abs(r.right),bottom:Math.abs(r.bottom),left:Math.abs(r.left)}},oV=lD({}),oH=l_([ow,oy,ob,oV],(e,t)=>{var[r,a,n,o]=e;if(!r)return t(void 0);var l=0;1!==tc.length||e1||"bottom"===ac||(l=n.y+n.height),t(rg(r.x+a.x,r.y+a.y+l,r.width,r.height))}),oU={left:0,right:0,top:0,bottom:0},oG=lD(!1),oX=l_([oG,nq,oH,oP],(e,t)=>{var[r,a,n,o]=e;if(!n)return t({left:0,right:0,top:0,bottom:0});if(r){var l=Math.min(n.width,n.height),s=oj({width:l,height:l},a);(tp(oU.top,4)!==tp(s.top,4)||tp(oU.bottom,4)!==tp(s.bottom,4)||tp(oU.right,4)!==tp(s.right,4)||tp(oU.left,4)!==tp(s.left,4))&&(oU=s,t(s))}});oC(e,oX,e=>r(391,g=e));var oZ=l_([oG,oX],(e,t)=>{var[r,a]=e;if(!r)return t(!1);t(Object.values(a).some(e=>e>0))});oC(e,oZ,e=>r(392,m=e));var oY=l_([oG,ow,oZ,oX],(e,t)=>{var[r,a,n,o]=e;if(a){if(!r||!n)return t(ea({},a));t(rg(a.x+o.left,a.y+o.top,a.width-o.left-o.right,a.height-o.top-o.bottom))}}),oq=l_([oH,oZ,oX],(e,t)=>{var[r,a,n]=e;return r?a?void t(rg(r.x+n.left,r.y+n.top,r.width-n.left-n.right,r.height-n.top-n.bottom)):t(r):t(void 0)});oC(e,oq,e=>r(51,rZ=e));var oK=l_([oF,ng,nA],(e,t)=>{var[r,a,n]=e;if(!r||!a)return t(void 0);t(rR(rc(a),n))}),oJ=l_([oK],(e,t)=>{var[r]=e;if(!r)return t(void 0);t(rN(rh(r)))});oC(e,oJ,e=>r(394,x=e));var oQ=l_([oq,nC,oJ,oI],(e,t)=>{var[r,a,n,o]=e,l=!!(k||b);if(r&&a&&!l){var{width:s,height:c}=n||a,d=Math.min(r.width/s,r.height/c);t(o?d:Math.min(1,d))}});oC(e,oQ,e=>r(395,M=e)),lt("imageStaticVisualCorners",l_([oF,ng,nA,oq,ow,oQ],(e,t)=>{var[r,a,n,o,l,s]=e;if(!r||!o||!l||!a)return t(void 0);var c=rN(r$(rc(a),s)),d=rE(o,c);c.x=d.x,c.y=d.y,t(rR(c,n))}));var o1=lD(void 0);oC(e,o1,e=>r(397,A=e));var o0=l_([nC,oq],e=>{var[t,r]=e;if(r&&t)return Math.min(r.width/t.width,r.height/t.height)}),o2=l_([nC,oD],e=>{var[t,r]=e;return t&&r?Math.min(t.width/r.width,t.height/r.height):1});oC(e,o2,e=>r(101,em=e));var o4=l_([o1,o2],e=>{var[t,r]=e;return t&&r?r*t:1});oC(e,o4,e=>r(474,T=e));var o5=lD(tm());oC(e,o5,e=>r(396,P=e));var o3=lD({scalar:T,translation:P}),o6=()=>{o3.set({scalar:void 0,translation:tm()})},o8=lB(void 0,e=>{var t=cJ(void 0,{precision:1e-4}),r=1===uk()?e=>rD(e,Math.round):e7,a=()=>{if($){var e=rK||!i$;if(S){var a=ro($);return rf(a,E),rf(a,rZ),t.set(a,{hard:e})}var n=d7($,R,vH*iK);n.width<0&&(n.width=0,n.x=$.x),n.height<0&&(n.height=0,n.y=$.y),rf(n,rZ),rf(n,P),r$(n,T),e||r(n),t.set(n,{hard:e})}},n=[oq.subscribe(a),oD.subscribe(a),o4.subscribe(a),o5.subscribe(a),nq.subscribe(a),t.subscribe(e)];return()=>n.forEach(e=>e())});oC(e,o8,e=>r(59,v=e));var o7=lD(1);oC(e,o7,e=>r(467,f=e));var lr=()=>{if(y&&rZ){var e=rb(ro(y),M||1);rf(e,rE(rZ,rb(ro(x),M)));var t=Math.min(1,rB.width/e.width,rB.height/e.height);o7.set(t),r$(e,t),rF(e,ea(ea({},rB),{},{x:0,y:0})),oD.set(e)}},li=l_([oq,oQ,nC,ng],(e,t)=>{var[r,a,n,o]=e;r&&(n||o)&&t(la(r,a||1,n||o))});oC(e,li,e=>r(100,eg=e));var la=(e,t,r)=>r.width<=e.width&&r.height<=e.height?rE(e,rb(ro(r),t)):rz(e,rM(r)),lo=e=>{if(!(e1&&eE&&rC(eE,e))||eA!==M){if(S)return lr();eE=e,eA=M;var t=la(e,M,y||rV);oD.set(t)}},ll=!1,ls=oQ.subscribe(e=>{!ll&&void 0!==e&&y&&(lo(rZ),ll=!0)}),lc=oq.subscribe(e=>{e&&void 0!==M&&y&&lo(e)}),ld=oF.subscribe(e=>{!e&&rZ&&lo(rZ)}),lu=o_.subscribe(e=>{if(!e){eI=void 0,oL(oz,k=void 0,k);return}eI=C;var t=ro(y);oz.set(t)}),lh=oD.subscribe(e=>{if(e&&w){var t=rS(ro(e),w);rw(t,eI);var r=rk(ro(k),t);nC.set(r)}}),lp=nC.subscribe(e=>{if(e&&$){if(S){w||lr();return}if(!rK&&!w&&!b){var t=rM($),r=rM(e);if(tp(t,6)!==tp(r,6)){var{width:a,height:n}=x||y,o=Math.min(rZ.width/a,rZ.height/n),l=tQ(e.width*o,e.height*o),s=($.width-l.width)*.5,c=($.height-l.height)*.5,d=rg($.x+s,$.y+c,l.width,l.height);oD.set(d)}}}}),lv=l_([oQ,nC,oD,oF],(e,t)=>{var[r,a,n,o]=e;if(r&&a&&n){if(o)return t(f);t(Math.max(n.width/a.width,n.height/a.height)/r)}}),lg=l_([oQ,lv],(e,t)=>{var[r,a]=e;a&&t(r*a)});oC(e,lg,e=>r(473,C=e));var lm={left:0,right:0,top:0,bottom:0},lf=l_([nq,oD],(e,t)=>{var[r,a]=e;if(!a)return t(lm);var n=oj(a,r);(tp(lm.top,4)!==tp(n.top,4)||tp(lm.bottom,4)!==tp(n.bottom,4)||tp(lm.right,4)!==tp(n.right,4)||tp(lm.left,4)!==tp(n.left,4))&&(lm=n,t(n))}),l$=l_([lf],(e,t)=>{var[r]=e;t(Object.values(r).some(e=>e>0))}),ly=cJ(.075,{stiffness:.03,damping:.4,precision:.001}),lx=l_([od,os,ly,o8,o4,nq,l$,lf,oZ],(e,t)=>{var[r,a,n,o,l,s,c,d,u]=e;if(!o||e1)return t([]);var{x:h,y:p,width:v,height:g}=o;h+=.5,p+=.5,v-=.5,g-=.5;var m=[];if(s){if(c){var{left:f,right:$,top:y,bottom:x}=d;f*=l,$*=l,y*=l,x*=l;var b=vn(a);m.push({x:h-f-.5,y:p-y-.5,width:v+f+$+1,height:g+y+x+1,strokeWidth:1,strokeColor:b?[1,1,1,.125]:[0,0,0,.075],opacity:u?1:.5})}var w=vn(r);s&&s.frameColor&&vn(s.frameColor)||w||(m.push({x:h-1,y:p-1,width:v+2,height:g+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:n}),m.push({x:h+1,y:p+1,width:v-2,height:g-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:n}))}t([...m,{x:h,y:p,width:v,height:g,strokeWidth:1,strokeColor:r,opacity:n}])}),lb=lD([]);oC(e,lb,e=>r(385,o=e));var lw=l_([lx,lb],(e,t)=>{var[r,a]=e;t([...r,...a])});oC(e,lw,e=>r(94,es=e));var lS=cJ(0,{precision:.001});oC(e,lS,e=>r(387,s=e));var lk=cJ();oC(e,lk,e=>r(390,h=e));var lC=cJ();oC(e,lC,e=>r(389,u=e));var lM=cJ();oC(e,lM,e=>r(388,d=e));var lT=cJ();oC(e,lT,e=>r(386,l=e));var lP=lD(!1);oC(e,lP,e=>r(372,iu=e));var lR=lD();oC(e,lR,e=>r(375,iv=e));var lE=l_([lP,lR],(e,t)=>{var[a,n]=e;if(!a||!n){t(void 0);return}if(eL&&(eL.cancel(),r(282,eL=void 0)),nQ(n))return t(eR(n));var o=lK.length?0:ia?250:0;r(282,eL={cancel:ep}),n1(n,eL,o).then(t).catch(e=>{oL(nb,ip.error=e,ip)}).finally(()=>{r(282,eL=void 0)})});iR(),iR=oS(lE,e=>r(354,r_=e));var{imagePreviewCurrent:lA}=t,lI=lD({});oC(e,lI,e=>r(377,iy=e));var lL=lD([]);oC(e,lL,e=>r(87,ee=e));var lF=()=>{o5.set(tm()),o1.set(void 0),o6(),lL.set([])},lz=l_([oq,of,ng,oB,oD,lg,nA,nF,nz,o4,o5,oT],(e,t)=>{var[r,a,n,o,l,s,c,d,u,h,p,v]=e;if(r&&l){var g=s3(r,a,n,o,l,h,p,s,c,d,u);v||to(g),t(g)}});oC(e,lz,e=>r(378,ib=e));var lO=l_([nD,n_,nW,nj,nV],(e,t)=>{var[r,a,n,o,l]=e,s=r&&Object.keys(r).map(e=>r[e]).filter(Boolean);t({gamma:n||void 0,vignette:o||void 0,noise:l||void 0,convolutionMatrix:a||void 0,colorMatrix:s&&s.length&&oh(s)})}),lN=p1(),lW=lD({});oC(e,lW,e=>r(366,it=e)),lt("env",lW);var lj=uk(),lV=lB(lj,e=>{var t=()=>e(uk()),r=matchMedia("(resolution: ".concat(lj,"dppx)"));return r.addListener(t),()=>r.removeListener(t)});oC(e,lV,e=>r(58,p=e));var lH=p0(()=>a,e=>{oL(nJ,a=e,a),oy.set(n)});iE(),iE=oS(lH,e=>r(384,iP=e));var lU=()=>{var e=rD(rz(ea({x:0,y:0},rV),a.cropAspectRatio),Math.round),t=i2(ea(ea({},a),{},{rotation:0,crop:e}),a),r=[t];JSON.stringify(t)!==JSON.stringify(a)&&r.push(ea({},a)),lH.set(r)},lG=nb.subscribe(e=>{e&&e.complete&&lU()}),lX=()=>iJ().then(e=>e&&lH.revert()),lZ=lD(!1);oC(e,lZ,e=>r(367,ii=e));var lY=()=>{oL(lZ,ii=!0,ii),iQ().then(e=>{var t;if(!e){oL(lZ,ii=!1,ii);return}t=sm.subscribe(e=>{1===e&&(t&&t(),iI("processImage"))})})},lq=nw.subscribe(e=>{if(!e){oL(lZ,ii=!1,ii);return}oL(lZ,ii=!0,ii);var{complete:t,abort:r}=e;(t||r)&&oL(lZ,ii=!1,ii)}),lK=va();oC(e,lK,e=>r(56,ig=e));var lJ=l_([lK],(e,t)=>{var[r]=e;if(!r.length)return t();var{origin:a,translation:n,rotation:o,scale:l}=r[0];t({origin:a,translation:n,rotation:o,scale:l})}),lQ=lD();oC(e,lQ,e=>r(381,ik=e));var l1=[],l0=lD(),l2=lD(),l4=l_([o1,l2,oQ,o0],e=>{var[t,r,a,n]=e;return t||(r||a<1?n:1)}),l5=ea(ea({},iz),{},{imageFile:nv,imageSize:ng,mediaDuration:nm,mediaMinDuration:ny,mediaMaxDuration:nx,mediaTrim:nf,imageBackgroundColor:nO,imageBackgroundImage:nB,imageCropAspectRatio:nS,imageCropMinSize:nM,imageCropMaxSize:nT,imageCropLimitToImage:nk,imageCropRect:nC,imageCropRectOrigin:nR,imageCropRectSnapshot:oz,imageCropRectAspectRatio:nE,imageCropRange:nP,imageRotation:nA,imageRotationRange:nI,imageFlipX:nF,imageFlipY:nz,imageOutputSize:nL,imageColorMatrix:nD,imageConvolutionMatrix:n_,imageGamma:nW,imageVignette:nj,imageNoise:nV,imageManipulation:nG,imageDecoration:nH,imageAnnotation:nU,imageRedaction:nY,imageFrame:nq,imagePreview:lE,imagePreviewSource:lR,imageTransforms:lz,imagePreviewModifiers:lI,history:lH,animation:oE,pixelRatio:lV,elasticityMultiplier:iK,scrollElasticity:vG,rangeInputElasticity:5,redrawTrigger:na,pointerAccuracy:ok,pointerHoverable:oM,env:lW,rootRect:of,stageRect:oq,stageRectBase:oH,stageRecenter:oV,stageScalar:oQ,stagePadding:oX,stagePadded:oZ,presentationScalar:lg,imagePreviewUpscale:l2,utilRect:ow,utilRectPadded:oY,allowPlayPause:aV,allowPan:oe,allowZoom:ot,allowZoomControls:or,enableZoomInput:oa,enablePanInput:oi,enablePanInputStatus:ol,imageSelectionMultiTouching:l0,rootBackgroundColor:os,rootForegroundColor:oc,rootLineColor:od,rootColorSecondary:op,imageOutlineOpacity:ly,utilTools:lQ,imageSelectionPan:o5,imageSelectionZoom:o1,imageSelectionZoomCurrent:l4,imageSelectionStageFitScalar:o0,imageSelectionStoredState:o3,imageOverlayMarkup:lb,interfaceImages:lL,isInteracting:oP,isTransformingImage:oT,isInteractingFraction:oR,imageCropRectIntent:oO,imageCropRectPresentation:oB,imageSelectionRect:oD,imageSelectionRectIntent:oN,imageSelectionRectPresentation:o8,imageSelectionRectSnapshot:o_,imageScalar:lv,imageTransformsInterpolated:lJ,imageEffects:lO});delete l5.image;var l3="util-".concat(eV()),l8=[],l7=(e,t,r,a)=>{var n=t.filter(t=>{var[r]=t;return e.includes(r)}).filter(e=>{var[t,{isSupported:n}]=e;return n(ea(ea({},a),r[t]))}).map(e=>{var[t,r]=e;return[t,r.Component]});return si(n,l8,(e,t)=>e[0]===t[0]&&e[1]===t[1])?l8:(l8=n,n)},l9=e=>td.find(t=>{var[r]=t;return e===r}),se=()=>td[0][0],st=[],sr=iM(),sa=(e,t)=>rY?"auto"===t?e.width>e.height?"landscape":"portrait":"horizontal"===t?e.width<500?"portrait":"landscape":"vertical"===t?e.height<400?"landscape":"portrait":void 0:"landscape",sn=e=>pl(tU.getPropertyValue(e)),so=(e,t,r)=>{var a=tU.getPropertyValue(e);a=r?r(a):/^[0-9]+$/.test(a)?parseFloat(a):void 0,t.set(a,{hard:!ia})},sl=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=sn(e);a&&0!==a[3]&&(r||(a.length=3),t.set(a,{hard:!ia}))},ss=lD();oC(e,ss,e=>r(88,et=e));var sc=lD();oC(e,sc,e=>r(89,er=e));var sd=lD();oC(e,sd,e=>r(90,ei=e));var su=cJ(0,{damping:.9});oC(e,su,e=>r(91,en=e));var sh=()=>{sl("color",oc),aM?sl("--color-background",os):sl("background-color",os),sl("outline-color",od),sl("--color-primary",ou),sl("--color-secondary",op),sl("--grid-color-even",sc,!0),sl("--grid-color-odd",sd,!0),so("--grid-size",ss),so("--editor-inset-top",ox,e=>parseInt(e,10))},sp=l_([lz,lO,nO,n8],e=>{var[t,r,a,n]=e;return t&&ea(ea(ea({},t),r),{},{backgroundColor:a,backgroundImage:n})});oC(e,sp,e=>r(376,im=e));var sv=()=>{var e=lK.length?void 0:{resize:1.05},t=vi(r_,rV,e);lK.unshift(t),sg(im)},sg=e=>{lK.forEach((t,r)=>{t.set(ea(ea({},e),{},{opacity:0===r?1:0,resize:1}),i$)})},sm=cK(void 0,{duration:500});oC(e,sm,e=>r(55,ic=e));var sf=lD(!1);oC(e,sf,e=>r(371,id=e));var s$=cJ(void 0,{stiffness:.1,damping:.7,precision:.25});oC(e,s$,e=>r(83,q=e));var sy=cJ(0,{stiffness:.1,precision:.05});oC(e,sy,e=>r(84,K=e));var sx=cJ(0,{stiffness:.02,damping:.5,precision:.25});oC(e,sx,e=>r(369,il=e));var sb=cJ(void 0,{stiffness:.02,damping:.5,precision:.25});oC(e,sb,e=>r(370,is=e));var sS=cJ(void 0,{stiffness:.02,damping:.5,precision:.25});oC(e,sS,e=>r(368,io=e));var sC=()=>{iI("abortLoadImage")},sM=()=>{iI("abortProcessImage"),oL(lZ,ii=!1,ii)},sT=e=>{e.target&&"true"===e.target.dataset.touchScroll||e.preventDefault()},sP=lN?e=>{var t=e.touches?e.touches[0]:e;t.pageX>20&&t.pageX<window.innerWidth-20||sT(e)}:ep,sR=lD([]);oC(e,sR,e=>r(463,r8=e)),lt("keysPressed",sR);var sE=e=>{!(!e||i5(e)&&!p9(e))&&(i5(e)||/^http/.test(e))&&iI("loadImage",e)},sA=e=>{e&&sE(e)},sI=void 0,sL=(e,t,a,n)=>{if(t){var o={dataSizeScalar:a};n&&n[3]>0&&(o.backgroundColor=[...n]),t(e,o).then(e=>{sI&&ek(sI),r(286,sI=e)})}},sF=[],sz=lD();lt("rootPortal",sz),lt("rootRect",of);var sO=()=>({foregroundColor:[...rQ],lineColor:[...rJ],utilVisibility:ea({},tg),isInteracting:rK,isInteractingFraction:rq,rootRect:ro(rY),stageRect:ro(rZ),manipulationShapesDirty:s2,annotationShapesDirty:sZ,decorationShapesDirty:sJ,frameShapesDirty:s1}),sB=(e,t,r)=>nN(e,tQ(t.width/r,t.height/r)),sD=(e,t,r)=>(e._translate=ty(t),e._scale=r,e),s_=e=>{var t=[];return e.forEach(e=>t.push(sN(e))),t.filter(Boolean)},sN=e=>(aq(e)?e.points=[tf(e.x1,e.y1),tf(e.x2,e.y2)]:aJ(e)&&(!e.backgroundColor||0===e.backgroundColor[3])&&(aG(e)&&(e.width=5,e.height=e.lineHeight),e.strokeWidth=1,e.strokeColor=[1,1,1,.5],e.backgroundColor=[0,0,0,.1]),e),sW=[],sj=[],sV=[],sH=[],sU=[],sG={},sX=(e,t,r,a,n,o,l)=>{var{manipulationShapesDirty:s,annotationShapesDirty:c,decorationShapesDirty:d,frameShapesDirty:u,selectionRect:h,scale:p}=e,v=eH!==p,g=v||!rC(sG,h);g&&(eH=p,sG=h),s&&(sV=t.filter(a1).map(aD).map(e=>nN(e,rV))),(c||r!==rX)&&(sW=r.filter(a1).map(aD).sort((e,t)=>e.alwaysOnTop?1:t.alwaysOnTop?-1:0).map(e=>nN(e,rV))),(v||sq||c||r!==rX)&&(sj=s_(sW.map(e=>e4(e,{flipX:rU,flipY:rH,rotation:rG,scale:p,context:rc(rV)})).flat())),(d||a!==rj||g)&&(sH=s_(a.filter(a1).map(aD).sort((e,t)=>e.alwaysOnTop?1:t.alwaysOnTop?-1:0).map(e=>sB(e,h,p)).map(e=>e4(e,{context:h})).flat().map(e=>sD(e,h,p)))),(u||o!==rW||g)&&(sU=o?s_([o].map(aD).map(e=>sB(e,h,p)).map(e4).flat().map(e=>sD(e,h,p))):[]);var m=s_(n.filter(a1));return{manipulationShapesDirty:s,manipulationShapes:sV,annotationShapesDirty:c,annotationShapes:sj,decorationShapesDirty:d,decorationShapes:sH,frameShapesDirty:u,frameShapes:sU,interfaceShapes:m,selectionShapes:l.map(aD).map(e=>nN(e,rV))}},sZ=!0,sY=()=>r(64,sZ=!0),sq=!0,sK=()=>r(65,sq=!0),sJ=!0,sQ=()=>r(66,sJ=!0),s1=!0,s0=()=>r(67,s1=!0),s2=!0,s4=()=>r(68,s2=!0);return o9(()=>{a4(),r_&&ez(r_.src)&&/^blob:/.test(r_.src)&&URL.revokeObjectURL(r_.src),n7(),lc(),ls(),ld(),lu(),lh(),lp(),lG(),lq(),ok.destroy(),oM.destroy(),np.destroy(),lK.clear(),sW.length=0,sj.length=0,sV.length=0,sH.length=0,sU.length=0;try{r(228,lA=void 0),r(283,eD=void 0)}catch(e){}}),e.$$set=e=>{"class"in e&&r(229,iL=e.class),"layout"in e&&r(230,iF=e.layout),"stores"in e&&r(231,iz=e.stores),"locale"in e&&r(3,iO=e.locale),"id"in e&&r(4,iB=e.id),"util"in e&&r(232,iD=e.util),"utils"in e&&r(233,i_=e.utils),"animations"in e&&r(234,iN=e.animations),"disabled"in e&&r(235,iW=e.disabled),"status"in e&&r(227,ij=e.status),"previewUpscale"in e&&r(236,iV=e.previewUpscale),"previewPad"in e&&r(237,iH=e.previewPad),"previewMaskOpacity"in e&&r(5,iU=e.previewMaskOpacity),"previewImageDataMaxSize"in e&&r(238,iX=e.previewImageDataMaxSize),"previewImageTextPixelRatio"in e&&r(6,iZ=e.previewImageTextPixelRatio),"markupMaskOpacity"in e&&r(7,iY=e.markupMaskOpacity),"zoomMaskOpacity"in e&&r(239,iq=e.zoomMaskOpacity),"elasticityMultiplier"in e&&r(8,iK=e.elasticityMultiplier),"willRevert"in e&&r(240,iJ=e.willRevert),"willProcessImage"in e&&r(241,iQ=e.willProcessImage),"willRenderCanvas"in e&&r(9,i1=e.willRenderCanvas),"willRenderToolbar"in e&&r(242,i0=e.willRenderToolbar),"willSetHistoryInitialState"in e&&r(243,i2=e.willSetHistoryInitialState),"enableButtonExport"in e&&r(244,i4=e.enableButtonExport),"enableButtonRevert"in e&&r(245,i3=e.enableButtonRevert),"enableNavigateHistory"in e&&r(246,i6=e.enableNavigateHistory),"enableToolbar"in e&&r(10,i8=e.enableToolbar),"enableUtils"in e&&r(247,i7=e.enableUtils),"enableButtonClose"in e&&r(248,i9=e.enableButtonClose),"enableDropImage"in e&&r(249,ae=e.enableDropImage),"enablePasteImage"in e&&r(250,at=e.enablePasteImage),"enableBrowseImage"in e&&r(251,ar=e.enableBrowseImage),"enableTransparencyGrid"in e&&r(11,ai=e.enableTransparencyGrid),"layoutDirectionPreference"in e&&r(252,an=e.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in e&&r(253,al=e.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in e&&r(254,as=e.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in e&&r(255,ac=e.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in e&&r(256,ad=e.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in e&&r(257,au=e.layoutVerticalControlTabsPreference),"textDirection"in e&&r(12,ah=e.textDirection),"markupEditorZoomLevel"in e&&r(258,ap=e.markupEditorZoomLevel),"markupEditorZoomLevels"in e&&r(13,av=e.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in e&&r(14,ag=e.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in e&&r(15,am=e.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in e&&r(16,af=e.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in e&&r(259,a$=e.markupEditorInteractionMode),"muteAudio"in e&&r(260,ay=e.muteAudio),"willSetMediaInitialTimeOffset"in e&&r(261,ax=e.willSetMediaInitialTimeOffset),"enablePan"in e&&r(17,ab=e.enablePan),"enableZoom"in e&&r(18,aw=e.enableZoom),"enableZoomControls"in e&&r(262,aS=e.enableZoomControls),"enableZoomInput"in e&&r(19,ak=e.enableZoomInput),"enablePanInput"in e&&r(263,aC=e.enablePanInput),"enableCanvasAlpha"in e&&r(20,aM=e.enableCanvasAlpha),"enablePanLimit"in e&&r(21,aT=e.enablePanLimit),"panLimitGutterScalar"in e&&r(22,aP=e.panLimitGutterScalar),"zoomPresetOptions"in e&&r(23,aR=e.zoomPresetOptions),"zoomAdjustStep"in e&&r(24,aE=e.zoomAdjustStep),"zoomAdjustFactor"in e&&r(25,aA=e.zoomAdjustFactor),"zoomAdjustWheelFactor"in e&&r(26,aI=e.zoomAdjustWheelFactor),"zoomLevel"in e&&r(0,aL=e.zoomLevel),"imagePreviewSrc"in e&&r(266,aF=e.imagePreviewSrc),"imageOrienter"in e&&r(267,az=e.imageOrienter),"pluginComponents"in e&&r(268,aO=e.pluginComponents),"pluginOptions"in e&&r(27,aB=e.pluginOptions),"root"in e&&r(2,aW=e.root),"imageSourceToImageData"in e&&r(28,nh=e.imageSourceToImageData),"imagePreviewCurrent"in e&&r(228,lA=e.imagePreviewCurrent)},e.$$.update=()=>{if(1&e.$$.dirty[0]|1024&e.$$.dirty[8]&&r(0,aL=null===aL?ap:aL),2&e.$$.dirty[0]|1048576&e.$$.dirty[8]){var t,a,n,f,$,b=!1;aO.forEach(e=>{var[t]=e;aN[t]||(r(1,aN[t]={},aN),b=!0)}),b&&r(280,no=[...aO])}if(8&e.$$.dirty[0]|65536&e.$$.dirty[7]|2&e.$$.dirty[9]&&r(335,tc=iO&&no.length?i_||no.map(e=>{var[t]=e;return t}):[]),134217728&e.$$.dirty[0]|2&e.$$.dirty[9]|33554432&e.$$.dirty[10]|1024&e.$$.dirty[12]&&r(336,td=l7(tc,no,aB,{src:iC})),67108864&e.$$.dirty[10]&&r(291,tu=td.length),8&e.$$.dirty[0]|4096&e.$$.dirty[9]|33554432&e.$$.dirty[10]&&r(47,th=tu&&tc.map(e=>{var t=l9(e);if(t)return{id:e,view:t[1],tabIcon:iO["".concat(e,"Icon")],tabLabel:iO["".concat(e,"Label")]}}).filter(Boolean)||[]),65536&e.$$.dirty[1]&&r(353,eU=!!th.find(e=>"trim"===e.id)),12288&e.$$.dirty[11]|32&e.$$.dirty[13]&&r(290,eG=!!(Z&&r_&&eU)),32768&e.$$.dirty[7]|4096&e.$$.dirty[9]&&r(44,tv=tu&&iD&&"string"==typeof iD&&l9(iD)?iD:tu>0?se():void 0),8192&e.$$.dirty[1]|2048&e.$$.dirty[9]&&eG&&tv&&a4(),2048&e.$$.dirty[9]|8192&e.$$.dirty[11]&&(eG?(r_.addEventListener("play",aK),r_.addEventListener("pause",aK)):r_&&"video"===r_.nodeName&&(r_.removeEventListener("play",aK),r_.removeEventListener("pause",aK))),2048&e.$$.dirty[9]&&eG&&aY(),24&e.$$.dirty[13]&&aQ(G||X),16&e.$$.dirty[13]&&r(351,eX=X&&tp(X,6)),97&e.$$.dirty[13]&&r(349,eZ=W||[[0,Math.min(Z,Y)/Z]]),256&e.$$.dirty[11]&&(eY=eZ[0][0]),256&e.$$.dirty[11]&&(eq=eZ[eZ.length-1][1]),256&e.$$.dirty[11]&&r(352,eK=eZ.map(e=>{var[t,r]=e;return[tp(t,6),tp(r,6)]})),3072&e.$$.dirty[11]&&r(350,eJ=eK.findIndex(e=>{var[t,r]=e;return eX>=t&&eX<=r})),3584&e.$$.dirty[11]&&(eQ=-1===eJ&&eK.findIndex((e,t,r)=>{var a=r[t-1];return a?eX<=e[0]&&eX>=a[1]:eX<=e[0]})),4096&e.$$.dirty[8]&&a9.set(ay),8192&e.$$.dirty[11]|4&e.$$.dirty[13]&&(r_&&U?a6():a8()),8192&e.$$.dirty[11]|2&e.$$.dirty[13]&&r_&&ni(H),256&e.$$.dirty[0]&&oL(nn,V=iK,V),8192&e.$$.dirty[7]&&r(345,e1="overlay"===iF),1073741824&e.$$.dirty[7]|16&e.$$.dirty[11]&&r(45,e0=i7&&!e1),134217730&e.$$.dirty[0]&&aB&&Object.entries(aB).forEach(e=>{var[t,a]=e;Object.entries(a).forEach(e=>{var[a,n]=e;aN[t]&&r(1,aN[t][a]=n,aN)})}),262144&e.$$.dirty[7]&&nl.set(iW?1:0),2097152&e.$$.dirty[7]&&(e2=iX?t7(iX,nc):nc),1073741824&e.$$.dirty[12]&&np.update(N[0]),536870912&e.$$.dirty[12]&&(e4=_?(e,t)=>_(e,ea(ea({flipX:void 0,flipY:void 0,rotation:void 0},t),{},{isPreview:!0})):e7),536870912&e.$$.dirty[1]&&Array.isArray(D)&&iI("selectionchange",[...D]),16384&e.$$.dirty[8]|268435456&e.$$.dirty[12]&&on.set(B&&aS),34816&e.$$.dirty[8]&&oo.set("pan"===a$||aC),2097152&e.$$.dirty[1]&&r9&&of.set(rg(r9.x,r9.y,r9.width,r9.height)),262160&e.$$.dirty[11]|4&e.$$.dirty[12]&&rY&&e1&&ip&&ip.complete&&o$(),33554432&e.$$.dirty[10]&&r(46,tw=tc.length>1),32768&e.$$.dirty[1]&&!tw&&oy.set(rl()),1024&e.$$.dirty[0]|134217728&e.$$.dirty[12]&&!i8&&ob.set(rg(0,L,0,0)),524352&e.$$.dirty[11]&&r(348,e3=!rK&&e5),67108864&e.$$.dirty[12]&&r(346,e6=!I),2097152&e.$$.dirty[1]&&r(292,rx=r9&&r9.width>0&&r9.height>0),8&e.$$.dirty[0]|12288&e.$$.dirty[9]&&r(41,rT=rx&&iO&&!!tu),1024&e.$$.dirty[1]&&setTimeout(()=>r(281,eT=rT),1),131072&e.$$.dirty[7]|4&e.$$.dirty[9]|160&e.$$.dirty[11]&&oL(oE,i$="always"===iN?e3:"never"!==iN&&e3&&eT&&e6,i$),131072&e.$$.dirty[7]|96&e.$$.dirty[11]&&oL(oA,ia="always"===iN?e5:"never"!==iN&&e5&&e6,ia),524288&e.$$.dirty[7]|16&e.$$.dirty[11]&&oI.set(iV||e1),1048576&e.$$.dirty[7]&&oG.set(iH),4&e.$$.dirty[0]|41943040&e.$$.dirty[12]&&aW&&(aW.dispatchEvent(pq("markupzoom",A)),aW.dispatchEvent(pq("zoom",iG(A)?A:M))),4&e.$$.dirty[0]|16777216&e.$$.dirty[12]&&aW&&(aW.dispatchEvent(pq("markuppan",P)),aW.dispatchEvent(pq("pan",P))),2097152&e.$$.dirty[12]&&y&&o6(),4194304&e.$$.dirty[12]&&x&&lr(),8396800&e.$$.dirty[1]&&tv&&ly.set(.075,{hard:!ia}),4194304&e.$$.dirty[7]&&r(343,e8=iq),1572864&e.$$.dirty[12]&&r(344,e9=m?-Math.max(...Object.values(g)):0),277872640&e.$$.dirty[1]|12&e.$$.dirty[11]&&v){var w=v.x-rZ.x,S=rZ.x+rZ.width-(v.x+v.width),k=Math.min(w,v.y-rZ.y,S,rZ.y+rZ.height-(v.y+v.height));lS.set(k>e9?0:Math.min(e8,Math.abs(k/64)),{hard:!ia})}if(134217728&e.$$.dirty[1]&&r(342,te=.55/p),9437184&e.$$.dirty[1]|2&e.$$.dirty[11]&&rZ&&lk.set({x:0,y:rZ.y,width:rZ.x<64?0:rZ.x,height:rZ.height+te},{hard:!ia}),9437184&e.$$.dirty[1]|262146&e.$$.dirty[11]&&rZ&&lC.set({x:0,y:0,width:rY.width,height:rZ.y+te},{hard:!ia}),9437184&e.$$.dirty[1]|262146&e.$$.dirty[11]&&rZ){var C=rZ.x+rZ.width,T=rY.width-(rZ.x+rZ.width);T<64&&(C+=T,T=0),lM.set({x:C,y:rZ.y,width:T,height:rZ.height+te},{hard:!ia})}if(9437184&e.$$.dirty[1]|262144&e.$$.dirty[11]&&rZ&&lT.set({x:0,y:rZ.y+rZ.height,width:rY.width,height:rY.height-(rZ.y+rZ.height)},{hard:!ia}),67108864&e.$$.dirty[1]|294912&e.$$.dirty[12]&&r(338,tt=h&&ea({id:vU,backgroundColor:c,opacity:s},h)),67108864&e.$$.dirty[1]|163840&e.$$.dirty[12]&&r(341,tr=u&&ea({id:vU,backgroundColor:c,opacity:s},u)),67108864&e.$$.dirty[1]|98304&e.$$.dirty[12]&&r(340,ti=d&&ea({id:vU,backgroundColor:c,opacity:s},d)),67108864&e.$$.dirty[1]|49152&e.$$.dirty[12]&&r(339,ta=l&&ea({id:vU,backgroundColor:c,opacity:s},l)),1879048192&e.$$.dirty[10]|1&e.$$.dirty[11]&&r(337,tn=[tr,ti,ta,tt].filter(Boolean)),134217728&e.$$.dirty[10]|8192&e.$$.dirty[12]&&tn&&o&&lb.update(e=>[...e.filter(e=>e.id!==vU),...tn]),262144&e.$$.dirty[8]|1024&e.$$.dirty[12]&&lR.set(aF||iC||void 0),4&e.$$.dirty[0]|2048&e.$$.dirty[7]|8192&e.$$.dirty[11]&&(r(228,lA=r_),r_&&aW.dispatchEvent(pq("loadpreview",lA))),8&e.$$.dirty[12]&&iv&&lF(),4096&e.$$.dirty[12]&&r(296,tl=iP.index>0),4096&e.$$.dirty[12]&&r(295,ts=iP.index<iP.length-1),8&e.$$.dirty[1]&&l0.set(eB),2048&e.$$.dirty[12]&&l2.set(iT),8192&e.$$.dirty[1]&&n9.set(tv),65664&e.$$.dirty[1]&&r(38,tg=th.reduce((e,t)=>(e[t.id]=tg&&tg[t.id]||0,e),{})),8192&e.$$.dirty[1]&&r(80,t$={name:l3,selected:tv}),65536&e.$$.dirty[1]&&r(79,tx=th.map(e=>({id:e.id,icon:e.tabIcon,label:e.tabLabel}))),65536&e.$$.dirty[1]&&r(78,tb=th.map(e=>e.id)),4096&e.$$.dirty[7]&&r(77,tS=dy(["PinturaRoot","PinturaRootComponent",iL])),262144&e.$$.dirty[11]&&r(331,tk=rY&&(rY.width>1e3?"wide":rY.width<600?"narrow":void 0)),262144&e.$$.dirty[11]&&r(318,tC=rY&&(rY.width<=320||rY.height<=460)),262144&e.$$.dirty[11]&&r(330,tM=rY&&(rY.height>1e3?"tall":rY.height<600?"short":void 0)),4&e.$$.dirty[0]&&r(298,tT=aW&&aW.parentNode&&aW.parentNode.classList.contains("PinturaModal")),1&e.$$.dirty[1]|524288&e.$$.dirty[9]|262144&e.$$.dirty[11]&&r(323,tP=tT&&rY&&eF>rY.width),2&e.$$.dirty[1]|524288&e.$$.dirty[9]|262144&e.$$.dirty[11]&&r(322,tR=tT&&rY&&eO>rY.height),12288&e.$$.dirty[10]&&r(324,tE=tP&&tR),1048576&e.$$.dirty[0]&&r(321,tA=aM),2097152&e.$$.dirty[10]&&r(293,tL="narrow"===tk),16&e.$$.dirty[8]|262144&e.$$.dirty[11]&&r(332,tF=sa(rY,an)),4194304&e.$$.dirty[10]&&r(76,tz="landscape"===tF),16384&e.$$.dirty[9]|1048576&e.$$.dirty[10]&&r(320,tO=tL||"short"===tM),1&e.$$.dirty[1]|262144&e.$$.dirty[11]&&r(319,tB=sr&&rY&&eF===rY.width&&!lN),4&e.$$.dirty[1]|512&e.$$.dirty[12]&&r(294,tD=[...ik||[],...l1].filter(Boolean)),32&e.$$.dirty[8]&&r(329,t_="has-navigation-preference-".concat(al)),64&e.$$.dirty[8]&&r(328,tN="has-navigation-preference-".concat(as)),128&e.$$.dirty[8]&&r(325,tW="has-toolbar-preference-".concat(ac)),256&e.$$.dirty[8]&&r(327,tj="has-controlgroups-preference-".concat(ad)),512&e.$$.dirty[8]&&r(326,tV="has-controltabs-preference-".concat(au)),262144&e.$$.dirty[11]&&r(334,tH=void 0!==rY&&rY.width>0&&rY.height>0),4&e.$$.dirty[0]|16777216&e.$$.dirty[10]&&r(333,tU=tH&&aW&&getComputedStyle(aW)),8388608&e.$$.dirty[10]&&tU&&sh(),1024&e.$$.dirty[0]|8437760&e.$$.dirty[1]|270336&e.$$.dirty[7]|524288&e.$$.dirty[9]|8388352&e.$$.dirty[10]|33554432&e.$$.dirty[11]|384&e.$$.dirty[12]&&lW.set(ea(ea({},it),{},{layoutMode:iF,orientation:tF,horizontalSpace:tk,verticalSpace:tM,navigationHorizontalPreference:t_,navigationVerticalPreference:tN,controlGroupsVerticalPreference:tj,controlTabsVerticalpreference:tV,toolbarVerticalPreference:tW,isModal:tT,isDisabled:iW,isCentered:tE,isCenteredHorizontally:tP,isCenteredVertically:tR,isAnimated:ia,isTransparent:tA,pointerAccuracy:iS,pointerHoverable:iw,isCompact:tO,hasSwipeNavigation:tB,hasLimitedSpace:tC,hasToolbar:i8,hasNavigation:tw&&e0,isIOS:sr,browserVersion:cz()?"chrome-".concat((navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]):void 0})),33554432&e.$$.dirty[11]&&r(75,tG=Object.entries(it).map(e=>{var[t,r]=e;return/^is|has/.test(t)?r?pK(t):void 0:r}).filter(Boolean).join(" ")),8192&e.$$.dirty[1]&&tv&&lQ.set([]),96&e.$$.dirty[12]&&r(74,tX=ib&&Object.entries(iy).filter(e=>{var[,t]=e;return null!=t}).reduce((e,t)=>{var[,r]=t;return e=ea(ea({},e),r)},{})),4&e.$$.dirty[12]&&r(315,tK=ip&&"any-to-file"===ip.task),32&e.$$.dirty[10]&&tK&&lK&&lK.clear(),16&e.$$.dirty[12]&&r(317,tZ=!!im&&!!im.translation),16&e.$$.dirty[9]|128&e.$$.dirty[10]|8192&e.$$.dirty[11]&&tZ&&r_&&r_!==eD&&(r(283,eD=r_),sv()),128&e.$$.dirty[10]|16&e.$$.dirty[12]&&tZ&&sg(im),33554432&e.$$.dirty[1]&&ig&&ig.length>1){var R=[];lK.forEach((e,t)=>{0!==t&&e.get().opacity<=0&&R.push(e)}),R.forEach(e=>lK.remove(e))}if(8&e.$$.dirty[0]|64&e.$$.dirty[10]&&r(40,tq=iO&&tY.length&&iO.labelSupportError(tY)),4&e.$$.dirty[12]&&r(307,tJ=ip&&!!ip.error),4&e.$$.dirty[12]&&r(43,t1=!ip||!ip.complete&&void 0===ip.task),4&e.$$.dirty[12]&&r(308,t0=ip&&(ip.taskLengthComputable?ip.taskProgress:1/0)),32&e.$$.dirty[10]&&tK&&oL(lP,iu=!1,iu),8388608&e.$$.dirty[1]|32&e.$$.dirty[9]|4&e.$$.dirty[12]&&ip&&ip.complete){var E=ia?250:0;clearTimeout(e_),r(284,e_=setTimeout(()=>{oL(lP,iu=!0,iu)},E))}if(4096&e.$$.dirty[1]|268435456&e.$$.dirty[9]|5&e.$$.dirty[12]&&r(312,t2=ip&&!tJ&&!t1&&!iu),8&e.$$.dirty[9]|8192&e.$$.dirty[11]|8&e.$$.dirty[12]&&r(311,t4=!!iv&&(!r_||!!eL)),8388608&e.$$.dirty[1]|1&e.$$.dirty[12]&&(iu?setTimeout(()=>su.set(1),ia?500:0):su.set(0)),67108864&e.$$.dirty[11]|2&e.$$.dirty[12]&&r(306,t5=!!(ii||ih&&void 0!==ih.progress&&!ih.complete)),134217728&e.$$.dirty[9]&&t5&&a4(),4096&e.$$.dirty[1]|4&e.$$.dirty[12]&&r(309,t3=ip&&!(ip.error||t1)),8&e.$$.dirty[0]|4&e.$$.dirty[12]&&r(310,t6=iO&&(ip?!ip.complete||ip.error?s9(iO.statusLabelLoadImage(ip),ip.error&&ip.error.metadata,"{","}"):iO.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):iO.statusLabelLoadImage(ip))),8&e.$$.dirty[0]|2&e.$$.dirty[12]&&r(305,t8=ih&&iO&&iO.statusLabelProcessImage(ih)),2&e.$$.dirty[12]&&r(303,t9=ih&&(ih.taskLengthComputable?ih.taskProgress:1/0)),2&e.$$.dirty[12]&&r(304,re=ih&&!ih.error),2&e.$$.dirty[12]&&r(302,rt=!!(ih&&ih.error)),8&e.$$.dirty[0]|4096&e.$$.dirty[1]|1024&e.$$.dirty[7]|2139095040&e.$$.dirty[9]|7&e.$$.dirty[10]&&(ij?(ez(ij)&&(t=ij),iG(ij)?a=ij:Array.isArray(ij)&&([t,a,$]=ij,!1===a&&(f=!0),iG(a)&&(n=!0)),r(35,eN=(t||a)&&{text:t,aside:f||n,progressIndicator:{visible:n,progress:a},closeButton:f&&{label:iO.statusLabelButtonClose,icon:iO.statusIconButtonClose,onclick:$||(()=>r(227,ij=void 0))}})):iO&&t1||tJ||t2||t4?r(35,eN={text:t6,aside:tJ||t3,progressIndicator:{visible:t3,progress:t0},closeButton:tJ&&{label:iO.statusLabelButtonClose,icon:iO.statusIconButtonClose,onclick:sC}}):iO&&t5&&t8?r(35,eN={text:t8,aside:rt||re,progressIndicator:{visible:re,progress:t9},closeButton:rt&&{label:iO.statusLabelButtonClose,icon:iO.statusIconButtonClose,onclick:sM}}):r(35,eN=void 0)),1024&e.$$.dirty[7]&&r(314,rr=void 0!==ij),8388608&e.$$.dirty[1]|524288&e.$$.dirty[9]|2&e.$$.dirty[12]&&tT&&ih&&ih.complete&&(sf.set(!0),setTimeout(()=>sf.set(!1),ia?100:0)),4&e.$$.dirty[0]|8192&e.$$.dirty[1]|1&e.$$.dirty[12]&&iu&&aW&&aW.dispatchEvent(pq("selectutil",tv)),4608&e.$$.dirty[1]|402653184&e.$$.dirty[9]|22&e.$$.dirty[10]|1073741824&e.$$.dirty[11]&&r(313,ri=id||tq||t1||tJ||t2||t4||t5||rr),8&e.$$.dirty[10]&&oL(sm,ic=ri?1:0,ic),8388608&e.$$.dirty[1]|8&e.$$.dirty[10]&&sm.set(ri?1:0,{duration:ia?500:1}),16777216&e.$$.dirty[1]&&r(42,ra=ic>0),16&e.$$.dirty[1]&&r(301,rn=!!(eN&&eN.aside)),8390672&e.$$.dirty[1]|4194368&e.$$.dirty[9]|536870912&e.$$.dirty[11]&&ra&&eN){clearTimeout(eW);var F={hard:!1===ia};if(rn){var z=!!eN.error||!ia;sy.set(1,F),s$.set(is,{hard:z}),r(285,eW=setTimeout(()=>{sx.set(16,F)},1))}else sy.set(0,F),r(285,eW=setTimeout(()=>{sx.set(0,F)},1))}if(2048&e.$$.dirty[1]&&!ra&&(sS.set(void 0,{hard:!0}),s$.set(void 0,{hard:!0}),sx.set(0,{hard:!0})),268435456&e.$$.dirty[11]&&r(300,rs=.5*il),2097152&e.$$.dirty[9]|134217728&e.$$.dirty[11]&&r(73,rd="transform: translateX(".concat(io-rs,"px)")),512&e.$$.dirty[1]|8192&e.$$.dirty[11]&&r(39,rO=r_&&!tq),256&e.$$.dirty[1]|1572864&e.$$.dirty[9]&&r(297,rp=ru&&(rO||tT)?sT:ep),262144&e.$$.dirty[9]&&r(72,rv=rp),262144&e.$$.dirty[9]&&r(71,rm=rp),8&e.$$.dirty[0]|4194304&e.$$.dirty[1]|973078528&e.$$.dirty[7]|1&e.$$.dirty[8]|245760&e.$$.dirty[9]|33554432&e.$$.dirty[11]&&r(70,ry=iO&&ir&&vl(()=>i0([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[i9&&["Button","close",{label:iO.labelClose,icon:iO.iconButtonClose,onclick:()=>iI("close"),hideLabel:!0}],i3&&["Button","revert",{label:iO.labelButtonRevert,icon:iO.iconButtonRevert,disabled:!tl,onclick:lX,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[i6&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:iO.labelButtonUndo,icon:iO.iconButtonUndo,disabled:!tl,onclick:lH.undo,hideLabel:!0}],["Button","redo",{label:iO.labelButtonRedo,icon:iO.iconButtonRedo,disabled:!ts,onclick:lH.redo,hideLabel:!0}]]],tD.length&&["div","plugin-tools",{class:"PinturaNavSet"},tD.filter(Boolean).map(e=>{var[t,r,a]=e;return[t,r,ea({},a)]})]]],["div","gamma",{class:"PinturaNavGroup"},[i4&&["Button","export",{label:iO.labelButtonExport,icon:tL&&iO.iconButtonExport,class:"PinturaButtonExport",onclick:lY,hideLabel:tL}]]]],ea({},it),()=>na.set({})))),2097152&e.$$.dirty[11]&&r(289,rP=r0&&!!r0.length),1024&e.$$.dirty[9]|2113536&e.$$.dirty[11]&&r(288,rA=rP&&ov(rV,r0)),1536&e.$$.dirty[9]|25174016&e.$$.dirty[11]&&rP&&sL(r_,r6,rA,r3),128&e.$$.dirty[9]|6307840&e.$$.dirty[11]&&r0&&sI&&rV){var{width:O,height:j}=rV,q=ie()?"pixelated":"auto"===r5?"auto":"pixelated";r(287,sF=r0.map(e=>{var t=rR(ro(rg(e.x,e.y,e.width,e.height)),e.rotation).map(e=>tf(e.x/O,e.y/j));return ea(ea({},e),{},{id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:sI,backgroundImageRendering:q,backgroundCorners:t})}))}256&e.$$.dirty[9]|1048576&e.$$.dirty[11]&&r(37,rI=[...sF,...r1||[]]),32&e.$$.dirty[1]&&ej&&sz.set(ej),4&e.$$.dirty[0]|256&e.$$.dirty[1]&&rO&&aW.dispatchEvent(pq("ready")),524288&e.$$.dirty[1]&&sY(),245760&e.$$.dirty[11]&&sK(),262144&e.$$.dirty[1]&&sQ(),131072&e.$$.dirty[1]&&s0(),64&e.$$.dirty[1]&&s4()},r(347,e5=!dc()),to=1===uk()?e=>{e&&(tI(e.origin,Math.round),tI(e.translation,Math.round))}:e7,r(316,tY=[!p7()&&"WebGL"].filter(Boolean)),r(299,ru=iM()||eP()&&ao()),r(69,rL=pY(iA.pub)),[aL,aN,aW,iO,iB,iU,iZ,iY,iK,i1,i8,ai,ah,av,ag,am,af,ab,aw,ak,aM,aT,aP,aR,aE,aA,aI,aB,nh,lE,lH,eF,eO,l1,eB,eN,ej,rI,tg,rO,tq,rT,ra,t1,tv,e0,tw,th,rW,rj,rX,rZ,r9,ir,ia,ic,ig,c,p,v,D,e$,ey,st,sZ,sq,sJ,s1,s2,rL,ry,rm,rv,rd,tX,tG,tz,tS,tb,tx,t$,n,j,q,K,J,Q,ee,et,er,ei,en,eo,el,es,ec,ed,eu,eh,ev,eg,em,ef,aV,aH,aU,a9,na,nn,nl,nv,ng,nm,nf,n$,nx,nb,nw,nS,nk,nC,nA,nF,nz,nO,nH,nU,nG,nY,nq,nK,nJ,n0,n2,n4,n5,n3,n6,oe,ot,or,oi,oa,on,oo,ol,os,oc,od,ou,om,of,oy,ox,ob,ow,ok,oM,oP,oR,oE,oA,oI,oF,oz,oO,oD,o_,oN,oW,oX,oZ,oq,oJ,oQ,o1,o2,o4,o5,o8,o7,li,lg,lb,lw,lS,lk,lC,lM,lT,lP,lR,lI,lL,lz,lW,lV,lZ,lK,lQ,l5,ss,sc,sd,su,e=>{var{target:t,propertyName:r}=e;t===aW&&/background|outline/.test(r)&&tU&&sh()},sp,sm,sf,s$,sy,sx,sb,sS,e=>{var t=!!(eN&&eN.closeButton)||!ia;sb.set(e.detail.width,{hard:t}),sS.set(Math.round(-(.5*e.detail.width)),{hard:t})},sP,sR,e=>{var{keyCode:t,metaKey:r,ctrlKey:a,shiftKey:n}=e;if(9===t&&iW){e.preventDefault();return}if(e.target&&32===t&&aW.contains(e.target)&&!uE(e.target)&&(r7&&eG&&a3(),e.preventDefault()),90===t&&(r||a)){n&&r?lH.redo():lH.undo();return}if(89===t&&a){lH.redo();return}if(229!==t){var o=new Set([...r8,t]);sR.set(Array.from(o))}},e=>{var{key:t,keyCode:r}=e;if("Meta"===t)return sR.set([]);sR.set(r8.filter(e=>e!==r))},()=>{sR.set([])},e=>{uE(e.target)||e.preventDefault()},e=>{ae&&sE(e.detail.resources[0])},()=>{ar&&vo().then(sA)},e=>{if(at){var t=l6((window.innerWidth-Math.abs(rY.x))/rY.width,0,1),r=l6((window.innerHeight-Math.abs(rY.y))/rY.height,0,1);t<.75&&r<.75||sE((e.clipboardData||window.clipboardData).files[0])}},sO,sX,e=>{rB&&rC(e.detail,rB)||oL(ow,rB=e.detail,rB)},ij,lA,iL,iF,iz,iD,i_,iN,iW,iV,iH,iX,iq,iJ,iQ,i0,i2,i4,i3,i6,i7,i9,ae,at,ar,an,al,as,ac,ad,au,ap,a$,ay,ax,aS,aC,()=>r(61,e$=void 0),(e,t,a)=>{var{text:n="",placeholder:o="",autoClose:l=!0,align:s="top",justify:c="center",buttonConfirm:d,buttonCancel:u}=a;r(61,e$={align:s,justify:c,text:n,placeholder:o,buttonConfirm:d,buttonCancel:u,onconfirm:()=>{e(ey.value),l&&r(61,e$=void 0)},oncancel:()=>{t(void 0),r(61,e$=void 0)}})},aF,az,aO,a_,a2,a4,a5,a3,a6,a8,a7,ne,nt,nr,no,eT,eL,eD,e_,eW,sI,sF,rA,rP,eG,tu,rx,tL,tD,ts,tl,rp,tT,ru,rs,rn,rt,t9,re,t8,t5,tJ,t0,t3,t6,t4,t2,ri,rr,tK,tY,tZ,tC,tB,tO,tA,tR,tP,tE,tW,tV,tj,tN,t_,tM,tk,tF,tU,tH,tc,td,tn,tt,ta,ti,tr,te,e8,e9,e1,e6,e5,e3,eZ,eJ,eX,eK,eU,r_,rV,rH,rU,rG,rY,rK,r1,r0,r5,r3,r6,it,ii,io,il,is,id,iu,ih,ip,iv,im,iy,ib,iw,iS,ik,iC,iT,iP,o,l,s,d,u,h,g,m,y,x,M,P,A,I,L,B,_,N,W,H,U,G,X,Z,Y,function(){r(31,eF=vx.innerWidth),r(32,eO=vx.innerHeight)},e=>oL(ob,J=e.detail,J),e=>{var{detail:t}=e;return r(44,tv=t)},(e,t)=>t.id===e,function(t,a){e.$$.not_equal(aN[a],t)&&(aN[a]=t,r(1,aN),r(268,aO),r(27,aB))},e=>r(63,st=st.concat(e)),e=>r(63,st=st.filter(t=>t!==e)),(e,t)=>{var{detail:a}=t;return r(38,tg[e]=a,tg)},e=>oL(oy,n=e.detail,n),e=>e.id===tv,function(t){e.$$.not_equal(aN[tv],t)&&(aN[tv]=t,r(1,aN),r(268,aO),r(27,aB))},()=>r(63,st=st.concat(tv)),()=>r(63,st=st.filter(e=>e!==tv)),e=>{var{detail:t}=e;return r(38,tg[tv]=t,tg)},e=>{var t=ea(ea({},e),sO()),{annotationShapes:r,decorationShapes:a,interfaceShapes:n,frameShapes:o,selectionShapes:l}=i1({annotationShapes:rX,decorationShapes:rj,interfaceShapes:es,frameShapes:rW,selectionShapes:D},t);return sX(t,rI,r,a,n,o,l)},()=>{r(64,sZ=!1),r(65,sq=!1),r(66,sJ=!1),r(67,s1=!1),r(68,s2=!1)},function(e){ln[e?"unshift":"push"](()=>{r(36,ej=e)})},function(e){r(0,aL=e),r(258,ap)},function(e){r(33,l1=e)},function(e){r(34,eB=e)},function(e){ln[e?"unshift":"push"](()=>{r(62,ey=e)})},function(e){ln[e?"unshift":"push"](()=>{r(2,aW=e)})},e=>oL(om,r9=e.detail,r9)]}class vZ extends lz{constructor(e){super(),lF(this,e,vX,vV,ow,{class:229,layout:230,stores:231,locale:3,id:4,util:232,utils:233,animations:234,disabled:235,status:227,previewUpscale:236,previewPad:237,previewMaskOpacity:5,previewImageDataMaxSize:238,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:239,elasticityMultiplier:8,willRevert:240,willProcessImage:241,willRenderCanvas:9,willRenderToolbar:242,willSetHistoryInitialState:243,enableButtonExport:244,enableButtonRevert:245,enableNavigateHistory:246,enableToolbar:10,enableUtils:247,enableButtonClose:248,enableDropImage:249,enablePasteImage:250,enableBrowseImage:251,enableTransparencyGrid:11,layoutDirectionPreference:252,layoutHorizontalUtilsPreference:253,layoutVerticalUtilsPreference:254,layoutVerticalToolbarPreference:255,layoutVerticalControlGroupsPreference:256,layoutVerticalControlTabsPreference:257,textDirection:12,markupEditorZoomLevel:258,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:259,muteAudio:260,willSetMediaInitialTimeOffset:261,enablePan:17,enableZoom:18,enableZoomControls:262,enableZoomInput:19,enablePanInput:263,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,hideTextInput:264,showTextInput:265,imagePreviewSrc:266,imageOrienter:267,pluginComponents:268,pluginOptions:27,sub:269,pluginInterface:1,root:2,play:270,pause:271,isPaused:272,togglePlayPause:273,mute:274,unmute:275,toggleMute:276,getDuration:277,getCurrentTime:278,setCurrentTime:279,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:228,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[229]}set class(e){this.$$set({class:e}),lg()}get layout(){return this.$$.ctx[230]}set layout(e){this.$$set({layout:e}),lg()}get stores(){return this.$$.ctx[231]}set stores(e){this.$$set({stores:e}),lg()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),lg()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),lg()}get util(){return this.$$.ctx[232]}set util(e){this.$$set({util:e}),lg()}get utils(){return this.$$.ctx[233]}set utils(e){this.$$set({utils:e}),lg()}get animations(){return this.$$.ctx[234]}set animations(e){this.$$set({animations:e}),lg()}get disabled(){return this.$$.ctx[235]}set disabled(e){this.$$set({disabled:e}),lg()}get status(){return this.$$.ctx[227]}set status(e){this.$$set({status:e}),lg()}get previewUpscale(){return this.$$.ctx[236]}set previewUpscale(e){this.$$set({previewUpscale:e}),lg()}get previewPad(){return this.$$.ctx[237]}set previewPad(e){this.$$set({previewPad:e}),lg()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),lg()}get previewImageDataMaxSize(){return this.$$.ctx[238]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),lg()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),lg()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),lg()}get zoomMaskOpacity(){return this.$$.ctx[239]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),lg()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),lg()}get willRevert(){return this.$$.ctx[240]}set willRevert(e){this.$$set({willRevert:e}),lg()}get willProcessImage(){return this.$$.ctx[241]}set willProcessImage(e){this.$$set({willProcessImage:e}),lg()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),lg()}get willRenderToolbar(){return this.$$.ctx[242]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),lg()}get willSetHistoryInitialState(){return this.$$.ctx[243]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),lg()}get enableButtonExport(){return this.$$.ctx[244]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),lg()}get enableButtonRevert(){return this.$$.ctx[245]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),lg()}get enableNavigateHistory(){return this.$$.ctx[246]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),lg()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),lg()}get enableUtils(){return this.$$.ctx[247]}set enableUtils(e){this.$$set({enableUtils:e}),lg()}get enableButtonClose(){return this.$$.ctx[248]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),lg()}get enableDropImage(){return this.$$.ctx[249]}set enableDropImage(e){this.$$set({enableDropImage:e}),lg()}get enablePasteImage(){return this.$$.ctx[250]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),lg()}get enableBrowseImage(){return this.$$.ctx[251]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),lg()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),lg()}get layoutDirectionPreference(){return this.$$.ctx[252]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),lg()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[253]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),lg()}get layoutVerticalUtilsPreference(){return this.$$.ctx[254]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),lg()}get layoutVerticalToolbarPreference(){return this.$$.ctx[255]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),lg()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[256]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),lg()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[257]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),lg()}get textDirection(){return this.$$.ctx[12]}set textDirection(e){this.$$set({textDirection:e}),lg()}get markupEditorZoomLevel(){return this.$$.ctx[258]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),lg()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),lg()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),lg()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),lg()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),lg()}get markupEditorInteractionMode(){return this.$$.ctx[259]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),lg()}get muteAudio(){return this.$$.ctx[260]}set muteAudio(e){this.$$set({muteAudio:e}),lg()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[261]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),lg()}get enablePan(){return this.$$.ctx[17]}set enablePan(e){this.$$set({enablePan:e}),lg()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(e){this.$$set({enableZoom:e}),lg()}get enableZoomControls(){return this.$$.ctx[262]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),lg()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),lg()}get enablePanInput(){return this.$$.ctx[263]}set enablePanInput(e){this.$$set({enablePanInput:e}),lg()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),lg()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),lg()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),lg()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),lg()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),lg()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),lg()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),lg()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),lg()}get hideTextInput(){return this.$$.ctx[264]}get showTextInput(){return this.$$.ctx[265]}get imagePreviewSrc(){return this.$$.ctx[266]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),lg()}get imageOrienter(){return this.$$.ctx[267]}set imageOrienter(e){this.$$set({imageOrienter:e}),lg()}get pluginComponents(){return this.$$.ctx[268]}set pluginComponents(e){this.$$set({pluginComponents:e}),lg()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(e){this.$$set({pluginOptions:e}),lg()}get sub(){return this.$$.ctx[269]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),lg()}get play(){return this.$$.ctx[270]}get pause(){return this.$$.ctx[271]}get isPaused(){return this.$$.ctx[272]}get togglePlayPause(){return this.$$.ctx[273]}get mute(){return this.$$.ctx[274]}get unmute(){return this.$$.ctx[275]}get toggleMute(){return this.$$.ctx[276]}get getDuration(){return this.$$.ctx[277]}get getCurrentTime(){return this.$$.ctx[278]}get setCurrentTime(){return this.$$.ctx[279]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),lg()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[228]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),lg()}get history(){return this.$$.ctx[30]}}var vY=["klass","stores","isVisible","isActive","isActiveFraction","locale"],vq=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],vK=["locale"],vJ=new Set([]),vQ={},v1=new Map,v0=(e,t)=>{var r={},a=new vZ({target:e,props:{stores:t,pluginComponents:Array.from(v1)}}),n=!1,o=()=>{!n&&(ef()&&window.removeEventListener("pagehide",o),a&&(n=!0,a.$destroy()))};q||(q=new Set(dN(vZ).filter(e=>!vq.includes(e)))),q.forEach(e=>{Object.defineProperty(r,e,{get:()=>a[e],set:vK.includes(e)?t=>{a[e]=ea(ea({},a[e]),t)}:t=>a[e]=t})}),Object.defineProperty(r,"previewImageData",{get:()=>a.imagePreviewCurrent}),vJ.forEach(e=>{var t=vQ[e],n=t[0];Object.defineProperty(r,e,{get:()=>a.pluginInterface[n][e],set:r=>{var n=t.reduce((t,n)=>(t[n]=ea(ea({},a.pluginOptions[n]),{},{[e]:r}),t),{});a.pluginOptions=ea(ea({},a.pluginOptions),n)}})}),Object.defineProperty(r,"element",{get:()=>a.root,set:()=>void 0});var l=a.history;return lK(r,{on:(e,t)=>{if(n)return()=>{};if(/undo|redo|revert|writehistory/.test(e))return l.on(e,t);var r=[a.sub(e,t),a.$on(e,e=>t(e instanceof CustomEvent&&!e.detail?void 0:e))].filter(Boolean);return()=>r.forEach(e=>e())},updateImagePreview:e=>{a.imagePreviewSrc=e},close:()=>!n&&a.pub("close"),destroy:o}),Object.defineProperty(r,"history",{get:()=>({undo:()=>l.undo(),redo:()=>l.redo(),revert:()=>l.revert(),get:()=>l.get(),getCollapsed:()=>l.get().splice(0,l.index+1),set:e=>l.set(e),write:e=>l.write(e),get length(){return l.length()},get index(){return l.index},set index(index){l.index=index}})}),ef()&&window.addEventListener("pagehide",o),r},v2=[...sv,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"],v4=(e,t,r)=>e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,cancelable:!0})),v5=e=>ez(e[0]),v3=e=>!v5(e),v6=e=>e[1],v8=e=>e[3]||[],v7=(e,t)=>{var r=v9(e,t);return d4(r,t=>v6(t)===e),r},v9=(e,t)=>{if(v3(t)){if(t.find(t=>v6(t)===e))return t;var r=t.find(t=>v9(e,v8(t)));return r&&r[3]}return v9(e,v8(t))},ge=[["brightness",e=>e.finetuneLabelBrightness],["contrast",e=>e.finetuneLabelContrast],["saturation",e=>e.finetuneLabelSaturation],["exposure",e=>e.finetuneLabelExposure],["temperature",e=>e.finetuneLabelTemperature],["gamma",e=>e.finetuneLabelGamma],!dc()&&["clarity",e=>e.finetuneLabelClarity],["vignette",e=>e.finetuneLabelVignette]].filter(Boolean),gt=e=>e.charAt(0).toUpperCase()+e.slice(1),gr=null,gi=()=>{if(null===gr){if(ef())try{gr=!1===document.fonts.check("16px TestNonExistingFont")}catch(e){gr=!1}else gr=!1}return gr},ga=(e,t)=>r=>r[t?"".concat(t).concat(gt(e)):e],gn=e=>[e,"".concat(e)],go=(e,t)=>r=>[e[r],ga(r,t)],gl=e=>e.map(gn),gs=e=>Array.isArray(e)&&e.every(iG)?gl(e):e,gc=[1,.2549,.2118],gd="0.5%",gu=[1,1,1,0],gh={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[]}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},gp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(gh[e]){var{position:a="relative",inputMode:n="drag",isSelection:o=!1}=r||{};return[ea(ea({},gh[e]()),t),{position:a,inputMode:n,isSelection:o}]}},gv=(e,t,r)=>[e,t||ga(e,"shapeLabelTool"),ea({icon:ga(e,"shapeIconTool")},r)],gg=()=>({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),gm=()=>({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),gf=()=>({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"}),g$=()=>({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),gy=()=>["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"],gx=()=>[["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]],gb=()=>["left","center","right"],gw=()=>[["normal","bold"],["italic","normal"],["italic","bold"]],gS=e=>Object.keys(e).map(go(e,"shapeTitleColor")),gk=e=>Object.keys(e).map(go(e,"labelSize")),gC=e=>Object.keys(e).map(go(e,"labelSize")),gM=e=>Object.keys(e).map(go(e,"labelSize")),gT=e=>[...e],gP=e=>e.map(e=>[e,t=>t["shapeLabelFontStyle".concat(e.filter(e=>"normal"!==e).map(gt).join(""))]]),gR=e=>e.map(e=>[pK(e),t=>t["shapeTitleLineDecoration".concat(gt(e))],{icon:t=>t["shapeIconLineDecoration".concat(gt(e))]}]),gE=e=>e.map(e=>[e,t=>t["shapeTitleTextAlign".concat(gt(e))],{hideLabel:!0,icon:t=>t["shapeIconTextAlign".concat(gt(e))]}]),gA=(e,t)=>{var{defaultKey:r,defaultValue:a,defaultOptions:n}=t||{},o=[];return r&&(o[0]=[a,e=>e[r],ea({},n)]),[...o,...e]},gI=e=>e.split(",").map(e=>e.trim()).some(e=>document.fonts.check("16px ".concat(e))),gL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return["ToggleSlider",ea({},e)]},gF="PinturaFontTest",gz=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return["ColorPicker",ea({options:gA(e)},t)]},gO=(e,t)=>{var{title:r,optionHideLabel:a=!1,layout:n,optionIcon:o=!1}=t||{},l=gs(e),s=e.map(e=>{var[t]=e;return ez(t)?parseFloat(t):t}),c=Math.min(...s),d=Math.max(...s)-c;return["radio"===n?"RadioGroup":"Dropdown",{title:!1===r?void 0:r||(e=>e.shapeTitleStrokeWidth),options:e=>{var r=t?l.map(e=>{var[t,r,n={}]=e,l=ez(t)?parseFloat(t):t,s=(l-c)/d,u=void 0;return"line"===o?u='<path stroke="currentColor" stroke-linecap="square" stroke-width="'.concat(.1+.875*s,'em" d="M3,12 H20"/>'):"dot"===o?u='<circle fill="currentColor" cx="12" cy="12" r="'.concat(2+8*s,'"/>'):ez(o)?u=o:eO(o)&&(u=o(l,s)),[t,r,ea({icon:u,hideLabel:a},n)]}):l;return iZ(e,"backgroundColor")?gA(r,{defaultKey:"shapeLabelStrokeNone"}):gA(r)},onchange:(e,t)=>{if(e){var r=t.strokeColor||[];if(!r[3]){var a=[...r];a[3]=1,t.strokeColor=a}}}}]},gB=(e,t)=>{var{title:r,layout:a}=t||{};return["radio"===a?"RadioGroup":"Dropdown",{title:r,options:gA(e)}]},gD=(e,t,r)=>["Dropdown",{title:e=>e[t],options:gA(e,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:r}],g_=e=>["ShorthandControl",e],gN=(e,t,r,a)=>(a||e.find(e=>{var[t]=e;return t===r})||(a={defaultKey:"labelAuto",defaultValue:r}),["Dropdown",ea({title:t,options:gA(gs(e),a)},a)]),gW={colorOptions:()=>gS(gg()),lineEndStyleOptions:()=>gR(gy()),fontFamilyOptions:()=>gT(gx()),fontStyleOptions:()=>gP(gw()),textAlignOptions:()=>gE(gb()),strokeWidthOptions:()=>gM(g$()),brushSizeOptions:()=>gM(Object.entries(g$()).reduce((e,t)=>{var[r,a]=t;return e[r]="".concat(2*parseFloat(a),"%"),e},{})),fontSizeOptions:()=>gk(gm()),lineHeightOptions:()=>gC(gf())},gj=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),gV=(e,t)=>ez(t)?"".concat(e,"%"):e,gH=(e,t,r,a)=>ez(a)?"".concat(Math.round(e/r*100),"%"):"".concat(gj.format(e)),gU={getValue:e=>parseFloat(e),setValue:gV,label:gH,step:.05,labelClass:"PinturaPercentageLabel"},gG={defaultColor:{factory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gz(e,ea({title:e=>e.labelColor},t))},items:"colorOptions"},defaultNumber:{factory:gL},defaultPercentage:{factory:gL,options:{getValue:e=>parseFloat(e),setValue:e=>"".concat(e,"%"),step:.05,label:(e,t,r)=>"".concat(Math.round(e/r*100),"%"),labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gz(e,ea({title:e=>e.shapeTitleBackgroundColor},t))}},strokeColor:{items:"colorOptions",factory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gz(e,ea({title:e=>e.shapeTitleStrokeColor,options:gA(e),buttonClass:"PinturaColorPickerButtonStroke",onchange:(e,r)=>{var a=r.strokeWidth;(iG(a)||ez(a)?parseFloat(a):0)>0||(r.strokeWidth=t&&t.defaultStrokeWidth||"0.5%")}},t))}},strokeWidth:{items:"strokeWidthOptions",factory:gO},brushSize:{items:"brushSizeOptions",factory:e=>gO(e,{title:e=>e.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(e,t)=>'<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="'.concat(2+8*t,'"/>')})},drawMode:{factory:e=>{var{hideLabel:t=!0}=e||{};return gB(["new","add","subtract"].map(e=>[e,ga(e,"shapeLabelSelectionMode"),{icon:ga(e,"shapeIconSelectionMode"),hideLabel:t}]),{title:e=>e.shapeTitleSelectionMode,layout:"radio"})}},lineStart:{items:"lineEndStyleOptions",factory:e=>gD(e,"shapeTitleLineStart","transform: scaleX(-1)")},lineEnd:{items:"lineEndStyleOptions",factory:e=>gD(e,"shapeTitleLineEnd")},color:{items:"colorOptions",factory:e=>gz(e,{title:e=>e.shapeTitleTextColor,options:gA(e)})},fontFamily:{items:"fontFamilyOptions",factory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{defaultKey:"labelDefault"};return["Dropdown",{title:e=>e.shapeTitleFontFamily,onload:e=>{var{options:t=[]}=e;gi()&&t.map(e=>{var[t]=e;return t}).filter(Boolean).filter(e=>!gI(e)).forEach(e=>{var t="".concat(gF,"-").concat(e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase());document.getElementById(t)||document.body.append(eb("span",{textContent:" ",id:t,class:gF,style:"font-family:".concat(e,";font-size:0;color:transparent;")}))})},ondestroy:()=>{gi()&&document.querySelectorAll(".PinturaFontTest").forEach(e=>e.remove())},optionLabelStyle:e=>"font-family: ".concat(e),options:gA(e,t),optionFilter:e=>{if(!gi())return!0;var[t]=e;return!t||gI(t)}}]}},fontStyle_fontWeight:{items:"fontStyleOptions",factory:e=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&"font-style:".concat(e[0],";font-weight:").concat(e[1]),options:gA(e,{defaultKey:"shapeLabelFontStyleNormal"})}]},fontSize:{items:"fontSizeOptions",factory:(e,t)=>gN(e,e=>e.shapeTitleFontSize,"4%",t)},lineHeight:{items:"lineHeightOptions",factory:(e,t)=>gN(e,e=>e.shapeTitleLineHeight,"120%",t)},textAlign:{items:"textAlignOptions",factory:e=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:gA(e)}]},textShadowX_textShadowY_textShadowBlur_textShadowColor:{factory:g_,options:{title:"Text shadow",controls:[["ToggleSlider","x",ea(ea({},gU),{},{min:-100,max:100,labelPrefix:"X"})],["ToggleSlider","y",ea(ea({},gU),{},{min:-100,max:100,labelPrefix:"Y"})],["ToggleSlider","blur",ea(ea({},gU),{},{min:0,max:25,labelPrefix:e=>e.shapeTitleTextShadowBlur})],["ColorPicker","color",{enablePresets:!1}]]}},textOutlineWidth_textOutlineColor:{factory:g_,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:e=>parseFloat(e),setValue:gV,label:gH,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:e=>e.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:e=>e.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:e=>e.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:e=>e.labelAmount}}};function gX(e){var t,r,a,n,o,l=e[7].default,s=oM(l,e,e[6],null);return{c(){t=oH("div"),r=oH("div"),s&&s.c(),oq(r,"class","PinturaToolbarInner"),oq(t,"class","PinturaToolbar"),oq(t,"data-layout",e[1]),oq(t,"data-overflow",e[0])},m(l,c){oj(l,t,c),oN(t,r),s&&s.m(r,null),a=!0,n||(o=[oY(r,"measure",e[3]),oF(dr.call(null,r)),oY(t,"measure",e[2]),oF(dr.call(null,t))],n=!0)},p(e,r){var[n]=r;s&&s.p&&(!a||64&n)&&oR(s,l,e,e[6],a?oP(l,e[6],n,null):oE(e[6]),null),(!a||2&n)&&oq(t,"data-layout",e[1]),(!a||1&n)&&oq(t,"data-overflow",e[0])},i(e){a||(lx(s,e),a=!0)},o(e){lb(s,e),a=!1},d(e){e&&oV(t),s&&s.d(e),n=!1,ox(o)}}}function gZ(e,t,r){var a,n,{$$slots:o={},$$scope:l}=t,s=0,c=0,d=0,u=()=>{r(0,n="compact"===a&&s>d?"overflow":void 0)};return e.$$set=e=>{"$$scope"in e&&r(6,l=e.$$scope)},e.$$.update=()=>{48&e.$$.dirty&&r(1,a=c>d?"compact":"default")},[n,a,e=>{var{detail:t}=e,{width:a}=t;r(5,d=a),u()},e=>{var{detail:t}=e,{width:a}=t;a>c&&r(4,c=a),s=a,n||u()},c,d,l,o]}class gY extends lz{constructor(e){super(),lF(this,e,gZ,gX,ow,{})}}function gq(e){var t,r,a,n,o=e[5].default,l=oM(o,e,e[4],null);return{c(){t=oH("div"),l&&l.c(),oq(t,"class",e[0])},m(o,s){oj(o,t,s),l&&l.m(t,null),r=!0,a||(n=[oY(t,"measure",function(){ob(e[1]&&e[3])&&(e[1]&&e[3]).apply(this,arguments)}),oF(e[2].call(null,t))],a=!0)},p(a,n){var[s]=n;e=a,l&&l.p&&(!r||16&s)&&oR(l,o,e,e[4],r?oP(o,e[4],s,null):oE(e[4]),null),(!r||1&s)&&oq(t,"class",e[0])},i(e){r||(lx(l,e),r=!0)},o(e){lb(l,e),r=!1},d(e){e&&oV(t),l&&l.d(e),a=!1,ox(n)}}}function gK(e,t,r){var{$$slots:a={},$$scope:n}=t,o=le(),{class:l=null}=t,s=lr("measurable"),c=!1;return o8(()=>r(1,c=!0)),e.$$set=e=>{"class"in e&&r(0,l=e.class),"$$scope"in e&&r(4,n=e.$$scope)},[l,c,s,e=>{var{detail:t}=e;return o("measure",t)},n,a]}class gJ extends lz{constructor(e){super(),lF(this,e,gK,gq,ow,{class:0})}}var gQ=e=>({}),g1=e=>({}),g0=e=>({}),g2=e=>({}),g4=e=>({}),g5=e=>({});function g3(e){var t,r,a=e[4].header,n=oM(a,e,e[3],g5);return{c(){t=oH("div"),n&&n.c(),oq(t,"class","PinturaUtilHeader")},m(e,a){oj(e,t,a),n&&n.m(t,null),r=!0},p(e,t){n&&n.p&&(!r||8&t)&&oR(n,a,e,e[3],r?oP(a,e[3],t,g4):oE(e[3]),g5)},i(e){r||(lx(n,e),r=!0)},o(e){lb(n,e),r=!1},d(e){e&&oV(t),n&&n.d(e)}}}function g6(e){var t,r,a=e[4].footer,n=oM(a,e,e[3],g1);return{c(){t=oH("div"),n&&n.c(),oq(t,"class","PinturaUtilFooter")},m(e,a){oj(e,t,a),n&&n.m(t,null),r=!0},p(e,t){n&&n.p&&(!r||8&t)&&oR(n,a,e,e[3],r?oP(a,e[3],t,gQ):oE(e[3]),g1)},i(e){r||(lx(n,e),r=!0)},o(e){lb(n,e),r=!1},d(e){e&&oV(t),n&&n.d(e)}}}function g8(e){var t,r,a,n,o,l,s,c,d=e[1]&&g3(e),u=e[4].main,h=oM(u,e,e[3],g2),p=h||((t=new gJ({props:{class:"PinturaStage"}})).$on("measure",e[5]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p:og,i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}),v=e[2]&&g6(e);return{c(){d&&d.c(),a=oX(),n=oH("div"),p&&p.c(),o=oX(),v&&v.c(),l=oX(),s=oZ(),oq(n,"class","PinturaUtilMain")},m(t,r){d&&d.m(t,r),oj(t,a,r),oj(t,n,r),p&&p.m(n,null),e[6](n),oj(t,o,r),v&&v.m(t,r),oj(t,l,r),oj(t,s,r),c=!0},p(e,t){var[r]=t;e[1]?d?(d.p(e,r),2&r&&lx(d,1)):((d=g3(e)).c(),lx(d,1),d.m(a.parentNode,a)):d&&(l$(),lb(d,1,1,()=>{d=null}),ly()),h&&h.p&&(!c||8&r)&&oR(h,u,e,e[3],c?oP(u,e[3],r,g0):oE(e[3]),g2),e[2]?v?(v.p(e,r),4&r&&lx(v,1)):((v=g6(e)).c(),lx(v,1),v.m(l.parentNode,l)):v&&(l$(),lb(v,1,1,()=>{v=null}),ly())},i(e){c||(lx(d),lx(p,e),lx(v),lx(!1),c=!0)},o(e){lb(d),lb(p,e),lb(v),lb(!1),c=!1},d(t){d&&d.d(t),t&&oV(a),t&&oV(n),p&&p.d(t),e[6](null),t&&oV(o),v&&v.d(t),t&&oV(l),t&&oV(s)}}}function g7(e,t,r){var{$$slots:a={},$$scope:n}=t,{hasHeader:o=!!t.$$slots.header}=t,{hasFooter:l=!!t.$$slots.footer}=t,{root:s}=t;return e.$$set=e=>{r(7,t=of(of({},t),oA(e))),"hasHeader"in e&&r(1,o=e.hasHeader),"hasFooter"in e&&r(2,l=e.hasFooter),"root"in e&&r(0,s=e.root),"$$scope"in e&&r(3,n=e.$$scope)},t=oA(t),[s,o,l,n,a,function(t){li.call(this,e,t)},function(e){ln[e?"unshift":"push"](()=>{r(0,s=e)})}]}class g9 extends lz{constructor(e){super(),lF(this,e,g7,g8,ow,{hasHeader:1,hasFooter:2,root:0})}}function me(e){var t,r;return{c(){oq(t=oH("div"),"class","PinturaRangeInputMeter"),oq(t,"style",r="transform: translateX(".concat(e[9].x-e[11].x,"px) translateY(").concat(e[9].y-e[11].y,"px)"))},m(r,a){oj(r,t,a),t.innerHTML=e[7]},p(e,a){128&a[0]&&(t.innerHTML=e[7]),512&a[0]&&r!==(r="transform: translateX(".concat(e[9].x-e[11].x,"px) translateY(").concat(e[9].y-e[11].y,"px)"))&&oq(t,"style",r)},d(e){e&&oV(t)}}}function mt(e){var t,r,a,n,o,l,s,c,d,u,h,p=e[9]&&me(e);return{c(){t=oH("div"),r=oH("span"),a=oX(),n=oH("button"),o=oG(e[1]),s=oX(),c=oH("div"),p&&p.c(),oq(r,"class","PinturaRangeInputValue"),oq(n,"class","PinturaRangeInputReset"),oq(n,"type","button"),n.disabled=l=e[0]===e[2],oq(c,"class","PinturaRangeInputInner"),oq(c,"style",e[8]),oq(c,"data-value-limited",e[5]),oq(t,"class","PinturaRangeInput"),oq(t,"tabindex","0")},m(l,v){oj(l,t,v),oN(t,r),r.innerHTML=e[3],oN(t,a),oN(t,n),oN(n,o),oN(t,s),oN(t,c),p&&p.m(c,null),u||(h=[oY(n,"click",e[16]),oY(c,"interactionstart",e[12]),oY(c,"interactionupdate",e[14]),oY(c,"interactionend",e[15]),oY(c,"interactionrelease",e[13]),oF(d=d3.call(null,c,{inertia:e[6]})),oY(c,"measure",e[36]),oF(dr.call(null,c)),oY(t,"wheel",e[18],{passive:!1}),oY(t,"nudge",e[19]),oF(d6.call(null,t,{direction:"horizontal",preventDefault:!0}))],u=!0)},p(e,t){8&t[0]&&(r.innerHTML=e[3]),2&t[0]&&oQ(o,e[1]),5&t[0]&&l!==(l=e[0]===e[2])&&(n.disabled=l),e[9]?p?p.p(e,t):((p=me(e)).c(),p.m(c,null)):p&&(p.d(1),p=null),256&t[0]&&oq(c,"style",e[8]),32&t[0]&&oq(c,"data-value-limited",e[5]),d&&ob(d.update)&&64&t[0]&&d.update.call(null,{inertia:e[6]})},i:og,o:og,d(e){e&&oV(t),p&&p.d(),u=!1,ox(h)}}}function mr(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,{labelReset:f="Reset"}=t,{direction:$="x"}=t,{min:y=0}=t,{max:x=1}=t,{base:b=y}=t,{value:w=0}=t,{valueLabel:S=0}=t,{valueMin:k}=t,{valueMax:C}=t,{oninputstart:M=ep}=t,{oninputmove:T=ep}=t,{oninputend:P=ep}=t,{elasticity:R=0}=t,{nudgeMultiplier:E}=t,{step:A=8}=t,I=lr("isAnimated");oC(e,I,e=>r(6,u=e));var L=(e,t,r)=>Math.ceil((e-r)/t)*t+r,F={x:2,y:0},z=(e,t,r)=>"M ".concat(e-r," ").concat(t," a ").concat(r," ").concat(r," 0 1 0 0 -1"),O=void 0,B=!1,D={snap:!1,elastic:!1},_=(e,t,r)=>{var a=e[$]+t[$],n=l6(a,m[1][$],m[0][$]),o=R?n+d8(a-n,R):n,l=r.elastic?o:n,s=tf(0,0);return s[$]=l,N.set(s,{hard:r.snap}),l6(j(s,$),y,x)},N=cJ();oC(e,N,e=>r(9,h=e));var W=(e,t)=>{var r=(p[t]-l[t])*.5-(hH(e,y,x)*l[t]-.5*l[t]);return{x:"x"===t?r:0,y:"y"===t?r:0}},j=(e,t)=>{var r=-((e[t]-.5*p[t])/l[t]);return y+r*a},V=N.subscribe(e=>{e&&O&&T(l6(j(e,$),y,x))}),H=e=>{var t=[W(null!=k?k:y,$),W(null!=C?C:x,$)],r=l6({x:"x"===$?h.x+e:0,y:"y"===$?h.y+e:0}[$],t[1][$],t[0][$]),a=ea(ea({},h),{},{[$]:r});oL(N,h=a,h);var n=l6(j(a,$),y,x);M(),T(n),P(n)};return o9(()=>{V()}),e.$$set=e=>{"labelReset"in e&&r(1,f=e.labelReset),"direction"in e&&r(20,$=e.direction),"min"in e&&r(21,y=e.min),"max"in e&&r(22,x=e.max),"base"in e&&r(2,b=e.base),"value"in e&&r(0,w=e.value),"valueLabel"in e&&r(3,S=e.valueLabel),"valueMin"in e&&r(23,k=e.valueMin),"valueMax"in e&&r(24,C=e.valueMax),"oninputstart"in e&&r(25,M=e.oninputstart),"oninputmove"in e&&r(26,T=e.oninputmove),"oninputend"in e&&r(27,P=e.oninputend),"elasticity"in e&&r(28,R=e.elasticity),"nudgeMultiplier"in e&&r(29,E=e.nudgeMultiplier),"step"in e&&r(30,A=e.step)},e.$$.update=()=>{if(6291456&e.$$.dirty[0]&&r(32,a=x-y),10485760&e.$$.dirty[0]&&r(34,n=null!=k?Math.max(k,y):y),20971520&e.$$.dirty[0]&&r(33,o=null!=C?Math.min(C,x):x),6291460&e.$$.dirty[0]&&r(35,s=hH(b,y,x)),16&e.$$.dirty[0]|16&e.$$.dirty[1]&&p){for(var t,h,m,f,S,M,T,P=.5*p.y,R=40*s,E="",A=p.y,I="",O=0;O<=40;O++){var B=F.x+10*O;E+=z(B,P,O%5==0?2:.75)+" ",T=B+F.x,O===R&&(I='<path d="M'.concat(B," ").concat(P-4,' l2 3 l-2 -1 l-2 1 z"/>'))}r(7,v='<svg width="'.concat(T,'" height="').concat(A,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ').concat(T," ").concat(A,'" aria-hidden="true" focusable="false">\n        ').concat(I,'\n        <rect rx="4" ry="4" y="').concat(P-4,'"" height="8"/>\n        <path fill-rule="evenodd" d="').concat(E.trim(),'"/></svg>')),r(31,g={x:T-2*F.x,y:A})}16&e.$$.dirty[0]|1&e.$$.dirty[1]&&(l=p&&g),6291456&e.$$.dirty[0]|12&e.$$.dirty[1]&&r(5,c=n!==y||o!==x),32&e.$$.dirty[0]|12&e.$$.dirty[1]&&r(8,d=c?(t=n,h=o,m=hH(t,y,x),f=hH(h,y,x),S=tp(L(m,.025,0)-.0125),M=tp(L(f,.025,0)-.0125),"--range-mask-from:".concat(100*S,"%;--range-mask-to:").concat(100*M,"%")):""),1048657&e.$$.dirty[0]|2&e.$$.dirty[1]&&a&&p&&p.x&&p.y&&N.set(W(w,$),{hard:!1===u})},[w,f,b,S,p,c,u,v,d,h,I,F,()=>{B=!1,O=ok(N),m=[W(null!=k?k:y,$),W(null!=C?C:x,$)],M()},()=>{B=!0},e=>{var{detail:t}=e;D.snap=!B,D.elastic=!B,_(O,t.translation,D)},e=>{var{detail:t}=e;D.snap=!1,D.elastic=!1;var r=_(O,t.translation,D);if(O=void 0,m=void 0,.01>Math.abs(r-b))return P(b);P(r)},()=>{r(0,w=l6(b,n,o)),M(),P(w)},N,e=>{e.preventDefault(),e.stopPropagation(),H(ut(e)*A)},e=>{var{detail:t}=e;H(t[$]*Math.abs(E||8))},$,y,x,k,C,M,T,P,R,E,A,g,a,o,n,s,e=>r(4,p=t$(e.detail))]}class mi extends lz{constructor(e){super(),lF(this,e,mr,mt,ow,{labelReset:1,direction:20,min:21,max:22,base:2,value:0,valueLabel:3,valueMin:23,valueMax:24,oninputstart:25,oninputmove:26,oninputend:27,elasticity:28,nudgeMultiplier:29,step:30},null,[-1,-1])}}var ma={[ta]:e=>({x:e.x,y:e.y}),[tc]:e=>({x:e.x+e.width,y:e.y}),[tn]:e=>({x:e.x+e.width,y:e.y}),[td]:e=>({x:e.x+e.width,y:e.y+e.height}),[to]:e=>({x:e.x,y:e.y+e.height}),[tu]:e=>({x:e.x,y:e.y+e.height}),[tl]:e=>({x:e.x,y:e.y}),[ts]:e=>({x:e.x,y:e.y})};function mn(e,t,r){var a=e.slice();return a[14]=t[r].key,a[15]=t[r].translate,a[16]=t[r].scale,a[17]=t[r].type,a[18]=t[r].opacity,a}function mo(e,t){var r,a,n,o,l,s,c,d;return{key:e,first:null,c(){oq(r=oH("div"),"role","button"),oq(r,"aria-label",a="Drag ".concat(t[17]," ").concat(t[14])),oq(r,"tabindex",n="edge"===t[17]?-1:0),oq(r,"class","PinturaRectManipulator"),oq(r,"data-direction",o=t[14]),oq(r,"data-shape",l="".concat("edge"===t[17]?"edge":"".concat(t[0]))),oq(r,"style",s="--tx:".concat(t[15].x,";--ty:").concat(t[15].y,";--sx:").concat(t[16].x,";--sy:").concat(t[16].y,";opacity:").concat(t[18])),this.first=r},m(e,a){oj(e,r,a),c||(d=[oY(r,"nudge",function(){ob(t[6](t[14]))&&t[6](t[14]).apply(this,arguments)}),oF(d6.call(null,r,{preventDefault:!0})),oY(r,"interactionstart",function(){ob(t[5]("resizestart",t[14]))&&t[5]("resizestart",t[14]).apply(this,arguments)}),oY(r,"interactionupdate",function(){ob(t[5]("resizemove",t[14]))&&t[5]("resizemove",t[14]).apply(this,arguments)}),oY(r,"interactionend",function(){ob(t[5]("resizeend",t[14]))&&t[5]("resizeend",t[14]).apply(this,arguments)}),oF(d3.call(null,r))],c=!0)},p(e,c){t=e,2&c&&a!==(a="Drag ".concat(t[17]," ").concat(t[14]))&&oq(r,"aria-label",a),2&c&&n!==(n="edge"===t[17]?-1:0)&&oq(r,"tabindex",n),2&c&&o!==(o=t[14])&&oq(r,"data-direction",o),3&c&&l!==(l="".concat("edge"===t[17]?"edge":"".concat(t[0])))&&oq(r,"data-shape",l),2&c&&s!==(s="--tx:".concat(t[15].x,";--ty:").concat(t[15].y,";--sx:").concat(t[16].x,";--sy:").concat(t[16].y,";opacity:").concat(t[18]))&&oq(r,"style",s)},d(e){e&&oV(r),c=!1,ox(d)}}}function ml(e){for(var t,r=[],a=new Map,n=e[1],o=e=>e[14],l=0;l<n.length;l+=1){var s=mn(e,n,l),c=o(s);a.set(c,r[l]=mo(c,s))}return{c(){for(var e=0;e<r.length;e+=1)r[e].c();t=oZ()},m(e,a){for(var n=0;n<r.length;n+=1)r[n].m(e,a);oj(e,t,a)},p(e,l){var[s]=l;99&s&&(n=e[1],r=lT(r,s,o,1,e,n,a,t.parentNode,lC,mo,t,mn))},i:og,o:og,d(e){for(var a=0;a<r.length;a+=1)r[a].d(e);e&&oV(t)}}}function ms(e,t,r){var a,n,o,l,s,{rect:c=null}=t,{visible:d=!1}=t,{style:u}=t,h=lr("isAnimated");oC(e,h,e=>r(11,l=e));var p=cJ(void 0,{precision:1e-4,stiffness:.2,damping:.4});oC(e,p,e=>r(10,o=e));var v=cJ(0,{precision:.001});oC(e,v,e=>r(9,n=e));var g=le();return e.$$set=e=>{"rect"in e&&r(7,c=e.rect),"visible"in e&&r(8,d=e.visible),"style"in e&&r(0,u=e.style)},e.$$.update=()=>{2304&e.$$.dirty&&p.set(d?1:.5,{hard:!1===l}),2304&e.$$.dirty&&v.set(d?1:0,{hard:!1===l}),1664&e.$$.dirty&&r(1,a=Object.keys(ti).map((e,t)=>{var r=ti[e],a=ma[r](c),l=1===r.length?"edge":"corner",s="corner"===l;return{key:r,type:l,scale:{x:/^(t|b)$/.test(r)?c.width:s?l6(o,.5,1.25):1,y:/^(r|l)$/.test(r)?c.height:s?l6(o,.5,1.25):1},translate:{x:a.x,y:a.y},opacity:n}}))},[u,a,h,p,v,(e,t)=>r=>{var{detail:a}=r;s&&t!==s||"resizestart"!==e&&void 0===s||("resizestart"===e&&(s=t),"resizeend"===e&&(s=void 0),g(e,{direction:t,translation:a&&a.translation}))},e=>t=>{var{detail:r}=t;g("resizestart",{direction:e,translation:{x:0,y:0}}),g("resizemove",{direction:e,translation:r}),g("resizeend",{direction:e,translation:{x:0,y:0}})},c,d,n,o,l]}class mc extends lz{constructor(e){super(),lF(this,e,ms,ml,ow,{rect:7,visible:8,style:0})}}var md=e=>{function t(t,r){e.dispatchEvent(new CustomEvent(t,{detail:r}))}var r=r=>{r.preventDefault(),e.addEventListener("gesturechange",a),e.addEventListener("gestureend",n),t("gesturedown")},a=e=>{e.preventDefault(),t("gestureupdate",e.scale)},n=e=>{t("gestureup",e.scale),e.preventDefault(),o()},o=()=>{e.removeEventListener("gesturechange",a),e.removeEventListener("gestureend",n)};return e.addEventListener("gesturestart",r),{destroy:()=>{o(),e.removeEventListener("gesturestart",r)}}},mu={[ta]:to,[tn]:tl,[to]:ta,[tl]:tn,[ts]:td,[tc]:tu,[td]:ts,[tu]:tc},mh=e=>{var t=e===tl||e===tn,r=e===ta||e===to;return[e===tn||e===tc||e===td,e===tl||e===tu||e===ts,e===ta||e===tc||e===ts,e===to||e===td||e===tu,t,r,t||r]},mp=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{target:n,translate:o}=t,{aspectRatio:l,minSize:s,maxSize:c}=a,d=th[mu[n]],u=tF(tf(e.x,e.y),tf(d[0]*e.width,d[1]*e.height)),h=th[n],p=tF(ro(e),tf(h[0]*e.width,h[1]*e.height)),[v,g,m,f,$,y,x]=mh(n),b=o.x,w=o.y;$?w=0:y&&(b=0);var{inner:S,outer:k}=mv(u,n,r,{aspectRatio:l,minSize:s,maxSize:c}),[C,M,T,P]=rO(e);if(v?P=u.x:g&&(M=u.x),f?C=u.y:m&&(T=u.y),v){var R=S.x+S.width,E=k.x+k.width;M=l6(p.x+b,R,E)}else if(g){var A=k.x,I=S.x;P=l6(p.x+b,A,I)}if(f){var L=S.y+S.height,F=k.y+k.height;T=l6(p.y+w,L,F)}else if(m){var z=k.y,O=S.y;C=l6(p.y+w,z,O)}if(P>S.x&&(P=S.x),M<S.x+S.width&&(M=S.x+S.width),C>S.y&&(C=S.y),T<S.y+S.height&&(T=S.y+S.height),P<k.x){var B=k.x-P;P=k.x,M+=B}if(M>k.x+k.width){var D=M-(k.x+k.width);M=k.x+k.width,P-=D}if(C<k.y){var _=k.y-C;C=k.y,T+=_}if(T>k.y+k.height){var N=T-(k.y+k.height);T=k.y+k.height,C-=N}if(l){if(x){var W=M-P,j=T-C;$?(j=W/l,C=u.y-.5*j,T=u.y+.5*j):y&&(W=j*l,P=u.x-.5*W,M=u.x+.5*W)}else{var V=tf(p.x+b-u.x,p.y+w-u.y);n===tc?(V.x=Math.max(0,V.x),V.y=Math.min(0,V.y)):n===td?(V.x=Math.max(0,V.x),V.y=Math.max(0,V.y)):n===tu?(V.x=Math.min(0,V.x),V.y=Math.max(0,V.y)):n===ts&&(V.x=Math.min(0,V.x),V.y=Math.min(0,V.y));var H=l6(tT(V),tT(tf(S.width,S.height)),tT(tf(k.width,k.height))),U=tB(tP(tf(l,1)),H);n===tc?(M=u.x+U.x,C=u.y-U.y):n===td?(M=u.x+U.x,T=u.y+U.y):n===tu?(P=u.x-U.x,T=u.y+U.y):n===ts&&(P=u.x-U.x,C=u.y-U.y)}}return rg(P,C,M-P,T-C)},mv=(e,t,r,a)=>{var n,o,l,s,{aspectRatio:c,minSize:d,maxSize:u}=a,h=t===tn||t===tc||t===td,p=t===tl||t===tu||t===ts,v=t===ta||t===tc||t===ts,g=t===to||t===td||t===tu,m=t===tl||t===tn,f=t===ta||t===to,$=ro(r);h?($.x=e.x,$.width-=e.x):p&&($.width=e.x),g?($.y=e.y,$.height-=e.y):v&&($.height=e.y);var y=rs(Math.min($.width,u.width),Math.min($.height,u.height));if(c){if(m){var x=Math.min(e.y,r.height-e.y);y.height=Math.min(2*x,y.height)}else if(f){var b=Math.min(e.x,r.width-e.x);y.width=Math.min(2*b,y.width)}}var w=c?tY(rI(rc(d),c)):d,S=c?tY(rz(y,c)):y;h?n=e.x:p&&(o=e.x),g?l=e.y:v&&(s=e.y),h?o=n+w.width:p&&(n=o-w.width),g?s=l+w.height:v&&(l=s-w.height),m?(l=e.y-.5*w.height,s=e.y+.5*w.height):f&&(n=e.x-.5*w.width,o=e.x+.5*w.width);var k=rh([tf(n,l),tf(o,s)]);return h?o=n+S.width:p&&(n=o-S.width),g?s=l+S.height:v&&(l=s-S.height),m?(l=e.y-.5*S.height,s=e.y+.5*S.height):f&&(n=e.x-.5*S.width,o=e.x+.5*S.width),n=Math.max(r.x,n),o=Math.min(r.x+r.width,o),l=Math.max(r.y,l),s=Math.min(r.y+r.height,s),{inner:k,outer:rh([tf(n,l),tf(o,s)])}},mg=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{target:a,translate:n}=t,{aspectRatio:o,minSize:l}=r,s=th[mu[a]],c=tF(ro(e),tf(s[0]*e.width,s[1]*e.height)),d=th[a],u=tF(ro(e),tf(d[0]*e.width,d[1]*e.height)),[h,p,v,g,m,f,$]=mh(a),y=n.x,x=n.y;m?x=0:f&&(y=0);var[b,w,S,k]=rO(e);if(h?k=c.x:p&&(w=c.x),g?b=c.y:v&&(S=c.y),h?w=u.x+y:p&&(k=u.x+y),g?S=u.y+x:v&&(b=u.y+x),l&&m&&S-b<l.height){var C=l.height-(S-b);b-=.5*C,S+=.5*C}if(l&&f&&w-k<l.width){var M=l.width-(w-k);k-=.5*M,w+=.5*M}if(o){if($){var T=w-k,P=S-b;m?(P=T/o,b=c.y-.5*P,S=c.y+.5*P):f&&(T=P*o,k=c.x-.5*T,w=c.x+.5*T)}else{var R=tf(u.x+y-c.x,u.y+x-c.y);a===tc?(R.x=Math.max(0,R.x),R.y=Math.min(0,R.y)):a===td?(R.x=Math.max(0,R.x),R.y=Math.max(0,R.y)):a===tu?(R.x=Math.min(0,R.x),R.y=Math.max(0,R.y)):a===ts&&(R.x=Math.min(0,R.x),R.y=Math.min(0,R.y));var E=tT(R),A=tB(tP(tf(o,1)),E);a===tc?(w=c.x+A.x,b=c.y-A.y):a===td?(w=c.x+A.x,S=c.y+A.y):a===tu?(k=c.x-A.x,S=c.y+A.y):a===ts&&(k=c.x-A.x,b=c.y-A.y)}}return rg(k,b,w-k,S-b)},mm=e=>180*e/Math.PI;function mf(e){var t,r,a;return r=new mi({props:{elasticity:e[5],min:e[9],max:e[10],value:e[11],valueMin:Math.max(e[9],e[0]),valueMax:Math.min(e[10],e[1]),labelReset:e[6],base:e[12],valueLabel:"".concat(Math.round(mm(e[11])),"&deg;"),oninputstart:e[2],oninputmove:e[17],oninputend:e[18]}}),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"class","PinturaImageRotator")},m(e,n){oj(e,t,n),lI(r,t,null),a=!0},p(e,t){var[a]=t,n={};32&a&&(n.elasticity=e[5]),512&a&&(n.min=e[9]),1024&a&&(n.max=e[10]),2048&a&&(n.value=e[11]),513&a&&(n.valueMin=Math.max(e[9],e[0])),1026&a&&(n.valueMax=Math.min(e[10],e[1])),64&a&&(n.labelReset=e[6]),4096&a&&(n.base=e[12]),2048&a&&(n.valueLabel="".concat(Math.round(mm(e[11])),"&deg;")),4&a&&(n.oninputstart=e[2]),392&a&&(n.oninputmove=e[17]),400&a&&(n.oninputend=e[18]),r.$set(n)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r)}}}function m$(e,t,r){var a,n,o,l,s,c,d,{rotation:u}=t,{valueMin:h}=t,{valueMax:p}=t,{oninputstart:v=ep}=t,{oninputmove:g=ep}=t,{oninputend:m=ep}=t,{elasticity:f=0}=t,{labelReset:$}=t,{rotationMin:y}=t,{rotationMax:x}=t;return e.$$set=e=>{"rotation"in e&&r(13,u=e.rotation),"valueMin"in e&&r(0,h=e.valueMin),"valueMax"in e&&r(1,p=e.valueMax),"oninputstart"in e&&r(2,v=e.oninputstart),"oninputmove"in e&&r(3,g=e.oninputmove),"oninputend"in e&&r(4,m=e.oninputend),"elasticity"in e&&r(5,f=e.elasticity),"labelReset"in e&&r(6,$=e.labelReset),"rotationMin"in e&&r(14,y=e.rotationMin),"rotationMax"in e&&r(15,x=e.rotationMax)},e.$$.update=()=>{16384&e.$$.dirty&&r(9,a=y+1e-9),32768&e.$$.dirty&&r(10,n=x-1e-9),1536&e.$$.dirty&&r(12,o=a+(n-a)*.5),32768&e.$$.dirty&&r(16,l=2*x),8192&e.$$.dirty&&r(8,s=Math.sign(u)),73728&e.$$.dirty&&r(7,c=Math.round(Math.abs(u)/l)*l),8576&e.$$.dirty&&r(11,d=u-s*c)},[h,p,v,g,m,f,$,c,s,a,n,d,o,u,y,x,l,e=>g(s*c+e),e=>m(s*c+e)]}class my extends lz{constructor(e){super(),lF(this,e,m$,mf,ow,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function mx(e){var t,r,a,n,o;return{c(){t=oH("div"),r=oH("p"),a=oG(e[0]),n=oG(" \xd7 "),o=oG(e[1]),oq(t,"class","PinturaImageInfo")},m(e,l){oj(e,t,l),oN(t,r),oN(r,a),oN(r,n),oN(r,o)},p(e,t){var[r]=t;1&r&&oQ(a,e[0]),2&r&&oQ(o,e[1])},i:og,o:og,d(e){e&&oV(t)}}}function mb(e,t,r){var{width:a}=t,{height:n}=t;return e.$$set=e=>{"width"in e&&r(0,a=e.width),"height"in e&&r(1,n=e.height)},[a,n]}class mw extends lz{constructor(e){super(),lF(this,e,mb,mx,ow,{width:0,height:1})}}var mS=function(e){var t,r,a,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{width:l=24,height:s=24,bounds:c=16,radius:d=3}=o,u=iY(e)?e8(e[0],e[1]):e,h=!!u;n=(a=(u=h?u:1)>1?c:u*c)/u,t=Math.round((l-a)*.5),r=Math.round((s-n)*.5);var p=[l/12,l/6].join(" ");return'<rect fill="'.concat(h?"currentColor":"none",'" stroke="').concat(h?"none":"currentColor",'" stroke-width="').concat(l/16,'" stroke-dasharray="').concat(p,'" x="').concat(t,'" y="').concat(r,'" width="').concat(a,'" height="').concat(n,'" rx="').concat(d,'"/>')};function mk(e){var t,r;return t=new hg({props:{class:"PinturaPresetListFilter",layout:"row",options:e[8],selectedIndex:e[7],onchange:e[10]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};256&r&&(a.options=e[8]),128&r&&(a.selectedIndex=e[7]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function mC(e){var t,r;return t=new hD({props:{icon:e[0],label:e[1],labelClass:e[2],hideLabel:e[3],options:e[9],selectedIndex:e[4],onchange:e[5],optionMapper:e[6],$$slots:{controls:[mk]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var[a]=r,n={};1&a&&(n.icon=e[0]),2&a&&(n.label=e[1]),4&a&&(n.labelClass=e[2]),8&a&&(n.hideLabel=e[3]),512&a&&(n.options=e[9]),16&a&&(n.selectedIndex=e[4]),32&a&&(n.onchange=e[5]),64&a&&(n.optionMapper=e[6]),262528&a&&(n.$$scope={dirty:a,ctx:e}),t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}var mM='fill="none" stroke="currentColor"';function mT(e,t,r){var a,n,o,{icon:l}=t,{label:s}=t,{labelClass:c}=t,{hideLabel:d}=t,{options:u}=t,{selectedIndex:h}=t,{onchange:p}=t,{optionMapper:v}=t,{filter:g="landscape"}=t,{onfilterchange:m=ep}=t,f=(e,t,r,a,n)=>"\n    <rect ".concat(mM,' x="').concat(e,'" y="').concat(t,'" width="').concat(r,'" height="').concat(a,'" rx="').concat(n,'"/>'),$=(e,t)=>"<path ".concat(mM,' d="M').concat(e," ").concat(t,' l2 2 l3 -4"/>'),y=(e,t)=>(e||[]).map(e=>ez(e[0])?(e[1]=e[1].map(t),e):t(e)),x=e=>t=>{var[r,a,n={}]=t;return iG(r)&&(n.hidden="landscape"===e?r<1:r>1),[r,a,n]};return e.$$set=e=>{"icon"in e&&r(0,l=e.icon),"label"in e&&r(1,s=e.label),"labelClass"in e&&r(2,c=e.labelClass),"hideLabel"in e&&r(3,d=e.hideLabel),"options"in e&&r(12,u=e.options),"selectedIndex"in e&&r(4,h=e.selectedIndex),"onchange"in e&&r(5,p=e.onchange),"optionMapper"in e&&r(6,v=e.optionMapper),"filter"in e&&r(11,g=e.filter),"onfilterchange"in e&&r(13,m=e.onfilterchange)},e.$$.update=()=>{6144&e.$$.dirty&&r(9,a=y(u,x(g))),2048&e.$$.dirty&&r(7,n="landscape"===g?0:1),128&e.$$.dirty&&r(8,o=[["landscape","Landscape",{hideLabel:!0,icon:f(2,6,19,12,2)+(0===n?$(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:f(5,3,13,18,2)+(1===n?$(9,12):"")}]])},[l,s,c,d,h,p,v,n,o,a,e=>{r(11,g=e.value),m(e.value)},g,u,m]}class mP extends lz{constructor(e){super(),lF(this,e,mT,mC,ow,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}var mR=e=>tI(e,e=>tp(e,6)),mE=e=>rD(e,e=>tp(e,6)),mA=e=>e.map(mR),mI=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(e-t)<r},mL=function(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},{aspectRatio:o}=n;e=mE(e),a=mA(a);var l=rx(e,mu[r.target]),s=tI(l,e=>tp(e,6)),c=o?rI(n.minSize,o):n.minSize,d=o?rz(n.maxSize,o):n.maxSize;1>tW(rx(t,r.target),l)&&r$(t=ro(e),Math.min(c.width/e.width,c.height/e.height),l),t=ry(ro(t),c,d,l);var u=ro(t);t=mE(t);var h=rZ(a,1),p=rB(e),v=rB(t),g=p.findIndex(e=>tA(tI(e,e=>tp(e,6)),s)),m=e=>h.map(t=>rj(t,e)).filter(Boolean).pop();if(o){var f=v.map((e,t)=>{if(t!==g){var r=tf(l.x-e.x,l.y-e.y);tP(r),tB(r,.5);var a=m(t9(tf(l.x-r.x,l.y-r.y),mR(e)));if(a)return{intersection:a,cornerDist:tW(l,p[t]),intersectionDist:tW(l,a)}}}).filter(Boolean);if(f.length){var $=f.reduce((e,t)=>{var r=t.intersectionDist/t.cornerDist;return r<e?r:e},Number.MAX_SAFE_INTEGER);r$(u=ro(e),$,l)}}else{var y=1===r.target.length,x=!(a[0].y===a[1].y||a[0].x===a[1].x),b=p.map((e,t)=>{if(t!==g){var r=v[t],a=!mI(r.x,s.x)&&!mI(r.y,s.y);if(!(!y&&!x&&a||y&&(mI(r.x,s.x)||mI(r.y,s.y)))){var n=tw(y?e:l),o=tz(tw(n),r);tP(o),tB(o,.5),y?tF(n,o):tz(n,o);var c=m(t9(n,r));if(c)return c}}}).filter(Boolean);if(b.length){var[w,S,k,C]=mh(r.target),[M,T,P,R]=rO(t);b.forEach(e=>{var{x:t,y:r}=e,a=tp(t,6),n=tp(r,6);k&&!mI(n,s.y)&&(M=Math.max(M,r)),w&&!mI(a,s.x)&&(T=Math.min(T,t)),C&&!mI(n,s.y)&&(P=Math.min(P,r)),S&&!mI(a,s.x)&&(R=Math.max(R,t))}),r$(u=rd([M,T,P,R]),.9999,l)}}return ry(u,c,d,l),u};function mF(e){var t,r;return t=new pF({props:{items:e[11]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};2048&r[0]&&(a.items=e[11]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function mz(e){var t,r,a;return r=new gY({props:{$$slots:{default:[mF]},$$scope:{ctx:e}}}),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"slot","header")},m(e,n){oj(e,t,n),lI(r,t,null),a=!0},p(e,t){var a={};2048&t[0]|1&t[7]&&(a.$$scope={dirty:t,ctx:e}),r.$set(a)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r)}}}function mO(e){var t,r;return t=new d2({props:{onclick:e[87],label:e[4].cropLabelButtonRecenter,icon:e[4].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!e[9],hideLabel:!0,style:"opacity: ".concat(e[29],"; transform: translate3d(").concat(e[30].x,"px, ").concat(e[30].y,"px, 0)")}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16&r[0]&&(a.label=e[4].cropLabelButtonRecenter),16&r[0]&&(a.icon=e[4].cropIconButtonRecenter),512&r[0]&&(a.disabled=!e[9]),1610612736&r[0]&&(a.style="opacity: ".concat(e[29],"; transform: translate3d(").concat(e[30].x,"px, ").concat(e[30].y,"px, 0)")),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function mB(e){var t,r;return(t=new mc({props:{rect:e[8],visible:e[12],style:e[1]}})).$on("resizestart",e[67]),t.$on("resizemove",e[68]),t.$on("resizeend",e[69]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};256&r[0]&&(a.rect=e[8]),4096&r[0]&&(a.visible=e[12]),2&r[0]&&(a.style=e[1]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function mD(e){var t,r;return t=new mw({props:{width:Math.round(e[13].width),height:Math.round(e[13].height)}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};8192&r[0]&&(a.width=Math.round(e[13].width)),8192&r[0]&&(a.height=Math.round(e[13].height)),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function m_(e){var t,r,a,n,o,l,s,c,d=e[21]&&e[10]&&mO(e),u=e[21]&&mB(e),h=e[22]&&mD(e);return{c(){t=oH("div"),r=oH("div"),d&&d.c(),a=oX(),u&&u.c(),o=oX(),h&&h.c(),oq(r,"class","PinturaStage"),oq(t,"slot","main")},m(p,v){oj(p,t,v),oN(t,r),d&&d.m(r,null),oN(r,a),u&&u.m(r,null),e[161](r),oN(t,o),h&&h.m(t,null),l=!0,s||(c=[oF(dr.call(null,r)),oY(r,"measure",e[159]),oY(r,"wheel",function(){ob(e[2]&&e[86])&&(e[2]&&e[86]).apply(this,arguments)},{passive:!1}),oY(r,"interactionstart",e[73]),oY(r,"interactionupdate",e[74]),oY(r,"interactionrelease",e[76]),oY(r,"interactionend",e[75]),oF(n=d3.call(null,r,{drag:!0,inertia:!0,pinch:e[2],shouldStartInteraction:mY,getEventPosition:e[162]})),oY(r,"gesturedown",e[83]),oY(r,"gestureupdate",e[84]),oY(r,"gestureup",e[85]),oF(md.call(null,r))],s=!0)},p(o,l){(e=o)[21]&&e[10]?d?(d.p(e,l),2098176&l[0]&&lx(d,1)):((d=mO(e)).c(),lx(d,1),d.m(r,a)):d&&(l$(),lb(d,1,1,()=>{d=null}),ly()),e[21]?u?(u.p(e,l),2097152&l[0]&&lx(u,1)):((u=mB(e)).c(),lx(u,1),u.m(r,null)):u&&(l$(),lb(u,1,1,()=>{u=null}),ly()),n&&ob(n.update)&&16777220&l[0]&&n.update.call(null,{drag:!0,inertia:!0,pinch:e[2],shouldStartInteraction:mY,getEventPosition:e[162]}),e[22]?h?(h.p(e,l),4194304&l[0]&&lx(h,1)):((h=mD(e)).c(),lx(h,1),h.m(t,null)):h&&(l$(),lb(h,1,1,()=>{h=null}),ly())},i(e){l||(lx(d),lx(u),lx(h),l=!0)},o(e){lb(d),lb(u),lb(h),l=!1},d(r){r&&oV(t),d&&d.d(),u&&u.d(),e[161](null),h&&h.d(),s=!1,ox(c)}}}function mN(e){for(var t,r,a,n,o=[{class:"PinturaControlList"},{tabs:e[7]},e[18]],l={$$slots:{default:[mW,e=>{var{tab:t}=e;return{216:t}},e=>{var{tab:t}=e;return[0,0,0,0,0,0,t?1073741824:0]}]},$$scope:{ctx:e}},s=0;s<o.length;s+=1)l=of(l,o[s]);(t=new dT({props:l})).$on("select",e[160]);for(var c=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[17]},e[18]],d={$$slots:{default:[mH,e=>{var{panel:t}=e;return{215:t}},e=>{var{panel:t}=e;return[0,0,0,0,0,0,t?536870912:0]}]},$$scope:{ctx:e}},u=0;u<c.length;u+=1)d=of(d,c[u]);return a=new d_({props:d}),{c(){lA(t.$$.fragment),r=oX(),lA(a.$$.fragment)},m(e,o){lI(t,e,o),oj(e,r,o),lI(a,e,o),n=!0},p(e,r){var n=262272&r[0]?lP(o,[o[0],128&r[0]&&{tabs:e[7]},262144&r[0]&&lR(e[18])]):{};1073741824&r[6]|1&r[7]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n);var l=393216&r[0]?lP(c,[c[0],c[1],131072&r[0]&&{panels:e[17]},262144&r[0]&&lR(e[18])]):{};511721496&r[0]|536870912&r[6]|1&r[7]&&(l.$$scope={dirty:r,ctx:e}),a.$set(l)},i(e){n||(lx(t.$$.fragment,e),lx(a.$$.fragment,e),n=!0)},o(e){lb(t.$$.fragment,e),lb(a.$$.fragment,e),n=!1},d(e){lL(t,e),e&&oV(r),lL(a,e)}}}function mW(e){var t,r,a=e[216].label+"";return{c(){t=oH("span"),r=oG(a)},m(e,a){oj(e,t,a),oN(t,r)},p(e,t){1073741824&t[6]&&a!==(a=e[216].label+"")&&oQ(r,a)},d(e){e&&oV(t)}}}function mj(e){var t,r;return t=new mi({props:{elasticity:e[25]*e[43],base:mZ,min:e[23],max:mX,valueMin:e[27][0],valueMax:e[27][1],value:e[28],labelReset:e[4].labelReset,valueLabel:"".concat(Math.round(100*e[28]),"%"),oninputstart:e[80],oninputmove:e[81],oninputend:e[82]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};33554432&r[0]&&(a.elasticity=e[25]*e[43]),8388608&r[0]&&(a.min=e[23]),134217728&r[0]&&(a.valueMin=e[27][0]),134217728&r[0]&&(a.valueMax=e[27][1]),268435456&r[0]&&(a.value=e[28]),16&r[0]&&(a.labelReset=e[4].labelReset),268435456&r[0]&&(a.valueLabel="".concat(Math.round(100*e[28]),"%")),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function mV(e){var t,r;return t=new my({props:{elasticity:e[25]*e[43],rotation:e[14],labelReset:e[4].labelReset,valueMin:e[26][0],valueMax:e[26][1],rotationMin:-e[3],rotationMax:e[3],oninputstart:e[70],oninputmove:e[71],oninputend:e[72]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};33554432&r[0]&&(a.elasticity=e[25]*e[43]),16384&r[0]&&(a.rotation=e[14]),16&r[0]&&(a.labelReset=e[4].labelReset),67108864&r[0]&&(a.valueMin=e[26][0]),67108864&r[0]&&(a.valueMax=e[26][1]),8&r[0]&&(a.rotationMin=-e[3]),8&r[0]&&(a.rotationMax=e[3]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function mH(e){var t,r,a,n,o=[mV,mj],l=[];function s(e,t){return e[215]===e[92]+"-rotation"?0:e[215]===e[92]+"-zoom"?1:-1}return~(t=s(e))&&(r=l[t]=o[t](e)),{c(){r&&r.c(),a=oZ()},m(e,r){~t&&l[t].m(e,r),oj(e,a,r),n=!0},p(e,n){var c=t;(t=s(e))===c?~t&&l[t].p(e,n):(r&&(l$(),lb(l[c],1,1,()=>{l[c]=null}),ly()),~t?((r=l[t])?r.p(e,n):(r=l[t]=o[t](e)).c(),lx(r,1),r.m(a.parentNode,a)):r=null)},i(e){n||(lx(r),n=!0)},o(e){lb(r),n=!1},d(e){~t&&l[t].d(e),e&&oV(a)}}}function mU(e){var t,r,a=e[19]&&mN(e);return{c(){t=oH("div"),a&&a.c(),oq(t,"slot","footer"),oq(t,"style",e[16])},m(e,n){oj(e,t,n),a&&a.m(t,null),r=!0},p(e,n){e[19]?a?(a.p(e,n),524288&n[0]&&lx(a,1)):((a=mN(e)).c(),lx(a,1),a.m(t,null)):a&&(l$(),lb(a,1,1,()=>{a=null}),ly()),(!r||65536&n[0])&&oq(t,"style",e[16])},i(e){r||(lx(a),r=!0)},o(e){lb(a),r=!1},d(e){e&&oV(t),a&&a.d()}}}function mG(e){function t(t){e[163](t)}var r,a,n,o={hasHeader:e[20],$$slots:{footer:[mU],main:[m_],header:[mz]},$$scope:{ctx:e}};return void 0!==e[15]&&(o.root=e[15]),r=new g9({props:o}),ln.push(()=>lE(r,"root",t)),r.$on("measure",e[164]),{c(){lA(r.$$.fragment)},m(e,t){lI(r,e,t),n=!0},p(e,t){var n={};1048576&t[0]&&(n.hasHeader=e[20]),2146402302&t[0]|1&t[7]&&(n.$$scope={dirty:t,ctx:e}),!a&&32768&t[0]&&(a=!0,n.root=e[15],lh(()=>a=!1)),r.$set(n)},i(e){n||(lx(r.$$.fragment,e),n=!0)},o(e){lb(r.$$.fragment,e),n=!1},d(e){lL(r,e)}}}var mX=1,mZ=0,mY=(e,t)=>e.target===t;function mq(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,b,w,S,k,C,M,T,P,R,E,A,I,L,F,z,O,B,D,_,N,W,j,V,H,U,G,X,Z,Y,q,K,J,Q,ee,et,er,ei,en,eo,el,es,ec,ed,eu,eh,ep,ev,eg,em,ef,e$,ey,ex,eb,ew,eS,ek,eC,eM,eT=og,eP=()=>(eT(),eT=oS(eR,e=>r(12,eM=e)),eR);e.$$.on_destroy.push(()=>eT());var{isActive:eR}=t;eP();var{stores:eE}=t,{cropImageSelectionCornerStyle:eA="circle"}=t,{cropWillRenderImageSelectionGuides:eI=(e,t)=>{var r="rotate"==e;return{rows:r?5:3,cols:r?5:3,opacity:.25*t}}}=t,{cropAutoCenterImageSelectionTimeout:eL}=t,{cropEnableZoomMatchImageAspectRatio:eF=!0}=t,{cropEnableRotateMatchImageAspectRatio:ez="never"}=t,{cropEnableRotationInput:eO=!0}=t,{cropEnableZoom:eB=!0}=t,{cropEnableZoomInput:eD=!0}=t,{cropEnableZoomAutoHide:e_=!0}=t,{cropEnableImageSelection:eN=!0}=t,{cropEnableInfoIndicator:eW=!1}=t,{cropEnableZoomTowardsWheelPosition:ej=!0}=t,{cropEnableLimitWheelInputToCropSelection:eH=!0}=t,{cropEnableCenterImageSelection:eU=!0}=t,{cropEnableButtonRotateLeft:eG=!0}=t,{cropEnableButtonRotateRight:eX=!1}=t,{cropEnableButtonFlipHorizontal:eZ=!0}=t,{cropEnableButtonFlipVertical:eY=!1}=t,{cropSelectPresetOptions:eq}=t,{cropEnableSelectPreset:eK=!0}=t,{cropEnableFilterMatchAspectRatio:eJ=!0}=t,{cropSelectPresetFilter:eQ=!1}=t,{cropEnableButtonToggleCropLimit:e1=!1}=t,{cropWillRenderTools:e0=e7}=t,{cropActiveTransformTool:e2="rotation"}=t,{cropMinimizeToolbar:e4="auto"}=t,{cropInteractionFocus:e5="image"}=t,{cropRotationRange:e3=tt}=t,{cropMaskOpacity:e6=.85}=t,{locale:e9={}}=t,te=lr("isAnimated");oC(e,te,e=>r(138,a=e));var ti=lr("elasticityMultiplier");oC(e,ti,e=>r(25,N=e));var ta=lr("redrawTrigger");oC(e,ta,e=>r(158,_=e));var tn=lr("imageIsStatic");oC(e,tn,e=>r(144,u=e));var to=lr("imageStaticVisualCorners");oC(e,to,e=>r(179,A=e));var tl="idle",ts=lD();oC(e,ts,e=>r(155,O=e));var tc=()=>void 0===R,td=e=>1/e,tu=e=>{eJ&&eQ!==e&&(r(94,eQ=e),R&&1!==R&&th()&&oL(ra,R=td(R),R))},th=()=>{if(1===R||!K)return!1;var e=td(R);return!!uG(O).find(t=>{var[r]=t;return r===e})},tv=(e,t,r)=>tr(r)?t.width===Math.round(e.height)||t.height===Math.round(e.width):t.width===Math.round(e.width)||t.height===Math.round(e.height),tg=(e,t,r)=>tA(t2(t6(t4(tX(t),r),e=>Math.abs(Math.round(e)))),rm(e)),tm=()=>(tc()||"always"===ez&&th())&&tg(h,b,w)&&tv(h,b,w),t$=e=>{if("never"!==ez&&tm()){oL(tG,w+=e,w);var t=tr(w),r=t?b.height:b.width,a=t?b.width:b.height;oL(re,h=rg(0,0,r,a),h),tc()||oL(ra,R=e8(r,a),R)}else oL(tG,w+=e,w)},{history:ty,env:tx,isInteracting:tb,isInteractingFraction:tS,isTransformingImage:tC,rootRect:tM,stageRect:tP,utilRect:tR,utilRectPadded:tE,rootLineColor:tI,allowPan:tL,allowZoom:tO,allowPlayPause:tD,rangeInputElasticity:t_,presentationScalar:tN,utilTools:tW,imagePreviewModifiers:tj,imageOutlineOpacity:tV,imageFlipX:tH,imageFlipY:tU,imageRotation:tG,imageRotationRange:tZ,imageOutputSize:tK,imageSelectionRect:tJ,imageSelectionRectSnapshot:t1,imageSelectionRectIntent:t5,imageSelectionRectPresentation:t8,imageCropRectIntent:t7,imageCropRectOrigin:t9,imageCropRect:re,imageCropMinSize:rt,imageCropMaxSize:rr,imageCropRange:ri,imageCropAspectRatio:ra,imageCropLimitToImage:rn,imageSize:rl,imageScalar:rs,imageOverlayMarkup:rd,stagePadded:ru,stageRecenter:rh}=eE;oC(e,tx,e=>r(139,n=e)),oC(e,tb,e=>r(143,d=e)),oC(e,tC,e=>r(172,y=e)),oC(e,tM,e=>r(24,C=e)),oC(e,tP,e=>r(150,$=e)),oC(e,tE,e=>r(147,g=e)),oC(e,tN,e=>r(146,v=e)),oC(e,tW,e=>r(181,L=e)),oC(e,tj,e=>r(171,s=e)),oC(e,tH,e=>r(157,D=e)),oC(e,tU,e=>r(156,B=e)),oC(e,tG,e=>r(14,w=e)),oC(e,tZ,e=>r(26,W=e)),oC(e,tK,e=>r(182,F=e)),oC(e,tJ,e=>r(149,f=e)),oC(e,t1,e=>r(148,m=e)),oC(e,t5,e=>r(180,I=e)),oC(e,t8,e=>r(142,c=e)),oC(e,t7,e=>r(174,M=e)),oC(e,t9,e=>r(176,P=e)),oC(e,re,e=>r(13,h=e)),oC(e,rt,e=>r(153,k=e)),oC(e,rr,e=>r(178,E=e)),oC(e,ri,e=>r(175,T=e)),oC(e,ra,e=>r(177,R=e)),oC(e,rn,e=>r(152,S=e)),oC(e,rl,e=>r(151,b=e)),oC(e,rs,e=>r(145,p=e)),oC(e,ru,e=>r(141,l=e));var rp=(e,t)=>{var r={target:e,translate:t},a=t0(tX(k),v),n=t0(tX(E),v),o=mp(m,r,ea(ea({},g),{},{x:0,y:0}),{aspectRatio:R,minSize:a,maxSize:n});if(o=rL(o,ea(ea({},g),{},{x:0,y:0}),R),!S)return{boundsLimited:o,boundsIntent:o};var l=mL(m,o,r,A,{aspectRatio:R,minSize:a,maxSize:n});return{boundsLimited:l,boundsIntent:l}},ry=(e,t)=>{var r={target:e,translate:t},a=t0(tX(k),v),n=t0(tX(E),v),o=mg(m,r,{aspectRatio:R,minSize:a});return{boundsLimited:mp(m,r,ea(ea({},g),{},{x:0,y:0}),{aspectRatio:R,minSize:a,maxSize:n}),boundsIntent:o}},rx=void 0,rb=void 0,rw=e=>{var t,{translation:r,scalar:a}=e;u&&(a=1,r=tk(tw(r)));var n=Math.min(f.width/h.width,f.height/h.height),o=tB(tw(r),1/n);if(rb){var l=tz(tw(rb),r);rb=r,t=rf(ro(h),l)}else t=rf(ro(rx),tk(tw(o))),void 0!==a&&r$(t,1/a);oL(t7,M=t,M),oL(re,h=t,h)},rS=(e,t,r)=>tr(r)?1-1/Math.min(e.height/t.width,e.width/t.height):1-1/Math.min(e.width/t.width,e.height/t.height),rk=l_([ri,re],(e,t)=>{var[r,a]=e;if(a){var[n,o]=r,l=rM(a);t([tY(rD(rI(n,l),tp)),tY(rD(rz(o,l),tp))])}});oC(e,rk,e=>r(173,x=e));var rT=l_([rl,rn,rt,rr,ri,tG],(e,t)=>{var r,a,[n,o,l,s,c,d]=e;if(n){var u=c[0],h=c[1];o?(r=rS(n,h,d),a=Math.min(u.width/l.width,u.height/l.height)):(r=-1,a=1),t([r,a].map(e=>tp(e)))}});oC(e,rT,e=>r(27,j=e));var rP=l_([rl,re,ri,tG],(e,t)=>{var r,[a,n,o,l]=e;if(!a||!n)return t(0);var s=o[0],c=o[1],d=n.width,u=n.height,h=rM(n),p=rz(tr(l)?tQ(a.height,a.width):a,h);if(d<=p.width||u<=p.height){var v=p.width-s.width,g=p.height-s.height;r=0===v||0===g?1:1-Math.min((d-s.width)/v,(u-s.height)/g)}else{var m=rz({width:c.width-p.width,height:c.height-p.height},h);r=-Math.min((d-p.width)/m.width,(u-p.height)/m.height)}t(r)});oC(e,rP,e=>r(28,V=e));var rR=()=>{rx=ro(h)},rF=e=>{var t,r,a,n=rM(rx),o=rz(tr(w)?tQ(b.height,b.width):b,n);if(e>=0){var l=o.width-T[0].width,s=o.height-T[0].height;a=rI({width:t=o.width-l*e,height:r=o.height-s*e},n)}else{var c=T[1].width-o.width,d=T[1].height-o.height;a=rz({width:t=o.width+-(c*e),height:r=o.height+-(d*e)},n)}t=a.width,r=a.height,oL(re,h={x:rx.x+.5*rx.width-.5*t,y:rx.y+.5*rx.height-.5*r,width:t,height:r},h)},rO=e=>{var t=r$(ro(X),1/e);oL(t7,M=t,M),oL(re,h=t,h)},rB=()=>{rh.set({})},r_=cJ(0,{precision:1e-4});oC(e,r_,e=>r(29,H=e));var rN=cJ();oC(e,rN,e=>r(30,U=e));var rW=()=>{oL(tj,s.crop={maskOpacity:e6,maskMarkupOpacity:e6},s),tj.set(s)},rj=()=>{delete s.crop,tj.set(s)},rV=l_([ra,tK,ts],(e,t)=>{var[r,a,n]=e;if(K){var o=uG(n),l=[...o].map(e=>e[0]).sort((e,t)=>iY(e[0])&&!iY(t[0])?1:-1).find(e=>{if(iY(e)&&a){var[t,n]=e,o=a.width===t&&a.height===n,l=r===e8(t,n);return o&&l}return e===r});if(!l)return t(void 0);t(o.map(e=>e[0]).findIndex(e=>iY(e)?si(e,l):e===l))}});oC(e,rV,e=>r(154,z=e));var rH=(e,t)=>{if(K&&-1!==e&&void 0!==e){var r=uG(t)[e][0];return r?iY(r)?e8(r[0],r[1]):r:void 0}},rU=l_([tI,t8,tS],(e,t)=>{var[r,a,n]=e,{rows:o,cols:l,opacity:s}=eI(tl,n);if(!a||s<=0)return t([]);for(var{x:c,y:d,width:u,height:h}=a,p=u/l,v=h/o,g=[],m=1;m<=o-1;m++){var f=d+v*m;g.push({id:"image-selection-guide-row-".concat(m),points:[tf(c,f),tf(c+u,f)],opacity:s,strokeWidth:1,strokeColor:r})}for(var $=1;$<=l-1;$++){var y=c+p*$;g.push({id:"image-selection-guide-col-".concat($),points:[tf(y,d),tf(y,d+h)],opacity:s,strokeWidth:1,strokeColor:r})}t(g)});oC(e,rU,e=>r(140,o=e));var rG=()=>{rd.update(e=>{var t=e.filter(e=>!/^image\-selection\-guide/.test(e.id));return eM?[...t,...o]:t})},rX="crop-".concat(eV()),rZ=rX+"-"+(eO?e2:"zoom"),rY=rZ,rq=void 0,rK=cJ(a?20:0);return oC(e,rK,e=>r(137,eC=e)),e.$$set=e=>{"isActive"in e&&eP(r(0,eR=e.isActive)),"stores"in e&&r(96,eE=e.stores),"cropImageSelectionCornerStyle"in e&&r(1,eA=e.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in e&&r(97,eI=e.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in e&&r(98,eL=e.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in e&&r(99,eF=e.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in e&&r(100,ez=e.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in e&&r(101,eO=e.cropEnableRotationInput),"cropEnableZoom"in e&&r(2,eB=e.cropEnableZoom),"cropEnableZoomInput"in e&&r(102,eD=e.cropEnableZoomInput),"cropEnableZoomAutoHide"in e&&r(103,e_=e.cropEnableZoomAutoHide),"cropEnableImageSelection"in e&&r(104,eN=e.cropEnableImageSelection),"cropEnableInfoIndicator"in e&&r(105,eW=e.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in e&&r(106,ej=e.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in e&&r(107,eH=e.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in e&&r(108,eU=e.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in e&&r(109,eG=e.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in e&&r(110,eX=e.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in e&&r(111,eZ=e.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in e&&r(112,eY=e.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in e&&r(113,eq=e.cropSelectPresetOptions),"cropEnableSelectPreset"in e&&r(114,eK=e.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in e&&r(115,eJ=e.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in e&&r(94,eQ=e.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in e&&r(116,e1=e.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in e&&r(117,e0=e.cropWillRenderTools),"cropActiveTransformTool"in e&&r(118,e2=e.cropActiveTransformTool),"cropMinimizeToolbar"in e&&r(119,e4=e.cropMinimizeToolbar),"cropInteractionFocus"in e&&r(120,e5=e.cropInteractionFocus),"cropRotationRange"in e&&r(3,e3=e.cropRotationRange),"cropMaskOpacity"in e&&r(121,e6=e.cropMaskOpacity),"locale"in e&&r(4,e9=e.locale)},e.$$.update=()=>{4096&e.$$.dirty[0]|134217728&e.$$.dirty[3]&&tn.set("selection"===e5&&eM),1048576&e.$$.dirty[3]&&r(128,K=eq&&Array.isArray(eq)&&eq.length),1048576&e.$$.dirty[3]|16&e.$$.dirty[4]&&ts.set(K?eq:[]),4096&e.$$.dirty[0]&&eM&&tV.set(1),4096&e.$$.dirty[0]&&tL.set(!eM),4096&e.$$.dirty[0]&&tO.set(!eM),4096&e.$$.dirty[0]&&eM&&tD.set(!0),32768&e.$$.dirty[4]&&r(123,es="overlay"===n.layoutMode),1075838976&e.$$.dirty[3]&&r(127,em=eK&&!es),41943040&e.$$.dirty[4]&&r(136,er=g&&f&&rE(g,f)),33558528&e.$$.dirty[4]&&r(134,ei=!!(f&&er)),33559552&e.$$.dirty[4]&&r(132,en=ei&&rC(f,er,e=>tp(e,5))),16400&e.$$.dirty[0]|26148866&e.$$.dirty[3]|2013298968&e.$$.dirty[4]|15&e.$$.dirty[5]&&r(11,J=_&&e0([eG&&["Button","rotate-left",{label:e9.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:e9.cropIconButtonRotateLeft,onclick:()=>{t$(-Math.PI/2),ty.write()}}],eX&&["Button","rotate-right",{label:e9.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:e9.cropIconButtonRotateRight,onclick:()=>{t$(Math.PI/2),ty.write()}}],eZ&&["Button","flip-horizontal",{label:e9.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:e9.cropIconButtonFlipHorizontal,onclick:()=>{tr(w)?oL(tU,B=!B,B):oL(tH,D=!D,D),ty.write()}}],eY&&["Button","flip-vertical",{label:e9.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:e9.cropIconButtonFlipVertical,onclick:()=>{tr(w)?oL(tH,D=!D,D):oL(tU,B=!B,B),ty.write()}}],em&&K&&[!1===eQ?"Dropdown":mP,"select-preset",{icon:uq(e9.cropIconSelectPreset,e9,rH(z,O)),label:uq(e9.cropLabelSelectPreset,e9,rH(z,O)),labelClass:"PinturaToolbarContentWide",options:O,filter:eQ,onfilterchange:tu,selectedIndex:z,onchange:e=>{var{value:t}=e;iY(t)?(oL(ra,R=e8(t[0],t[1]),R),oL(tK,F=tq(t),F)):oL(ra,R=t,R),en&&rB(),ty.write()},optionMapper:e=>{var t=!1,r=iY(e.value)?e.value[0]/e.value[1]:e.value;if(r){var a=l2(b,w,r);t=a.width<k.width||a.height<k.height}return e.icon=mS(e.value,{bounds:14}),ea(ea({},e),{},{disabled:t})}}],e1&&["Dropdown","select-crop-limit",{icon:uq(e9.cropIconCropBoundary,e9,S),label:e9.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:e=>{var{value:t}=e;oL(rn,S=t,S),ty.write()},options:[[!0,e9.cropLabelCropBoundaryEdge,{icon:uq(e9.cropIconCropBoundary,e9,!0)}],[!1,e9.cropLabelCropBoundaryNone,{icon:uq(e9.cropIconCropBoundary,e9,!1)}]]}]].filter(Boolean),n,()=>ta.set({})).filter(Boolean)),6144&e.$$.dirty[0]|1140850688&e.$$.dirty[3]|32768&e.$$.dirty[4]&&oL(tW,L=eM&&"never"!==e4&&("always"===e4||"short"===n.verticalSpace||es)?J.map(e=>{var[t,r,a]=e;return Array.isArray(a)?[t,r,a]:[t,r,ea(ea({},a),{},{hideLabel:!0})]}):[],L),268435456&e.$$.dirty[4]&&r(23,Q=S?0:-1),75497472&e.$$.dirty[4]&&r(129,ee=g&&tf(-($.x-g.x),-($.y-g.y))),262176&e.$$.dirty[4]&&r(130,et=c&&tf(uM(c.x+.5*c.width+ee.x),uM(c.y+.5*c.height+ee.y))),16777216&e.$$.dirty[4]&&r(133,eo=null!=m),8392704&e.$$.dirty[4]&&r(135,el=g&&er&&(er.height===g.height||er.width===g.width)),6293504&e.$$.dirty[4]&&r(131,ec=!el&&v<1&&p<1),1920&e.$$.dirty[4]&&r(9,ed=ei&&!eo&&(!en||ec)),8192&e.$$.dirty[0]|1073745920&e.$$.dirty[3]&&r(22,eu=eW&&!!h&&!es),262176&e.$$.dirty[4]&&r(8,ev=c&&ee&&{x:c.x+ee.x,y:c.y+ee.y,width:c.width,height:c.height}),256&e.$$.dirty[0]|1073743872&e.$$.dirty[3]&&r(21,eh=eN&&!!ev&&!es),32800&e.$$.dirty[3]|1048640&e.$$.dirty[4]&&r(10,ep=eU&&!!et&&!eL&&!u),512&e.$$.dirty[0]|536870944&e.$$.dirty[3]|524288&e.$$.dirty[4]&&ed&&eL&&!d&&(clearTimeout(Y),r(122,Y=setTimeout(rB,eL))),536870912&e.$$.dirty[3]|524288&e.$$.dirty[4]&&d&&clearTimeout(Y),1536&e.$$.dirty[0]|16384&e.$$.dirty[4]&&r_.set(ep&&ed?1:0,{hard:!1===a}),16448&e.$$.dirty[4]&&rN.set(et,{hard:!1===a}),4096&e.$$.dirty[0]|131072&e.$$.dirty[4]&&(eM&&!l?rW():rj()),65536&e.$$.dirty[4]&&o&&rG(),32768&e.$$.dirty[4]&&r(126,eg="short"!==n.verticalSpace),1140850688&e.$$.dirty[3]|4&e.$$.dirty[4]&&r(20,ef="never"===e4&&!es||eg&&"always"!==e4),4&e.$$.dirty[0]|512&e.$$.dirty[3]&&r(125,e$=eB&&eD),1024&e.$$.dirty[3]|6&e.$$.dirty[4]&&r(124,ey=e_?eg&&e$:e$),256&e.$$.dirty[3]|1&e.$$.dirty[4]&&r(19,ex=eO||ey),1&e.$$.dirty[4]&&!ey&&r(5,rY=rZ),32&e.$$.dirty[0]&&r(18,eb={name:rX,selected:rY}),16&e.$$.dirty[0]|256&e.$$.dirty[3]|1&e.$$.dirty[4]&&r(7,ew=[eO&&{id:rX+"-rotation",label:e9.cropLabelTabRotation},ey&&{id:rX+"-zoom",label:e9.cropLabelTabZoom}].filter(Boolean)),128&e.$$.dirty[0]&&r(17,eS=ew.map(e=>e.id)),64&e.$$.dirty[0]|1073741824&e.$$.dirty[3]&&q&&!q.children.length&&es&&q.dispatchEvent(new CustomEvent("measure",{detail:q.rect})),4096&e.$$.dirty[0]|16384&e.$$.dirty[4]&&a&&rK.set(eM?0:20),8192&e.$$.dirty[4]&&r(16,ek=eC?"transform: translateY(".concat(eC,"px)"):void 0)},[eR,eA,eB,e3,e9,rY,q,ew,ev,ed,ep,J,eM,h,w,rq,ek,eS,eb,ex,ef,eh,eu,Q,C,N,W,j,V,H,U,te,ti,ta,tn,to,ts,tx,tb,tC,tM,tP,tE,t_,tN,tW,tj,tH,tU,tG,tZ,tK,tJ,t1,t5,t8,t7,t9,re,rt,rr,ri,ra,rn,rl,rs,ru,()=>{tl="select",oL(tb,d=!0,d),oL(t1,m=ro(f),m),G=u?rp:ry},e=>{var{detail:t}=e,{boundsLimited:r,boundsIntent:a}=G(t.direction,t.translation);oL(tC,y=!0,y),oL(t5,I=a,I),oL(tJ,f=r,f)},e=>{var{detail:t}=e,{boundsLimited:r}=G(t.direction,t.translation);oL(tC,y=!1,y),oL(tb,d=!1,d),oL(t5,I=void 0,I),tT(t.translation)&&(oL(tJ,f=r,f),ty.write()),oL(t1,m=void 0,m),tl=void 0},()=>{tl="rotate",oL(tb,d=!0,d),oL(t9,P=ro(h),P)},e=>{oL(tC,y=!0,y),oL(tG,w=e,w)},e=>{oL(tC,y=!1,y),oL(tb,d=!1,d),oL(tG,w=e,w),ty.write(),oL(t9,P=void 0,P)},()=>{tl="pan",rb=void 0,oL(tb,d=!0,d),rx=ro(h)},e=>{var{detail:t}=e;oL(tC,y=!0,y),rw(t)},e=>{var{detail:t}=e;oL(tC,y=!1,y),oL(tb,d=!1,d),(tT(t.translation)>0||0!==t.scalar)&&(rw(t),ty.write()),oL(t7,M=void 0,M),rx=void 0},e=>{var{detail:{translation:t}}=e;u&&(t=tk(tw(t))),rb=t,oL(tb,d=!1,d)},rk,rT,rP,()=>{tl="zoom",oL(tb,d=!0,d),rR()},e=>{oL(tC,y=!1,y),rF(e)},e=>{rF(e),ty.write(),oL(tC,y=!1,y),oL(tb,d=!1,d),rx=void 0},()=>{tl="zoom",rx||(X=ro(h),oL(tb,d=!0,d))},e=>{var{detail:t}=e;X&&(oL(tC,y=!0,y),rO(t))},e=>{var{detail:t}=e;X&&(oL(tC,y=!1,y),oL(tb,d=!1,d),rO(t),oL(t7,M=void 0,M),X=void 0,ty.write())},e=>{var t=vu(e,C,$);if(!eH||rA(f,t)){tl="zoom",oL(tb,d=!0,d),oL(tC,y=!0,y),e.preventDefault(),e.stopPropagation();var r=ut(e),a=ro(h),n=1===Math.min(h.width/k.width,h.height/k.height);if(eF&&S){var o=tv(h,b,w);if(tc()&&o&&r>0&&en){oL(tb,d=!1,d),oL(tC,y=!1,y);var l=tr(w)?rc({height:b.width,width:b.height}):rc(b);if(rC(a,l)||(clearTimeout(Z),rC(ty.state.crop,l)))return;oL(re,h=l,h),ty.write();return}}var s=rm(h);if(ej&&"selection"!==e5&&r<0&&!n){var c=tz(tw(t),f),u=Math.min(f.width/h.width,f.height/h.height);s=rA(r$(ro(f),1.1),t)?tF(ro(h),tB(c,1/u)):s}var p=r$(ro(h),1+r/100,s);if(t3(x[1],p)||(p=rv(rm(p),x[1])),t3(p,x[0])||(p=rv(rm(p),x[0])),rC(a,p,tp)){oL(tb,d=!1,d),oL(tC,y=!1,y);return}oL(re,h=rD(p,e=>tp(e,5)),h),oL(tb,d=!1,d),oL(tC,y=!1,y),clearTimeout(Z),Z=setTimeout(()=>{ty.write()},500)}},rB,r_,rN,rV,rU,rX,rK,eQ,"crop",eE,eI,eL,eF,ez,eO,eD,e_,eN,eW,ej,eH,eU,eG,eX,eZ,eY,eq,eK,eJ,e1,e0,e2,e4,e5,e6,Y,es,ey,e$,eg,em,K,ee,et,ec,en,eo,ei,el,er,eC,a,n,o,l,c,d,u,p,v,g,m,f,$,b,S,k,z,O,B,D,_,function(t){li.call(this,e,t)},e=>{var{detail:t}=e;return r(5,rY=t)},function(e){ln[e?"unshift":"push"](()=>{r(6,q=e)})},e=>vd(e),function(e){r(15,rq=e)},function(t){li.call(this,e,t)}]}function mK(e){var t,r,a,n,o,l,s,c=e[77],d=(eO(e[77].label)?e[77].label(e[2]):e[77].label)+"";function u(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e[51](e[77],...r)}var h=()=>e[52](r,c),p=()=>e[52](null,c);return{c(){t=oH("div"),r=oH("div"),a=oX(),n=oH("span"),o=oG(d),oq(r,"class",m0),oq(t,"slot","option"),oq(t,"class","PinturaFilterOption")},m(e,c){oj(e,t,c),oN(t,r),h(),oN(t,a),oN(t,n),oN(n,o),l||(s=[oY(r,"measure",u),oF(dr.call(null,r))],l=!0)},p(t,r){c!==(e=t)[77]&&(p(),c=e[77],h()),4&r[0]|32768&r[2]&&d!==(d=(eO(e[77].label)?e[77].label(e[2]):e[77].label)+"")&&oQ(o,d)},d(e){e&&oV(t),p(),l=!1,ox(s)}}}function mJ(e){var t,r;return t=new hg({props:{locale:e[2],layout:"row",options:e[3],selectedIndex:e[12],onchange:e[32],$$slots:{option:[mK,e=>{var{option:t}=e;return{77:t}},e=>{var{option:t}=e;return[0,0,t?32768:0]}]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};4&r[0]&&(a.locale=e[2]),8&r[0]&&(a.options=e[3]),4096&r[0]&&(a.selectedIndex=e[12]),1028&r[0]|98304&r[2]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function mQ(e){function t(t){e[54](t)}function r(t){e[55](t)}function a(t){e[56](t)}var n,o,l,s,c,d,u,h,p={elasticity:e[13]*e[19],onscroll:e[53],$$slots:{default:[mJ]},$$scope:{ctx:e}};return void 0!==e[4]&&(p.maskFeatherStartOpacity=e[4]),void 0!==e[5]&&(p.maskFeatherEndOpacity=e[5]),void 0!==e[6]&&(p.maskFeatherSize=e[6]),o=new ua({props:p}),ln.push(()=>lE(o,"maskFeatherStartOpacity",t)),ln.push(()=>lE(o,"maskFeatherEndOpacity",r)),ln.push(()=>lE(o,"maskFeatherSize",a)),o.$on("measure",e[57]),{c(){n=oH("div"),lA(o.$$.fragment),oq(n,"slot","footer"),oq(n,"style",e[11])},m(t,r){oj(t,n,r),lI(o,n,null),d=!0,u||(h=[oY(n,"transitionend",e[30]),oY(n,"measure",e[58]),oF(dr.call(null,n,{observePosition:!0}))],u=!0)},p(e,t){var r={};8192&t[0]&&(r.elasticity=e[13]*e[19]),128&t[0]&&(r.onscroll=e[53]),5132&t[0]|65536&t[2]&&(r.$$scope={dirty:t,ctx:e}),!l&&16&t[0]&&(l=!0,r.maskFeatherStartOpacity=e[4],lh(()=>l=!1)),!s&&32&t[0]&&(s=!0,r.maskFeatherEndOpacity=e[5],lh(()=>s=!1)),!c&&64&t[0]&&(c=!0,r.maskFeatherSize=e[6],lh(()=>c=!1)),o.$set(r),(!d||2048&t[0])&&oq(n,"style",e[11])},i(e){d||(lx(o.$$.fragment,e),d=!0)},o(e){lb(o.$$.fragment,e),d=!1},d(e){e&&oV(n),lL(o),u=!1,ox(h)}}}function m1(e){var t,r;return(t=new g9({props:{$$slots:{footer:[mQ]},$$scope:{ctx:e}}})).$on("measure",e[59]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16380&r[0]|65536&r[2]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}var m0="PinturaFilterPreview";function m2(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,b,w,S,k,C,M,T,P,R,E,A=og,I=()=>(A(),A=oS(O,e=>r(43,b=e)),O),L=og,F=()=>(L(),L=oS(z,e=>r(49,E=e)),z);e.$$.on_destroy.push(()=>A()),e.$$.on_destroy.push(()=>L());var{isActive:z}=t;F();var{isActiveFraction:O}=t;I();var{stores:B}=t,{locale:D}=t,{filterFunctions:_}=t,{filterOptions:N}=t,W=lr("elasticityMultiplier");oC(e,W,e=>r(13,o=e));var{history:j,interfaceImages:V,stageRectBase:H,utilRect:U,animation:G,scrollElasticity:X,imageSize:Z,imagePreview:Y,imageCropRect:q,imageRotation:K,imageFlipX:J,imageFlipY:Q,imageBackgroundColor:ee,imageGamma:et,imageColorMatrix:er,allowPan:ei,allowZoom:en,allowZoomControls:eo,allowPlayPause:el}=B;oC(e,V,e=>r(60,w=e)),oC(e,H,e=>r(48,R=e)),oC(e,U,e=>r(47,P=e)),oC(e,G,e=>r(50,a=e)),oC(e,Z,e=>r(62,k=e)),oC(e,Y,e=>r(42,x=e)),oC(e,ee,e=>r(61,S=e)),oC(e,et,e=>r(44,C=e)),oC(e,er,e=>r(40,$=e));var es=(e,t)=>{if(!e||!e.filter||!t)return 0;var r=e.filter;return t.findIndex(e=>{var[t]=e;return!!_[t]&&si(_[t](),r)})},ec=lD({});oC(e,ec,e=>r(46,T=e));var ed=(e,t)=>oL(ec,T[e.value]=t,T),eu=l_(ec,e=>{if(e[void 0]){var t=e[void 0];return n&&t1(n,t)?n:tX(t)}});oC(e,eu,e=>r(63,n=e));var eh=l_([z,eu,q,Z,K,J,Q],(e,t)=>{var[r,a,n,o,l,s,c]=e;if(!r||!a||!o)return M;var d=rm(rc(o)),u=rm(l3(o,n,l)),h=tz(tw(d),u);t({origin:tk(tw(h)),translation:h,rotation:{x:c?Math.PI:0,y:s?Math.PI:0,z:l},scale:Math.max(a.width/n.width,a.height/n.height)})});oC(e,eh,e=>r(45,M=e));var ep=e=>({origin:tw(e.origin),translation:tw(e.translation),rotation:ea({},e.rotation),scale:e.scale}),ev=cJ(a?20:0);oC(e,ev,e=>r(39,f=e));var eg={},em={x:0,y:0},ef=lD([]);oC(e,ef,e=>r(41,y=e));var e$=e=>{var t=ea(ea({},e),{},{data:x,size:k,offset:ea({},e.offset),mask:ea({},e.mask),backgroundColor:S});return t.opacity=b,t.offset.y+=f,t.mask.y+=f,t.id="filter",t},ey=()=>w.filter(e=>"filter"!==e.id);return o9(()=>{V.set([])}),e.$$set=e=>{"isActive"in e&&F(r(0,z=e.isActive)),"isActiveFraction"in e&&I(r(1,O=e.isActiveFraction)),"stores"in e&&r(34,B=e.stores),"locale"in e&&r(2,D=e.locale),"filterFunctions"in e&&r(35,_=e.filterFunctions),"filterOptions"in e&&r(3,N=e.filterOptions)},e.$$.update=()=>{if(262144&e.$$.dirty[1]&&ei.set(E),262144&e.$$.dirty[1]&&en.set(E),262144&e.$$.dirty[1]&&eo.set(E),262144&e.$$.dirty[1]&&E&&el.set(!1),8&e.$$.dirty[0]&&r(38,v=uG(N)),640&e.$$.dirty[1]&&r(12,g=es($,v)),786432&e.$$.dirty[1]&&a&&ev.set(E?0:20),512&e.$$.dirty[0]|458752&e.$$.dirty[1]&&E&&P&&R&&p&&r(37,h={x:R.x-P.x,y:R.y-P.y+p.y}),496&e.$$.dirty[0]|58096&e.$$.dirty[1]&&M&&h&&em&&u&&l){var t=h.x+u.x+em.x,n=h.y,o=u.x+h.x,x=o+u.width;ef.set(v.map((e,r)=>{var[a]=e,h=T[a],p=em.x+h.x,v=p+h.width;if(v<0||p>u.width)return!1;var g=t+h.x,m=n+h.y,f=ep(M);f.offset=tf(.5*h.width+g,.5*h.height+m),f.maskOpacity=1,f.mask=rg(g+0,m,h.width+0,h.height),f.maskFeather=[1,0,1,0,1,x,1,x],p<d&&s<1&&(f.maskFeather[0]=s,f.maskFeather[1]=o,f.maskFeather[2]=1,f.maskFeather[3]=o+d),v>u.width-d&&c<1&&(f.maskFeather[4]=c,f.maskFeather[5]=x-d,f.maskFeather[6]=1,f.maskFeather[7]=x),f.maskCornerRadius=l[a];var y=$&&Object.keys($).filter(e=>"filter"!=e).map(e=>$[e])||[];return eO(_[a])&&y.push(_[a]()),f.colorMatrix=y.length?oh(y):void 0,f.gamma=C,f}).filter(Boolean))}if(7424&e.$$.dirty[1]){if(b>0&&y){var w=[...ey(),...y.map(e$)];V.set(w)}else V.set(ey())}256&e.$$.dirty[1]&&r(11,m=f?"transform: translateY(".concat(f,"px)"):void 0)},[z,O,D,N,s,c,d,em,u,p,eg,m,g,o,W,V,H,U,G,X,Z,Y,ee,et,er,ec,ed,eu,eh,ev,e=>{e.target.className===m0&&r(36,l=Object.keys(eg).reduce((e,t)=>{var r=eg[t],a=getComputedStyle(r),n=["top-left","top-right","bottom-left","bottom-right"].map(e=>a.getPropertyValue("border-".concat(e,"-radius"))).map(ue).map(e=>1.25*e);return e[t]=n,e},{}))},ef,e=>{var{value:t}=e;oL(er,$=ea(ea({},$),{},{filter:eO(_[t])?_[t]():void 0}),$),j.write()},"filter",B,_,l,h,v,f,$,y,x,b,C,M,T,P,R,E,a,(e,t)=>ed(e,t.detail),function(e,t){ln[e?"unshift":"push"](()=>{eg[t.value]=e,r(10,eg)})},e=>r(7,em=e),function(e){r(4,s=e)},function(e){r(5,c=e)},function(e){r(6,d=e)},e=>r(8,u=e.detail),e=>r(9,p=e.detail),function(t){li.call(this,e,t)}]}function m4(e){var t,r,a=e[43].label+"";return{c(){t=oH("span"),r=oG(a)},m(e,a){oj(e,t,a),oN(t,r)},p(e,t){4096&t[1]&&a!==(a=e[43].label+"")&&oQ(r,a)},d(e){e&&oV(t)}}}function m5(e){for(var t,r,a=[{class:"PinturaControlList"},{tabs:e[1]},e[5]],n={$$slots:{default:[m4,e=>{var{tab:t}=e;return{43:t}},e=>{var{tab:t}=e;return[0,t?4096:0]}]},$$scope:{ctx:e}},o=0;o<a.length;o+=1)n=of(n,a[o]);return(t=new dT({props:n})).$on("select",e[24]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=34&r[0]?lP(a,[a[0],2&r[0]&&{tabs:e[1]},32&r[0]&&lR(e[5])]):{};12288&r[1]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function m3(e){for(var t,r,a=[e[7][e[42]]],n={},o=0;o<a.length;o+=1)n=of(n,a[o]);return t=new mi({props:n}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=128&r[0]|2048&r[1]?lP(a,[lR(e[7][e[42]])]):{};t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function m6(e){r=new ua({props:{elasticity:e[6]*e[9],class:"PinturaControlListScroller",$$slots:{default:[m5]},$$scope:{ctx:e}}});for(var t,r,a,n,o,l=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[4]},e[5]],s={$$slots:{default:[m3,e=>{var{panel:t}=e;return{42:t}},e=>{var{panel:t}=e;return[0,t?2048:0]}]},$$scope:{ctx:e}},c=0;c<l.length;c+=1)s=of(s,l[c]);return n=new d_({props:s}),{c(){t=oH("div"),lA(r.$$.fragment),a=oX(),lA(n.$$.fragment),oq(t,"slot","footer"),oq(t,"style",e[3])},m(e,l){oj(e,t,l),lI(r,t,null),oN(t,a),lI(n,t,null),o=!0},p(e,a){var s={};64&a[0]&&(s.elasticity=e[6]*e[9]),38&a[0]|8192&a[1]&&(s.$$scope={dirty:a,ctx:e}),r.$set(s);var c=48&a[0]?lP(l,[l[0],l[1],16&a[0]&&{panels:e[4]},32&a[0]&&lR(e[5])]):{};128&a[0]|10240&a[1]&&(c.$$scope={dirty:a,ctx:e}),n.$set(c),(!o||8&a[0])&&oq(t,"style",e[3])},i(e){o||(lx(r.$$.fragment,e),lx(n.$$.fragment,e),o=!0)},o(e){lb(r.$$.fragment,e),lb(n.$$.fragment,e),o=!1},d(e){e&&oV(t),lL(r),lL(n)}}}function m8(e){var t,r;return(t=new g9({props:{$$slots:{footer:[m6]},$$scope:{ctx:e}}})).$on("measure",e[25]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};254&r[0]|8192&r[1]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function m7(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g=og,m=()=>(g(),g=oS($,e=>r(21,v=e)),$);e.$$.on_destroy.push(()=>g());var{stores:f}=t,{isActive:$}=t;m();var{locale:y={}}=t,{finetuneControlConfiguration:x}=t,{finetuneOptions:b}=t,{finetuneNudgePrecision:w}=t,{history:S,animation:k,scrollElasticity:C,rangeInputElasticity:M,imageColorMatrix:T,imageConvolutionMatrix:P,imageGamma:R,imageVignette:E,imageNoise:A,allowPan:I,allowZoom:L,allowZoomControls:F,allowPlayPause:z}=f;oC(e,k,e=>r(22,a=e));var O={imageColorMatrix:T,imageConvolutionMatrix:P,imageGamma:R,imageVignette:E,imageNoise:A},B=lr("elasticityMultiplier");oC(e,B,e=>r(6,o=e));var D="finetune-".concat(eV()),_=lD({});oC(e,_,e=>r(23,n=e));var N=lD({});oC(e,N,e=>r(7,l=e));var W=()=>{oL(N,l=Object.keys(n).reduce((e,t)=>{var{base:r,min:a,max:l,getLabel:s,getStore:c,setValue:d=(e,t)=>e.set(t)}=x[t],u=c(O),h=null!=n[t]?n[t]:r;return e[t]={base:r,min:a,max:l,value:h,valueLabel:s?s(h,a,l,l-a):Math.round(100*h),oninputmove:e=>{d(u,e)},oninputend:e=>{d(u,e),S.write()},elasticity:o*M,labelReset:y.labelReset,nudgeMultiplier:w},e},{}),l)},j=[],V=e=>{j&&j.forEach(e=>e()),j=u.map(t=>{var{getStore:r,getValue:a=e7}=e[t];return r(O).subscribe(e=>{var r=null!=e?a(e):e;oL(_,n=ea(ea({},n),{},{[t]:r}),n)})})},H=cJ(a?20:0);return oC(e,H,e=>r(20,p=e)),e.$$set=e=>{"stores"in e&&r(15,f=e.stores),"isActive"in e&&m(r(0,$=e.isActive)),"locale"in e&&r(16,y=e.locale),"finetuneControlConfiguration"in e&&r(17,x=e.finetuneControlConfiguration),"finetuneOptions"in e&&r(18,b=e.finetuneOptions),"finetuneNudgePrecision"in e&&r(19,w=e.finetuneNudgePrecision)},e.$$.update=()=>{2097152&e.$$.dirty[0]&&I.set(v),2097152&e.$$.dirty[0]&&L.set(v),2097152&e.$$.dirty[0]&&F.set(v),2097152&e.$$.dirty[0]&&v&&z.set(!0),327680&e.$$.dirty[0]&&r(1,s=b?b.map(e=>{var[t,r]=e;return{id:t,label:eO(r)?r(y):r}}):[]),2&e.$$.dirty[0]&&r(2,c=s.length&&s[0].id),4&e.$$.dirty[0]&&r(5,d={name:D,selected:c}),2&e.$$.dirty[0]&&r(4,u=s.map(e=>e.id)),131072&e.$$.dirty[0]&&x&&V(x),8519680&e.$$.dirty[0]&&x&&n&&W(),6291456&e.$$.dirty[0]&&a&&H.set(v?0:20),1048576&e.$$.dirty[0]&&r(3,h=p?"transform: translateY(".concat(p,"px)"):void 0)},[$,s,c,h,u,d,o,l,k,C,B,_,N,H,"finetune",f,y,x,b,w,p,v,a,n,e=>{var{detail:t}=e;return r(2,c=t)},function(t){li.call(this,e,t)}]}var m9=(e,t)=>{var r=t.length;return e<0?e%r+r:e>=r?e%r:e};function fe(e,t,r){var a=e.slice();return a[45]=t[r].key,a[46]=t[r].index,a[47]=t[r].translate,a[48]=t[r].scale,a[12]=t[r].rotate,a[49]=t[r].dir,a[50]=t[r].center,a[51]=t[r].type,a[2]=t[r].visible,a}function ft(e){var t,r;return{c(){oq(t=oH("div"),"class","PinturaShapeManipulator"),oq(t,"data-control","point"),oq(t,"style",r="pointer-events:none;transform: translate3d(".concat(e[50].x,"px, ").concat(e[50].y,"px, 0) scale(").concat(e[5],", ").concat(e[5],"); opacity: ").concat(e[4]))},m(e,r){oj(e,t,r)},p(e,a){56&a[0]&&r!==(r="pointer-events:none;transform: translate3d(".concat(e[50].x,"px, ").concat(e[50].y,"px, 0) scale(").concat(e[5],", ").concat(e[5],"); opacity: ").concat(e[4]))&&oq(t,"style",r)},d(e){e&&oV(t)}}}function fr(e,t){function r(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return t[17](t[46],...r)}var a,n,o,l,s,c,d,u,h,p="edge"===t[51]&&t[2]&&ft(t);return{key:e,first:null,c(){a=oH("div"),c=oX(),p&&p.c(),d=oZ(),oq(a,"role","button"),oq(a,"aria-label",n="Drag ".concat(t[51]," ").concat(t[45])),oq(a,"tabindex",o="edge"===t[51]?-1:0),oq(a,"class","PinturaShapeManipulator"),oq(a,"data-control",l=t[51]),oq(a,"style",s="cursor:".concat(t[49]?t[49]+"-resize":"move",";opacity:").concat(t[4],";--tx:").concat(t[47].x,";--ty:").concat(t[47].y,";--r:").concat("edge"===t[51]?t[12]:0,"rad;--sx:").concat("point"===t[51]?t[5]:t[48].x,";--sy:").concat("point"===t[51]?t[5]:t[48].y,";")),this.first=a},m(e,n){oj(e,a,n),oj(e,c,n),p&&p.m(e,n),oj(e,d,n),u||(h=[oY(a,"nudge",r),oF(d6.call(null,a,{preventDefault:!0})),oY(a,"interactionstart",function(){ob(t[9]("start",t[46]))&&t[9]("start",t[46]).apply(this,arguments)}),oY(a,"interactionupdate",function(){ob(t[9]("move",t[46]))&&t[9]("move",t[46]).apply(this,arguments)}),oY(a,"interactionend",function(){ob(t[9]("end",t[46]))&&t[9]("end",t[46]).apply(this,arguments)}),oF(d3.call(null,a,{observeKeys:!0}))],u=!0)},p(e,r){t=e,8&r[0]&&n!==(n="Drag ".concat(t[51]," ").concat(t[45]))&&oq(a,"aria-label",n),8&r[0]&&o!==(o="edge"===t[51]?-1:0)&&oq(a,"tabindex",o),8&r[0]&&l!==(l=t[51])&&oq(a,"data-control",l),56&r[0]&&s!==(s="cursor:".concat(t[49]?t[49]+"-resize":"move",";opacity:").concat(t[4],";--tx:").concat(t[47].x,";--ty:").concat(t[47].y,";--r:").concat("edge"===t[51]?t[12]:0,"rad;--sx:").concat("point"===t[51]?t[5]:t[48].x,";--sy:").concat("point"===t[51]?t[5]:t[48].y,";"))&&oq(a,"style",s),"edge"===t[51]&&t[2]?p?p.p(t,r):((p=ft(t)).c(),p.m(d.parentNode,d)):p&&(p.d(1),p=null)},d(e){e&&oV(a),e&&oV(c),p&&p.d(e),e&&oV(d),u=!1,ox(h)}}}function fi(e){var t,r,a,n;return{c(){oq(t=oH("div"),"role","button"),oq(t,"aria-label","Drag rotator"),oq(t,"tabindex","0"),oq(t,"class","PinturaShapeManipulator"),oq(t,"data-control","rotate"),oq(t,"style",r="transform: translate3d(".concat(e[0].x,"px, ").concat(e[0].y,"px, 0) scale(").concat(e[5],", ").concat(e[5],"); opacity: ").concat(e[4]))},m(r,o){oj(r,t,o),a||(n=[oY(t,"nudge",e[11]),oF(d6.call(null,t,{preventDefault:!0})),oY(t,"interactionstart",e[12]("start")),oY(t,"interactionupdate",e[12]("move")),oY(t,"interactionend",e[12]("end")),oF(d3.call(null,t,{observeKeys:!0}))],a=!0)},p(e,a){49&a[0]&&r!==(r="transform: translate3d(".concat(e[0].x,"px, ").concat(e[0].y,"px, 0) scale(").concat(e[5],", ").concat(e[5],"); opacity: ").concat(e[4]))&&oq(t,"style",r)},d(e){e&&oV(t),a=!1,ox(n)}}}function fa(e){for(var t,r,a=[],n=new Map,o=e[3],l=e=>e[45],s=0;s<o.length;s+=1){var c=fe(e,o,s),d=l(c);n.set(d,a[s]=fr(d,c))}var u=e[1]&&fi(e);return{c(){for(var e=0;e<a.length;e+=1)a[e].c();t=oX(),u&&u.c(),r=oZ()},m(e,n){for(var o=0;o<a.length;o+=1)a[o].m(e,n);oj(e,t,n),u&&u.m(e,n),oj(e,r,n)},p(e,s){1592&s[0]&&(o=e[3],a=lT(a,s,l,1,e,o,n,t.parentNode,lC,fr,t,fe)),e[1]?u?u.p(e,s):((u=fi(e)).c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:og,o:og,d(e){for(var n=0;n<a.length;n+=1)a[n].d(e);e&&oV(t),u&&u.d(e),e&&oV(r)}}}function fn(e,t,r){var a,n,o,l,s=le(),c=.5*tt,d=te-c,u=te+c,h=-te,p=h-c,v=h+c,g=e9-c,m=-e9+c,f=-c,$=te-tt,y=$-c,x=$+c,b=e9-tt,w=b-c,S=b+c,k=h-tt,C=k+c,M=k-c,T=h+tt,P=T+c,R=T-c,{visible:E=!1}=t,{points:A=[]}=t,{rotatorPoint:I}=t,{enableDragEdges:L=!0}=t,{enableDragPoints:F=!0}=t,{enableRotatePoints:z=!0}=t,O=lr("isAnimated");oC(e,O,e=>r(16,n=e));var B=cJ(.5,{precision:1e-4,stiffness:.3,damping:.7});oC(e,B,e=>r(5,l=e));var D=cJ(0,{precision:.001,stiffness:.3,damping:.7});oC(e,D,e=>r(4,o=e));var _=e=>{var t="";return(e<=u&&e>=d||e>=p&&e<=v)&&(t="ns"),(e<=m||e>=g||e>=f&&e<=c)&&(t="ew"),(e>=w&&e<=S||e<=P&&e>=R)&&(t="nesw"),(e>=y&&e<=x||e<=C&&e>=M)&&(t="nwse"),t},N=(e,t)=>{for(var r=0,a=tV(e),n=[],o=e.length;r<o;r++)if("continue"===function(){var t=m9(r-1,e),o=m9(r+1,e),l=e[t],s=e[r],c=e[o],d=Math.atan2(c.y-s.y,c.x-s.x);if(F){var u=tP(tf(l.x-s.x,l.y-s.y)),h=tP(tf(c.x-s.x,c.y-s.y)),p=tf(u.x+h.x,u.y+h.y),v=L?F&&_(Math.atan2(p.y,p.x)):void 0;n.push({index:[r],key:"point-".concat(r),type:"point",scale:{x:1,y:1},translate:{x:s.x,y:s.y},angle:void 0,rotate:z,center:s,dir:v})}if(!L||Array.isArray(L)&&!L.some(e=>{var[t,a]=e;return r===t&&o===a}))return"continue";var g=tf(s.x+(c.x-s.x)*.5,s.y+(c.y-s.y)*.5);n.push({index:[r,o],key:"edge-".concat(r),type:"edge",scale:{x:tW(s,c),y:1},translate:{x:s.x,y:s.y},angle:d,rotate:d,center:g,visible:Array.isArray(L),dir:_(Math.atan2(a.y-g.y,a.x-g.x))})}())continue;return n},W=(e,t)=>{s("resizestart",{indexes:e,translation:tm()}),s("resizemove",{indexes:e,translation:t}),s("resizeend",{indexes:e,translation:tm()})};return e.$$set=e=>{"visible"in e&&r(2,E=e.visible),"points"in e&&r(13,A=e.points),"rotatorPoint"in e&&r(0,I=e.rotatorPoint),"enableDragEdges"in e&&r(14,L=e.enableDragEdges),"enableDragPoints"in e&&r(15,F=e.enableDragPoints),"enableRotatePoints"in e&&r(1,z=e.enableRotatePoints)},e.$$.update=()=>{65540&e.$$.dirty[0]&&B.set(E?1:.5,{hard:!1===n}),65540&e.$$.dirty[0]&&D.set(E?1:0,{hard:!1===n}),8192&e.$$.dirty[0]&&r(3,a=N(A))},[I,z,E,a,o,l,O,B,D,(e,t)=>r=>{var{detail:a}=r,n=a&&a.translation?a.translation:tf(0,0);s("resize".concat(e),ea(ea({},a),{},{indexes:t,translation:n}))},W,e=>{var{detail:t}=e;s("rotatestart",{translation:tm()}),s("rotatemove",{translation:t}),s("rotateend",{translation:tm()})},e=>t=>{var{detail:r}=t,a=r&&r.translation?r.translation:tf(0,0);s("rotate".concat(e),ea(ea({},r),{},{translation:a}))},A,L,F,n,(e,t)=>{var{detail:r}=t;return W(e,r)}]}class fo extends lz{constructor(e){super(),lF(this,e,fn,fa,ow,{visible:2,points:13,rotatorPoint:0,enableDragEdges:14,enableDragPoints:15,enableRotatePoints:1},null,[-1,-1])}}var fl=(e,t)=>tz(vd(e),t),fs=e=>document.createTextNode(e),fc=e=>(ie()&&e.endsWith("<div><br></div>")?e.replace(/<div><br><\/div>$/,"<br><br>"):e).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function fd(e){var t,r;return{c(){oq(t=oH("pre"),"class","PinturaContentEditable"),oq(t,"style",r="".concat(e[7],";position:absolute;z-index:-1;pointer-events:none;"))},m(r,a){oj(r,t,a),t.innerHTML=e[0]},p(e,a){1&a[0]&&(t.innerHTML=e[0]),128&a[0]&&r!==(r="".concat(e[7],";position:absolute;z-index:-1;pointer-events:none;"))&&oq(t,"style",r)},d(e){e&&oV(t)}}}function fu(e){var t,r,a,n,o,l,s=e[8]&&fd(e);return{c(){s&&s.c(),t=oX(),oq(r=oH("pre"),"class","PinturaContentEditable"),oq(r,"data-wrap-content",a=e[4]||e[5]?"wrap":"nowrap"),oq(r,"contenteditable",""),oq(r,"spellcheck",e[1]),oq(r,"autocorrect",e[2]),oq(r,"autocapitalize",e[3]),oq(r,"style",n=e[8]?e[15](e[7]):e[7])},m(a,n){s&&s.m(a,n),oj(a,t,n),oj(a,r,n),e[26](r),o||(l=[oY(r,"input",e[13]),oY(r,"compositionend",e[12]),oY(r,"paste",e[14]),oY(r,"keydown",e[10]),oY(r,"keyup",e[11]),oY(r,"blur",e[9])],o=!0)},p(e,o){e[8]?s?s.p(e,o):((s=fd(e)).c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),48&o[0]&&a!==(a=e[4]||e[5]?"wrap":"nowrap")&&oq(r,"data-wrap-content",a),2&o[0]&&oq(r,"spellcheck",e[1]),4&o[0]&&oq(r,"autocorrect",e[2]),8&o[0]&&oq(r,"autocapitalize",e[3]),384&o[0]&&n!==(n=e[8]?e[15](e[7]):e[7])&&oq(r,"style",n)},i:og,o:og,d(a){s&&s.d(a),a&&oV(t),a&&oV(r),e[26](null),o=!1,ox(l)}}}function fh(e,t,r){var a,n,o,l,{spellcheck:s="false"}=t,{autocorrect:c="off"}=t,{autocapitalize:d="off"}=t,{wrapLines:u=!0}=t,{allowNewline:h=!0}=t,{textFormat:p="text"}=t,{formatInput:v=e7}=t,{formatPaste:g=e7}=t,{style:m}=t,{innerHTML:f}=t,{oninput:$=ep}=t,{enableTextStyleShortcuts:y=!1}=t,x=()=>{if(o){var e=document.createRange();e.selectNodeContents(o);var t=I();t.removeAllRanges(),t.addRange(e)}},b=le();document.execCommand("defaultParagraphSeparator",!1,"br");var w=e=>{e!==o.innerHTML&&(r(6,o.innerHTML=e,o),o===document.activeElement&&x())},S=e=>e.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),k=()=>{r(0,f=o.innerHTML);var e=fc(f);b("input",e),$(e),requestAnimationFrame(()=>o&&o.scrollTo(0,0))},C=()=>{L(o);var e="html"===p?o.innerHTML:S(o.innerHTML);r(6,o.innerHTML=v(e),o),F(o),k()},M=()=>{b("confirm")},T=()=>{b("cancel")},P={b:"bold",i:"italic",u:"underline",s:"strikethrough"},R=e=>{var t=P[e];t&&document.execCommand(t)},E=e=>{var t=eb("span");return t.dataset.bookmark=e,t},A=(e,t,r)=>{var a=E(r);if(e.nodeType===Node.TEXT_NODE){var n=e.textContent;if("start"===r){var o=fs(n.substr(0,t)),l=fs(n.substr(t));e.replaceWith(o,a,l)}else{var s=fs(n.substr(0,t)),c=fs(n.substr(t));e.replaceWith(s,a,c)}}else e.nodeType===Node.ELEMENT_NODE&&e.insertBefore(a,e.childNodes[t])},I=()=>{var e=o.getRootNode();return"getSelection"in e?e.getSelection():document.getSelection()},L=e=>{var t=I();if(t.getRangeAt&&t.rangeCount){var r=t.getRangeAt(0),{startOffset:a,endOffset:n,startContainer:o,endContainer:l}=r;if(e.contains(r.startContainer)&&e.contains(r.endContainer)){if(o.nodeType===Node.TEXT_NODE&&o===l){var s=o.textContent,c=s.substr(0,a),d=E("start"),u=n-a>0?s.substr(a,n):"",h=E("end"),p=s.substr(n);o.replaceWith(c,d,u,h,p)}else A(o,a,"start"),A(l,n+(o===l?1:0),"end")}}},F=e=>{var t=z(e,"start"),r=z(e,"end");if(t&&r){var a=document.createRange();a.setStart(t,0),a.setEnd(r,0);var n=I();n.removeAllRanges(),n.addRange(a),t.remove(),r.remove()}},z=(e,t)=>{for(var r=e.children,a=0;a<r.length;a++){var n=r[a];if(n.dataset.bookmark===t)return n;if(n.children.length){var o=z(n,t);if(o)return o}}};return e.$$set=e=>{"spellcheck"in e&&r(1,s=e.spellcheck),"autocorrect"in e&&r(2,c=e.autocorrect),"autocapitalize"in e&&r(3,d=e.autocapitalize),"wrapLines"in e&&r(4,u=e.wrapLines),"allowNewline"in e&&r(5,h=e.allowNewline),"textFormat"in e&&r(16,p=e.textFormat),"formatInput"in e&&r(17,v=e.formatInput),"formatPaste"in e&&r(18,g=e.formatPaste),"style"in e&&r(19,m=e.style),"innerHTML"in e&&r(0,f=e.innerHTML),"oninput"in e&&r(20,$=e.oninput),"enableTextStyleShortcuts"in e&&r(21,y=e.enableTextStyleShortcuts)},e.$$.update=()=>{if(64&e.$$.dirty[0]&&r(25,a=!!o),33554433&e.$$.dirty[0]&&a&&f&&w(f),524336&e.$$.dirty[0]){if(!u&&h){var t=m.includes(":right")?"text-indent:-100px!important":m.includes(":center")?"":"min-width:calc(100% + 100px)!important";r(7,l=m+";overflow:visible;"+t)}else r(7,l=m)}524288&e.$$.dirty[0]&&r(8,n=m.includes("text-stroke"))},[f,s,c,d,u,h,o,l,n,()=>{b("blur")},e=>{if(/escape/i.test(e.code))return e.stopPropagation(),T();var t=e.ctrlKey||e.metaKey;if("html"===p&&t&&/b|i|u|s/.test(e.key)){y&&R(e.key),e.preventDefault();return}if(/enter/i.test(e.code)&&(e.stopPropagation(),!e.isComposing)){if(t)return M();h||e.preventDefault(),document.execCommand("insertLineBreak"),e.preventDefault()}},()=>{},e=>{""!==e.data&&C()},e=>{var{inputType:t}=e;"insertCompositionText"!==t&&"deleteCompositionText"!==t&&C()},e=>{e.preventDefault();var t=e.clipboardData.getData("text/plain"),r="html"===p?t:S(t),a=g(r);if(a.length){var n=I().getRangeAt(0);n.deleteContents(),n.insertNode(document.createTextNode(a)),k()}},e=>e.replace("-webkit-text-stroke","--text-stroke").replace("text-shadow","--text-shadow"),p,v,g,m,$,y,()=>C(),()=>o&&o.focus(),x,a,function(e){ln[e?"unshift":"push"](()=>{r(6,o=e)})}]}class fp extends lz{constructor(e){super(),lF(this,e,fh,fu,ow,{spellcheck:1,autocorrect:2,autocapitalize:3,wrapLines:4,allowNewline:5,textFormat:16,formatInput:17,formatPaste:18,style:19,innerHTML:0,oninput:20,enableTextStyleShortcuts:21,confirm:22,focus:23,select:24},null,[-1,-1])}get spellcheck(){return this.$$.ctx[1]}set spellcheck(e){this.$$set({spellcheck:e}),lg()}get autocorrect(){return this.$$.ctx[2]}set autocorrect(e){this.$$set({autocorrect:e}),lg()}get autocapitalize(){return this.$$.ctx[3]}set autocapitalize(e){this.$$set({autocapitalize:e}),lg()}get wrapLines(){return this.$$.ctx[4]}set wrapLines(e){this.$$set({wrapLines:e}),lg()}get allowNewline(){return this.$$.ctx[5]}set allowNewline(e){this.$$set({allowNewline:e}),lg()}get textFormat(){return this.$$.ctx[16]}set textFormat(e){this.$$set({textFormat:e}),lg()}get formatInput(){return this.$$.ctx[17]}set formatInput(e){this.$$set({formatInput:e}),lg()}get formatPaste(){return this.$$.ctx[18]}set formatPaste(e){this.$$set({formatPaste:e}),lg()}get style(){return this.$$.ctx[19]}set style(e){this.$$set({style:e}),lg()}get innerHTML(){return this.$$.ctx[0]}set innerHTML(e){this.$$set({innerHTML:e}),lg()}get oninput(){return this.$$.ctx[20]}set oninput(e){this.$$set({oninput:e}),lg()}get enableTextStyleShortcuts(){return this.$$.ctx[21]}set enableTextStyleShortcuts(e){this.$$set({enableTextStyleShortcuts:e}),lg()}get confirm(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}get select(){return this.$$.ctx[24]}}var fv=["i","b","u","strike"].map(e=>({tag:e,tagOpen:RegExp("<".concat(e,">"),"g"),tagClose:RegExp("</".concat(e,">"),"g"),placeholderOpen:RegExp("___".concat(e,"O___"),"g"),placeholderClose:RegExp("___".concat(e,"C___"),"g")})),fg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fv;return t.forEach(t=>{var{tag:r,tagOpen:a,tagClose:n}=t;e=e.replace(a,"___".concat(r,"O___")).replace(n,"___".concat(r,"C___"))}),e},fm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fv;return t.forEach(t=>{var{tag:r,placeholderOpen:a,placeholderClose:n}=t;e=e.replace(a,"<".concat(r,">")).replace(n,"</".concat(r,">"))}),e},ff=e=>e=fm(e=(e=fg(e)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split("\n").join("<br>")),f$=e=>fc(e).split(/<br>|<br\/>/g).join("\n").replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&amp;/g,"&"),fy=(e,t)=>ez(e)?parseFloat(e)/100*t:e,fx=(e,t)=>({x:i3(e.x,t.width),y:i3(e.y,t.height)});function fb(e,t,r){var a=e.slice();return a[276]=t[r],a[278]=r,a}function fw(e,t){var r,a,n,o,l,s,c,d,u,h,p,v=t[276].name+"";function g(){return t[180](t[278])}return n=new pn({props:{color:t[276].color}}),{key:e,first:null,c(){r=oH("li"),a=oH("button"),lA(n.$$.fragment),o=oX(),l=oH("span"),s=oG(v),d=oX(),oq(a,"class","PinturaShapeListItem"),oq(a,"type","button"),oq(a,"aria-label",c="Select shape "+t[276].name),this.first=r},m(e,t){oj(e,r,t),oN(r,a),lI(n,a,null),oN(a,o),oN(a,l),oN(l,s),oN(r,d),u=!0,h||(p=oY(a,"click",g),h=!0)},p(e,r){t=e;var o={};1048576&r[0]&&(o.color=t[276].color),n.$set(o),(!u||1048576&r[0])&&v!==(v=t[276].name+"")&&oQ(s,v),(!u||1048576&r[0]&&c!==(c="Select shape "+t[276].name))&&oq(a,"aria-label",c)},i(e){u||(lx(n.$$.fragment,e),u=!0)},o(e){lb(n.$$.fragment,e),u=!1},d(e){e&&oV(r),lL(n),h=!1,p()}}}function fS(e){var t,r;return(t=new fo({props:{visible:!0,points:e[12],rotatorPoint:e[26],enableDragEdges:e[16],enableDragPoints:e[28],enableRotatePoints:e[14]}})).$on("resizestart",e[37]),t.$on("resizemove",e[38]),t.$on("resizeend",e[39]),t.$on("rotatestart",e[40]),t.$on("rotatemove",e[41]),t.$on("rotateend",e[42]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};4096&r[0]&&(a.points=e[12]),67108864&r[0]&&(a.rotatorPoint=e[26]),65536&r[0]&&(a.enableDragEdges=e[16]),268435456&r[0]&&(a.enableDragPoints=e[28]),16384&r[0]&&(a.enableRotatePoints=e[14]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function fk(e){var t,r,a,n,o=[fM,fC],l=[];function s(e,t){return"modal"===e[4]?0:"inline"===e[4]?1:-1}return~(t=s(e))&&(r=l[t]=o[t](e)),{c(){r&&r.c(),a=oZ()},m(e,r){~t&&l[t].m(e,r),oj(e,a,r),n=!0},p(e,n){var c=t;(t=s(e))===c?~t&&l[t].p(e,n):(r&&(l$(),lb(l[c],1,1,()=>{l[c]=null}),ly()),~t?((r=l[t])?r.p(e,n):(r=l[t]=o[t](e)).c(),lx(r,1),r.m(a.parentNode,a)):r=null)},i(e){n||(lx(r),n=!0)},o(e){lb(r),n=!1},d(e){~t&&l[t].d(e),e&&oV(a)}}}function fC(e){var t,r,a,n,o,l={formatInput:e[44],wrapLines:!!e[13].width,textFormat:e[13].format,enableTextStyleShortcuts:e[5],allowNewline:e[27],style:e[25]};return r=new fp({props:l}),e[183](r),r.$on("input",e[45]),r.$on("keyup",e[48]),r.$on("cancel",e[50]),r.$on("confirm",e[49]),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"class","PinturaInlineInput"),oq(t,"style",e[24])},m(l,s){oj(l,t,s),lI(r,t,null),a=!0,n||(o=oY(t,"focusout",e[184]),n=!0)},p(e,n){var o={};8192&n[0]&&(o.wrapLines=!!e[13].width),8192&n[0]&&(o.textFormat=e[13].format),32&n[0]&&(o.enableTextStyleShortcuts=e[5]),134217728&n[0]&&(o.allowNewline=e[27]),33554432&n[0]&&(o.style=e[25]),r.$set(o),(!a||16777216&n[0])&&oq(t,"style",e[24])},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(a){a&&oV(t),e[183](null),lL(r),n=!1,o()}}}function fM(e){var t,r;return t=new pV({props:{panelOffset:e[2],onconfirm:e[49],oncancel:e[50],buttonCancel:{icon:e[6].shapeIconInputCancel,label:e[6].shapeLabelInputCancel},buttonConfirm:{icon:e[6].shapeLabelInputConfirm,label:e[6].shapeIconInputConfirm,hideLabel:!0},$$slots:{default:[fT]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};4&r[0]&&(a.panelOffset=e[2]),64&r[0]&&(a.buttonCancel={icon:e[6].shapeIconInputCancel,label:e[6].shapeLabelInputCancel}),64&r[0]&&(a.buttonConfirm={icon:e[6].shapeLabelInputConfirm,label:e[6].shapeIconInputConfirm,hideLabel:!0}),41943296&r[0]|1&r[9]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function fT(e){var t,r,a;return{c(){oq(t=oH("textarea"),"spellcheck","false"),oq(t,"autocorrect","off"),oq(t,"autocapitalize","off"),oq(t,"style",e[25])},m(n,o){oj(n,t,o),e[181](t),o1(t,e[23]),r||(a=[oY(t,"keydown",e[47]),oY(t,"keypress",e[46]),oY(t,"keyup",e[48]),oY(t,"input",e[45]),oY(t,"input",e[182])],r=!0)},p(e,r){33554432&r[0]&&oq(t,"style",e[25]),8388608&r[0]&&o1(t,e[23])},d(n){n&&oV(t),e[181](null),r=!1,ox(a)}}}function fP(e){var t,r,a,n,o;return r=new pF({props:{items:e[21],key:e[10]}}),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"class","PinturaShapeControls"),oq(t,"style",e[22])},m(l,s){oj(l,t,s),lI(r,t,null),a=!0,n||(o=[oY(t,"measure",e[185]),oF(dr.call(null,t))],n=!0)},p(e,n){var o={};2097152&n[0]&&(o.items=e[21]),1024&n[0]&&(o.key=e[10]),r.$set(o),(!a||4194304&n[0])&&oq(t,"style",e[22])},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r),n=!1,ox(o)}}}function fR(e){for(var t,r,a,n,o,l,s,c,d,u,h=[],p=new Map,v=e[20],g=e=>e[276].id,m=0;m<v.length;m+=1){var f=fb(e,v,m),$=g(f);p.set($,h[m]=fw($,f))}var y=e[15]&&fS(e),x=e[11]&&fk(e),b=e[17]>0&&fP(e);return{c(){t=oH("div"),r=oH("nav"),a=oH("ul");for(var s=0;s<h.length;s+=1)h[s].c();n=oX(),y&&y.c(),o=oX(),x&&x.c(),l=oX(),b&&b.c(),oq(r,"class","PinturaShapeList"),oq(r,"data-visible",e[18]),oq(t,"class","PinturaShapeEditor"),oq(t,"tabindex","0")},m(p,v){oj(p,t,v),oN(t,r),oN(r,a);for(var g=0;g<h.length;g+=1)h[g].m(a,null);oN(t,n),y&&y.m(t,null),oN(t,o),x&&x.m(t,null),oN(t,l),b&&b.m(t,null),e[186](t),c=!0,d||(u=[oY(r,"focusin",e[53]),oY(r,"focusout",e[54]),oY(t,"keydown",function(){ob(e[0]?ep:e[43])&&(e[0]?ep:e[43]).apply(this,arguments)}),oY(t,"nudge",function(){ob(e[0]?ep:e[52])&&(e[0]?ep:e[52]).apply(this,arguments)}),oY(t,"measure",e[179]),oY(t,"pointermove",function(){ob(e[0]?ep:e[55])&&(e[0]?ep:e[55]).apply(this,arguments)}),oY(t,"pointerleave",function(){ob(e[0]?ep:e[56])&&(e[0]?ep:e[56]).apply(this,arguments)}),oY(t,"interactionstart",function(){ob(e[0]?ep:e[31])&&(e[0]?ep:e[31]).apply(this,arguments)}),oY(t,"interactionupdate",function(){ob(e[0]?ep:e[33])&&(e[0]?ep:e[33]).apply(this,arguments)}),oY(t,"interactioncancel",function(){ob(e[0]?ep:e[32])&&(e[0]?ep:e[32]).apply(this,arguments)}),oY(t,"interactionrelease",function(){ob(e[0]?ep:e[34])&&(e[0]?ep:e[34]).apply(this,arguments)}),oY(t,"interactionend",function(){ob(e[0]?ep:e[35])&&(e[0]?ep:e[35]).apply(this,arguments)}),oF(dr.call(null,t)),oF(d6.call(null,t)),oF(s=d3.call(null,t,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:fA,getEventPosition:e[187]}))],d=!0)},p(n,d){e=n,1048706&d[0]&&(v=e[20],l$(),h=lT(h,d,g,1,e,v,p,a,lM,fw,null,fb),ly()),(!c||262144&d[0])&&oq(r,"data-visible",e[18]),e[15]?y?(y.p(e,d),32768&d[0]&&lx(y,1)):((y=fS(e)).c(),lx(y,1),y.m(t,o)):y&&(l$(),lb(y,1,1,()=>{y=null}),ly()),e[11]?x?(x.p(e,d),2048&d[0]&&lx(x,1)):((x=fk(e)).c(),lx(x,1),x.m(t,l)):x&&(l$(),lb(x,1,1,()=>{x=null}),ly()),e[17]>0?b?(b.p(e,d),131072&d[0]&&lx(b,1)):((b=fP(e)).c(),lx(b,1),b.m(t,null)):b&&(l$(),lb(b,1,1,()=>{b=null}),ly()),s&&ob(s.update)&&8&d[0]&&s.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:fA,getEventPosition:e[187]})},i(e){if(!c){for(var t=0;t<v.length;t+=1)lx(h[t]);lx(y),lx(x),lx(b),c=!0}},o(e){for(var t=0;t<h.length;t+=1)lb(h[t]);lb(y),lb(x),lb(b),c=!1},d(r){r&&oV(t);for(var a=0;a<h.length;a+=1)h[a].d();y&&y.d(),x&&x.d(),b&&b.d(),e[186](null),d=!1,ox(u)}}}var fE="markup-hover",fA=(e,t)=>e.target===t;function fI(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,b,w,S,k,C,M,T,P,R,E,A,I,L,F,z,O,B,D,_,N,W,j,V,H,U,G,X,Z,Y,q,K,J,Q,et,ei,en,eo,el,es,ec,ed,eu,eh=og,ev=()=>(eh(),eh=oS(e$,e=>r(175,eu=e)),e$);e.$$.on_destroy.push(()=>eh());var{uid:eg=eV()}=t,{ui:em}=t,{disabled:ef=!1}=t,{shapes:e$}=t;ev();var{selection:ey}=t,{offset:ex}=t,{contextRotation:eb=0}=t,{contextFlipX:ew=!1}=t,{contextFlipY:eS=!1}=t,{contextZoom:ek=1}=t,{active:eC=!1}=t,{opacity:eM=1}=t,{parentRect:eT}=t,{rootRect:eP}=t,{utilRect:eR}=t,{hoverColor:eE}=t,{caretColor:eA}=t,{gridColor:eI}=t,{snapColor:eL}=t,{textInputMode:eF="inline"}=t,{oninteractionstart:eO=ep}=t,{oninteractionupdate:eB=ep}=t,{oninteractionrelease:eD=ep}=t,{oninteractionend:e_=ep}=t,{oninteractioncancel:eN=ep}=t,{onaddshape:eW=ep}=t,{onupdateshape:ej=ep}=t,{onselectshape:eH=ep}=t,{onblurshape:eU=ep}=t,{onremoveshape:eG=ep}=t,{ontapshape:eX=ep}=t,{onhovershape:eZ=ep}=t,{onhovercanvas:eY=ep}=t,{ontapcanvas:eq=ep}=t,{onleavecanvas:eK=ep}=t,{beforeSelectShape:eJ=()=>!0}=t,{beforeDeselectShape:eQ=()=>!0}=t,{beforeRemoveShape:e1=()=>!0}=t,{beforeUpdateShape:e0=(e,t)=>t}=t,{willRenderShapeControls:e2=e7}=t,{willRenderShapeTextControls:e4=e7}=t,{willStartInteraction:e5=(e,t)=>!0}=t,{mapEditorPointToImagePoint:e3}=t,{mapImagePointToEditorPoint:e6}=t,{eraseRadius:e8}=t,{selectRadius:e9}=t,{enableButtonFlipVertical:te=!1}=t,{enableTapToAddText:tt=!0}=t,{enableTextStyleControls:tr=!0}=t,{locale:ti}=t,{snapThreshold:ta=0}=t,{snapPointer:tn=!0}=t,{enableSnapToContext:to=!0}=t,{gridSize:tl=0}=t,ts=e=>{var t;return 0===ta?[]:(to&&(t=ea(ea({},eT),{},{x:0,y:0})),[...eu.filter(t=>t!==e).filter(e=>!a4(e)).map(e=>nN(ea({},e),eT)),t].filter(Boolean))},tc=(e,t,r,a)=>0===e?{snapTargets:[]}:{snapThreshold:e,gridSize:t,gridRect:r,snapTargets:ts(a)},td=lr("isAnimated");oC(e,td,e=>r(176,n=e));var tu=e=>e.set(ok(e)),th=e=>ok(e).find(a4),tv=(e,t)=>{if(!th(t))return ni(e),tb(e,t)},t$=e=>{th(e)&&e.update(e=>e.filter(e=>!a4(e)))},ty=e=>{var t=th(e);if(t)return na(t),tu(e),t},tx=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>ea(ea({},e),t);th(t)&&t.update(t=>t.map(t=>a4(t)?r(t,e):t))},tb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e$;return t.update(t=>[...t,e]),e},tS=(e,t,r)=>{var a=e0(ea({},e),t,ea({},r));return nU(e,a,r),e},tk=(e,t)=>{var r=tW(e,t),a=tE(e,t),n=Math.PI/8,o=n*Math.round(a/n)-eb%n;t.x=e.x+r*Math.cos(o),t.y=e.y+r*Math.sin(o)},tC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(aZ(e))return rR(e,e.rotation,rm(e));if(aU(e)){var r=rM(e);return rR(r,e.rotation,rm(r))}return aY(e)?rY(tf(e.x,e.y),e.rx,e.ry,e.rotation,e.flipX,e.flipY,t):[]},tT=lr("keysPressed");oC(e,tT,e=>r(177,o=e));var tR=(e,t,r)=>0===e||t&&r?e:t||r?-e:e,tL=e=>{if(null===e.x&&null===e.y)return tO();e.x&&r(138,tD=e3({x:e.x,y:0}).x),e.y&&r(139,t_=e3({x:0,y:e.y}).y)},tO=()=>{r(138,tD=null),r(139,t_=null)},tD=null,t_=null,tj=(e,t)=>{var r=e6(e);return e3(tF(r,t))},tG=(e,t,r)=>Array.from({length:(r-t)/e+1},(r,a)=>t+a*e),tX=e=>{var t=[],r=[],a=e.points;if(void 0!==e.x1&&(a=[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}]),a){var n=a.map(e6),o=rh(n),l=n[0],s=n[n.length-1];t=[o.x,o.x+.5*o.width,o.x+o.width,l.x,s.x],r=[o.y,o.y+.5*o.height,o.y+o.height,l.y,s.y]}else if(e.text||void 0!==e.width||void 0!==e.rx){if(e.text&&void 0===e.height){var c,d=af(e.text,e);c=rg(e.x,e.y,d.width,d.height)}else c=void 0!==e.width?ru(e):ru({x:e.x-e.rx,y:e.y-e.ry,width:2*e.rx,height:2*e.ry});var u=rB(c).map(e6),h=rh(Math.abs(e.rotation)>0?rR(c,e.rotation).map(e6):u),p=rm(h),v=h.width,g=h.height,m=.5*v,f=.5*g;t=[p.x-m,p.x,p.x+m],r=[p.y-f,p.y,p.y+f]}else if(void 0!==e.x){var $=e6(e);t=[$.x],r=[$.y]}return{x:t,y:r}},tY=(e,t,r)=>{for(var a,n,o,l=Number.Infinity,s=null,c=null,d=0;d<e.length;d++){n=e[d];for(var u=0;u<t.length;u++)(a=Math.abs(n-(o=t[u])))<r&&(null===c||a<l)&&(l=a,s=n,c=o)}return{origin:s,target:c}},tq=(e,t,r)=>{var a={x:null,y:null},n={x:null,y:null},o=tY(e.x,t.x,r);null!==o.target&&(a.x=o.target,n.x=o.target-o.origin);var l=tY(e.y,t.y,r);return null!==l.target&&(a.y=l.target,n.y=l.target-l.origin),{snapTranslation:n,snapLine:a}},tK=(e,t,r,a,n)=>{var o={x:null,y:null},l={x:null,y:null},s=t.map(tX);if(a>0){var c=e6({x:0,y:0}),d=e6({x:a,y:a}),u=e6({x:n.width,y:n.height}),h=d.x-c.x,p=tG(h,c.x,u.x),v=tG(h,c.y,u.y);s.push({x:p,y:v})}return s.forEach(t=>{var{snapTranslation:a,snapLine:n}=tq(e,t,r);null!==a.x&&(null===l.x||Math.abs(a.x)<Math.abs(l.x))&&(l.x=a.x||0,o.x=n.x),null!==a.y&&(null===l.y||Math.abs(a.y)<Math.abs(l.y))&&(l.y=a.y||0,o.y=n.y)}),{snapTranslation:l,snapLines:o}},tJ=(e,t)=>(null!==t.x&&(e.x+=t.x),null!==t.y&&(e.y+=t.y),e),t1=(e,t,r,a)=>{var{snapThreshold:n=0,gridSize:o=0,gridRect:l,snapTargets:s=[]}=a||{},c=null;if(aq(e)){if(n){var d=nN(ea({},e),eT),u=tj(aV(t),r),h=tj(aH(t),r),{snapTranslation:p,snapLines:v}=tK(tX(ea(ea({},d),{},{x1:u.x,y1:u.y,x2:h.x,y2:h.y})),s,n,o,l);tJ(r,p),tL(v)}var g=tj(aV(t),r),m=tj(aH(t),r);c={x1:g.x,y1:g.y,x2:m.x,y2:m.y}}else if(e.points){if(n){var f=nN(ea({},e),eT),{snapTranslation:$,snapLines:y}=tK(tX(ea(ea({},f),{},{points:t.points.map(e=>tj(e,r))})),s,n,o,l);tJ(r,$),tL(y)}c={points:t.points.map(e=>tj(e,r))}}else if(aZ(e)||aU(e)||aY(e)){if(n){var x=nN(ea({},e),eT),b=tj(t,r),{snapTranslation:w,snapLines:S}=tK(tX(ea(ea({},x),b)),s,n,o,l);tJ(r,w),tL(S)}c=tj(t,r)}c&&(tS(e,c,eT),rr())},t0={0:1,1:0,2:3,3:2},t2={0:3,1:2,2:1,3:0},t4=(e,t,r,a,n)=>{var{snapThreshold:l=0,gridSize:s=0,gridRect:c,snapTargets:d=[]}=n||{},u=l?(e,t,r)=>{var{snapTranslation:a,snapLines:n}=tK(tX(e),d,l,s,c);tJ(t,a),tL(n);var o=tj(r(),t);e.x=o.x,e.y=o.y}:ep;if(aq(e)||aK(e)&&iZ(e,"pathClose")){var h,p,v,[g]=r,m=o.includes(16)?tk:(e,t)=>t;if(aq(e))0===g?(h=()=>aV(t),p=e=>m(aH(t),e),v=(e,t)=>{e.x1=t.x,e.y1=t.y}):1===g&&(h=()=>aH(t),p=e=>m(aV(t),e),v=(e,t)=>{e.x2=t.x,e.y2=t.y});else{var f=t.points;h=()=>ea({},f[g]),p=e=>{var t=f[m9(g-1,f)],r=f[m9(g+1,f)];m(t,e),m(r,e)},v=(e,t)=>e.points[g]=t}var $=tj(h(),a);u($,a,h),p($),v(e,$)}else if(a5(e)||aY(e)||aX(e)){var y=!1;if(aY(e))M=rp(t);else if(a5(e))M=ru(t);else{y=!0,M=ru(t);var x=af(t.text,t);M.height=x.height}e.aspectRatio?T=e.aspectRatio:n.shiftKey&&!y&&(T=M.width/M.height);var b=ru(M),w=rm(b),S=e.rotation,k=rB(b),C=rR(b,S);if(1===r.length){var M,T,P,R=r[0];e.flipX&&(R=t0[R]),e.flipY&&(R=t2[R]);var[E,A,I,L]=k,F=e6(C[R]),z=tF(ea({},F),a),O=e3(z);u(O,a,()=>e3(F));var B=tM(tw(tf(O.x-C[R].x,O.y-C[R].y)),-S),D=tf(k[R].x+B.x,k[R].y+B.y);0===R&&(P=I),1===R&&(P=L),2===R&&(P=E),3===R&&(P=A);var _=rh([P,D]);if(T){var{width:N,height:W}=rz(_,T),[j,V,H,U]=rO(_);_.width=N,_.height=W,D.y<P.y&&(_.y=H-W),D.x<P.x&&(_.x=V-N)}var G=rR(_,S,w),X=tV(G),Z=rh([tM(G[0],-S,X),tM(G[2],-S,X)]);tS(e,aY(e)?tg(Z):Z,eT)}else{var Y,[q,K]=(r=r.map(t=>(e.flipX&&(t=t0[t]),e.flipY&&(t=t2[t]),t))).map(e=>C[e]),J={x:q.x+(K.x-q.x)*.5,y:q.y+(K.y-q.y)*.5},[Q,ee]=r.map(e=>k[e]),[et,er]=r.map(e=>{var t=e+2;return t<4?k[t]:k[t-4]}),ei={x:et.x+(er.x-et.x)*.5,y:et.y+(er.y-et.y)*.5},en=e6(J),eo=tF(ea({},en),a),el=e3(eo);u(el,a,()=>e3(en));var es=tM(tw(tf(el.x-J.x,el.y-J.y)),-S),ec=tI(tz(tw(Q),ee),e=>1-Math.abs(Math.sign(e))),ed=tf(es.x*ec.x,es.y*ec.y);tF(Q,ed),tF(ee,ed);var eu=rh(k);if(T){var eh=eu.width,ev=eu.height;0===ec.y?ev=eh/T:eh=ev*T,eu.width=eh,eu.height=ev,0===ec.y?eu.y=ei.y-.5*ev:eu.x=ei.x-.5*eh}var eg=rR(eu,S,w),em=tV(eg),ef=rh([tM(eg[0],-S,em),tM(eg[2],-S,em)]);aY(e)?Y=tg(ef):a5(e)?Y=ef:y&&(Y={x:ef.x,y:ef.y,width:ef.width}),tS(e,Y,eT)}}rr()},t5=(e,t,r,a)=>{var n=rm(rM(nN(aD(e),eT))),o=tE(tj(s,r),n)+Math.PI/2;if(a.shiftKey){var l=Math.PI/16;o=l*Math.round(o/l)-eb%l}tS(e,{rotation:o},eT),rr()},t3=()=>{if(eu.length)return eu.find(a4)},t8=()=>{if(eu.length)return eu.findIndex(a4)},t7=()=>{var e=t3();if(e)return na(e),rr(),e},re=()=>{if(t3()){var e=[...eu];e.splice(t8(),1),e$.set(e)}},rr=()=>{e$.set(eu)},ra=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];t.filter(Boolean).forEach(t=>delete e[t]),r&&rr()},rn=function(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];e=Object.assign(e,t),r&&rr()},ro=function(e,t,r){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];e[t]=r,a&&rr()},rl=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];eu.forEach(t=>rn(t,e,!1)),t&&rr()},rs=()=>[...eu].reverse().find(a0),rc=()=>!!rs(),rd=e=>{if(!e1(e))return!1;e$.set(eu.filter(t=>t!==e)),eG(e)},rv=()=>{var e=rs();if(e){var t=eu.filter(e=>nl(e)&&no(e)),r=t.findIndex(t=>t===e);if(!1!==rd(e)){if(rf=e,t.length-1<=0)return r$();var a=r-1<0?t.length-1:r-1;rx(t[a])}}},rf=void 0,r$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{storePrevious:t=!0}=e;Object.keys(iE).forEach(e=>iE[e]={});var r=ry();t&&(rf=r),rl({isSelected:!1,isEditing:!1,_prerender:!1}),r&&eU(r)},ry=()=>eu.find(a0),rx=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!a4(e)){var r=ry()||rf,a=a0(e);rf=void 0,eJ(r,e)&&(r$(),nr(e),a||eH(e),t&&rr())}},rb=e=>{d&&d.confirm&&e.isEditing&&d.confirm(),rn(e,{isSelected:!1,isEditing:!1,_prerender:!1}),eU(e)},rw=e=>{rn(e,{isSelected:!0,isEditing:!0,_prerender:"inline"===eF})},rS=e=>{rn(e,{isSelected:!0,isEditing:!1,_prerender:!1})},rk=e=>{if(!e.length)return[];var t=e.filter(e1);return e$.set(eu.filter(e=>!t.includes(e))),t},rC=e=>{var t=af(e.text,e);return rg(e.x,e.y,e.width?Math.min(e.width,t.width):t.width,e.height?Math.min(e.height,t.height):t.height)},rM=e=>{if(a5(e))return ru(e);if(aY(e))return rp(e);var t=rC(e);return t.width=Math.max(10,e.width||t.width),t},rT=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0;return[...e].reverse().filter(a).map(e=>({shape:e,priority:1})).filter(e=>{var{shape:a}=e,n=nN(aD(a),eT),o=r+.5*(n.strokeWidth||0);if(aZ(n))return r1(t,o,n,a.rotation);if(aU(n)){var l=rM(n),s=r1(t,o,l,a.rotation);if(s&&!a0(a)){var c=rC(n);"right"!==a.textAlign||a.flipX||(c.x=l.x+l.width-c.width),"center"===a.textAlign&&(c.x=l.x+.5*l.width-.5*c.width),r1(t,o,c,a.rotation,rm(l))||(e.priority=-1)}return s}return aY(n)?rQ(t,o,n,a.rotation,a.flipX,a.flipY):aq(n)?rq(t,Math.max(16,o),aV(n),aH(n)):aK(n)&&n.pathClose?rJ(t,o,n.points):!!aK(n)&&(1===n.points.length?tN(t,n.points[0])<o*o:rK(t,Math.max(16,o),n.points))}).sort((e,t)=>e.priority<t.priority?1:e.priority>t.priority?-1:0).map(e=>e.shape)},rP=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=Math.abs(a),o=rt(t9(t,r),n),l=ri(o,n);return e.filter(e=>{var t=nN(aD(e),eT);return aq(t)||aK(t)?!!rH(o,t.points?[...t.points]:[aV(t),aH(t)]):rG(l,tC(t))})},rE=void 0,rA=void 0,rI=void 0,rL=void 0,rF=void 0,rD=void 0,r_=!1,rN=!1,rW=!1,rj=()=>{clearTimeout(rA),rA=void 0,r(141,rW=!1),tO()},rV=null,rU=e=>{var t=iG(e.rotation)&&0!==e.rotation;if(aZ(e)){if(e.width<1&&e.height<1)return;var r=rm(e),a=rB(e);return(e.flipX||e.flipY)&&tH(a,e.flipX,e.flipY,r.x,r.y),t?tU(a,e.rotation,r.x,r.y):a}if(aY(e)){if(e.rx<1&&e.ry<1)return;var n=rB(rp(e));return(e.flipX||e.flipY)&&tH(n,e.flipX,e.flipY,e.x,e.y),t?tU(n,e.rotation,e.x,e.y):n}if(aq(e))return[aV(e),aH(e)];if(aK(e)){if(e.bitmap&&!e.pathClose){var o=rh(e.points);return o.x-=.5*e.strokeWidth,o.y-=.5*e.strokeWidth,o.width+=e.strokeWidth,o.height+=e.strokeWidth,rU(ea(ea({},e),o))}return[...e.points]}if(aU(e)){if(e.width<5&&e.height<5)return;var l=rM(e);l.width=Math.max(10,l.width);var s=rm(l),c=rB(l);return(e.flipX||e.flipY)&&tH(c,e.flipX,e.flipY,s.x,s.y),t?tU(c,e.rotation,s.x,s.y):c}return[]},rX=e=>{var t,r,a=rU(e);return e.flipY?(t=tV([a[0],a[1]]),r=tP(tf(a[1].x-a[2].x,a[1].y-a[2].y))):(t=tV([a[2],a[3]]),r=tP(tf(a[2].x-a[1].x,a[2].y-a[1].y))),tB(r,20/ek),{origin:t,dir:r}},rZ=e=>{var t=rX(e),r=e6({x:t.origin.x+t.dir.x,y:t.origin.y+t.dir.y});return{origin:e6(t.origin),position:r}},r0=e=>t=>!e(t),r2=e=>t=>t.id===e,r4=e=>{var t=r2(e);return e=>e.filter(r0(t))},r5=e=>{var t=r2(e),r=r4(e);return()=>em.update(e=>e.some(t)?r(e):e)},r3=e=>{var t=r4(e);return function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];em.update(e=>[...t(e),...r.filter(Boolean)])}},r6=r5(fE),r8=r3(fE),r7=e=>{var t=rU(nN(aD(e),eT));if(t){var r=t.map(e6),a=!!e.pathClose||!(!e.bitmap&&(aK(e)||aq(e))),n="hook"===e.selectionStyle;r8(...n?r.map((e,t,r)=>({id:fE,points:ie(r,t),strokeColor:[0,0,0,.1],strokeWidth:2})):[{id:fE,points:r.map(e=>tf(e.x+1,e.y+1)),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:a}],...n?r.map((e,t,r)=>({id:fE,points:ie(r,t),strokeColor:eE,strokeWidth:2})):[{id:fE,points:r,strokeColor:eE,strokeWidth:2,pathClose:a}])}},r9="markup-manipulator-segment-"+eg,ie=(e,t)=>{var r=e[t],a=t-1<0?e[e.length-1]:e[t-1],n=t+1<e.length?e[t+1]:e[0],o=tz(tw(a),r);tP(o);var l=tF(tB(o,10),r),s=tz(tw(n),r);tP(s);var c=tF(tB(s,10),r);return[l,r,c]},it=r5(r9),ir=r3(r9),ii=(e,t,r)=>{if(no(t)){var a=aK(t),n=a&&iZ(t,"pathClose"),l=n&&nt(t),s=a4(t),c=aQ(t),d="hook"===t.selectionStyle,{selectionOpacity:u=1}=t;if(!s||!a||n){var h=[],p=[...M],v=p[p.length-1],g=p[0],m=(c?.05:.1)*e*u,f=m>0,$=(c?.5:1)*e*u,y=$>0,b=[0,0,0],w=[1,1,1],S=c?1:1.5;o.includes(16)&&v&&r&&tk(v,r);var k=p.length&&n&&s&&r?tN(g,r):1/0,C=p.length&&n&&s&&r?tN(v,r):1/0,T=k<=256,P=C<=256;!T&&r&&p.push(r);var E=p.length>1,A=!!t.pathClose||!(!t.bitmap&&(aK(t)||aq(t)))||p.length>2&&T;E&&f&&(d?h.push(...p.map((e,t,r)=>({id:r9,points:ie(r,t),strokeColor:b,strokeWidth:2,opacity:m}))):h.push({id:r9,points:p.map(e=>tf(e.x+1,e.y+1)),pathClose:A,strokeColor:b,strokeWidth:2,opacity:m})),n&&f&&h.push(...p.map(e=>ea(ea({id:r9},e),{},{rx:2*S,ry:2*S,backgroundColor:b,opacity:m}))),R&&f&&h.push({id:r9,points:[tf(R.origin.x+1,R.origin.y+1),tf(R.position.x+1,R.position.y+1)],strokeColor:b,strokeWidth:2,opacity:m}),E&&y&&(d?h.push(...p.map((e,t,r)=>({id:r9,points:ie(r,t),strokeColor:w,strokeWidth:S,opacity:$}))):h.push({id:r9,points:p,pathClose:A,strokeColor:w,strokeWidth:S,backgroundColor:s&&n&&t.backgroundColor&&t.backgroundColor[3]>0?t.backgroundColor:[0,0,0,0],opacity:$})),n&&h.push(...p.map(e=>ea(ea({id:r9},e),{},{rx:3*S,ry:3*S,backgroundColor:[.5,.5,.5],strokeWidth:S,strokeColor:w}))),n&&s&&M.length>=3&&h.push(ea(ea({},g),{},{id:r9,rx:S*(T?5:4),ry:S*(T?5:4),backgroundColor:T?eE:[.5,.5,.5],strokeWidth:S,strokeColor:w})),n&&s&&l&&!T&&x.length>=2&&h.push(ea(ea({},v),{},{id:r9,rx:S*(P?5:4),ry:S*(P?5:4),backgroundColor:P?eE:[.5,.5,.5],strokeWidth:S,strokeColor:w})),R&&y&&!d&&h.push({id:r9,points:[{x:R.origin.x,y:R.origin.y},{x:R.position.x,y:R.position.y}],strokeColor:w,strokeWidth:S,opacity:$}),ir(...h)}}},ia=(e,t)=>{if(ta<=0)return e;if(t)return tO(),e;var r=e3(e),a=ts(),{snapTranslation:n,snapLines:o}=tK(tX(r),a,ta,tl,p);return tL(o),tJ(e,n),e},io=cJ(0);oC(e,io,e=>r(178,l=e));var il="markup-grid-line-".concat(eg),is=r5(il),ic=r3(il),id=(e,t,r,a)=>{var n=e6({x:0,y:0}),o=e6({x:e,y:e}),l=e6({x:t.width,y:t.height}),s=o.x-n.x;if(io.set(s>6?1:0),a<=0)return is();var c=tG(s,n.x,l.x).map(e=>({id:il,opacity:a,points:[{x:e,y:n.y},{x:e,y:l.y}],strokeWidth:1,strokeColor:r}));ic(...tG(s,n.y,l.y).map(e=>({id:il,opacity:a,points:[{x:n.x,y:e},{x:l.x,y:e}],strokeWidth:1,strokeColor:r})),...c)},iu="markup-snap-line",ih=r5(iu),ip=r3(iu),iv=(e,t,r)=>{var a,n;if(null===e&&null===t)return ih();null!==e&&(a={id:iu,strokeColor:r,strokeWidth:1.5,points:[e6({x:e,y:0}),e6({x:e,y:eT.height})]}),null!==t&&(n={id:iu,strokeColor:r,strokeWidth:1.5,points:[e6({x:0,y:t}),e6({x:eT.width,y:t})]}),ip(a,n)},ig=e=>{if(!e)return rl({_prerender:!1});var t=eu.find(e=>e.isEditing);t&&rn(t,{_prerender:"inline"===eF})},im=()=>{var[e]=o;(8===e||46===e)&&rc()&&(v.isEditing||setTimeout(()=>rv(),0))},i$=()=>ea({},v),iy=(e,t)=>{var{textAlign:r="left",fontFamily:a="sans-serif",fontWeight:n="normal",fontStyle:o="normal",letterSpacing:l="normal",textShadowX:s=0,textShadowY:c=0,textShadowBlur:d=0,textShadowColor:u,textOutlineWidth:h=0,textOutlineColor:p}=e,v="!important",g="caret-color:".concat(U,";text-align:").concat(r).concat(v,";font-family:").concat(a).concat(v,";font-weight:").concat(n).concat(v,";font-style:").concat(o).concat(v,";letter-spacing:").concat(iG(l)?l+"px":"normal").concat(v);if("modal"===t)return g;var m=h?";-webkit-text-stroke:".concat(2*h,"px ").concat(i6(p)," ").concat(v):"",f=d||s||c?";text-shadow:".concat(s,"px ").concat(c,"px ").concat(d,"px ").concat(i6(u)," ").concat(v):"",$=e.fontSize,y=1,x="";$>1e3&&ao()&&(y=$/1e3,x="transform-origin:0 0;transform:scale(".concat(y,")"),$=1e3);var b=e.lineHeight/y,w=i6(e.color),S=.5*Math.max(0,$-b);return"--font-scalar:".concat(y,";--bottom-inset:").concat(S,"px;padding:").concat(S,"px 0 0").concat(v,";color:").concat(w).concat(v,";font-size:").concat($,"px").concat(v,";line-height:").concat(b,"px").concat(v,";").concat(g,";").concat(x).concat(m).concat(f)},ix=(e,t,r,a)=>{e.width&&e.height?(n=rm(e),o=tZ(e)):((o=af(v.text,$)).width=$.width||o.width,n=tf(e.x+.5*o.width,e.y+.5*o.height));var n,o,l=Math.max(0,e.fontSize-e.lineHeight)+e.lineHeight,s=e6(n),c=s.x-t.x-.5*o.width,d=s.y-t.y-.5*o.height,u=e.flipX,h=e.flipY,p=e.rotation;ew&&eS?(u=!u,h=!h):ew?(u=!u,p=-p):eS&&(h=!h,p=-p),p+=a;var g=r*(u?-1:1),m=r*(h?-1:1);return"--line-height:".concat(l,"px;width:").concat(o.width,"px;height:").concat(o.height,"px;transform:translate(").concat(c,"px,").concat(d,"px) rotate(").concat(p,"rad) scale(").concat(g,", ").concat(m,")")},ib=()=>iw(W),iw=e=>{r(8,d.innerHTML=ff(e),d)},iS=e=>{var t=e.split(/[\n\r]/g);return t.length>1?t.map(e=>e.trim()).filter(e=>e.length).join(" "):t[0]},ik=e=>{var t=void 0===e.value?e.innerHTML:e.value,r="text"===v.format?f$(t):t;return aG(v)&&!1!==v.disableNewline?iS(r):r},iC=()=>{var e=ik(d),t=nu(v,e),r=!0===t?e:t,a=D.x,n=D.y;if(!v.height){var o=rR(ea({},N),v.rotation),l=rR(ea({x:a,y:n},af(r,$)),v.rotation),[s,,c]=o,[u,,h]=l,p=s,g=u;v.flipX&&(p=c,g=h);var m=tz(tw(p),g);a+=m.x,n+=m.y}rn(v,{x:ez(B.x)?i3(a,eT.width):a,y:ez(B.y)?i3(n,eT.height):n,text:r})},iM=()=>{var e=m;m&&t7(),d&&d.confirm&&d.confirm(),iC(),rS(v),e?eW(v):ej(v)},iT=()=>{m?re():(rn(v,{text:B.text,x:B.x,y:B.y}),rS(v))},iP=function(e,t,r){var a,n,{flipX:o,flipY:l,rotation:s}=r,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top left",[d,u,h,p]=rR(e,s),[v,g,m,f]=rR(t,s);if("top center"===c){var $=tV(l?[p,h]:[d,u]),y=tV(l?[f,m]:[v,g]);a=$,n=y}else"top right"===c&&!o||"top left"===c&&o?(a=l?h:u,n=l?m:g):(a=l?p:d,n=l?f:v);return tz(tw(a),n)},iR=(e,t,r)=>tf(ez(e.x)?i3(t.x+r.x,eT.width):t.x+r.x,ez(e.y)?i3(t.y+r.y,eT.height):t.y+r.y),iE={},iA=()=>rw(v),iI=()=>{var e=t6(af(v.text,$),e=>Math.ceil(e)),t=iZ(v,"height"),r=!t&&iZ(v,"width"),a=v.id,n=iE[a];n||(iE[a]={},n=iE[a]);var o=e=>{var{width:t}=$,r=er($,ee),a=af(v.text,r),n=iP(rg($.x,$.y,e.width,e.height),rg($.x,$.y,a.width,a.height),$,"top ".concat(v.textAlign)),o=!1!==$.disableNewline;ra(v,["width","height",o&&"textAlign"]),rn(v,ea({},iR(v,$,n)))},l=t=>{var r=tQ(n.width||$.width||e.width,e.height),a=n.textAlign||"left",o=iP(rg($.x,$.y,t.width,t.height),rg($.x,$.y,r.width,r.height),$,"top ".concat(a));ra(v,["height"]),rn(v,ea(ea({},iR(v,$,o)),{},{width:ez(v.width)?i3(r.width,eT.width):r.width,textAlign:a}))},s=t=>{var r=tQ(n.width||e.width,n.height||e.height),a=n.textAlign||"left",o=iP(rg($.x,$.y,t.width,t.height),rg($.x,$.y,r.width,r.height),$,"top ".concat(a));rn(v,ea(ea({},iR(v,$,o)),{},{width:ez(v.width)?i3(r.width,eT.width):r.width,height:ez(v.width)?i3(r.height,eT.height):r.height,textAlign:a}))};if(t){n.textAlign=v.textAlign,n.width=$.width,n.height=$.height;var c=tQ($.width,$.height);nh(v,"auto-height")?l(c):nh(v,"auto-width")&&o(c)}else if(r){n.textAlign=v.textAlign,n.width=$.width;var d=tQ($.width,e.height);nh(v,"auto-width")?o(d):nh(v,"fixed-size")&&s(d)}else{n.textAlign=v.textAlign;var u=tQ(Math.ceil(e.width),Math.ceil(e.height));nh(v,"fixed-size")?s(u):nh(v,"auto-height")&&l(u)}},iL=e=>{e.stopPropagation();var t=v.flipX||!1;ro(v,"flipX",!t),ej(v)},iF=e=>{e.stopPropagation();var t=v.flipY||!1;ro(v,"flipY",!t),ej(v)},iz=e=>{ro(v,"opacity",e)},iO=e=>{iz(e),ej(v)},iB=e=>{e.stopPropagation(),e.target.blur(),rv()},iD=e=>{e.stopPropagation(),eu.findIndex(e=>e===v)!==eu.length-1&&(e$.set(eu.filter(e=>e!==v).concat([v])),ej(v))},i_=e=>{e.stopPropagation(),iN()},iN=()=>{var e=aD(v);e.id=eV();var t=tf(50,-50);if(iZ(e,"points")){var r=nH(e,["points"],eT);r.points.forEach(e=>{e.x+=t.x,e.y+=t.y}),nU(e,r,eT)}else if(aq(e)){var a=nH(e,["x1","y1","x2","y2"],eT);a.x1+=t.x,a.y1+=t.y,a.x2+=t.x,a.y2+=t.y,nU(e,a,eT)}else{var n=nH(e,["x","y"],eT);n.x+=50,n.y-=50,nU(e,n,eT)}e$.set([...eu,e]),eW(e),rx(e)},iW=e=>tI(tf(e.x+.5*e.width,e.y),uM),ij=cJ(0,{stiffness:.2,damping:.7});oC(e,ij,e=>r(17,a=e));var iV=e=>{var t=eR.x,r=eR.y,a=t+eR.width,n=Math.max(e.x-.5*u.width,t),o=Math.max(e.y-u.height-16,r);return n+u.width>a&&(n=a-u.width),tf(n,o)},iH=(e,t)=>{var{disableTextLayout:r=[]}=t;return"height"in t?r.includes("auto-height")?e.shapeIconButtonTextLayoutAutoWidth:e.shapeIconButtonTextLayoutAutoHeight:"width"in t?r.includes("auto-width")?e.shapeIconButtonTextLayoutFixedSize:e.shapeIconButtonTextLayoutAutoWidth:r.includes("fixed-size")?e.shapeIconButtonTextLayoutAutoHeight:e.shapeIconButtonTextLayoutFixedSize},iU=(e,t)=>{var{disableTextLayout:r=[]}=t;return"height"in t?r.includes("auto-height")?e.shapeTitleButtonTextLayoutAutoWidth:e.shapeTitleButtonTextLayoutAutoHeight:"width"in t?r.includes("auto-width")?e.shapeTitleButtonTextLayoutFixedSize:e.shapeTitleButtonTextLayoutAutoWidth:r.includes("fixed-size")?e.shapeTitleButtonTextLayoutAutoHeight:e.shapeTitleButtonTextLayoutFixedSize},iX=!1,iY=tm(),iq=void 0,iK=e=>{eZ(e),r(142,c=e)};return o9(()=>{ih(),is(),it(),r6()}),e.$$set=e=>{"uid"in e&&r(57,eg=e.uid),"ui"in e&&r(58,em=e.ui),"disabled"in e&&r(0,ef=e.disabled),"shapes"in e&&ev(r(1,e$=e.shapes)),"selection"in e&&r(59,ey=e.selection),"offset"in e&&r(2,ex=e.offset),"contextRotation"in e&&r(60,eb=e.contextRotation),"contextFlipX"in e&&r(61,ew=e.contextFlipX),"contextFlipY"in e&&r(62,eS=e.contextFlipY),"contextZoom"in e&&r(63,ek=e.contextZoom),"active"in e&&r(64,eC=e.active),"opacity"in e&&r(65,eM=e.opacity),"parentRect"in e&&r(66,eT=e.parentRect),"rootRect"in e&&r(3,eP=e.rootRect),"utilRect"in e&&r(67,eR=e.utilRect),"hoverColor"in e&&r(68,eE=e.hoverColor),"caretColor"in e&&r(69,eA=e.caretColor),"gridColor"in e&&r(70,eI=e.gridColor),"snapColor"in e&&r(71,eL=e.snapColor),"textInputMode"in e&&r(4,eF=e.textInputMode),"oninteractionstart"in e&&r(72,eO=e.oninteractionstart),"oninteractionupdate"in e&&r(73,eB=e.oninteractionupdate),"oninteractionrelease"in e&&r(74,eD=e.oninteractionrelease),"oninteractionend"in e&&r(75,e_=e.oninteractionend),"oninteractioncancel"in e&&r(76,eN=e.oninteractioncancel),"onaddshape"in e&&r(77,eW=e.onaddshape),"onupdateshape"in e&&r(78,ej=e.onupdateshape),"onselectshape"in e&&r(79,eH=e.onselectshape),"onblurshape"in e&&r(80,eU=e.onblurshape),"onremoveshape"in e&&r(81,eG=e.onremoveshape),"ontapshape"in e&&r(82,eX=e.ontapshape),"onhovershape"in e&&r(83,eZ=e.onhovershape),"onhovercanvas"in e&&r(84,eY=e.onhovercanvas),"ontapcanvas"in e&&r(85,eq=e.ontapcanvas),"onleavecanvas"in e&&r(86,eK=e.onleavecanvas),"beforeSelectShape"in e&&r(87,eJ=e.beforeSelectShape),"beforeDeselectShape"in e&&r(88,eQ=e.beforeDeselectShape),"beforeRemoveShape"in e&&r(89,e1=e.beforeRemoveShape),"beforeUpdateShape"in e&&r(90,e0=e.beforeUpdateShape),"willRenderShapeControls"in e&&r(91,e2=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&r(92,e4=e.willRenderShapeTextControls),"willStartInteraction"in e&&r(93,e5=e.willStartInteraction),"mapEditorPointToImagePoint"in e&&r(94,e3=e.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in e&&r(95,e6=e.mapImagePointToEditorPoint),"eraseRadius"in e&&r(96,e8=e.eraseRadius),"selectRadius"in e&&r(97,e9=e.selectRadius),"enableButtonFlipVertical"in e&&r(98,te=e.enableButtonFlipVertical),"enableTapToAddText"in e&&r(99,tt=e.enableTapToAddText),"enableTextStyleControls"in e&&r(5,tr=e.enableTextStyleControls),"locale"in e&&r(6,ti=e.locale),"snapThreshold"in e&&r(100,ta=e.snapThreshold),"snapPointer"in e&&r(101,tn=e.snapPointer),"enableSnapToContext"in e&&r(102,to=e.enableSnapToContext),"gridSize"in e&&r(103,tl=e.gridSize)},e.$$.update=()=>{16&e.$$.dirty[2]|1024&e.$$.dirty[3]&&r(166,p=tl>0?ea({x:0,y:0},eT):void 0),1&e.$$.dirty[0]|1048576&e.$$.dirty[5]&&r(146,v=!ef&&eu&&(t3()||rs())),4194304&e.$$.dirty[4]&&r(173,g=!!v),4194304&e.$$.dirty[4]&&r(160,m=v&&a4(v)),4194304&e.$$.dirty[4]|32&e.$$.dirty[5]&&r(10,f=v&&!m?v.id:void 0),8&e.$$.dirty[0]|16&e.$$.dirty[2]|4194304&e.$$.dirty[4]&&r(13,$=eP&&v&&nN(aD(v),eT)),4194304&e.$$.dirty[4]|32&e.$$.dirty[5]&&r(144,y=!!(v&&m)),8192&e.$$.dirty[0]|8&e.$$.dirty[2]|4194304&e.$$.dirty[4]&&r(172,x=v&&eM&&rU($)||[]),4194304&e.$$.dirty[4]&&r(174,b=v&&ng(v)&&!aQ(v)),4194304&e.$$.dirty[4]&&r(14,w=v&&nm(v)&&!aQ(v)),4194304&e.$$.dirty[4]|524288&e.$$.dirty[5]&&r(16,S=b&&iZ(v,"text")&&!v.height?[[1,2],[3,0]]:!(v&&(aq(v)||aK(v)))&&b),65536&e.$$.dirty[0]|4194304&e.$$.dirty[4]|524288&e.$$.dirty[5]&&r(28,k=!!v&&!Array.isArray(S)&&b),4194304&e.$$.dirty[4]|131072&e.$$.dirty[5]&&r(15,C=v&&x.length>1),4&e.$$.dirty[3]|131072&e.$$.dirty[5]&&r(170,M=x.map(e6)),4&e.$$.dirty[0]|32768&e.$$.dirty[5]&&r(12,T=M.map(e=>tf(e.x-ex.x,e.y-ex.y))),4194304&e.$$.dirty[4]|262144&e.$$.dirty[5]&&r(27,P=g&&(aX(v)?!iZ(v,"disableNewline")||!v.disableNewline:!1===v.disableNewline)),4&e.$$.dirty[3]|262144&e.$$.dirty[4]&&(c&&e6&&!a0(c)&&no(c)?r7(c):r6()),61440&e.$$.dirty[0]|8&e.$$.dirty[2]&&r(171,R=C&&w&&eM&&T&&rZ($)),4&e.$$.dirty[0]|65536&e.$$.dirty[5]&&r(26,E=R&&tf(R.position.x-ex.x,R.position.y-ex.y)),4194304&e.$$.dirty[5]&&r(165,F=!!(o||[]).find(e=>[91,93,17].includes(e))),256&e.$$.dirty[3]|1024&e.$$.dirty[5]&&r(167,A=!(F||!tn)),8&e.$$.dirty[2]|4718592&e.$$.dirty[4]|36896&e.$$.dirty[5]&&v&&M&&eM>0&&ii(eM,v,m&&aK(v)?ia(ea({},iq),!A):void 0),4194304&e.$$.dirty[4]&&!v&&it(),262144&e.$$.dirty[4]&&r(168,I=!!c),65536&e.$$.dirty[4]&&r(169,L=!!rL),524288&e.$$.dirty[4]|28672&e.$$.dirty[5]&&iq&&!L&&!I&&ia(ea({},iq),!A),256&e.$$.dirty[2]|1028&e.$$.dirty[3]|8390656&e.$$.dirty[5]&&tl>0&&p&&e6&&id(tl,p,eI,l),512&e.$$.dirty[2]|4&e.$$.dirty[3]|49152&e.$$.dirty[4]|1024&e.$$.dirty[5]&&e6&&(F?ih():iv(tD,t_,eL)),4&e.$$.dirty[2]&&ig(eC),4194304&e.$$.dirty[5]&&o&&o.length&&im(),272&e.$$.dirty[0]&&d&&"inline"===eF&&d.focus(),4194304&e.$$.dirty[4]&&r(164,z=v&&aU(v)),4194304&e.$$.dirty[4]|512&e.$$.dirty[5]&&r(11,O=z&&!1!==nu(v)&&aQ(v)),2048&e.$$.dirty[0]&&r(159,B=O?i$():void 0),16&e.$$.dirty[2]|16&e.$$.dirty[5]&&r(161,D=B&&nN(ea({},B),eT)),64&e.$$.dirty[5]&&r(163,_=D&&af(D.text,D)),320&e.$$.dirty[5]&&(N=D&&rg(D.x,D.y,_.width,_.height)),2048&e.$$.dirty[0]|4194304&e.$$.dirty[4]&&r(23,W=O?v.text:""),2056&e.$$.dirty[0]|16&e.$$.dirty[2]|4194304&e.$$.dirty[4]&&r(162,j=eP&&v&&O&&nN(ea(ea({},aD(v)),{},{width:iG(v.width)?Math.floor(v.width):void 0,height:iG(v.height)?Math.floor(v.height):void 0}),eT)),2064&e.$$.dirty[0]|128&e.$$.dirty[5]&&r(25,V=O&&iy(j,eF)),2052&e.$$.dirty[0]|536870912&e.$$.dirty[1]|2&e.$$.dirty[2]|128&e.$$.dirty[5]&&r(24,H=O&&ix(j,ex,ek,eb)),128&e.$$.dirty[2]&&(U=i6(eA)),2320&e.$$.dirty[0]&&O&&d&&"inline"===eF&&ib(),72351744&e.$$.dirty[4]&&r(150,G=v&&!y?v:G),67108864&e.$$.dirty[4]&&r(152,X=G&&nd(G)),67108864&e.$$.dirty[4]&&r(147,Z=G&&nh(G)),67108864&e.$$.dirty[4]&&r(149,Y=G&&ns(G)),67108864&e.$$.dirty[4]&&r(148,q=G&&nl(G)),67108864&e.$$.dirty[4]&&r(151,K=G&&nc(G)),67108864&e.$$.dirty[4]&&r(145,J=G&&!1!==nu(G)),67108864&e.$$.dirty[4]&&r(153,Q=G&&iZ(G,"backgroundImage")&&nn(G,"opacity")),4194304&e.$$.dirty[4]&&r(155,et=v&&"html"===v.format),5242880&e.$$.dirty[4]|1&e.$$.dirty[5]&&r(158,ei=v&&(!y||et)),131072&e.$$.dirty[4]|2097160&e.$$.dirty[5]&&ij.set(ei&&!rW?1:0,{hard:!1===n}),4096&e.$$.dirty[0]|12&e.$$.dirty[5]&&r(157,en=ei&&T.length?iW(rh(T)):en),512&e.$$.dirty[0]|32&e.$$.dirty[2]|4&e.$$.dirty[5]&&r(156,eo=en&&u&&eR&&iV(en)),131072&e.$$.dirty[0]|2&e.$$.dirty[5]&&r(22,el=eo&&"transform: translate(".concat(eo.x,"px, ").concat(eo.y,"px);opacity:").concat(a)),2048&e.$$.dirty[0]&&r(154,es=O?"text":"shape"),1088&e.$$.dirty[0]|1610612736&e.$$.dirty[2]|32&e.$$.dirty[3]|2145386496&e.$$.dirty[4]|1048577&e.$$.dirty[5]&&r(21,ec="text"===es&&e4&&et?vl(()=>e4([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map(e=>{var[t,r]=e;return["Button","style-"+t,ea(ea({onclick:()=>document.execCommand(t)},r),{},{style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+r.style})]})]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400;",label:'<span style="font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline;">T</span><span style="position:relative;top:.175rem;">&times;</span>',title:"Remove styles"}]]]],f)):"shape"===es&&e2&&f?vl(()=>e2([Q&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:iO,onchange:iz,step:.01,value:iZ(v,"opacity")?v.opacity:1,label:(e,t,r)=>"".concat(Math.round(e/r*100),"%"),min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[X&&["Button","flip-horizontal",{onclick:iL,label:ti.shapeTitleButtonFlipHorizontal,icon:ti.shapeIconButtonFlipHorizontal,hideLabel:!0}],X&&te&&["Button","flip-vertical",{onclick:iF,label:ti.shapeTitleButtonFlipVertical,icon:ti.shapeIconButtonFlipVertical,hideLabel:!0}],K&&["Button","to-front",{onclick:iD,label:ti.shapeTitleButtonMoveToFront,icon:ti.shapeIconButtonMoveToFront,hideLabel:!0,disabled:eu[eu.length-1]===G}],Y&&["Button","duplicate",{onclick:i_,label:ti.shapeTitleButtonDuplicate,icon:ti.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],q&&["Button","remove",{onclick:iB,label:ti.shapeTitleButtonRemove,icon:ti.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],J&&Z&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:iI,label:uq(iU,ti,v),icon:uq(iH,ti,v),hideLabel:!0}]]],J&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:ti.shapeLabelInputText,onclick:iA}]]]].filter(Boolean),f)):[]),64&e.$$.dirty[0]|1048576&e.$$.dirty[5]&&r(20,ed=eu.filter(no).filter(e=>e.id).filter(e=>!a4(e)).map(e=>({id:e.id,color:aU(e)?e.color:aq(e)?e.strokeColor:e.backgroundColor,name:e.name||ti["shapeLabelTool".concat(lq(nI(e)))]})))},[ef,e$,ex,eP,eF,tr,ti,rx,d,u,f,O,T,$,w,C,S,a,iX,h,ed,ec,el,W,H,V,E,P,k,td,tT,e=>{var{origin:t}=e.detail;r(140,rL=void 0),rF=void 0,rD=void 0,r_=!1,rI=void 0,rN=!1,tO(),clearTimeout(rA),rA=setTimeout(()=>r(141,rW=!0),250);var a=t3();if(a&&!(aK(a)&&iZ(a,"pathClose"))&&t7(),rE=e3(tw(t)),a&&aK(a)&&iZ(a,"pathClose"))return eO(e);var n=rT(eu,rE,e9,e=>no(e)),o=n.length&&n.shift();if(v&&aQ(v)&&(iM(),tt&&(rN=!0)),!o&&v&&aQ(v)&&rb(v),e5(t)){if(o&&a0(o)){r_=!0,r(140,rL=o),rF=aD(rL),rD=nN(aD(rL),eT);return}rI=o||void 0,!eO(e)&&o&&(rx(o),r(140,rL=o),rF=aD(rL),rD=nN(aD(rL),eT))}},e=>{rj(),eN(e)},e=>{var{translation:t,ctrlKey:r,metaKey:a,shiftKey:n,position:o}=e.detail;if(rL){if(!nv(rL)||aQ(rL))return;if(n){var l=Math.abs(t.x),s=Math.abs(t.y);"x"===rV&&(s-=64),"y"===rV&&(l-=64),l>s?(t.y=0,rV="x"):s>l&&(t.x=0,rV="y")}else rV=null;return t1(rL,rD,t,ea({},tc(r||a?0:ta,tl,p,rL)))}eB(e)},e=>{if(rj(),rL){aQ(rL)?iT():e.detail.isTap&&r_&&aU(rL)&&!1!==nu(rL)&&rw(rL);return}eD(e)},e=>{var t=rI&&e.detail.isTap;if(e.detail.isTap&&setTimeout(()=>{eq({target:rL||rI,position:rE},0)}),rL){eX(rL),aB(rL,rF)||ej(rL),r(140,rL=void 0);return}var a=ry(),n=!a||eQ(a,rI||void 0);n&&r$({storePrevious:!1}),e_(e),n&&t&&rx(rI)},io,e=>{r(141,rW=!0),r(140,rL=v),rD=$},e=>{if(!rL){r(141,rW=!1);return}var{translation:t,indexes:a,shiftKey:n,ctrlKey:o,metaKey:l}=e.detail;t4(rL,rD,a,t,ea({shiftKey:n},tc(o||l?0:ta,tl,p,rL)))},e=>{if(!rL){r(141,rW=!1);return}rx(rL);var{isTap:t}=e.detail;t&&eX(rL),r(140,rL=void 0),r(141,rW=!1),ej(v)},e=>{s=rX($).origin,r(141,rW=!0),r(140,rL=v),rD=$},e=>{if(!rL){r(141,rW=!1);return}var{translation:t,shiftKey:a}=e.detail;t5(rL,rD,t,{shiftKey:a})},()=>{if(!rL){r(141,rW=!1);return}rx(rL),r(140,rL=void 0),r(141,rW=!1),ej(v)},e=>{var{key:t}=e,r=/escape/i.test(t);if(rc()){if(r)return e.preventDefault(),e.stopPropagation(),rb(v);Y&&"d"===t&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),e.stopPropagation(),iN())}},e=>{var t=nu(v,e);return!0===t?e:t},iC,e=>{var{target:t,key:r}=e,a=t.value||t.innerText,n=t.selectionStart||0,o=t.selectionEnd||a.length,l=a.substring(0,n)+r+a.substring(o);if(nu(v,l)!==l)return e.preventDefault()},e=>aG(v)&&/enter/i.test(e.code)&&!1!==v.disableNewline?e.preventDefault():/arrow/i.test(e.code)?e.stopPropagation():/escape/i.test(e.key)?iT():void 0,e=>{var{key:t,ctrlKey:r,altKey:a}=e;if(/enter/i.test(t)&&(r||a))return iM()},iM,iT,ij,e=>{var t=rs();!(!t||aQ(t))&&nv(t)&&(r(140,rL=t),rD=nN(aD(rL),eT),t1(rL,rD,e.detail))},e=>{r(18,iX=!0)},e=>{var{relatedTarget:t}=e;t&&t.classList.contains("shape-selector__button")||r(18,iX=!1)},e=>{if("touch"===e.pointerType||"PinturaShapeEditor"!==e.target.className){eK();return}(rW||rA)&&iK(void 0);var t=fl(e,eP);r(143,iq=tw(t));var a=tI(e3(t),e=>Math.round(e));if(!tA(a,iY)&&(iY=tw(a),eY(rW,t,a),!rW&&!rA&&!y)){var[n]=rT(eu,a,0,no);n&&a4(n)||iK(n)}},e=>{"touch"!==e.pointerType&&eK()},eg,em,ey,eb,ew,eS,ek,eC,eM,eT,eR,eE,eA,eI,eL,eO,eB,eD,e_,eN,eW,ej,eH,eU,eG,eX,eZ,eY,eq,eK,eJ,eQ,e1,e0,e2,e4,e5,e3,e6,e8,e9,te,tt,ta,tn,to,tl,tu,th,tv,t$,ty,tx,tb,function(e){var t,r,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=aY(e),s=aU(e),c="relative"===n.position,d=ts(),u=e=>{if(!ta)return e;var{snapTranslation:t,snapLines:r}=tK(tX(e3(e)),d,ta,tl,p);return tJ(e,t),tL(r),e},h=!!ry(),v=n.isSelection?ey:e$,g="step"===n.inputMode;if(aK(e)){if(g){var m=!1,f=(e,t)=>{var r=th(v),a=e&&tf(fy(e.x,eT.width),fy(e.y,eT.height)),n=a&&e6(a);o.includes(16)&&n&&tk(n,t);var l=e3(t),s=r.points.length?r.points[0]:l,d=tf(fy(s.x,eT.width),fy(s.y,eT.height)),u=tN(e6(d),t);if(!m&&1===r.points.length&&u<36)return t$(v);if(r.points.length>2&&u<=256){r.pathClose=!0,no(r)&&rx(r);var h=ty(v);eW(h);return}var p=r.strokeWidth&&r.strokeColor&&(void 0===r.strokeColor[3]||r.strokeColor[3]>0),g=tN(n,t);if(p&&r.points.length>1&&g<256){r.pathClose=!1,r.backgroundColor=[0,0,0,0],no(r)&&rx(r);var f=ty(v);eW(f);return}if(!(r.points.length>0)||!(g<100))return c?fx(l,eT):l};return{start:e=>{var n=th(v),{origin:o}=e.detail;if(r=4,t=u(tw(o)),a=tw(t),n){var l=f(n.points[n.points.length-1],t);l&&(n.points=[...n.points,l]),tx({points:n.points},v);return}m=!0},update:e=>{if(m){var r=th(v);if(r){var a=f(r.points[0],tf(t.x+e.detail.translation.x,t.y+e.detail.translation.y));a&&(r.points[1]=a,tx({points:r.points},v))}}},release:e=>e.detail.preventInertia(),end:r=>{if(m){var a=e3(t),n=c?fx(a,eT):a,{isTap:o}=r.detail;if(o&&rT(eu,a,0,no).length)return t$(v);tv(ea(ea({},e),{},{points:[n]}),v)}}}}return{start:n=>{var{origin:o}=n.detail;r=4,t=tw(o),a=tw(t);var l=e3(t),s=c?fx(l,eT):l;tv(ea(ea({},e),{},{points:[s]}),v)},update:e=>{var n=th(v),{translation:o}=e.detail,l=tf(t.x+o.x,t.y+o.y),s=tW(a,l);if(!(tp(s,5)<=r)){var d=tE(l,a),u=r-s;a.x+=u*Math.cos(d),a.y+=u*Math.sin(d);var h=e3(a),p=c?fx(h,eT):h;tx({points:n.points.concat(p)},v)}},release:e=>e.detail.preventInertia(),cancel:()=>{t$(v)},end:e=>{var t=th(v);if(e.detail.isTap){var r=!1;if(t.bitmap?(rI&&(r=!0),h&&(r=!0)):r=!0,r)return t$(v)}var a=ty(v);eW(a)}}}return l||s||aZ(e)?{start:r=>{var{origin:a}=r.detail;t=u(tw(a));var n=e3(t),o=c?fx(n,eT):n,s=-1*tR(eb,ew,eS),d=ea(ea({},e),{},{rotation:s},o);d.flipX=ew,d.flipY=eS,delete d.position,d.opacity=0,(l?["rx","ry"]:["width","height"]).forEach(e=>{d[e]=c?"0%":0}),tv(d,v)},update:e=>{var r=th(v);r.opacity=1;var{aspectRatio:a}=r,{translation:n,shiftKey:o,ctrlKey:s}=e.detail;!a&&o&&(a=1);var c=u(tf(t.x+n.x,t.y+n.y)),d=e3(t),h=e3(c);if(a){var p=rz(rh([d,h]),a);h.x=d.x+p.width,h.y=d.y+p.height}var g={x:d.x+(h.x-d.x)*.5,y:d.y+(h.y-d.y)*.5},m=tR(eb,ew,eS);tM(d,m,g),tM(h,m,g);var f=Math.min(d.x,h.x),$=Math.min(d.y,h.y),y=Math.max(d.x,h.x),x=Math.max(d.y,h.y),b=y-f,w=x-$,S={};l?(s?(S.x=d.x,S.y=d.y):(S.x=f+.5*b,S.y=$+.5*w),S.rx=.5*b,S.ry=.5*w):(s?(S.x=d.x-.5*b,S.y=d.y-.5*w):(S.x=f,S.y=$),S.width=b,S.height=w),tx(S,v,(e,t)=>tS(e,t,eT))},release:e=>{e.detail.preventInertia()},cancel:e=>{t$(v)},end:e=>{var r=th(v);if(e.detail.isTap){if(aU(r)&&tt&&rN||!aU(r)||!tt||rI)return t$(v);delete r.width,delete r.height,!1!==r.disableNewline&&delete r.textAlign;var a=nN(ea({},r),eT),n=af(r.text,a),o=e3({x:t.x,y:t.y-.5*n.height}),l=e3({x:t.x+n.width,y:t.y+.5*n.height}),s={x:o.x+(l.x-o.x)*.5,y:o.y+(l.y-o.y)*.5},c=tR(eb,ew,eS);tM(o,c,s),tM(l,c,s);var d=Math.min(o.x,l.x),u=Math.min(o.y,l.y);d<0&&(d=0),u<0&&(u=0),d+n.width>eT.width&&(d=eT.width-n.width),u+n.height>eT.height&&(u=eT.height-n.height),r.x=ez(r.x)?i3(d,eT.width):d,r.y=ez(r.y)?i3(u,eT.height):u}if(r.opacity=1,!aU(r)){var h=ty(v);eW(h)}no(r)&&rx(r),aU(r)&&rw(r)}}:aq(e)?{start:r=>{var{origin:a}=r.detail,n=tI(e3(u(a)),uM);t=tw(a),tv(ea(ea({},e),{},{x1:c?i3(n.x,eT.width):n.x,y1:c?i3(n.y,eT.height):n.y,x2:c?i3(n.x,eT.width):n.x,y2:c?i3(n.y,eT.height):n.y,opacity:0}),v)},update:e=>{var{translation:r}=e.detail,a=u(tF(tw(t),r));if(o.includes(16)){var n=tW(t,a),l=tE(t,a),s=Math.PI/4,d=s*Math.round(l/s);a.x=t.x+n*Math.cos(d),a.y=t.y+n*Math.sin(d)}var h=e3(a);tx({x2:c?i3(h.x,eT.width):h.x,y2:c?i3(h.y,eT.height):h.y,opacity:1},v)},release:e=>e.detail.preventInertia(),cancel:e=>{t$(v)},end:e=>{var t=th(v);if(e.detail.isTap)return t$(v);t.opacity=1;var r=ty(v);eW(r),no(t)&&rx(r)}}:void 0},()=>{var e,t,r=e8*e8,a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=tN(e,t);if(!a&&n<2)return!1;var o=eu.filter(e=>!e.disableErase);return rk(n<r?rT(eu,e3(t),e8):rP(o,e3(e),e3(t),e8)).forEach(eG),!0};return{start:r=>{a(e=tf(Math.round(r.detail.origin.x),Math.round(r.detail.origin.y)),e,!0),t=e},update:r=>{var{translation:n}=r.detail,o=tf(Math.round(e.x+n.x),Math.round(e.y+n.y));a(t,o)&&(t=tw(o))},release:e=>e.detail.preventInertia(),end:()=>{}}},t3,t8,e=>{if(!t3())return ni(e),tb(e)},t7,re,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ea({id:eV()},e)},rr,ra,rn,ro,function(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];eu.forEach(r=>ro(r,e,t,!1)),r&&rr()},rl,rs,rc,rd,rv,r$,rb,rw,rS,rk,rC,rM,rT,rP,tD,t_,rL,rW,c,iq,y,J,v,Z,q,Y,G,K,X,Q,es,et,eo,en,ei,B,m,D,j,_,z,F,p,A,I,L,M,R,x,g,b,eu,n,o,l,function(t){li.call(this,e,t)},e=>rx(e$[e]),function(e){ln[e?"unshift":"push"](()=>{r(8,d=e)})},function(){r(23,W=this.value),r(11,O),r(146,v),r(164,z),r(0,ef),r(175,eu)},function(e){ln[e?"unshift":"push"](()=>{r(8,d=e)})},()=>{h&&h.focus()},e=>r(9,u=e.detail),function(e){ln[e?"unshift":"push"](()=>{r(19,h=e)})},e=>fl(e,eP)]}class fL extends lz{constructor(e){super(),lF(this,e,fI,fR,ow,{uid:57,ui:58,disabled:0,shapes:1,selection:59,offset:2,contextRotation:60,contextFlipX:61,contextFlipY:62,contextZoom:63,active:64,opacity:65,parentRect:66,rootRect:3,utilRect:67,hoverColor:68,caretColor:69,gridColor:70,snapColor:71,textInputMode:4,oninteractionstart:72,oninteractionupdate:73,oninteractionrelease:74,oninteractionend:75,oninteractioncancel:76,onaddshape:77,onupdateshape:78,onselectshape:79,onblurshape:80,onremoveshape:81,ontapshape:82,onhovershape:83,onhovercanvas:84,ontapcanvas:85,onleavecanvas:86,beforeSelectShape:87,beforeDeselectShape:88,beforeRemoveShape:89,beforeUpdateShape:90,willRenderShapeControls:91,willRenderShapeTextControls:92,willStartInteraction:93,mapEditorPointToImagePoint:94,mapImagePointToEditorPoint:95,eraseRadius:96,selectRadius:97,enableButtonFlipVertical:98,enableTapToAddText:99,enableTextStyleControls:5,locale:6,snapThreshold:100,snapPointer:101,enableSnapToContext:102,gridSize:103,syncShapeCollection:104,getShapeDraft:105,addShapeDraft:106,discardShapeDraft:107,confirmShapeDraft:108,updateShapeDraft:109,addShape:110,createShape:111,eraseShape:112,getMarkupItemDraft:113,getMarkupItemDraftIndex:114,addMarkupItemDraft:115,confirmMarkupItemDraft:116,discardMarkupItemDraft:117,createMarkupItem:118,syncShapes:119,removeMarkupShapeProps:120,updateMarkupShape:121,updateMarkupShapeProperty:122,updateMarkupItemsShapeProperty:123,updateMarkupShapeItems:124,getActiveMarkupItem:125,hasActiveMarkupItem:126,removeShape:127,removeActiveMarkupItem:128,blurShapes:129,selectShape:7,deselectMarkupItem:130,editMarkupItem:131,finishEditMarkupItem:132,removeMarkupItems:133,getTextShapeRect:134,getMarkupShapeRect:135,getShapesNearPosition:136,getShapesBetweenPoints:137},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get syncShapeCollection(){return this.$$.ctx[104]}get getShapeDraft(){return this.$$.ctx[105]}get addShapeDraft(){return this.$$.ctx[106]}get discardShapeDraft(){return this.$$.ctx[107]}get confirmShapeDraft(){return this.$$.ctx[108]}get updateShapeDraft(){return this.$$.ctx[109]}get addShape(){return this.$$.ctx[110]}get createShape(){return this.$$.ctx[111]}get eraseShape(){return this.$$.ctx[112]}get getMarkupItemDraft(){return this.$$.ctx[113]}get getMarkupItemDraftIndex(){return this.$$.ctx[114]}get addMarkupItemDraft(){return this.$$.ctx[115]}get confirmMarkupItemDraft(){return this.$$.ctx[116]}get discardMarkupItemDraft(){return this.$$.ctx[117]}get createMarkupItem(){return this.$$.ctx[118]}get syncShapes(){return this.$$.ctx[119]}get removeMarkupShapeProps(){return this.$$.ctx[120]}get updateMarkupShape(){return this.$$.ctx[121]}get updateMarkupShapeProperty(){return this.$$.ctx[122]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[123]}get updateMarkupShapeItems(){return this.$$.ctx[124]}get getActiveMarkupItem(){return this.$$.ctx[125]}get hasActiveMarkupItem(){return this.$$.ctx[126]}get removeShape(){return this.$$.ctx[127]}get removeActiveMarkupItem(){return this.$$.ctx[128]}get blurShapes(){return this.$$.ctx[129]}get selectShape(){return this.$$.ctx[7]}get deselectMarkupItem(){return this.$$.ctx[130]}get editMarkupItem(){return this.$$.ctx[131]}get finishEditMarkupItem(){return this.$$.ctx[132]}get removeMarkupItems(){return this.$$.ctx[133]}get getTextShapeRect(){return this.$$.ctx[134]}get getMarkupShapeRect(){return this.$$.ctx[135]}get getShapesNearPosition(){return this.$$.ctx[136]}get getShapesBetweenPoints(){return this.$$.ctx[137]}}function fF(e){var t,r,a;return r=new pF({props:{items:e[2]}}),{c(){t=oH("ul"),lA(r.$$.fragment),oq(t,"class","PinturaShapeStyleList")},m(e,n){oj(e,t,n),lI(r,t,null),a=!0},p(e,t){var a={};4&t&&(a.items=e[2]),r.$set(a)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r)}}}function fz(e){var t,r;return t=new ua({props:{class:"PinturaShapeStyles",elasticity:e[0],$$slots:{default:[fO]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};1&r&&(a.elasticity=e[0]),131076&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function fO(e){var t,r,a;return r=new pF({props:{items:e[2]}}),{c(){t=oH("ul"),lA(r.$$.fragment),oq(t,"class","PinturaShapeStyleList")},m(e,n){oj(e,t,n),lI(r,t,null),a=!0},p(e,t){var a={};4&t&&(a.items=e[2]),r.$set(a)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r)}}}function fB(e){var t,r,a,n,o=[fz,fF],l=[];return a=l[r=e[1]?0:1]=o[r](e),{c(){t=oH("div"),a.c(),oq(t,"style",e[3])},m(e,a){oj(e,t,a),l[r].m(t,null),n=!0},p(e,s){var[c]=s,d=r;(r=e[1]?0:1)===d?l[r].p(e,c):(l$(),lb(l[d],1,1,()=>{l[d]=null}),ly(),(a=l[r])?a.p(e,c):(a=l[r]=o[r](e)).c(),lx(a,1),a.m(t,null)),(!n||8&c)&&oq(t,"style",e[3])},i(e){n||(lx(a),n=!0)},o(e){lb(a),n=!1},d(e){e&&oV(t),l[r].d()}}}function fD(e,t,r){var a,n,o,l,s,c,{isActive:d=!1}=t,{controls:u=[]}=t,{locale:h}=t,{scrollElasticity:p}=t,{scrollEnable:v=!0}=t,{hideTitles:g=!1}=t,{willRenderControls:m=e7}=t,f=lr("redrawTrigger");oC(e,f,e=>r(14,l=e));var $=lr("env");oC(e,$,e=>r(13,o=e));var y=lr("isAnimated");oC(e,y,e=>r(16,c=e));var x=cJ(0,{stiffness:.25,damping:.9});return oC(e,x,e=>r(15,s=e)),e.$$set=e=>{"isActive"in e&&r(8,d=e.isActive),"controls"in e&&r(9,u=e.controls),"locale"in e&&r(10,h=e.locale),"scrollElasticity"in e&&r(0,p=e.scrollElasticity),"scrollEnable"in e&&r(1,v=e.scrollEnable),"hideTitles"in e&&r(11,g=e.hideTitles),"willRenderControls"in e&&r(12,m=e.willRenderControls)},e.$$.update=()=>{65792&e.$$.dirty&&x.set(d?1:0,{hard:!1===c}),33024&e.$$.dirty&&r(3,a="opacity:".concat(s,";").concat(d?"":"pointer-events:none;").concat(s<=0?"visibility:hidden":"")),32256&e.$$.dirty&&r(2,n=l&&m(u.map(e=>["ShapeStyle",e.id,{title:e.componentProps.title,locale:h,hideTitle:g,items:[[e.component,e.id,e.componentProps]]}]),o,()=>f.set({})))},[p,v,n,a,f,$,y,x,d,u,h,g,m,o,l,s,c]}class f_ extends lz{constructor(e){super(),lF(this,e,fD,fB,ow,{isActive:8,controls:9,locale:10,scrollElasticity:0,scrollEnable:1,hideTitles:11,willRenderControls:12})}}function fN(e,t,r){var a=e.slice();return a[15]=t[r].key,a[6]=t[r].controls,a[16]=t[r].isActive,a}function fW(e,t){var r,a,n;return a=new f_({props:{isActive:t[16],controls:t[6],locale:t[1],scrollElasticity:t[2],scrollEnable:t[3],hideTitles:t[4],willRenderControls:t[5]}}),{key:e,first:null,c(){r=oZ(),lA(a.$$.fragment),this.first=r},m(e,t){oj(e,r,t),lI(a,e,t),n=!0},p(e,r){t=e;var n={};128&r&&(n.isActive=t[16]),128&r&&(n.controls=t[6]),2&r&&(n.locale=t[1]),4&r&&(n.scrollElasticity=t[2]),8&r&&(n.scrollEnable=t[3]),16&r&&(n.hideTitles=t[4]),32&r&&(n.willRenderControls=t[5]),a.$set(n)},i(e){n||(lx(a.$$.fragment,e),n=!0)},o(e){lb(a.$$.fragment,e),n=!1},d(e){e&&oV(r),lL(a,e)}}}function fj(e){for(var t,r,a,n=[],o=new Map,l=e[7],s=e=>e[15],c=0;c<l.length;c+=1){var d=fN(e,l,c),u=s(d);o.set(u,n[c]=fW(u,d))}return{c(){t=oH("div");for(var a=0;a<n.length;a+=1)n[a].c();oq(t,"class",r=dy(["PinturaShapeStyleEditor",!e[3]&&"PinturaShapeStyleEditorOverflow",e[0]]))},m(e,r){oj(e,t,r);for(var o=0;o<n.length;o+=1)n[o].m(t,null);a=!0},p(e,c){var[d]=c;190&d&&(l=e[7],l$(),n=lT(n,d,s,1,e,l,o,t,lM,fW,null,fN),ly()),(!a||9&d&&r!==(r=dy(["PinturaShapeStyleEditor",!e[3]&&"PinturaShapeStyleEditorOverflow",e[0]])))&&oq(t,"class",r)},i(e){if(!a){for(var t=0;t<l.length;t+=1)lx(n[t]);a=!0}},o(e){for(var t=0;t<n.length;t+=1)lb(n[t]);a=!1},d(e){e&&oV(t);for(var r=0;r<n.length;r+=1)n[r].d()}}}function fV(e,t,r){var a,n,o,{class:l}=t,{controls:s={}}=t,{shape:c}=t,{onchange:d}=t,{locale:u}=t,{scrollElasticity:h}=t,{scrollEnable:p=!0}=t,{hideTitles:v=!1}=t,{willRenderControls:g}=t,m=e=>a.filter(t=>t.split("_").every(t=>iZ(e,t)&&nn(e,t))).map(t=>{var r=(e.settings&&e.settings[t]||{}).control||t,a=t.split("_"),n=a.length>1?a.map(t=>e[t]):e[t];if(eO(s[r])){var{title:o,component:l}=s[r](n,e=>{d({[t]:e})},{selectedShapeId:e.id});return{id:r,component:pF,componentProps:{title:o,items:l}}}var[c,h]=s[r];if(ez(c)&&s[c]){var p=ea({},h);[c,h]=s[c],h=ea(ea({},h),p)}var v=eO(h.options)?h.options(e):h.options;return{id:r,component:c,componentProps:ea(ea({},h),{},{options:v,locale:u,value:n,optionLabelClass:"PinturaButtonLabel",onchange:r=>{var n=eI(r)&&!iY(r)?r.value:r;h.onchange&&h.onchange(n,e);var o=a.length>1?a.reduce((e,t,r)=>ea(ea({},e),{},{[t]:Array.isArray(n)?n[r]:n}),{}):{[t]:n};d(o)}})}}).filter(Boolean),f=[],$=(e,t)=>{var r=f.find(t=>t.key===e);return r||(r={key:e,controls:t},f.push(r)),f.forEach(e=>e.isActive=!1),r.controls=t,r.isActive=!0,f};return e.$$set=e=>{"class"in e&&r(0,l=e.class),"controls"in e&&r(6,s=e.controls),"shape"in e&&r(8,c=e.shape),"onchange"in e&&r(9,d=e.onchange),"locale"in e&&r(1,u=e.locale),"scrollElasticity"in e&&r(2,h=e.scrollElasticity),"scrollEnable"in e&&r(3,p=e.scrollEnable),"hideTitles"in e&&r(4,v=e.hideTitles),"willRenderControls"in e&&r(5,g=e.willRenderControls)},e.$$.update=()=>{64&e.$$.dirty&&r(11,a=Object.keys(s).filter(e=>s[e])),2304&e.$$.dirty&&r(10,n=c&&Object.keys(c).length&&a&&nn(c)?m(c):[]),1280&e.$$.dirty&&r(7,o=$(c&&Object.keys(c).length?Object.keys(c).join("_"):"none",n||[]))},[l,u,h,p,v,g,s,o,c,d,n,a]}class fH extends lz{constructor(e){super(),lF(this,e,fV,fj,ow,{class:0,controls:6,shape:8,onchange:9,locale:1,scrollElasticity:2,scrollEnable:3,hideTitles:4,willRenderControls:5})}}var fU=e=>/<svg /.test(e);function fG(e){var t,r;return t=new pF({props:{items:e[10]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};1024&r&&(a.items=e[10]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function fX(e){var t,r,a,n,o=[fY,fZ],l=[];return r=l[t=e[8]?0:1]=o[t](e),{c(){r.c(),a=oZ()},m(e,r){l[t].m(e,r),oj(e,a,r),n=!0},p(e,n){var s=t;(t=e[8]?0:1)===s?l[t].p(e,n):(l$(),lb(l[s],1,1,()=>{l[s]=null}),ly(),(r=l[t])?r.p(e,n):(r=l[t]=o[t](e)).c(),lx(r,1),r.m(a.parentNode,a))},i(e){n||(lx(r),n=!0)},o(e){lb(r),n=!1},d(e){l[t].d(e),e&&oV(a)}}}function fZ(e){var t,r,a,n,o=e[10]&&fq(e);return a=new ua({props:{scrollAutoCancel:e[9],elasticity:e[0],$$slots:{default:[fK]},$$scope:{ctx:e}}}),{c(){t=oH("div"),o&&o.c(),r=oX(),lA(a.$$.fragment),oq(t,"class","PinturaShapePresetsFlat")},m(e,l){oj(e,t,l),o&&o.m(t,null),oN(t,r),lI(a,t,null),n=!0},p(e,n){e[10]?o?(o.p(e,n),1024&n&&lx(o,1)):((o=fq(e)).c(),lx(o,1),o.m(t,r)):o&&(l$(),lb(o,1,1,()=>{o=null}),ly());var l={};512&n&&(l.scrollAutoCancel=e[9]),1&n&&(l.elasticity=e[0]),536871070&n&&(l.$$scope={dirty:n,ctx:e}),a.$set(l)},i(e){n||(lx(o),lx(a.$$.fragment,e),n=!0)},o(e){lb(o),lb(a.$$.fragment,e),n=!1},d(e){e&&oV(t),o&&o.d(),lL(a)}}}function fY(e){r=new ua({props:{elasticity:e[0],class:"PinturaShapePresetsGroups",$$slots:{default:[f4]},$$scope:{ctx:e}}});for(var t,r,a,n,o,l=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[11]},e[12]],s={$$slots:{default:[f3,e=>{var{panel:t,panelIsActive:r}=e;return{26:t,27:r}},e=>{var{panel:t,panelIsActive:r}=e;return(t?67108864:0)|(r?134217728:0)}]},$$scope:{ctx:e}},c=0;c<l.length;c+=1)s=of(s,l[c]);return n=new d_({props:s}),{c(){t=oH("div"),lA(r.$$.fragment),a=oX(),lA(n.$$.fragment),oq(t,"class","PinturaShapePresetsGrouped")},m(e,l){oj(e,t,l),lI(r,t,null),oN(t,a),lI(n,t,null),o=!0},p(e,t){var a={};1&t&&(a.elasticity=e[0]),536876128&t&&(a.$$scope={dirty:t,ctx:e}),r.$set(a);var o=6144&t?lP(l,[l[0],l[1],2048&t&&{panels:e[11]},4096&t&&lR(e[12])]):{};738206239&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(lx(r.$$.fragment,e),lx(n.$$.fragment,e),o=!0)},o(e){lb(r.$$.fragment,e),lb(n.$$.fragment,e),o=!1},d(e){e&&oV(t),lL(r),lL(n)}}}function fq(e){var t,r;return t=new pF({props:{items:e[10]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};1024&r&&(a.items=e[10]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function fK(e){var t,r;return t=new uS({props:{items:e[7],onclickitem:e[1],ongrabitem:e[2],ondragitem:e[3],ondropitem:e[4]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};128&r&&(a.items=e[7]),2&r&&(a.onclickitem=e[1]),4&r&&(a.ongrabitem=e[2]),8&r&&(a.ondragitem=e[3]),16&r&&(a.ondropitem=e[4]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function fJ(e){var t,r;return t=new pF({props:{items:e[10]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};1024&r&&(a.items=e[10]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function fQ(e){var t,r;return t=new dX({props:{$$slots:{default:[f1]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};805306368&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function f1(e){var t,r=e[28].icon+"";return{c(){t=oU("g")},m(e,a){oj(e,t,a),t.innerHTML=r},p(e,a){268435456&a&&r!==(r=e[28].icon+"")&&(t.innerHTML=r)},d(e){e&&oV(t)}}}function f0(e){var t,r,a=e[28].label+"";return{c(){t=oH("span"),r=oG(a)},m(e,a){oj(e,t,a),oN(t,r)},p(e,t){268435456&t&&a!==(a=e[28].label+"")&&oQ(r,a)},d(e){e&&oV(t)}}}function f2(e){var t,r,a,n=e[28].icon&&fQ(e),o=!e[28].hideLabel&&f0(e);return{c(){n&&n.c(),t=oX(),o&&o.c(),r=oZ()},m(e,l){n&&n.m(e,l),oj(e,t,l),o&&o.m(e,l),oj(e,r,l),a=!0},p(e,a){e[28].icon?n?(n.p(e,a),268435456&a&&lx(n,1)):((n=fQ(e)).c(),lx(n,1),n.m(t.parentNode,t)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),e[28].hideLabel?o&&(o.d(1),o=null):o?o.p(e,a):((o=f0(e)).c(),o.m(r.parentNode,r))},i(e){a||(lx(n),a=!0)},o(e){lb(n),a=!1},d(e){n&&n.d(e),e&&oV(t),o&&o.d(e),e&&oV(r)}}}function f4(e){for(var t,r,a,n=e[10]&&fJ(e),o=[{class:"PinturaControlList"},{tabs:e[5]},e[12],{layout:"compact"}],l={$$slots:{default:[f2,e=>{var{tab:t}=e;return{28:t}},e=>{var{tab:t}=e;return t?268435456:0}]},$$scope:{ctx:e}},s=0;s<o.length;s+=1)l=of(l,o[s]);return(r=new dT({props:l})).$on("select",e[18]),{c(){n&&n.c(),t=oX(),lA(r.$$.fragment)},m(e,o){n&&n.m(e,o),oj(e,t,o),lI(r,e,o),a=!0},p(e,a){e[10]?n?(n.p(e,a),1024&a&&lx(n,1)):((n=fJ(e)).c(),lx(n,1),n.m(t.parentNode,t)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly());var l=4128&a?lP(o,[o[0],32&a&&{tabs:e[5]},4096&a&&lR(e[12]),o[3]]):{};805306368&a&&(l.$$scope={dirty:a,ctx:e}),r.$set(l)},i(e){a||(lx(n),lx(r.$$.fragment,e),a=!0)},o(e){lb(n),lb(r.$$.fragment,e),a=!1},d(e){n&&n.d(e),e&&oV(t),lL(r,e)}}}function f5(e){var t,r;return t=new uS({props:{items:e[13][e[26]].items,disabled:e[13][e[26]].disabled,onclickitem:e[1],ongrabitem:e[2],ondragitem:e[3],ondropitem:e[4]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};67117056&r&&(a.items=e[13][e[26]].items),67117056&r&&(a.disabled=e[13][e[26]].disabled),2&r&&(a.onclickitem=e[1]),4&r&&(a.ongrabitem=e[2]),8&r&&(a.ondragitem=e[3]),16&r&&(a.ondropitem=e[4]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function f3(e){var t,r;return t=new ua({props:{scroll:e[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:e[9],elasticity:e[0],$$slots:{default:[f5]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};134217728&r&&(a.scroll=e[27]?{scrollOffset:0,animate:!1}:void 0),512&r&&(a.scrollAutoCancel=e[9]),1&r&&(a.elasticity=e[0]),603987998&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function f6(e){var t,r,a,n,o=[fX,fG],l=[];function s(e,t){return e[9]?0:e[10]?1:-1}return~(r=s(e))&&(a=l[r]=o[r](e)),{c(){t=oH("div"),a&&a.c(),oq(t,"class","PinturaShapePresetsPalette")},m(e,a){oj(e,t,a),~r&&l[r].m(t,null),n=!0},p(e,n){var[c]=n,d=r;(r=s(e))===d?~r&&l[r].p(e,c):(a&&(l$(),lb(l[d],1,1,()=>{l[d]=null}),ly()),~r?((a=l[r])?a.p(e,c):(a=l[r]=o[r](e)).c(),lx(a,1),a.m(t,null)):a=null)},i(e){n||(lx(a),n=!0)},o(e){lb(a),n=!1},d(e){e&&oV(t),~r&&l[r].d()}}}function f8(e,t,r){var a,n,o,l,s,c,d,u,h,{locale:p}=t,{presets:v}=t,{scrollElasticity:g}=t,{enableSelectImage:m=!0}=t,{willRenderPresetToolbar:f=e7}=t,{onaddpreset:$=ep}=t,{ongrabpreset:y}=t,{ondragpreset:x}=t,{ondroppreset:b}=t,w="presets-".concat(eV()),S=e=>iY(e)&&ez(e[0])&&iY(e[1]),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return fU(e)?e:iX(e)?i2(e,t):'<img src="'.concat(e,'" alt="').concat(t,'"/>')},C=e=>e1(r3(e)),M=["src","alt","thumb","shape","id","mount","disabled"],T=e=>{var t,r,a,n,o,l,s;return ez(e)?iX(e)?n=k(t=e,o=e):(o=C(t=e),n=k(t,o)):(t=e.src,o=e.alt||(ez(t)?C(t):ez(e.thumb)?C(e.thumb):void 0),n=k(e.thumb||t,o),r=e.shape,l=e.mount,s=e.disabled,a=Object.keys(e).reduce((t,r)=>(M.includes(r)||(t[r]=e[r]),t),{})),{id:e,src:t,thumb:n,shape:r,shapeProps:a,alt:o,title:o,mount:l,disabled:s}},P=e=>e.map(e=>S(e)?ea(ea({},e[2]),{},{id:"".concat(w,"-").concat(e[0].toLowerCase()),label:e[0],items:P(e[1])}):T(e));return e.$$set=e=>{"locale"in e&&r(14,p=e.locale),"presets"in e&&r(15,v=e.presets),"scrollElasticity"in e&&r(0,g=e.scrollElasticity),"enableSelectImage"in e&&r(16,m=e.enableSelectImage),"willRenderPresetToolbar"in e&&r(17,f=e.willRenderPresetToolbar),"onaddpreset"in e&&r(1,$=e.onaddpreset),"ongrabpreset"in e&&r(2,y=e.ongrabpreset),"ondragpreset"in e&&r(3,x=e.ondragpreset),"ondroppreset"in e&&r(4,b=e.ondroppreset)},e.$$.update=()=>{32768&e.$$.dirty&&r(7,a=P(v)),128&e.$$.dirty&&r(9,n=a.length),640&e.$$.dirty&&r(8,o=n&&a.some(e=>!!e.items)),384&e.$$.dirty&&r(5,l=o&&a),384&e.$$.dirty&&r(13,s=o&&a.reduce((e,t)=>(e[t.id]=t,e),{})),96&e.$$.dirty&&r(6,c=c||l&&(l.find(e=>!e.disabled)||{}).id),64&e.$$.dirty&&r(12,d={name:w,selected:c}),32&e.$$.dirty&&r(11,u=l&&l.map(e=>e.id)),212994&e.$$.dirty&&r(10,h=p&&f([m&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{vo().then(e=>{e&&$(e)})}}]]))},[g,$,y,x,b,l,c,a,o,n,h,u,d,s,p,v,m,f,e=>{var{detail:t}=e;return r(6,c=t)}]}class f7 extends lz{constructor(e){super(),lF(this,e,f8,f6,ow,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}var f9=e=>(t,r)=>{e.dispatchEvent(pq(t,r))};function $e(e){var t,r,a,n;return t=new pF({props:{items:e[29]}}),a=new fH({props:{locale:e[4],shape:e[31]||e[49],onchange:e[86],controls:e[9],scrollEnable:!1,hideTitles:!0,willRenderControls:e[163]}}),{c(){lA(t.$$.fragment),r=oX(),lA(a.$$.fragment)},m(e,o){lI(t,e,o),oj(e,r,o),lI(a,e,o),n=!0},p(e,r){var n={};536870912&r[0]&&(n.items=e[29]),t.$set(n);var o={};16&r[0]&&(o.locale=e[4]),262145&r[1]&&(o.shape=e[31]||e[49]),512&r[0]&&(o.controls=e[9]),a.$set(o)},i(e){n||(lx(t.$$.fragment,e),lx(a.$$.fragment,e),n=!0)},o(e){lb(t.$$.fragment,e),lb(a.$$.fragment,e),n=!1},d(e){lL(t,e),e&&oV(r),lL(a,e)}}}function $t(e){var t,r,a;return r=new gY({props:{$$slots:{default:[$e]},$$scope:{ctx:e}}}),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"slot","header")},m(e,n){oj(e,t,n),lI(r,t,null),a=!0},p(e,t){var a={};536871440&t[0]|262145&t[1]|262144&t[6]&&(a.$$scope={dirty:t,ctx:e}),r.$set(a)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r)}}}function $r(e){for(var t,r,a=[{locale:e[4]},{ui:e[69]},{shapes:e[5]},{selection:e[58]},{uid:e[19]},{parentRect:e[37]},{rootRect:e[55]},{utilRect:e[39]},{offset:e[50]},{disabled:e[38]},{contextRotation:e[22]},{contextFlipX:e[23]},{contextFlipY:e[24]},{contextZoom:e[36].scale},{active:e[35]},{opacity:e[56]},{hoverColor:e[57]},{caretColor:e[57]},{gridColor:[1,1,1,.125]},{snapColor:e[57]},{eraseRadius:e[47]},{selectRadius:e[6]},{enableButtonFlipVertical:e[10]},{mapEditorPointToImagePoint:e[20]},{mapImagePointToEditorPoint:e[21]},{enableTapToAddText:e[13]},{textInputMode:e[8]},{snapThreshold:e[15]},{snapPointer:!e[48]},{enableSnapToContext:e[16]},{gridSize:e[14]},{willStartInteraction:e[96]},{oninteractionstart:e[80]},{oninteractionupdate:e[81]},{oninteractionrelease:e[82]},{oninteractionend:e[84]},{oninteractioncancel:e[83]},{onleavecanvas:e[88]},{onhovercanvas:e[87]},{onhovershape:e[90]},{ontapcanvas:e[89]},{onaddshape:e[155]},{onselectshape:e[156]},{onblurshape:e[157]},{ontapshape:e[158]},{onupdateshape:e[159]},{onremoveshape:e[160]},e[42]],n={},o=0;o<a.length;o+=1)n=of(n,a[o]);return t=new fL({props:n}),e[161](t),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var n=1106896240&r[0]|252381680&r[1]|511443072&r[2]|24&r[3]?lP(a,[16&r[0]&&{locale:e[4]},128&r[2]&&{ui:e[69]},32&r[0]&&{shapes:e[5]},134217728&r[1]&&{selection:e[58]},524288&r[0]&&{uid:e[19]},64&r[1]&&{parentRect:e[37]},16777216&r[1]&&{rootRect:e[55]},256&r[1]&&{utilRect:e[39]},524288&r[1]&&{offset:e[50]},128&r[1]&&{disabled:e[38]},4194304&r[0]&&{contextRotation:e[22]},8388608&r[0]&&{contextFlipX:e[23]},16777216&r[0]&&{contextFlipY:e[24]},32&r[1]&&{contextZoom:e[36].scale},16&r[1]&&{active:e[35]},33554432&r[1]&&{opacity:e[56]},67108864&r[1]&&{hoverColor:e[57]},67108864&r[1]&&{caretColor:e[57]},a[18],67108864&r[1]&&{snapColor:e[57]},65536&r[1]&&{eraseRadius:e[47]},64&r[0]&&{selectRadius:e[6]},1024&r[0]&&{enableButtonFlipVertical:e[10]},1048576&r[0]&&{mapEditorPointToImagePoint:e[20]},2097152&r[0]&&{mapImagePointToEditorPoint:e[21]},8192&r[0]&&{enableTapToAddText:e[13]},256&r[0]&&{textInputMode:e[8]},32768&r[0]&&{snapThreshold:e[15]},131072&r[1]&&{snapPointer:!e[48]},65536&r[0]&&{enableSnapToContext:e[16]},16384&r[0]&&{gridSize:e[14]},8&r[3]&&{willStartInteraction:e[96]},262144&r[2]&&{oninteractionstart:e[80]},524288&r[2]&&{oninteractionupdate:e[81]},1048576&r[2]&&{oninteractionrelease:e[82]},4194304&r[2]&&{oninteractionend:e[84]},2097152&r[2]&&{oninteractioncancel:e[83]},67108864&r[2]&&{onleavecanvas:e[88]},33554432&r[2]&&{onhovercanvas:e[87]},268435456&r[2]&&{onhovershape:e[90]},134217728&r[2]&&{ontapcanvas:e[89]},1073741824&r[0]|16&r[3]&&{onaddshape:e[155]},1073741824&r[0]&&{onselectshape:e[156]},1073741824&r[0]&&{onblurshape:e[157]},1073741824&r[0]&&{ontapshape:e[158]},1073741824&r[0]|16&r[3]&&{onupdateshape:e[159]},1073741824&r[0]|16&r[3]&&{onremoveshape:e[160]},2048&r[1]&&lR(e[42])]):{};t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(r){e[161](null),lL(t,r)}}}function $i(e){var t,r,a,n,o,l=e[51]&&$r(e);return{c(){t=oH("div"),l&&l.c(),oq(t,"slot","main"),oq(t,"style",r="cursor:".concat(e[46]))},m(r,s){oj(r,t,s),l&&l.m(t,null),e[162](t),a=!0,n||(o=[oY(t,"keydown",e[85]),oF(dl.call(null,t)),oY(t,"dropfiles",function(){ob(e[12]?e[95]:ep)&&(e[12]?e[95]:ep).apply(this,arguments)}),oF(dr.call(null,t)),oY(t,"measure",e[151])],n=!0)},p(n,o){(e=n)[51]?l?(l.p(e,o),1048576&o[1]&&lx(l,1)):((l=$r(e)).c(),lx(l,1),l.m(t,null)):l&&(l$(),lb(l,1,1,()=>{l=null}),ly()),(!a||32768&o[1]&&r!==(r="cursor:".concat(e[46])))&&oq(t,"style",r)},i(e){a||(lx(l),a=!0)},o(e){lb(l),a=!1},d(r){r&&oV(t),l&&l.d(),e[162](null),n=!1,ox(o)}}}function $a(e){var t,r;return t=new f7({props:{locale:e[4],presets:e[18],enableSelectImage:e[11],willRenderPresetToolbar:e[43],onaddpreset:e[94],ongrabpreset:e[91],ondragpreset:e[92],ondroppreset:e[93],scrollElasticity:e[44]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16&r[0]&&(a.locale=e[4]),262144&r[0]&&(a.presets=e[18]),2048&r[0]&&(a.enableSelectImage=e[11]),4096&r[1]&&(a.willRenderPresetToolbar=e[43]),8192&r[1]&&(a.scrollElasticity=e[44]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $n(e){var t,r,a,n="stack"===e[7]&&$o(e),o=(e[53]&&e[34]||"row"===e[7])&&$c(e);return{c(){n&&n.c(),t=oX(),o&&o.c(),r=oZ()},m(e,l){n&&n.m(e,l),oj(e,t,l),o&&o.m(e,l),oj(e,r,l),a=!0},p(e,a){"stack"===e[7]?n?(n.p(e,a),128&a[0]&&lx(n,1)):((n=$o(e)).c(),lx(n,1),n.m(t.parentNode,t)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),e[53]&&e[34]||"row"===e[7]?o?(o.p(e,a),128&a[0]|4194312&a[1]&&lx(o,1)):((o=$c(e)).c(),lx(o,1),o.m(r.parentNode,r)):o&&(l$(),lb(o,1,1,()=>{o=null}),ly())},i(e){a||(lx(n),lx(o),a=!0)},o(e){lb(n),lb(o),a=!1},d(e){n&&n.d(e),e&&oV(t),o&&o.d(e),e&&oV(r)}}}function $o(e){var t,r,a,n,o=[$s,$l],l=[];return a=l[r=e[45]?0:1]=o[r](e),{c(){t=oH("div"),a.c(),oq(t,"class","PinturaControlPanels")},m(e,a){oj(e,t,a),l[r].m(t,null),n=!0},p(e,n){var s=r;(r=e[45]?0:1)===s?l[r].p(e,n):(l$(),lb(l[s],1,1,()=>{l[s]=null}),ly(),(a=l[r])?a.p(e,n):(a=l[r]=o[r](e)).c(),lx(a,1),a.m(t,null))},i(e){n||(lx(a),n=!0)},o(e){lb(a),n=!1},d(e){e&&oV(t),l[r].d()}}}function $l(e){var t,r,a;return r=new fH({props:{locale:e[4],shape:e[31]||e[49],onchange:e[86],controls:e[9],scrollElasticity:e[44],willRenderControls:e[17]}}),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"class","PinturaControlPanel")},m(e,n){oj(e,t,n),lI(r,t,null),a=!0},p(e,t){var a={};16&t[0]&&(a.locale=e[4]),262145&t[1]&&(a.shape=e[31]||e[49]),512&t[0]&&(a.controls=e[9]),8192&t[1]&&(a.scrollElasticity=e[44]),131072&t[0]&&(a.willRenderControls=e[17]),r.$set(a)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r)}}}function $s(e){var t,r,a;return r=new f7({props:{locale:e[4],presets:e[18],enableSelectImage:e[11],willRenderPresetToolbar:e[43],onaddpreset:e[94],ongrabpreset:e[91],ondragpreset:e[92],ondroppreset:e[93],scrollElasticity:e[44]}}),{c(){t=oH("div"),lA(r.$$.fragment),oq(t,"class","PinturaControlPanel")},m(e,n){oj(e,t,n),lI(r,t,null),a=!0},p(e,t){var a={};16&t[0]&&(a.locale=e[4]),262144&t[0]&&(a.presets=e[18]),2048&t[0]&&(a.enableSelectImage=e[11]),4096&t[1]&&(a.willRenderPresetToolbar=e[43]),8192&t[1]&&(a.scrollElasticity=e[44]),r.$set(a)},i(e){a||(lx(r.$$.fragment,e),a=!0)},o(e){lb(r.$$.fragment,e),a=!1},d(e){e&&oV(t),lL(r)}}}function $c(e){var t,r;return t=new ua({props:{class:"PinturaControlListScroller",elasticity:e[44],$$slots:{default:[$m]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};8192&r[1]&&(a.elasticity=e[44]),131729&r[0]|262155&r[1]|262144&r[6]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $d(e){var t,r;return t=new hg({props:{locale:e[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:e[32],selectedIndex:e[32].findIndex(e[152]),onchange:e[79],$$slots:{option:[$v,e=>{var{option:t}=e;return{203:t}},e=>{var{option:t}=e;return[0,0,0,0,0,0,t?131072:0]}]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16&r[0]&&(a.locale=e[4]),2&r[1]&&(a.options=e[32]),1&r[0]|2&r[1]&&(a.selectedIndex=e[32].findIndex(e[152])),16&r[0]|393216&r[6]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $u(e){var t,r;return t=new dX({props:{$$slots:{default:[$h]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16&r[0]|393216&r[6]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $h(e){var t,r=(eO(e[203].icon)?e[203].icon(e[4]):e[203].icon)+"";return{c(){t=oU("g")},m(e,a){oj(e,t,a),t.innerHTML=r},p(e,a){16&a[0]|131072&a[6]&&r!==(r=(eO(e[203].icon)?e[203].icon(e[4]):e[203].icon)+"")&&(t.innerHTML=r)},d(e){e&&oV(t)}}}function $p(e){var t,r,a=(eO(e[203].label)?e[203].label(e[4]):e[203].label)+"";return{c(){t=oH("span"),r=oG(a)},m(e,a){oj(e,t,a),oN(t,r)},p(e,t){16&t[0]|131072&t[6]&&a!==(a=(eO(e[203].label)?e[203].label(e[4]):e[203].label)+"")&&oQ(r,a)},d(e){e&&oV(t)}}}function $v(e){var t,r,a,n=e[203].icon&&$u(e),o=!e[203].hideLabel&&$p(e);return{c(){t=oH("div"),n&&n.c(),r=oX(),o&&o.c(),oq(t,"slot","option")},m(e,l){oj(e,t,l),n&&n.m(t,null),oN(t,r),o&&o.m(t,null),a=!0},p(e,a){e[203].icon?n?(n.p(e,a),131072&a[6]&&lx(n,1)):((n=$u(e)).c(),lx(n,1),n.m(t,r)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),e[203].hideLabel?o&&(o.d(1),o=null):o?o.p(e,a):((o=$p(e)).c(),o.m(t,null))},i(e){a||(lx(n),a=!0)},o(e){lb(n),a=!1},d(e){e&&oV(t),n&&n.d(),o&&o.d()}}}function $g(e){var t,r;return t=new fH({props:{locale:e[4],shape:e[31]||e[49],onchange:e[86],controls:e[9],scrollEnable:!1,hideTitles:!0,willRenderControls:e[153]}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16&r[0]&&(a.locale=e[4]),262145&r[1]&&(a.shape=e[31]||e[49]),512&r[0]&&(a.controls=e[9]),131072&r[0]&&(a.willRenderControls=e[153]),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $m(e){var t,r,a,n=e[34]&&$d(e),o="row"===e[7]&&$g(e);return{c(){n&&n.c(),t=oX(),o&&o.c(),r=oZ()},m(e,l){n&&n.m(e,l),oj(e,t,l),o&&o.m(e,l),oj(e,r,l),a=!0},p(e,a){e[34]?n?(n.p(e,a),8&a[1]&&lx(n,1)):((n=$d(e)).c(),lx(n,1),n.m(t.parentNode,t)):n&&(l$(),lb(n,1,1,()=>{n=null}),ly()),"row"===e[7]?o?(o.p(e,a),128&a[0]&&lx(o,1)):((o=$g(e)).c(),lx(o,1),o.m(r.parentNode,r)):o&&(l$(),lb(o,1,1,()=>{o=null}),ly())},i(e){a||(lx(n),lx(o),a=!0)},o(e){lb(n),lb(o),a=!1},d(e){n&&n.d(e),e&&oV(t),o&&o.d(e),e&&oV(r)}}}function $f(e){var t,r;return t=new ua({props:{class:"PinturaControlListScroller",elasticity:e[44],$$slots:{default:[$b]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};8192&r[1]&&(a.elasticity=e[44]),67108880&r[0]|8388608&r[1]|262144&r[6]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $$(e){var t,r;return t=new dX({props:{$$slots:{default:[$y]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16&r[0]|393216&r[6]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $y(e){var t,r=(eO(e[203].icon)?e[203].icon(e[4]):e[203].icon)+"";return{c(){t=oU("g")},m(e,a){oj(e,t,a),t.innerHTML=r},p(e,a){16&a[0]|131072&a[6]&&r!==(r=(eO(e[203].icon)?e[203].icon(e[4]):e[203].icon)+"")&&(t.innerHTML=r)},d(e){e&&oV(t)}}}function $x(e){var t,r,a,n,o,l=(eO(e[203].label)?e[203].label(e[4]):e[203].label)+"",s=e[203].icon&&$$(e);return{c(){t=oH("div"),s&&s.c(),r=oX(),a=oH("span"),n=oG(l),oq(t,"slot","option")},m(e,l){oj(e,t,l),s&&s.m(t,null),oN(t,r),oN(t,a),oN(a,n),o=!0},p(e,a){e[203].icon?s?(s.p(e,a),131072&a[6]&&lx(s,1)):((s=$$(e)).c(),lx(s,1),s.m(t,r)):s&&(l$(),lb(s,1,1,()=>{s=null}),ly()),(!o||16&a[0]|131072&a[6])&&l!==(l=(eO(e[203].label)?e[203].label(e[4]):e[203].label)+"")&&oQ(n,l)},i(e){o||(lx(s),o=!0)},o(e){lb(s),o=!1},d(e){e&&oV(t),s&&s.d()}}}function $b(e){var t,r;return t=new hg({props:{locale:e[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:e[54],selectedIndex:e[54].findIndex(e[154]),onchange:e[78],$$slots:{option:[$x,e=>{var{option:t}=e;return{203:t}},e=>{var{option:t}=e;return[0,0,0,0,0,0,t?131072:0]}]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};16&r[0]&&(a.locale=e[4]),8388608&r[1]&&(a.options=e[54]),67108864&r[0]|8388608&r[1]&&(a.selectedIndex=e[54].findIndex(e[154])),16&r[0]|393216&r[6]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $w(e){var t,r,a,n,o,l=[$n,$a],s=[];function c(e,t){return e[52]?0:e[45]?1:-1}~(r=c(e))&&(a=s[r]=l[r](e));var d=e[33]&&$f(e);return{c(){t=oH("div"),a&&a.c(),n=oX(),d&&d.c(),oq(t,"slot","footer"),oq(t,"style",e[40])},m(e,a){oj(e,t,a),~r&&s[r].m(t,null),oN(t,n),d&&d.m(t,null),o=!0},p(e,u){var h=r;(r=c(e))===h?~r&&s[r].p(e,u):(a&&(l$(),lb(s[h],1,1,()=>{s[h]=null}),ly()),~r?((a=s[r])?a.p(e,u):(a=s[r]=l[r](e)).c(),lx(a,1),a.m(t,n)):a=null),e[33]?d?(d.p(e,u),4&u[1]&&lx(d,1)):((d=$f(e)).c(),lx(d,1),d.m(t,null)):d&&(l$(),lb(d,1,1,()=>{d=null}),ly()),(!o||512&u[1])&&oq(t,"style",e[40])},i(e){o||(lx(a),lx(d),o=!0)},o(e){lb(a),lb(d),o=!1},d(e){e&&oV(t),~r&&s[r].d(),d&&d.d()}}}function $S(e){var t,r;return(t=new g9({props:{hasHeader:e[41],$$slots:{footer:[$w],main:[$i],header:[$t]},$$scope:{ctx:e}}})).$on("measure",e[164]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};1024&r[1]&&(a.hasHeader=e[41]),2113929201&r[0]|134216703&r[1]|262144&r[6]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $k(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,b,w,S,k,C,M,T,P,R,E,A,I,L,F,z,O,B,D,_,N,W,j,V,H,U,G,X,Z,Y,q,K,J,Q,ee,et,er,ei,en,eo,el,es,ec,ed,eu,eh,ep,ev,eg,em,ef,e$,ey,ex,eb,ew,eS=og,ek=()=>(eS(),eS=oS(eL,e=>r(35,J=e)),eL),eC=og,eM=()=>(eC(),eC=oS(e_,e=>r(142,er=e)),e_),eT=og,eP=()=>(eT(),eT=oS(ts,e=>r(37,ed=e)),ts),eR=og,eE=()=>(eR(),eR=oS(eO,e=>r(149,ey=e)),eO),eA=og,eI=()=>(eA(),eA=oS(eF,e=>r(56,ew=e)),eF);e.$$.on_destroy.push(()=>eS()),e.$$.on_destroy.push(()=>eC()),e.$$.on_destroy.push(()=>eT()),e.$$.on_destroy.push(()=>eR()),e.$$.on_destroy.push(()=>eA());var{isActive:eL}=t;ek();var{isActiveFraction:eF}=t;eI();var{isVisible:eO}=t;eE();var{stores:eB}=t,{locale:eD={}}=t,{shapes:e_}=t;eM();var{toolbar:eN=[]}=t,{toolShapes:eW={}}=t,{toolActive:ej}=t,{toolSelectRadius:eV}=t,{toolRetainStyles:eH=!1}=t,{toolbarLayout:eU="stack"}=t,{textInputMode:eG}=t,{shapeControls:eX={}}=t,{enableButtonFlipVertical:eZ=!1}=t,{enablePresetSelectImage:eY=!0}=t,{enablePresetDropImage:eq=!0}=t,{enableSelectToolToAddShape:eK=!1}=t,{enableAutoSelectMoveTool:eJ=["line","arrow","path","rectangle","ellipse","text"]}=t,{enableTapToAddText:eQ=!1}=t,{enableMoveTool:e1=!1}=t,{enableViewTool:e0=!1}=t,{enableToolShareStyles:e2=!0}=t,{gridSize:e4=0}=t,{snapThreshold:e5=0}=t,{enableSnapToContext:e3=!0}=t,{willRenderHeaderTools:e6=e7}=t,{willRenderPresetToolbar:e8}=t,{willRenderShapeStyleControls:e9}=t,{willStartInteraction:te}=t,{shapePresets:tt=[]}=t,{utilKey:tr}=t,{mapScreenPointToImagePoint:ti}=t,{mapImagePointToScreenPoint:ta}=t,{imageRotation:tn=0}=t,{imageFlipX:to=!1}=t,{imageFlipY:tl=!1}=t,{parentRect:ts}=t;eP();var{hooks:tc={}}=t,td=lr("selection");oC(e,td,e=>r(148,em=e));var tu=lr("isAnimated");oC(e,tu,e=>r(139,Q=e));var th=lr("elasticityMultiplier");oC(e,th,e=>r(143,ei=e));var tp=lr("ui");oC(e,tp,e=>r(174,ef=e));var tv=lr("keysPressed");oC(e,tv,e=>r(146,ev=e));var{env:tg,history:tm,rootRect:t$,rootColorSecondary:ty,enablePanInput:tx,enablePanInputStatus:tb,enableZoomInput:tw,stageRect:tS,utilRectPadded:tk,scrollElasticity:tC,imageOverlayMarkup:tM,imagePreviewModifiers:tT,imageCropRect:tP,shapePreprocessor:tR,stageScalar:tE,imageSelectionRect:tA,imageTransformsInterpolated:tI,imageSelectionPan:tF,imageSize:tz,allowPan:tO,allowZoom:tB,allowZoomControls:tD,allowPlayPause:t_}=eB;oC(e,tg,e=>r(140,ee=e)),oC(e,t$,e=>r(55,eb=e)),oC(e,ty,e=>r(57,a=e)),oC(e,tb,e=>r(38,eh=e)),oC(e,tS,e=>r(144,en=e)),oC(e,tk,e=>r(39,e$=e)),oC(e,tT,e=>r(150,ex=e)),oC(e,tP,e=>r(173,eu=e)),oC(e,tR,e=>r(147,eg=e)),oC(e,tE,e=>r(171,es=e)),oC(e,tA,e=>r(172,ec=e)),oC(e,tI,e=>r(36,eo=e)),oC(e,tF,e=>r(170,el=e)),oC(e,tz,e=>r(145,ep=e));var tN=(e,t)=>{var{willRenderPresetToolbar:r,shapePresets:a,enableViewTool:n,enableMoveTool:o}=t,l=0!==a.length||r?e:e.filter(e=>"preset"!==e[0]);return h&&(l=[["move",e=>e.shapeLabelToolMove,{icon:e=>e.shapeIconToolMove}],["view",e=>e.shapeLabelToolView,{icon:e=>e.shapeIconToolView}],...l]),l=o?l:l.filter(e=>"move"!==e[0]),n?l:l.filter(e=>"view"!==e[0])},tj=0,tH={},tU=e=>{var t,r,[a,o]=n[e],l="relative"===o.position,s=l?"0%":0,c=l?"0%":0;aZ(a)||aU(a)?(r=l?"20%":.2*ed.width,(t=aD(a)).x=s,t.y=c,nU(t,{width:r,height:r},ed)):aY(a)?(r=l?"10%":.1*ed.width,(t=aD(a)).x=s,t.y=c,nU(t,{rx:r,ry:r},ed)):aq(a)&&(r=l?"10%":.1*ed.width,(t=aD(a)).x1=s,t.y1=c,t.x2=s,t.y2=c),t&&Promise.resolve().then(()=>{rt(t9(t,void 0,r))})},tG=e=>ti(fl(e,eb)),tX={},tZ=e=>{if(o){var t=o.getShapeDraft(td);t&&(e&&(l=t.drawMode),o.updateShapeDraft({drawMode:e?"subtract":l},td))}},tY=e=>{if(aK(e)&&iZ(e,"pathClose")){var t=[...e.strokeColor];t[3]=1,o.updateMarkupShape(e,{pathClose:!1,strokeColor:t},!1),o.removeMarkupShapeProps(e,["backgroundColor"],!1),o.confirmMarkupItemDraft(),o.selectShape(e)}},tq=()=>{o&&"move"!==ej&&o.blurShapes()},tK=()=>ef[tr]?ef[tr][ej]:{},tJ=()=>{r(116,tX={})},tQ=(e,t,r)=>{var a=ef[e],n=a?a[t]:{};tp.set(ea(ea({},ef),{},{[e]:ea(ea({},a),{},{[t]:ea(ea({},n),r)})}))},t1=e=>{tp.set({[e]:{}})},t0=(e,t)=>iG(e)?e:e.endsWith("%")?parseFloat(e)/100*t.width:void 0,t2=void 0,t4=void 0,t5=void 0,t3=e=>{tM.update(t=>[...t.filter(e=>e.id!=="cursor-".concat(tr)),...e])},t6=()=>{tM.update(e=>e.filter(e=>e.id!=="cursor-".concat(tr)))},t8=(e,t,r)=>{var a,{cursorStyle:n,cursorSize:o}=e,l=t[o];if(void 0===l?a=t0(o,r):iG(l)?a=l:ez(l)&&(a=nO(o,t[o],r),"strokeWidth"===o&&(a*=.5)),!(a<=0))return{size:a,style:n}},t7=(e,t,r,a,n,o)=>{if(a)return n?"grabbing":"grab";if(e&&!t)return"none";if(!t)return"move"===o?"default":"crosshair";var l=t||r;return a0(l)?a2(l)?"modal"===eG?"default":"text":nv(l)?"move":"default":"default"},t9=(e,t,r)=>{var a=!1;t||(a=!0,t=V?ti(rm(en)):rm(eu)),t.x-=ed.x||0,t.y-=ed.y||0,(to||tl)&&(e.flipX=to,e.flipY=tl);var n=o.getShapesNearPosition(er,t);if(a&&n.length){var l=.1*Math.min(eu.width,eu.height);t.x+=Math.round(-l+Math.random()*l*2),t.y+=Math.round(-l+Math.random()*l*2)}if(0!==tn&&(to&&tl?e.rotation=-tn:to?e.rotation=tn:tl?e.rotation=tn:e.rotation=-tn),iZ(e,"width")&&iZ(e,"height")){var{width:s,height:c}=nH(e,["width","height"],ed);nU(e,{x:t.x-.5*s,y:t.y-.5*c},ed)}else if(aY(e))nU(e,{x:t.x,y:t.y},ed);else if(aq(e)){var{x1:d,y1:u,x2:h,y2:p}=nH(e,["x1","y1","x2","y2"],ed),v=tW(tf(d,u),tf(h,p)),g=ez(r)?nL(r,ed.width):v;nU(e,{x1:t.x-g,y1:t.y+g,x2:t.x+g,y2:t.y-g},ed)}else if(aK(e)){var{points:m}=nH(e,["points"],ed),f=tV(m);nU(e,{points:m.map(e=>({x:e.x+t.x-f.x,y:e.y+t.y-f.y}))},ed)}return e},re=(e,t)=>{var r=t9(aj(e,eu),t);return e.shape&&(iZ(e.shape,"x")&&(r.x=e.shape.x),iZ(e.shape,"y")&&(r.y=e.shape.y)),rt(r)},rt=e=>{var{beforeAddShape:t=()=>!0}=tc;if(t(e))return o.addShape(e),o.selectShape(e),H("addshape",e),tm.write(),e},rr=!1,ri=(e,t)=>e.forEach(e=>re(e,t)),ra=()=>{tm.write()},rn=lr("redrawTrigger");oC(e,rn,e=>r(141,et=e));var ro=e=>{er&&e_.update(t=>t.map(t=>(t._prerender=!!e&&a2(t),t)))},rl=[],rs=cJ(Q?20:0);return oC(e,rs,e=>r(138,K=e)),e.$$set=e=>{"isActive"in e&&ek(r(1,eL=e.isActive)),"isActiveFraction"in e&&eI(r(2,eF=e.isActiveFraction)),"isVisible"in e&&eE(r(3,eO=e.isVisible)),"stores"in e&&r(101,eB=e.stores),"locale"in e&&r(4,eD=e.locale),"shapes"in e&&eM(r(5,e_=e.shapes)),"toolbar"in e&&r(102,eN=e.toolbar),"toolShapes"in e&&r(103,eW=e.toolShapes),"toolActive"in e&&r(0,ej=e.toolActive),"toolSelectRadius"in e&&r(6,eV=e.toolSelectRadius),"toolRetainStyles"in e&&r(104,eH=e.toolRetainStyles),"toolbarLayout"in e&&r(7,eU=e.toolbarLayout),"textInputMode"in e&&r(8,eG=e.textInputMode),"shapeControls"in e&&r(9,eX=e.shapeControls),"enableButtonFlipVertical"in e&&r(10,eZ=e.enableButtonFlipVertical),"enablePresetSelectImage"in e&&r(11,eY=e.enablePresetSelectImage),"enablePresetDropImage"in e&&r(12,eq=e.enablePresetDropImage),"enableSelectToolToAddShape"in e&&r(105,eK=e.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in e&&r(106,eJ=e.enableAutoSelectMoveTool),"enableTapToAddText"in e&&r(13,eQ=e.enableTapToAddText),"enableMoveTool"in e&&r(107,e1=e.enableMoveTool),"enableViewTool"in e&&r(108,e0=e.enableViewTool),"enableToolShareStyles"in e&&r(109,e2=e.enableToolShareStyles),"gridSize"in e&&r(14,e4=e.gridSize),"snapThreshold"in e&&r(15,e5=e.snapThreshold),"enableSnapToContext"in e&&r(16,e3=e.enableSnapToContext),"willRenderHeaderTools"in e&&r(110,e6=e.willRenderHeaderTools),"willRenderPresetToolbar"in e&&r(111,e8=e.willRenderPresetToolbar),"willRenderShapeStyleControls"in e&&r(17,e9=e.willRenderShapeStyleControls),"willStartInteraction"in e&&r(112,te=e.willStartInteraction),"shapePresets"in e&&r(18,tt=e.shapePresets),"utilKey"in e&&r(19,tr=e.utilKey),"mapScreenPointToImagePoint"in e&&r(20,ti=e.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in e&&r(21,ta=e.mapImagePointToScreenPoint),"imageRotation"in e&&r(22,tn=e.imageRotation),"imageFlipX"in e&&r(23,to=e.imageFlipX),"imageFlipY"in e&&r(24,tl=e.imageFlipY),"parentRect"in e&&eP(r(25,ts=e.parentRect)),"hooks"in e&&r(113,tc=e.hooks)},e.$$.update=()=>{if(4194304&e.$$.dirty[4]&&r(123,u=ev.includes(18)),2098176&e.$$.dirty[3]&&(!n||eW!==n)&&r(114,n=eW),16&e.$$.dirty[1]&&tO.set(J),16&e.$$.dirty[1]&&tB.set(J),16&e.$$.dirty[1]&&tD.set(J),512&e.$$.dirty[3]&&r(33,h=Array.isArray(eN)&&eN.length>1&&Array.isArray(eN[0][1])),4&e.$$.dirty[1]|512&e.$$.dirty[3]&&r(54,p=h?eN.map((e,t)=>[t,e[0]]):[]),67108864&e.$$.dirty[0]|4&e.$$.dirty[1]|512&e.$$.dirty[3]&&r(137,v=h?eN[tj][1]:eN),262144&e.$$.dirty[0]|311296&e.$$.dirty[3]|8192&e.$$.dirty[4]&&r(32,g=tN(v,{willRenderPresetToolbar:e8,shapePresets:tt,enableMoveTool:e1,enableViewTool:e0})),2&e.$$.dirty[1]&&r(135,$=!!g.length),1&e.$$.dirty[0]|2&e.$$.dirty[1]|2048&e.$$.dirty[4]&&$&&void 0===ej&&r(0,ej=g[0][0]),67108865&e.$$.dirty[0]|4&e.$$.dirty[1]|4194304&e.$$.dirty[3]|8192&e.$$.dirty[4]&&h&&r(115,tH=ea(ea({},tH),{},{[tj]:v.map(e=>{var[t]=e;return t}).includes(ej)?ej:tH[tj]||v[0][0]})),512&e.$$.dirty[0]&&r(134,m=!!Object.keys(eX).length),2&e.$$.dirty[1]&&r(34,f=g.length>1),12&e.$$.dirty[1]&&r(53,y=f||h),1&e.$$.dirty[0]&&r(136,x=void 0!==ej),7168&e.$$.dirty[4]&&r(52,b=(!x||$)&&m),268435456&e.$$.dirty[0]&&r(30,H=d&&f9(d)),1073741825&e.$$.dirty[0]|16&e.$$.dirty[1]&&J&&H&&H("selectcontrol",ej),524288&e.$$.dirty[0]|16&e.$$.dirty[1]|67108864&e.$$.dirty[4]&&(J?oL(tT,ex[tr]={maskMarkupOpacity:.85},ex):delete ex[tr]),1&e.$$.dirty[0]|2097152&e.$$.dirty[3]&&r(133,w=ej&&n[ej]?n[ej][1]:void 0),512&e.$$.dirty[4]&&r(124,S=w&&w.isSelection?"selection":"shapes"),1073741824&e.$$.dirty[3]|1&e.$$.dirty[4]&&tZ("selection"===S&&u),134217729&e.$$.dirty[0]&&ej&&o){var t=o.getMarkupItemDraft();t&&tY(t)}if(1&e.$$.dirty[0]&&ej&&tq(),16&e.$$.dirty[1]|33554432&e.$$.dirty[4]&&r(51,k=ey&&J),256&e.$$.dirty[1]|1048576&e.$$.dirty[4]&&r(50,C=e$&&tf(en.x-e$.x,en.y-e$.y)),512&e.$$.dirty[0]&&r(132,M=Object.keys(eX)),16&e.$$.dirty[1]|262144&e.$$.dirty[4]&&r(120,T=J&&er.filter(a0)[0]),16&e.$$.dirty[1]|262144&e.$$.dirty[4]&&r(129,P=J&&er.find(e=>a2(e))),16&e.$$.dirty[1]|262144&e.$$.dirty[4]&&r(49,R=J&&er.find(e=>a4(e))),1&e.$$.dirty[0]|16&e.$$.dirty[1]|2097152&e.$$.dirty[3]&&r(126,E=J&&n[ej]?nA(aD(ea(ea({},n[ej][0]),tK()))):{}),2097152&e.$$.dirty[3]&&n&&tJ(),1&e.$$.dirty[0]|8454144&e.$$.dirty[3]|260&e.$$.dirty[4]&&r(125,A=E&&Object.keys(E).reduce((e,t)=>{var r="disableStyle"===t,a="settings"===t,n=!!M.find(e=>e.split("_").includes(t));if(!r&&!a&&!n||void 0===E[t]||!0===E.disableStyle||E.disableStyle&&E.disableStyle.includes(t))return e;var{share:o=!0}=E.settings&&E.settings[t]||{},l=e2&&o?tX:tX[ej]||{};return e[t]=iZ(l,t)?l[t]:E[t],e},{})),524289&e.$$.dirty[0]|2048&e.$$.dirty[3]|2&e.$$.dirty[4]&&(eH?tQ(tr,ej,A):t1(tr)),16&e.$$.dirty[1]|134217728&e.$$.dirty[3]|16777218&e.$$.dirty[4]&&r(31,I=em&&J?T||A:void 0),1&e.$$.dirty[1]|8388608&e.$$.dirty[4]&&I&&I.lineEnd&&!eg&&console.warn("Set shapePreprocessor property to draw lineStart and lineEnd styles.\nhttps://pqina.nl/pintura/docs/v8/api/exports/#createshapepreprocessor"),1&e.$$.dirty[0]|4&e.$$.dirty[4]&&r(48,L=iZ(E,"eraseRadius")||iZ(E,"points")&&!iZ(E,"pathClose")||"move"===ej||"view"===ej),64&e.$$.dirty[1]|4&e.$$.dirty[4]&&r(47,F=E&&void 0!==E.eraseRadius?t0(E.eraseRadius,ed):void 0),16&e.$$.dirty[1]|4194304&e.$$.dirty[4]&&r(130,z=J&&ev.includes(32)),1&e.$$.dirty[0]|16&e.$$.dirty[1]&&r(131,O=J&&"view"===ej),192&e.$$.dirty[4]&&r(128,B=O||z),48&e.$$.dirty[4]&&r(127,D=!!B&&(!!P||uE(document.activeElement))),16&e.$$.dirty[1]|24&e.$$.dirty[4]&&tx.set(!J||B&&!D),16&e.$$.dirty[1]|8&e.$$.dirty[4]&&tw.set(!J||!D),64&e.$$.dirty[1]|6&e.$$.dirty[4]&&r(121,_=E.cursorStyle?t8(E,ea(ea({},E),A),ed):void 0),67108864&e.$$.dirty[3]|2097152&e.$$.dirty[4]&&r(122,N=t5&&tL(t5,ep)),524288&e.$$.dirty[0]|160&e.$$.dirty[1]|1929379840&e.$$.dirty[3]|1&e.$$.dirty[4]){if(N&&!t2&&_&&!eh){var a=_.size*eo.scale,l={id:"cursor-".concat(tr),x:t4.x,y:t4.y,strokeWidth:.5,strokeColor:[0,0,0]};"ellipse"===_.style&&(l.rx=a,l.ry=a);var s={strokeWidth:2.5,strokeColor:[1,1,1],opacity:.75},c=[ea(ea({},l),s),l];if("selection"===S&&u){var el=t4.x+a,es=t4.y+a+4,ec={id:"cursor-".concat(tr),strokeWidth:.75,strokeColor:[0,0,0],points:[{x:el,y:es},{x:el+4,y:es}]};c.push(ea(ea(ea({},ec),s),{},{strokeWidth:2,points:[{x:el-.5,y:es},{x:el+4.5,y:es}]}),ec)}t3(c)}else t6()}1&e.$$.dirty[0]|128&e.$$.dirty[1]|956301312&e.$$.dirty[3]&&r(46,W=N?t7(_,t2,T,eh,!1,ej):"default"),264193&e.$$.dirty[0]|262144&e.$$.dirty[3]&&r(45,j="preset"===ej&&(tt.length>0||eY||e8)),64&e.$$.dirty[1]&&(V=!iZ(ed,"x")&&!iZ(ed,"y")),524288&e.$$.dirty[4]&&r(44,U=ei*tC),262144&e.$$.dirty[3]|196608&e.$$.dirty[4]&&r(43,G=et&&e8?e=>vl(()=>e8(e,re,ea({},ee),()=>rn.set({}))):e7),1048576&e.$$.dirty[3]&&r(42,X=Object.keys(tc).reduce((e,t)=>("beforeAddShape"===t||void 0===tc[t]||(e[t]=tc[t]),e),{})),16&e.$$.dirty[1]&&ro(J),131072&e.$$.dirty[3]|196608&e.$$.dirty[4]&&r(29,Z=et&&e6([],ee,()=>rn.set({}))),536871424&e.$$.dirty[0]&&r(41,Y=!!Z.length||!!Object.keys(eX).some(e=>rl.includes(e))),16&e.$$.dirty[1]|32768&e.$$.dirty[4]&&Q&&rs.set(J?0:20),16384&e.$$.dirty[4]&&r(40,q=K?"transform: translateY(".concat(K,"px)"):void 0)},t_.set(!1),[ej,eL,eF,eO,eD,e_,eV,eU,eG,eX,eZ,eY,eq,eQ,e4,e5,e3,e9,tt,tr,ti,ta,tn,to,tl,ts,tj,o,d,Z,H,I,g,h,f,J,eo,ed,eh,e$,q,Y,X,G,U,j,W,F,L,R,C,k,b,y,p,eb,ew,a,td,tu,th,tp,tv,tg,t$,ty,tb,tS,tk,tM,tT,tP,tR,tE,tA,tI,tF,tz,(e,t)=>{var{index:a}=e;r(26,tj=a),r(0,ej=tH[a])},(e,t)=>{var{value:a}=e;r(0,ej=a),(eK||/enter/i.test(t.key))&&tU(a)},e=>{if("eraser"===ej)s=o.eraseShape();else if(ej&&n[ej]){var[t,r={}]=n[ej],{drawMode:a}=I;"selection"===S&&"new"===a&&td.set([]);var c={};"selection"===S&&(H("selectiondown",[...em]),u&&(l=t.drawMode,c.drawMode="subtract")),s=o.createShape(ea(ea(ea({},t),A),c),r)}else s=void 0;return!!s&&(s.start(e),!0)},e=>!!s&&(s.update(e),!0),e=>!!s&&(s.release(e),!0),e=>!!s&&(s.cancel(e),s=void 0,!0),e=>{if(!s)return!1;if(s.end(e),s=void 0,"selection"===S){if(e.detail.isTap){var[t]=n[ej];t.bitmap||td.set([])}H("selectionup",[...em])}var a=o.getMarkupItemDraft(),l=e1&&(!0===eJ||Array.isArray(eJ)&&eJ.includes(ej));return(!a||a.isEditing)&&l&&r(0,ej="move"),!0},e=>{var{key:t}=e,r=o.getMarkupItemDraft();/escape/i.test(t)&&r&&(e.preventDefault(),e.stopPropagation(),o.discardMarkupItemDraft(),s=void 0),/enter/i.test(t)&&r&&(e.preventDefault(),e.stopPropagation(),tY(r),s=void 0)},function(e){Object.keys(e).forEach(t=>{var{retain:a=!0,share:n=!0}=E.settings&&E.settings[t]||{};if(a){if(e2&&n){r(116,tX[t]=e[t],tX);return}tX[ej]||r(116,tX[ej]={},tX),r(116,tX[ej][t]=e[t],tX)}}),H("selectstyle",e),T&&(o.updateMarkupShape(T,e),clearTimeout(c),c=setTimeout(()=>{ra()},200))},(e,t,a)=>{r(118,t4=t),r(119,t5=a)},()=>{r(119,t5=void 0),r(118,t4=void 0)},e=>{H("markuptap",e)},e=>r(117,t2=e),()=>{rr=!1},(e,t)=>{if(!rr){var{beforeAddShape:r=()=>!0}=tc,a=tG(t),n=o.getMarkupItemDraft(),l=rA(eu,{x:a.x+(ed.x||0),y:a.y+(ed.y||0)});if(n&&!l&&o.discardMarkupItemDraft(),l){if(!n){var s=t9(aj(e,eu),a);if(!r(s)){rr=!0,t.preventDefault();return}ni(s),o.addShape(s);return}aZ(n)&&(a.x-=.5*n.width,a.y-=.5*n.height),e.shape&&(iZ(e.shape,"x")&&(a.x=e.shape.x),iZ(e.shape,"y")&&(a.y=e.shape.y)),o.updateMarkupShape(n,a)}}},(e,t)=>{if(!rr){var r=tG(t);if(!rA(eu,{x:r.x+(ed.x||0),y:r.y+(ed.y||0)})){o.discardMarkupItemDraft();return}var a=o.confirmMarkupItemDraft();o.selectShape(a),H("addshape",a),tm.write()}},e=>re(e),e=>ri(e.detail.resources,tG(e.detail.event)),e=>{if(!te)return!0;var t=rectClone(ec);return rectScale(t,1/es),rectTranslate(t,el),rectScale(t,eo.scale),te(e,ea(ea({},t),{},{x:t.x+en.x,y:t.y+en.y}))},ra,rn,rl,rs,eB,eN,eW,eH,eK,eJ,e1,e0,e2,e6,e8,te,tc,n,tH,tX,t2,t4,t5,T,_,N,u,S,A,E,D,B,P,z,O,M,w,m,$,x,v,K,Q,ee,et,er,ei,en,ep,ev,eg,em,ey,ex,function(t){li.call(this,e,t)},e=>e[0]===ej,(e,t,r)=>{var a=e.filter(e=>{var[,t]=e;return!rl.includes(t)});return e9?e9(a,t,r):a},e=>e[0]===tj,e=>{Promise.resolve().then(()=>{H("addshape",e),ra()})},e=>{H("selectshape",e)},e=>{Promise.resolve().then(()=>{H("blurshape",e)})},e=>{H("tapshape",e)},e=>{H("updateshape",e),ra()},e=>{H("removeshape",e),ra()},function(e){ln[e?"unshift":"push"](()=>{r(27,o=e)})},function(e){ln[e?"unshift":"push"](()=>{r(28,d=e)})},e=>e.filter(e=>{var[,t]=e;return rl.includes(t)}),function(t){li.call(this,e,t)}]}class $C extends lz{constructor(e){super(),lF(this,e,$k,$S,ow,{isActive:1,isActiveFraction:2,isVisible:3,stores:101,locale:4,shapes:5,toolbar:102,toolShapes:103,toolActive:0,toolSelectRadius:6,toolRetainStyles:104,toolbarLayout:7,textInputMode:8,shapeControls:9,enableButtonFlipVertical:10,enablePresetSelectImage:11,enablePresetDropImage:12,enableSelectToolToAddShape:105,enableAutoSelectMoveTool:106,enableTapToAddText:13,enableMoveTool:107,enableViewTool:108,enableToolShareStyles:109,gridSize:14,snapThreshold:15,enableSnapToContext:16,willRenderHeaderTools:110,willRenderPresetToolbar:111,willRenderShapeStyleControls:17,willStartInteraction:112,shapePresets:18,utilKey:19,mapScreenPointToImagePoint:20,mapImagePointToScreenPoint:21,imageRotation:22,imageFlipX:23,imageFlipY:24,parentRect:25,hooks:113},null,[-1,-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),lg()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),lg()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),lg()}get stores(){return this.$$.ctx[101]}set stores(e){this.$$set({stores:e}),lg()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),lg()}get shapes(){return this.$$.ctx[5]}set shapes(e){this.$$set({shapes:e}),lg()}get toolbar(){return this.$$.ctx[102]}set toolbar(e){this.$$set({toolbar:e}),lg()}get toolShapes(){return this.$$.ctx[103]}set toolShapes(e){this.$$set({toolShapes:e}),lg()}get toolActive(){return this.$$.ctx[0]}set toolActive(e){this.$$set({toolActive:e}),lg()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(e){this.$$set({toolSelectRadius:e}),lg()}get toolRetainStyles(){return this.$$.ctx[104]}set toolRetainStyles(e){this.$$set({toolRetainStyles:e}),lg()}get toolbarLayout(){return this.$$.ctx[7]}set toolbarLayout(e){this.$$set({toolbarLayout:e}),lg()}get textInputMode(){return this.$$.ctx[8]}set textInputMode(e){this.$$set({textInputMode:e}),lg()}get shapeControls(){return this.$$.ctx[9]}set shapeControls(e){this.$$set({shapeControls:e}),lg()}get enableButtonFlipVertical(){return this.$$.ctx[10]}set enableButtonFlipVertical(e){this.$$set({enableButtonFlipVertical:e}),lg()}get enablePresetSelectImage(){return this.$$.ctx[11]}set enablePresetSelectImage(e){this.$$set({enablePresetSelectImage:e}),lg()}get enablePresetDropImage(){return this.$$.ctx[12]}set enablePresetDropImage(e){this.$$set({enablePresetDropImage:e}),lg()}get enableSelectToolToAddShape(){return this.$$.ctx[105]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),lg()}get enableAutoSelectMoveTool(){return this.$$.ctx[106]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),lg()}get enableTapToAddText(){return this.$$.ctx[13]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),lg()}get enableMoveTool(){return this.$$.ctx[107]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),lg()}get enableViewTool(){return this.$$.ctx[108]}set enableViewTool(e){this.$$set({enableViewTool:e}),lg()}get enableToolShareStyles(){return this.$$.ctx[109]}set enableToolShareStyles(e){this.$$set({enableToolShareStyles:e}),lg()}get gridSize(){return this.$$.ctx[14]}set gridSize(e){this.$$set({gridSize:e}),lg()}get snapThreshold(){return this.$$.ctx[15]}set snapThreshold(e){this.$$set({snapThreshold:e}),lg()}get enableSnapToContext(){return this.$$.ctx[16]}set enableSnapToContext(e){this.$$set({enableSnapToContext:e}),lg()}get willRenderHeaderTools(){return this.$$.ctx[110]}set willRenderHeaderTools(e){this.$$set({willRenderHeaderTools:e}),lg()}get willRenderPresetToolbar(){return this.$$.ctx[111]}set willRenderPresetToolbar(e){this.$$set({willRenderPresetToolbar:e}),lg()}get willRenderShapeStyleControls(){return this.$$.ctx[17]}set willRenderShapeStyleControls(e){this.$$set({willRenderShapeStyleControls:e}),lg()}get willStartInteraction(){return this.$$.ctx[112]}set willStartInteraction(e){this.$$set({willStartInteraction:e}),lg()}get shapePresets(){return this.$$.ctx[18]}set shapePresets(e){this.$$set({shapePresets:e}),lg()}get utilKey(){return this.$$.ctx[19]}set utilKey(e){this.$$set({utilKey:e}),lg()}get mapScreenPointToImagePoint(){return this.$$.ctx[20]}set mapScreenPointToImagePoint(e){this.$$set({mapScreenPointToImagePoint:e}),lg()}get mapImagePointToScreenPoint(){return this.$$.ctx[21]}set mapImagePointToScreenPoint(e){this.$$set({mapImagePointToScreenPoint:e}),lg()}get imageRotation(){return this.$$.ctx[22]}set imageRotation(e){this.$$set({imageRotation:e}),lg()}get imageFlipX(){return this.$$.ctx[23]}set imageFlipX(e){this.$$set({imageFlipX:e}),lg()}get imageFlipY(){return this.$$.ctx[24]}set imageFlipY(e){this.$$set({imageFlipY:e}),lg()}get parentRect(){return this.$$.ctx[25]}set parentRect(e){this.$$set({parentRect:e}),lg()}get hooks(){return this.$$.ctx[113]}set hooks(e){this.$$set({hooks:e}),lg()}}var $M=(e,t,r,a,n,o,l,s,c)=>{var d=tw(e),u=.5*r.width,h=.5*r.height,p=.5*t.width,v=.5*t.height,g=n.x+a.x,m=n.y+a.y;s&&(d.x=r.width-d.x),c&&(d.y=r.height-d.y);var f=Math.cos(o),$=Math.sin(o);d.x-=u,d.y-=h;var y=d.x*f-d.y*$,x=d.x*$+d.y*f;d.x=u+y,d.y=h+x,d.x*=l,d.y*=l,d.x+=p,d.y+=v,d.x+=g,d.y+=m,d.x-=u*l,d.y-=h*l;var b=(n.x-g)*l,w=(n.y-m)*l;return d.x+=b*f-w*$,d.y+=b*$+w*f,d},$T=(e,t,r,a,n,o,l,s,c)=>{var d=tw(e),u=t2(r),h=t2(t),p=tf(n.x+a.x,n.y+a.y),v=Math.cos(o),g=Math.sin(o);d.x-=h.x,d.y-=h.y;var m=(n.x-p.x)*l,f=(n.y-p.y)*l;d.x-=m*v-f*g,d.y-=m*g+f*v,d.x-=p.x,d.y-=p.y,d.x/=l,d.y/=l;var $=d.x*v+d.y*g,y=d.x*g-d.y*v;return d.x=$,d.y=-y,d.x+=u.x,d.y+=u.y,s&&(d.x=r.width-d.x),c&&(d.y=r.height-d.y),d},$P=e=>"boolean"==typeof e;function $R(e){function t(t){e[58](t)}var r,a,n,o={utilKey:"annotate",stores:e[4],locale:e[5],isActive:e[1],isActiveFraction:e[2],isVisible:e[3],mapScreenPointToImagePoint:e[43],mapImagePointToScreenPoint:e[42],imageRotation:e[44],imageFlipX:e[41],imageFlipY:e[40],shapes:e[46],toolbar:e[20]||e[6],toolShapes:e[21]||e[7],toolRetainStyles:e[8],enableSelectToolToAddShape:e[29],enableTapToAddText:e[30],enableViewTool:e[28],enableMoveTool:e[32],enableAutoSelectMoveTool:e[31],snapThreshold:e[15],gridSize:iG(e[17])?e[17]:e[14],enableSnapToContext:$P(e[18])?e[18]:e[16],enableToolShareStyles:e[12],shapeControls:e[22]||e[9],shapePresets:e[26],enableButtonFlipVertical:e[23],parentRect:e[47],enablePresetDropImage:e[25],enablePresetSelectImage:e[24],toolSelectRadius:e[10],textInputMode:e[11],willStartInteraction:e[13],willRenderPresetToolbar:e[27]||e[19],hooks:{willRenderShapeControls:e[33],willRenderShapeTextControls:e[34],beforeAddShape:e[35],beforeRemoveShape:e[36],beforeDeselectShape:e[37],beforeSelectShape:e[38],beforeUpdateShape:e[39]}};return void 0!==e[0]&&(o.toolActive=e[0]),r=new $C({props:o}),ln.push(()=>lE(r,"toolActive",t)),r.$on("measure",e[59]),{c(){lA(r.$$.fragment)},m(e,t){lI(r,e,t),n=!0},p(e,t){var n={};16&t[0]&&(n.stores=e[4]),32&t[0]&&(n.locale=e[5]),2&t[0]&&(n.isActive=e[1]),4&t[0]&&(n.isActiveFraction=e[2]),8&t[0]&&(n.isVisible=e[3]),4096&t[1]&&(n.mapScreenPointToImagePoint=e[43]),2048&t[1]&&(n.mapImagePointToScreenPoint=e[42]),8192&t[1]&&(n.imageRotation=e[44]),1024&t[1]&&(n.imageFlipX=e[41]),512&t[1]&&(n.imageFlipY=e[40]),1048640&t[0]&&(n.toolbar=e[20]||e[6]),2097280&t[0]&&(n.toolShapes=e[21]||e[7]),256&t[0]&&(n.toolRetainStyles=e[8]),536870912&t[0]&&(n.enableSelectToolToAddShape=e[29]),1073741824&t[0]&&(n.enableTapToAddText=e[30]),268435456&t[0]&&(n.enableViewTool=e[28]),2&t[1]&&(n.enableMoveTool=e[32]),1&t[1]&&(n.enableAutoSelectMoveTool=e[31]),32768&t[0]&&(n.snapThreshold=e[15]),147456&t[0]&&(n.gridSize=iG(e[17])?e[17]:e[14]),327680&t[0]&&(n.enableSnapToContext=$P(e[18])?e[18]:e[16]),4096&t[0]&&(n.enableToolShareStyles=e[12]),4194816&t[0]&&(n.shapeControls=e[22]||e[9]),67108864&t[0]&&(n.shapePresets=e[26]),8388608&t[0]&&(n.enableButtonFlipVertical=e[23]),33554432&t[0]&&(n.enablePresetDropImage=e[25]),16777216&t[0]&&(n.enablePresetSelectImage=e[24]),1024&t[0]&&(n.toolSelectRadius=e[10]),2048&t[0]&&(n.textInputMode=e[11]),8192&t[0]&&(n.willStartInteraction=e[13]),134742016&t[0]&&(n.willRenderPresetToolbar=e[27]||e[19]),508&t[1]&&(n.hooks={willRenderShapeControls:e[33],willRenderShapeTextControls:e[34],beforeAddShape:e[35],beforeRemoveShape:e[36],beforeDeselectShape:e[37],beforeSelectShape:e[38],beforeUpdateShape:e[39]}),!a&&1&t[0]&&(a=!0,n.toolActive=e[0],lh(()=>a=!1)),r.$set(n)},i(e){n||(lx(r.$$.fragment,e),n=!0)},o(e){lb(r.$$.fragment,e),n=!1},d(e){lL(r,e)}}}function $E(e,t,r){var a,n,o,l,s,c,d,u,h,{isActive:p}=t,{isActiveFraction:v}=t,{isVisible:g}=t,{stores:m}=t,{locale:f={}}=t,{markupEditorToolbar:$}=t,{markupEditorToolStyles:y}=t,{markupEditorToolRetainStyles:x}=t,{markupEditorShapeStyleControls:b}=t,{markupEditorToolSelectRadius:w}=t,{markupEditorTextInputMode:S}=t,{markupEditorToolShareStyles:k}=t,{markupEditorWillStartInteraction:C}=t,{markupEditorGridSize:M=0}=t,{markupEditorSnapThreshold:T=0}=t,{markupEditorSnapToContext:P=!1}=t,{annotateGridSize:R}=t,{annotateSnapToContext:E}=t,{willRenderShapePresetToolbar:A}=t,{annotateTools:I}=t,{annotateToolShapes:L}=t,{annotateShapeControls:F}=t,{annotateActiveTool:z}=t,{annotateEnableButtonFlipVertical:O=!1}=t,{annotateEnableSelectImagePreset:B=!1}=t,{annotateEnableDropImagePreset:D=!0}=t,{annotatePresets:_=[]}=t,{annotateWillRenderShapePresetToolbar:N}=t,{enableViewTool:W}=t,{enableSelectToolToAddShape:j}=t,{enableTapToAddText:V}=t,{enableAutoSelectMoveTool:H}=t,{enableMoveTool:U}=t,{willRenderShapeControls:G}=t,{willRenderShapeTextControls:X}=t,{beforeAddShape:Z}=t,{beforeRemoveShape:Y}=t,{beforeDeselectShape:q}=t,{beforeSelectShape:K}=t,{beforeUpdateShape:J}=t,{rootRect:Q,imageAnnotation:ee,imageSize:et,imageRotation:er,imageFlipX:ei,imageFlipY:ea,imageTransforms:en,imageTransformsInterpolated:eo}=m;return oC(e,Q,e=>r(57,u=e)),oC(e,et,e=>r(56,d=e)),oC(e,er,e=>r(44,h=e)),oC(e,ei,e=>r(41,l=e)),oC(e,ea,e=>r(40,o=e)),oC(e,en,e=>r(55,c=e)),oC(e,eo,e=>r(54,s=e)),e.$$set=e=>{"isActive"in e&&r(1,p=e.isActive),"isActiveFraction"in e&&r(2,v=e.isActiveFraction),"isVisible"in e&&r(3,g=e.isVisible),"stores"in e&&r(4,m=e.stores),"locale"in e&&r(5,f=e.locale),"markupEditorToolbar"in e&&r(6,$=e.markupEditorToolbar),"markupEditorToolStyles"in e&&r(7,y=e.markupEditorToolStyles),"markupEditorToolRetainStyles"in e&&r(8,x=e.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in e&&r(9,b=e.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in e&&r(10,w=e.markupEditorToolSelectRadius),"markupEditorTextInputMode"in e&&r(11,S=e.markupEditorTextInputMode),"markupEditorToolShareStyles"in e&&r(12,k=e.markupEditorToolShareStyles),"markupEditorWillStartInteraction"in e&&r(13,C=e.markupEditorWillStartInteraction),"markupEditorGridSize"in e&&r(14,M=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&r(15,T=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&r(16,P=e.markupEditorSnapToContext),"annotateGridSize"in e&&r(17,R=e.annotateGridSize),"annotateSnapToContext"in e&&r(18,E=e.annotateSnapToContext),"willRenderShapePresetToolbar"in e&&r(19,A=e.willRenderShapePresetToolbar),"annotateTools"in e&&r(20,I=e.annotateTools),"annotateToolShapes"in e&&r(21,L=e.annotateToolShapes),"annotateShapeControls"in e&&r(22,F=e.annotateShapeControls),"annotateActiveTool"in e&&r(0,z=e.annotateActiveTool),"annotateEnableButtonFlipVertical"in e&&r(23,O=e.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in e&&r(24,B=e.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in e&&r(25,D=e.annotateEnableDropImagePreset),"annotatePresets"in e&&r(26,_=e.annotatePresets),"annotateWillRenderShapePresetToolbar"in e&&r(27,N=e.annotateWillRenderShapePresetToolbar),"enableViewTool"in e&&r(28,W=e.enableViewTool),"enableSelectToolToAddShape"in e&&r(29,j=e.enableSelectToolToAddShape),"enableTapToAddText"in e&&r(30,V=e.enableTapToAddText),"enableAutoSelectMoveTool"in e&&r(31,H=e.enableAutoSelectMoveTool),"enableMoveTool"in e&&r(32,U=e.enableMoveTool),"willRenderShapeControls"in e&&r(33,G=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&r(34,X=e.willRenderShapeTextControls),"beforeAddShape"in e&&r(35,Z=e.beforeAddShape),"beforeRemoveShape"in e&&r(36,Y=e.beforeRemoveShape),"beforeDeselectShape"in e&&r(37,q=e.beforeDeselectShape),"beforeSelectShape"in e&&r(38,K=e.beforeSelectShape),"beforeUpdateShape"in e&&r(39,J=e.beforeUpdateShape)},e.$$.update=()=>{125830656&e.$$.dirty[1]&&r(43,a=e=>$T(e,u,d,s.origin,s.translation,c.rotation.z,s.scale,l,o)),125830656&e.$$.dirty[1]&&r(42,n=e=>$M(e,u,d,s.origin,s.translation,c.rotation.z,s.scale,l,o))},[z,p,v,g,m,f,$,y,x,b,w,S,k,C,M,T,P,R,E,A,I,L,F,O,B,D,_,N,W,j,V,H,U,G,X,Z,Y,q,K,J,o,l,n,a,h,Q,ee,et,er,ei,ea,en,eo,"annotate",s,c,d,u,function(e){r(0,z=e)},function(t){li.call(this,e,t)}]}function $A(e){var t,r;return(t=new $C({props:{stores:e[3],locale:e[4],isActive:e[0],isActiveFraction:e[1],isVisible:e[2],mapScreenPointToImagePoint:e[25],mapImagePointToScreenPoint:e[24],utilKey:"sticker",shapePresets:e[5],shapes:e[6]?e[34]:e[35],toolActive:"preset",imageFlipX:!!e[6]&&e[23],imageFlipY:!!e[6]&&e[22],imageRotation:e[6]?e[30]:0,parentRect:e[6]?e[36]:e[32],snapThreshold:e[28],gridSize:e[27],enableSnapToContext:e[26],enablePresetDropImage:e[7],enablePresetSelectImage:e[29],enableButtonFlipVertical:e[10]||e[8],toolSelectRadius:e[14],willStartInteraction:e[21],willRenderPresetToolbar:e[11]||e[9]||e[15],hooks:{willRenderShapeControls:e[12],willRenderShapeTextControls:e[13],beforeAddShape:e[16],beforeRemoveShape:e[17],beforeDeselectShape:e[18],beforeSelectShape:e[19],beforeUpdateShape:e[20]}}})).$on("measure",e[59]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};8&r[0]&&(a.stores=e[3]),16&r[0]&&(a.locale=e[4]),1&r[0]&&(a.isActive=e[0]),2&r[0]&&(a.isActiveFraction=e[1]),4&r[0]&&(a.isVisible=e[2]),33554432&r[0]&&(a.mapScreenPointToImagePoint=e[25]),16777216&r[0]&&(a.mapImagePointToScreenPoint=e[24]),32&r[0]&&(a.shapePresets=e[5]),64&r[0]&&(a.shapes=e[6]?e[34]:e[35]),8388672&r[0]&&(a.imageFlipX=!!e[6]&&e[23]),4194368&r[0]&&(a.imageFlipY=!!e[6]&&e[22]),1073741888&r[0]&&(a.imageRotation=e[6]?e[30]:0),64&r[0]&&(a.parentRect=e[6]?e[36]:e[32]),268435456&r[0]&&(a.snapThreshold=e[28]),134217728&r[0]&&(a.gridSize=e[27]),67108864&r[0]&&(a.enableSnapToContext=e[26]),128&r[0]&&(a.enablePresetDropImage=e[7]),536870912&r[0]&&(a.enablePresetSelectImage=e[29]),1280&r[0]&&(a.enableButtonFlipVertical=e[10]||e[8]),16384&r[0]&&(a.toolSelectRadius=e[14]),2097152&r[0]&&(a.willStartInteraction=e[21]),35328&r[0]&&(a.willRenderPresetToolbar=e[11]||e[9]||e[15]),2043904&r[0]&&(a.hooks={willRenderShapeControls:e[12],willRenderShapeTextControls:e[13],beforeAddShape:e[16],beforeRemoveShape:e[17],beforeDeselectShape:e[18],beforeSelectShape:e[19],beforeUpdateShape:e[20]}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $I(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,{isActive:y}=t,{isActiveFraction:x}=t,{isVisible:b}=t,{stores:w}=t,{locale:S={}}=t,{stickers:k=[]}=t,{stickerForceEnable:C=!1}=t,{stickerStickToImage:M=!1}=t,{stickerEnableSelectImagePreset:T=!0}=t,{stickerEnableDropImagePreset:P=!0}=t,{stickerEnableButtonFlipVertical:R=!1}=t,{stickerWillRenderShapePresetToolbar:E}=t,{stickerEnableSelectImage:A=!0}=t,{stickersEnableButtonFlipVertical:I=!1}=t,{stickersWillRenderShapePresetToolbar:L}=t,{markupEditorGridSize:F=0}=t,{markupEditorSnapThreshold:z=0}=t,{markupEditorSnapToContext:O=!1}=t,{annotateGridSize:B}=t,{annotateSnapToContext:D}=t,{decorateGridSize:_}=t,{decorateSnapToContext:N}=t,{willRenderShapeControls:W}=t,{willRenderShapeTextControls:j}=t,{markupEditorToolSelectRadius:V}=t,{willRenderShapePresetToolbar:H}=t,{beforeAddShape:U}=t,{beforeRemoveShape:G}=t,{beforeDeselectShape:X}=t,{beforeSelectShape:Z}=t,{beforeUpdateShape:Y}=t,{markupEditorWillStartInteraction:q}=t,{rootRect:K,imageCropRect:J,imageSelectionRectPresentation:Q,imageAnnotation:ee,imageDecoration:et,imageSize:er,imageTransforms:ei,imageTransformsInterpolated:ea,imageRotation:en,imageFlipX:eo,imageFlipY:el}=w;return oC(e,K,e=>r(58,f=e)),oC(e,Q,e=>r(54,u=e)),oC(e,er,e=>r(57,m=e)),oC(e,ei,e=>r(56,g=e)),oC(e,ea,e=>r(55,v=e)),oC(e,en,e=>r(30,$=e)),oC(e,eo,e=>r(23,p=e)),oC(e,el,e=>r(22,h=e)),e.$$set=e=>{"isActive"in e&&r(0,y=e.isActive),"isActiveFraction"in e&&r(1,x=e.isActiveFraction),"isVisible"in e&&r(2,b=e.isVisible),"stores"in e&&r(3,w=e.stores),"locale"in e&&r(4,S=e.locale),"stickers"in e&&r(5,k=e.stickers),"stickerForceEnable"in e&&r(43,C=e.stickerForceEnable),"stickerStickToImage"in e&&r(6,M=e.stickerStickToImage),"stickerEnableSelectImagePreset"in e&&r(44,T=e.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in e&&r(7,P=e.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in e&&r(8,R=e.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in e&&r(9,E=e.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in e&&r(45,A=e.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in e&&r(10,I=e.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in e&&r(11,L=e.stickersWillRenderShapePresetToolbar),"markupEditorGridSize"in e&&r(46,F=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&r(47,z=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&r(48,O=e.markupEditorSnapToContext),"annotateGridSize"in e&&r(49,B=e.annotateGridSize),"annotateSnapToContext"in e&&r(50,D=e.annotateSnapToContext),"decorateGridSize"in e&&r(51,_=e.decorateGridSize),"decorateSnapToContext"in e&&r(52,N=e.decorateSnapToContext),"willRenderShapeControls"in e&&r(12,W=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&r(13,j=e.willRenderShapeTextControls),"markupEditorToolSelectRadius"in e&&r(14,V=e.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in e&&r(15,H=e.willRenderShapePresetToolbar),"beforeAddShape"in e&&r(16,U=e.beforeAddShape),"beforeRemoveShape"in e&&r(17,G=e.beforeRemoveShape),"beforeDeselectShape"in e&&r(18,X=e.beforeDeselectShape),"beforeSelectShape"in e&&r(19,Z=e.beforeSelectShape),"beforeUpdateShape"in e&&r(20,Y=e.beforeUpdateShape),"markupEditorWillStartInteraction"in e&&r(21,q=e.markupEditorWillStartInteraction)},e.$$.update=()=>{16777216&e.$$.dirty[1]&&r(53,a=v?v.scale:1),24576&e.$$.dirty[1]&&r(29,n=!1!==T&&A),65536&e.$$.dirty[1]&&r(28,o=z),64&e.$$.dirty[0]|1343488&e.$$.dirty[1]&&r(27,l=M?iG(B)?B:F:iG(_)?_:F),64&e.$$.dirty[0]|2752512&e.$$.dirty[1]&&r(26,s=M?$P(D)?D:O:$P(N)?N:O),12582976&e.$$.dirty[0]|264241152&e.$$.dirty[1]&&r(25,c=M?e=>$T(e,f,m,v.origin,v.translation,g.rotation.z,v.scale,p,h):e=>{var t=tw(e);return t.x-=u.x,t.y-=u.y,t.x/=a,t.y/=a,t}),12582976&e.$$.dirty[0]|264241152&e.$$.dirty[1]&&r(24,d=M?e=>$M(e,f,m,v.origin,v.translation,g.rotation.z,v.scale,p,h):e=>{var t=tw(e);return t.x*=a,t.y*=a,t.x+=u.x,t.y+=u.y,t})},[y,x,b,w,S,k,M,P,R,E,I,L,W,j,V,H,U,G,X,Z,Y,q,h,p,d,c,s,l,o,n,$,K,J,Q,ee,et,er,ei,ea,en,eo,el,"sticker",C,T,A,F,z,O,B,D,_,N,a,u,v,g,m,f,function(t){li.call(this,e,t)}]}function $L(e){var t,r,a,n,o,l=(e[14](e[34].value)||"")+"",s=(eO(e[34].label)?e[34].label(e[1]):e[34].label)+"";return{c(){t=oH("div"),r=new o2(!1),a=oX(),n=oH("span"),o=oG(s),r.a=a,oq(t,"slot","option")},m(e,s){oj(e,t,s),r.m(l,t),oN(t,a),oN(t,n),oN(n,o)},p(e,t){8&t[1]&&l!==(l=(e[14](e[34].value)||"")+"")&&r.p(l),2&t[0]|8&t[1]&&s!==(s=(eO(e[34].label)?e[34].label(e[1]):e[34].label)+"")&&oQ(o,s)},d(e){e&&oV(t)}}}function $F(e){var t,r;return t=new hg({props:{locale:e[1],class:"PinturaControlList",layout:"row",options:e[2],selectedIndex:e[6],onchange:e[12],$$slots:{option:[$L,e=>{var{option:t}=e;return{34:t}},e=>{var{option:t}=e;return[0,t?8:0]}]},$$scope:{ctx:e}}}),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};2&r[0]&&(a.locale=e[1]),4&r[0]&&(a.options=e[2]),64&r[0]&&(a.selectedIndex=e[6]),2&r[0]|24&r[1]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $z(e){var t,r,a,n,o;return r=new fH({props:{locale:e[1],class:"PinturaControlPanels",shape:e[4],onchange:e[13],controls:e[3],scrollElasticity:e[7]}}),n=new ua({props:{elasticity:e[10],$$slots:{default:[$F]},$$scope:{ctx:e}}}),{c(){t=oH("div"),lA(r.$$.fragment),a=oX(),lA(n.$$.fragment),oq(t,"slot","footer"),oq(t,"style",e[5])},m(e,l){oj(e,t,l),lI(r,t,null),oN(t,a),lI(n,t,null),o=!0},p(e,a){var l={};2&a[0]&&(l.locale=e[1]),16&a[0]&&(l.shape=e[4]),8&a[0]&&(l.controls=e[3]),128&a[0]&&(l.scrollElasticity=e[7]),r.$set(l);var s={};70&a[0]|16&a[1]&&(s.$$scope={dirty:a,ctx:e}),n.$set(s),(!o||32&a[0])&&oq(t,"style",e[5])},i(e){o||(lx(r.$$.fragment,e),lx(n.$$.fragment,e),o=!0)},o(e){lb(r.$$.fragment,e),lb(n.$$.fragment,e),o=!1},d(e){e&&oV(t),lL(r),lL(n)}}}function $O(e){var t,r;return(t=new g9({props:{$$slots:{footer:[$z]},$$scope:{ctx:e}}})).$on("measure",e[23]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};254&r[0]|16&r[1]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $B(e,t,r){var a,n,o,l,s,c,d,u,h,p=og,v=()=>(p(),p=oS(g,e=>r(20,h=e)),g);e.$$.on_destroy.push(()=>p());var{isActive:g}=t;v();var{stores:m}=t,{locale:f={}}=t,{frameStyles:$={}}=t,{frameOptions:y=[]}=t,{markupEditorShapeStyleControls:x}=t,b=lr("elasticityMultiplier");oC(e,b,e=>r(22,o=e));var{history:w,animation:S,scrollElasticity:k,imageFrame:C,allowPan:M,allowZoom:T,allowZoomControls:P,allowPlayPause:R}=m;oC(e,S,e=>r(21,a=e)),oC(e,C,e=>r(4,n=e));var E={},A=e=>/rect|path|circle|line|<g>/i.test(e),I=e=>/div/i.test(e),L=e=>I(e)||fU(e)?e:A(e)?'<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">'.concat(e,"</svg>"):'<img src="'.concat(e,'" alt=""/>'),F=cJ(a?20:0);return oC(e,F,e=>r(19,u=e)),e.$$set=e=>{"isActive"in e&&v(r(0,g=e.isActive)),"stores"in e&&r(17,m=e.stores),"locale"in e&&r(1,f=e.locale),"frameStyles"in e&&r(18,$=e.frameStyles),"frameOptions"in e&&r(2,y=e.frameOptions),"markupEditorShapeStyleControls"in e&&r(3,x=e.markupEditorShapeStyleControls)},e.$$.update=()=>{1048576&e.$$.dirty[0]&&M.set(h),1048576&e.$$.dirty[0]&&T.set(h),1048576&e.$$.dirty[0]&&P.set(h),1048576&e.$$.dirty[0]&&h&&R.set(!0),4194304&e.$$.dirty[0]&&r(7,s=o*k),20&e.$$.dirty[0]&&r(6,c=n?y.findIndex(e=>{var[t]=e;return t===n.id}):0),3145728&e.$$.dirty[0]&&a&&F.set(h?0:20),524288&e.$$.dirty[0]&&r(5,d=u?"transform: translateY(".concat(u,"px)"):void 0)},[g,f,y,x,n,d,c,s,b,S,k,C,e=>{var{value:t}=e,r=$[t];if(!r||!r.shape){C.set(void 0),w.write();return}var{shape:a}=r,n=ea(ea({id:t},aD(a)),Object.keys(E).reduce((e,t)=>(a[t]&&(e[t]=E[t]),e),{}));C.set(n),w.write()},function(e){iZ(e,"frameColor")&&(E.frameColor=e.frameColor),n&&(nU(n,e),C.set(n),clearTimeout(l),l=setTimeout(()=>{w.write()},200))},e=>{var t=$[e];if(t&&t.thumb)return L(t.thumb)},F,"frame",m,$,u,h,a,o,function(t){li.call(this,e,t)}]}function $D(e){var t,r,a,n,o,l,s,c;return{c(){t=oH("div"),r=oH("input"),n=oX(),o=oH("label"),l=oG(e[1]),oq(r,"id",e[0]),oq(r,"type","number"),oq(r,"min","1"),oq(r,"inputmode","numeric"),oq(r,"pattern","[0-9]*"),oq(r,"data-state",e[3]),oq(r,"autocomplete","off"),oq(r,"placeholder",e[4]),r.value=a=void 0===e[5]?"":e[7](e[5]+""),oq(o,"for",e[0]),oq(o,"title",e[2]),oq(o,"aria-label",e[2]),oq(t,"class","PinturaInputDimension")},m(a,d){oj(a,t,d),oN(t,r),oN(t,n),oN(t,o),oN(o,l),s||(c=oY(r,"input",e[8]),s=!0)},p(e,t){var[n]=t;1&n&&oq(r,"id",e[0]),8&n&&oq(r,"data-state",e[3]),16&n&&oq(r,"placeholder",e[4]),160&n&&a!==(a=void 0===e[5]?"":e[7](e[5]+""))&&r.value!==a&&(r.value=a),2&n&&oQ(l,e[1]),1&n&&oq(o,"for",e[0]),4&n&&oq(o,"title",e[2]),4&n&&oq(o,"aria-label",e[2])},i:og,o:og,d(e){e&&oV(t),s=!1,c()}}}function $_(e,t,r){var{id:a}=t,{label:n}=t,{title:o}=t,{state:l}=t,{placeholder:s}=t,{value:c}=t,{onchange:d}=t,{format:u=e=>e.replace(/\D/g,"")}=t;return e.$$set=e=>{"id"in e&&r(0,a=e.id),"label"in e&&r(1,n=e.label),"title"in e&&r(2,o=e.title),"state"in e&&r(3,l=e.state),"placeholder"in e&&r(4,s=e.placeholder),"value"in e&&r(5,c=e.value),"onchange"in e&&r(6,d=e.onchange),"format"in e&&r(7,u=e.format)},[a,n,o,l,s,c,d,u,e=>d(u(e.currentTarget.value))]}class $N extends lz{constructor(e){super(),lF(this,e,$_,$D,ow,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function $W(e){var t;return{c(){t=oU("g")},m(r,a){oj(r,t,a),t.innerHTML=e[2]},p(e,r){4&r&&(t.innerHTML=e[2])},d(e){e&&oV(t)}}}function $j(e){var t,r,a,n,o,l,s,c;return o=new dX({props:{$$slots:{default:[$W]},$$scope:{ctx:e}}}),{c(){t=oH("div"),r=oH("input"),a=oX(),n=oH("label"),lA(o.$$.fragment),oq(r,"id",e[0]),oq(r,"class","implicit"),oq(r,"type","checkbox"),r.checked=e[1],oq(n,"for",e[0]),oq(n,"title",e[3])},m(d,u){oj(d,t,u),oN(t,r),oN(t,a),oN(t,n),lI(o,n,null),l=!0,s||(c=oY(r,"change",e[5]),s=!0)},p(e,t){var[a]=t;(!l||1&a)&&oq(r,"id",e[0]),(!l||2&a)&&(r.checked=e[1]);var s={};68&a&&(s.$$scope={dirty:a,ctx:e}),o.$set(s),(!l||1&a)&&oq(n,"for",e[0]),(!l||8&a)&&oq(n,"title",e[3])},i(e){l||(lx(o.$$.fragment,e),l=!0)},o(e){lb(o.$$.fragment,e),l=!1},d(e){e&&oV(t),lL(o),s=!1,c()}}}function $V(e,t,r){var{id:a}=t,{locked:n}=t,{icon:o}=t,{title:l}=t,{onchange:s}=t;return e.$$set=e=>{"id"in e&&r(0,a=e.id),"locked"in e&&r(1,n=e.locked),"icon"in e&&r(2,o=e.icon),"title"in e&&r(3,l=e.title),"onchange"in e&&r(4,s=e.onchange)},[a,n,o,l,s,e=>s(e.currentTarget.checked)]}class $H extends lz{constructor(e){super(),lF(this,e,$V,$j,ow,{id:0,locked:1,icon:2,title:3,onchange:4})}}function $U(e){var t;return{c(){t=oG("Save")},m(e,r){oj(e,t,r)},d(e){e&&oV(t)}}}function $G(e){var t,r,a,n,o,l,s,c,d,u,h,p,v,g=e[1].resizeLabelFormCaption+"";return c=new pF({props:{items:e[4]}}),u=new d2({props:{type:"submit",class:"implicit",$$slots:{default:[$U]},$$scope:{ctx:e}}}),{c(){t=oH("form"),r=oH("div"),a=oH("fieldset"),n=oH("legend"),o=oG(g),l=oX(),s=oH("div"),lA(c.$$.fragment),d=oX(),lA(u.$$.fragment),oq(n,"class","implicit"),oq(s,"class","PinturaFieldsetInner"),oq(r,"class","PinturaFormInner"),oq(t,"slot","footer"),oq(t,"style",e[3])},m(g,m){if(oj(g,t,m),oN(t,r),oN(r,a),oN(a,n),oN(n,o),oN(a,l),oN(a,s),lI(c,s,null),e[65](s),oN(r,d),lI(u,r,null),h=!0,!p){var f;v=[oY(s,"focusin",e[15]),oY(s,"focusout",e[16]),oY(t,"submit",(f=e[17],function(e){return e.preventDefault(),f.call(this,e)}))],p=!0}},p(e,r){(!h||2&r[0])&&g!==(g=e[1].resizeLabelFormCaption+"")&&oQ(o,g);var a={};16&r[0]&&(a.items=e[4]),c.$set(a);var n={};16&r[3]&&(n.$$scope={dirty:r,ctx:e}),u.$set(n),(!h||8&r[0])&&oq(t,"style",e[3])},i(e){h||(lx(c.$$.fragment,e),lx(u.$$.fragment,e),h=!0)},o(e){lb(c.$$.fragment,e),lb(u.$$.fragment,e),h=!1},d(r){r&&oV(t),lL(c),e[65](null),lL(u),p=!1,ox(v)}}}function $X(e){var t,r;return(t=new g9({props:{$$slots:{footer:[$G]},$$scope:{ctx:e}}})).$on("measure",e[66]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var a={};30&r[0]|16&r[3]&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $Z(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m,f,$,y,x,b,w,S,k,C,M,T,P,R,E,A,I,L,F,z,O,B,D,_,N=og,W=()=>(N(),N=oS(V,e=>r(49,_=e)),V);e.$$.on_destroy.push(()=>N());var j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9999;if(!ez(e)||(e=e.replace(/\D/g,"")).length){var a=Math.round(e);if(!Number.isNaN(a))return l6(a,t,r)}},{isActive:V}=t;W();var{stores:H}=t,{locale:U={}}=t,{resizeMinSize:G=tQ(1,1)}=t,{resizeMaxSize:X=tQ(9999,9999)}=t,{resizeAspectRatioLocked:Z=!1}=t,{resizeEnableButtonLockAspectRatio:Y=!0}=t,{resizeSizePresetOptions:q}=t,{resizeWidthPresetOptions:K}=t,{resizeHeightPresetOptions:J}=t,{resizeWillRenderFooter:Q=e7}=t,ee=cJ(0,{stiffness:.15,damping:.3});oC(e,ee,e=>r(54,s=e));var{animation:et,imageSize:er,imageCropRect:ei,imageCropRectAspectRatio:en,imageCropAspectRatio:eo,imageOutputSize:el,imageSelectionZoom:es,imageSelectionPan:ec,history:ed,env:eu,allowPan:eh,allowZoom:ep,allowZoomControls:ev,allowPlayPause:eg}=H;oC(e,et,e=>r(50,a=e)),oC(e,er,e=>r(73,x=e)),oC(e,ei,e=>r(52,o=e)),oC(e,en,e=>r(53,l=e)),oC(e,eo,e=>r(72,m=e)),oC(e,el,e=>r(61,g=e)),oC(e,es,e=>r(74,b=e)),oC(e,ec,e=>r(75,w=e)),oC(e,eu,e=>r(51,n=e));var em=eV(),ef=tm(),e$=()=>{ef=w,P=b},ey=e=>{if(oL(ec,w=tm(),w),!e||!o){oL(es,b=1,b);return}oL(es,b=e.width/o.width||e.height/o.height,b)},ex=()=>{oL(ec,w=ef,w),oL(es,b=P,b)},eb=(e,t,r,a,n)=>null!=e&&r!==t?e>=a[t]&&e<=n[t]?"valid":"invalid":"undetermined",ew=(e,t,r)=>Math.round(null!=e?e*t:r.width),eS=(e,t,r)=>Math.round(null!=e?e/t:r.height),ek=()=>{Z&&k&&C&&("width"===M?r(39,C=Math.round(k/l)):"height"===M?r(38,k=Math.round(C*l)):("width"===T?r(39,C=Math.round(k/l)):"height"===T&&r(38,k=Math.round(C*l)),eC()))},eC=e=>{var t=j(k),a=j(C),n=t,o=a,s=n&&o,c=e||l;if(n||o){n&&!o?o=Math.round(n/c):o&&!n&&(n=Math.round(o*c)),c=e||s?e8(n,o):l;var d=tQ(n,o);t3(X,d)||(d=rz(X,c)),t3(d,G)||(d=rI(G,c)),r(38,k=null!=t?Math.round(d.width):void 0),r(39,C=null!=a?Math.round(d.height):void 0)}},eM=()=>{eC();var{width:e,height:t}=g||{};(e!==k||t!==C)&&(k||C?(k&&C&&oL(eo,m=k/C,m),oL(el,g=tQ(k,C),g)):(oL(eo,m=x.width/x.height,m),oL(eo,m=void 0,m),oL(el,g=void 0,g)),ed.write())},eT=el.subscribe(e=>{if(!e){r(38,k=void 0),r(39,C=void 0);return}r(38,k=e.width),r(39,C=e.height),eC()}),eP=eo.subscribe(e=>{(k||C)&&e&&(k&&C&&e8(k,C)!==e?(r(39,C=k/e),eC(e)):eC())}),eR=e=>ez(e[0])?(e[1]=e[1].map(eR),e):iG(e)?[e,""+e]:e,eE=e=>{if(ez(e[0]))return e[1]=e[1].map(eE),e;var[t,r]=e;if(iG(t)&&iG(r)){var[a,n]=[t,r];r="".concat(a," &times; ").concat(n),t=[a,n]}return[t,r]},eA=lD();oC(e,eA,e=>r(60,v=e));var eI=lD();oC(e,eI,e=>r(64,y=e));var eL=lD();oC(e,eL,e=>r(58,h=e));var eF=lD();oC(e,eF,e=>r(63,$=e));var eO=lD();oC(e,eO,e=>r(56,d=e));var eB=lD();oC(e,eB,e=>r(62,f=e));var eD=l_([el,eI],(e,t)=>{var[r,a]=e;if(!a)return t(-1);var n=a.findIndex(e=>{var[t]=e;if(!t&&!r)return!0;if(!t)return!1;var[a,n]=t;return r.width===a&&r.height===n});t(n<0?0:n)});oC(e,eD,e=>r(59,p=e));var e_=l_([el,eF],(e,t)=>{var[r,a]=e;if(!a)return t(-1);var n=a.findIndex(e=>{var[t]=e;return!t&&!r||!!t&&r.width===t});t(n<0?0:n)});oC(e,e_,e=>r(57,u=e));var eN=l_([el,eB],(e,t)=>{var[r,a]=e;if(!a)return t(-1);var n=a.findIndex(e=>{var[t]=e;return!t&&!r||!!t&&r.height===t});t(n<0?0:n)});oC(e,eN,e=>r(55,c=e));var eW=void 0,ej=void 0,eH=e=>{e&&!eW&&(eW=ea({},o),ej=m),e?(oL(eo,m=e8(e[0],e[1]),m),oL(el,g=tq(e),g)):(oL(ei,o=eW,o),oL(eo,m=ej,m),oL(el,g=void 0,g),eW=void 0,ej=void 0),ed.write()},eU=lr("redrawTrigger"),eG=cJ(a?20:0);return oC(e,eG,e=>r(48,D=e)),o9(()=>{eT(),eP()}),e.$$set=e=>{"isActive"in e&&W(r(0,V=e.isActive)),"stores"in e&&r(30,H=e.stores),"locale"in e&&r(1,U=e.locale),"resizeMinSize"in e&&r(31,G=e.resizeMinSize),"resizeMaxSize"in e&&r(32,X=e.resizeMaxSize),"resizeAspectRatioLocked"in e&&r(28,Z=e.resizeAspectRatioLocked),"resizeEnableButtonLockAspectRatio"in e&&r(33,Y=e.resizeEnableButtonLockAspectRatio),"resizeSizePresetOptions"in e&&r(34,q=e.resizeSizePresetOptions),"resizeWidthPresetOptions"in e&&r(35,K=e.resizeWidthPresetOptions),"resizeHeightPresetOptions"in e&&r(36,J=e.resizeHeightPresetOptions),"resizeWillRenderFooter"in e&&r(37,Q=e.resizeWillRenderFooter)},e.$$.update=()=>{262144&e.$$.dirty[1]&&eh.set(!_),262144&e.$$.dirty[1]&&ep.set(!_),262144&e.$$.dirty[1]&&ev.set(!_),262144&e.$$.dirty[1]&&_&&eg.set(!0),536870920&e.$$.dirty[1]&&q&&(oL(eA,v=q.map(eE),v),oL(eI,y=uG(v),y)),536870912&e.$$.dirty[1]&&r(47,I=!!v),268435456&e.$$.dirty[1]|4&e.$$.dirty[2]&&r(46,R=p>-1&&y[p][1]),134217744&e.$$.dirty[1]&&K&&(oL(eL,h=K.map(eR),h),oL(eF,$=uG(h),$)),134283264&e.$$.dirty[1]&&r(44,L=!I&&h),67108864&e.$$.dirty[1]|2&e.$$.dirty[2]&&r(45,E=u>-1&&$[u][1]),33554464&e.$$.dirty[1]&&J&&(oL(eO,d=J.map(eR),d),oL(eB,f=uG(d),f)),33619968&e.$$.dirty[1]&&r(43,F=!I&&d),16777216&e.$$.dirty[1]|1&e.$$.dirty[2]&&r(42,A=c>-1&&f[c][1]),77824&e.$$.dirty[1]&&r(41,z=!I&&!L&&!F),268435458&e.$$.dirty[0]|1072824263&e.$$.dirty[1]&&r(4,O=eU&&vl(()=>Q([I&&["Dropdown","size-presets",{label:R,options:v,onchange:e=>eH(e.value),selectedIndex:p}],L&&["Dropdown","width-presets",{label:E,options:h,onchange:e=>{r(38,k=e.value),eM()},selectedIndex:u}],L&&F&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],F&&["Dropdown","height-presets",{label:A,options:d,onchange:e=>{r(39,C=e.value),eM()},selectedIndex:c}],z&&[$N,"width-input",{id:"width-".concat(em),title:U.resizeTitleInputWidth,label:U.resizeLabelInputWidth,placeholder:ew(j(C),l,o),value:k,state:eb(j(k),"width",M,G,X),onchange:e=>{r(38,k=e),ek()}}],z&&Y&&[$H,"aspect-ratio-lock",{id:"aspect-ratio-lock-".concat(em),title:U.resizeTitleButtonMaintainAspectRatio,icon:ez(U.resizeIconButtonMaintainAspectRatio)?U.resizeIconButtonMaintainAspectRatio:U.resizeIconButtonMaintainAspectRatio(Z,s),locked:Z,onchange:e=>{r(28,Z=e),ek()}}],z&&[$N,"height-input",{id:"height-".concat(em),title:U.resizeTitleInputHeight,label:U.resizeLabelInputHeight,placeholder:eS(j(k),l,o),value:C,state:eb(j(C),"height",M,G,X),onchange:e=>{r(39,C=e),ek()}}]].filter(Boolean),ea({},n),()=>eU.set({}))).filter(Boolean)),268435456&e.$$.dirty[0]&&ee.set(Z?1:0),512&e.$$.dirty[1]&&M&&(T=M),262144&e.$$.dirty[1]&&_&&e$(),1074003968&e.$$.dirty[1]&&(_?ey(g):ex()),786432&e.$$.dirty[1]&&a&&eG.set(_?0:20),131072&e.$$.dirty[1]&&r(3,B=D?"transform: translateY(".concat(D,"px)"):void 0)},[V,U,S,B,O,ee,et,er,ei,en,eo,el,es,ec,eu,e=>{var t=e.target.id;/width/.test(t)?r(40,M="width"):/height/.test(t)?r(40,M="height"):/aspectRatio/i.test(t)?r(40,M="lock"):r(40,M=void 0)},e=>{S.contains(e.relatedTarget)||eM(),r(40,M=void 0)},eM,eA,eI,eL,eF,eO,eB,eD,e_,eN,eG,Z,"resize",H,G,X,Y,q,K,J,Q,k,C,M,z,A,F,L,E,R,I,D,_,a,n,o,l,s,c,d,u,h,p,v,g,f,$,y,function(e){ln[e?"unshift":"push"](()=>{r(2,S=e)})},function(t){li.call(this,e,t)}]}function $Y(e){var t,r;return(t=new $C({props:{stores:e[3],locale:e[4],isActive:e[0],isActiveFraction:e[1],isVisible:e[2],mapScreenPointToImagePoint:e[9],mapImagePointToScreenPoint:e[8],utilKey:"redact",imageRotation:e[10],imageFlipX:e[7],imageFlipY:e[6],shapes:e[11],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:e[13],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:e[5],hooks:{willRenderShapeControls:e[24]}}})).$on("measure",e[25]),{c(){lA(t.$$.fragment)},m(e,a){lI(t,e,a),r=!0},p(e,r){var[a]=r,n={};8&a&&(n.stores=e[3]),16&a&&(n.locale=e[4]),1&a&&(n.isActive=e[0]),2&a&&(n.isActiveFraction=e[1]),4&a&&(n.isVisible=e[2]),512&a&&(n.mapScreenPointToImagePoint=e[9]),256&a&&(n.mapImagePointToScreenPoint=e[8]),1024&a&&(n.imageRotation=e[10]),128&a&&(n.imageFlipX=e[7]),64&a&&(n.imageFlipY=e[6]),32&a&&(n.willStartInteraction=e[5]),t.$set(n)},i(e){r||(lx(t.$$.fragment,e),r=!0)},o(e){lb(t.$$.fragment,e),r=!1},d(e){lL(t,e)}}}function $q(e,t,r){var a,n,o,l,s,c,d,u,h,{isActive:p}=t,{isActiveFraction:v}=t,{isVisible:g}=t,{stores:m}=t,{locale:f={}}=t,{markupEditorWillStartInteraction:$}=t,{imageRedaction:y,rootRect:x,imageSize:b,imageRotation:w,imageFlipX:S,imageFlipY:k,imageTransforms:C,imageTransformsInterpolated:M}=m;return oC(e,x,e=>r(23,u=e)),oC(e,b,e=>r(22,d=e)),oC(e,w,e=>r(10,h=e)),oC(e,S,e=>r(7,l=e)),oC(e,k,e=>r(6,o=e)),oC(e,C,e=>r(21,c=e)),oC(e,M,e=>r(20,s=e)),e.$$set=e=>{"isActive"in e&&r(0,p=e.isActive),"isActiveFraction"in e&&r(1,v=e.isActiveFraction),"isVisible"in e&&r(2,g=e.isVisible),"stores"in e&&r(3,m=e.stores),"locale"in e&&r(4,f=e.locale),"markupEditorWillStartInteraction"in e&&r(5,$=e.markupEditorWillStartInteraction)},e.$$.update=()=>{15728832&e.$$.dirty&&r(9,a=e=>$T(e,u,d,s.origin,s.translation,c.rotation.z,s.scale,l,o)),15728832&e.$$.dirty&&r(8,n=e=>$M(e,u,d,s.origin,s.translation,c.rotation.z,s.scale,l,o))},[p,v,g,m,f,$,o,l,n,a,h,y,x,b,w,S,k,C,M,"redact",s,c,d,u,e=>(v7("to-front",v8(e[0])),e),function(t){li.call(this,e,t)}]}var $K='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',$J='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>',$Q=(e,t)=>{var r=Object.getOwnPropertyDescriptors(e);Object.keys(r).forEach(a=>{r[a].get?Object.defineProperty(t,a,{get:()=>e[a],set:t=>e[a]=t}):t[a]=e[a]})},$1=()=>ef()&&null!==document.doctype,$0=e=>{var t={},{sub:r,pub:a}=aa();$1()||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");var n=sx();$Q(n,t);var o=v0(e,n.stores);$Q(o,t);var l=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(e=>o.on(e,t=>{var r=n[e](t&&t.detail);r instanceof Promise&&r.catch(ep)})),s=(e,t)=>{var a=r(e,t),l=n.on(e,t),s=o.on(e,t);return()=>{a(),l(),s()}};t.handleEvent=ep;var c=v2.map(e=>s(e,r=>t.handleEvent(e,r)));return lK(t,{on:s,updateImage:e=>new Promise((r,a)=>{var o=t.history.get(),l=t.history.index,s=t.imageState;n.loadImage(e).then(e=>{t.history.set(o),t.history.index=l,t.imageState=s,r(e)}).catch(a)}),close:()=>{a("close")},destroy:()=>{[...l,...c].forEach(e=>e()),o.destroy(),n.destroy(),a("destroy")}}),setTimeout(()=>a("init",t),0),t},$2=(ef()&&HTMLElement,"pintura-editor"),$4=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ez(e)?document.querySelector(e):e;if(r2(r))return t.class=t.class?"".concat($2," ").concat(t.class):$2,Object.assign($0(r),t)},{document:$5,window:$3}=lk;function $6(e){var t,r,a,n;return lu(e[27]),{c(){t=oX(),oq(r=oH("div"),"class",e[4]),oq(r,"style",e[5])},m(o,l){oj(o,t,l),oj(o,r,l),e[28](r),a||(n=[oY($3,"keydown",e[10]),oY($3,"orientationchange",e[11]),oY($3,"resize",e[27]),oY($5.body,"focusin",function(){ob(!e[1]&&e[7])&&(!e[1]&&e[7]).apply(this,arguments)}),oY($5.body,"focusout",function(){ob(e[2]&&e[8])&&(e[2]&&e[8]).apply(this,arguments)}),oY(r,"wheel",e[9],{passive:!1})],a=!0)},p(t,a){e=t,16&a[0]&&oq(r,"class",e[4]),32&a[0]&&oq(r,"style",e[5])},i:og,o:og,d(o){o&&oV(t),o&&oV(r),e[28](null),a=!1,ox(n)}}}function $8(e,t,r){var a,n,o,l,s,c,d,u,h,p,v,g,m=le(),{root:f}=t,{preventZoomViewport:$=!0}=t,{preventScrollBodyIfNeeded:y=!0}=t,{preventFooterOverlapIfNeeded:x=!0}=t,{class:b}=t,w=!0,S=!1,k=!1,C=ef()&&document.documentElement,M=ef()&&document.body,T=ef()&&document.head,P=cJ(0,{precision:.001,damping:.5});oC(e,P,e=>r(26,u=e));var R=P.subscribe(e=>{k&&e>=1?(r(19,k=!1),r(1,w=!1),m("show")):S&&e<=0&&(r(18,S=!1),r(1,w=!0),m("hide"))}),E=!1,A=void 0,I=void 0,L=void 0,F=()=>document.querySelector("meta[name=viewport]"),z=()=>Array.from(document.querySelectorAll("meta[name=theme-color]")),O=(e,t)=>{var r=()=>{if(e()){t();return}requestAnimationFrame(r)};requestAnimationFrame(r)},B=0,D=void 0,_=()=>{g||(g=eb("div",{style:"position:fixed;height:100vh;top:0"}),M.append(g))};o8(()=>{x&&iM()&&_()}),o7(()=>{g&&(r(21,D=g.offsetHeight),g.remove(),g=void 0)});var N=void 0,W=()=>C.style.setProperty("--pintura-document-height","".concat(window.innerHeight,"px")),j=e=>{e?(N=window.scrollY,C.classList.add("PinturaDocumentLock"),W(),window.addEventListener("resize",W)):(window.removeEventListener("resize",W),C.classList.remove("PinturaDocumentLock"),iG(N)&&window.scrollTo(0,N),N=void 0)};return o9(()=>{C.classList.remove("PinturaModalBodyLock"),R()}),e.$$set=e=>{"root"in e&&r(0,f=e.root),"preventZoomViewport"in e&&r(12,$=e.preventZoomViewport),"preventScrollBodyIfNeeded"in e&&r(13,y=e.preventScrollBodyIfNeeded),"preventFooterOverlapIfNeeded"in e&&r(14,x=e.preventFooterOverlapIfNeeded),"class"in e&&r(15,b=e.class)},e.$$.update=()=>{67895298&e.$$.dirty[0]&&r(25,a=k||S?u:w?0:1),4096&e.$$.dirty[0]&&(n="width=device-width,height=device-height,initial-scale=1"+($?",maximum-scale=1,user-scalable=0":"")),786434&e.$$.dirty[0]&&r(22,o=!k&&!w&&!S),12&e.$$.dirty[0]&&!E&&r(20,v=B),2097160&e.$$.dirty[0]&&r(24,l=iG(D)?"--viewport-pad-footer:".concat(D>B?0:1):""),51380224&e.$$.dirty[0]&&r(5,s="opacity:".concat(a,";height:").concat(v,"px;--editor-modal:1;").concat(l)),32768&e.$$.dirty[0]&&r(4,c=dy(["pintura-editor","PinturaModal",b])),8192&e.$$.dirty[0]&&r(23,d=y&&iM()&&/15_/.test(navigator.userAgent)),12582912&e.$$.dirty[0]&&d&&j(o)},[f,w,E,B,c,s,P,e=>{uE(e.target)&&(r(2,E=!0),p=B)},e=>{if(uE(e.target)){if(clearTimeout(h),p===B)r(2,E=!1);else{var t=B;O(()=>B!==t,()=>r(2,E=!1))}}},e=>{e.target&&/PinturaStage/.test(e.target.className)&&e.preventDefault()},e=>{var{key:t}=e;if(/escape/i.test(t)){var r=e.target;if(!(r&&/input|textarea/i.test(r.nodeName))){var a=document.querySelectorAll(".PinturaModal");a[a.length-1]===f&&m("close")}}},_,$,y,x,b,()=>{if(!k&&w){r(19,k=!0);var e=F()||eb("meta",{name:"viewport"});A=!A&&e.getAttribute("content"),e.setAttribute("content",n+(/cover/.test(A)?",viewport-fit=cover":"")),e.parentNode||T.append(e);var t=getComputedStyle(f).getPropertyValue("--color-background"),a=z();if(a.length)I=a.map(e=>e.getAttribute("content"));else{var o=eb("meta",{name:"theme-color"});T.append(o),a.push(o)}a.forEach(e=>e.setAttribute("content","rgb(".concat(t,")"))),clearTimeout(L),L=setTimeout(()=>P.set(1),250)}},()=>{if(!S&&!w){clearTimeout(L),r(18,S=!0);var e=F();A?e.setAttribute("content",A):e.remove();var t=z();I?t.forEach((e,t)=>{e.setAttribute("content",I[t])}):t.forEach(e=>e.remove()),P.set(0)}},S,k,v,D,o,d,l,a,u,function(){r(3,B=$3.innerHeight)},function(e){ln[e?"unshift":"push"](()=>{r(0,f=e)})}]}class $7 extends lz{constructor(e){super(),lF(this,e,$8,$6,ow,{root:0,preventZoomViewport:12,preventScrollBodyIfNeeded:13,preventFooterOverlapIfNeeded:14,class:15,show:16,hide:17},null,[-1,-1])}get root(){return this.$$.ctx[0]}set root(e){this.$$set({root:e}),lg()}get preventZoomViewport(){return this.$$.ctx[12]}set preventZoomViewport(e){this.$$set({preventZoomViewport:e}),lg()}get preventScrollBodyIfNeeded(){return this.$$.ctx[13]}set preventScrollBodyIfNeeded(e){this.$$set({preventScrollBodyIfNeeded:e}),lg()}get preventFooterOverlapIfNeeded(){return this.$$.ctx[14]}set preventFooterOverlapIfNeeded(e){this.$$set({preventFooterOverlapIfNeeded:e}),lg()}get class(){return this.$$.ctx[15]}set class(e){this.$$set({class:e}),lg()}get show(){return this.$$.ctx[16]}get hide(){return this.$$.ctx[17]}}var $9=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new $7({target:t||document.body,props:{class:e.class,preventZoomViewport:e.preventZoomViewport,preventScrollBodyIfNeeded:e.preventScrollBodyIfNeeded,preventFooterOverlapIfNeeded:e.preventFooterOverlapIfNeeded}})},ye=(e,t,r,a)=>{var n,o=tP(tf(t.x-e.x,t.y-e.y)),l=5*r;n=a?.5*l:Math.ceil((l-1)*.5);var s=tB(tw(o),n);return{anchor:tw(e),offset:s,normal:o,solid:a,size:l,sizeHalf:n}},yt=(e,t)=>{var{anchor:r,solid:a,normal:n,offset:o,size:l,sizeHalf:s,strokeWidth:c,strokeColor:d,strokeJoin:u,strokeCap:h,bitmap:p}=e,v=r.x,g=r.y,m=tB(tw(n),l),f=tf(v+m.x,g+m.y);if(tB(m,.55),a){tF(t,o);var $=tB(tw(n),.5*s);return[{points:[tf(v-$.x,g-$.y),tf(f.x-m.y,f.y+m.x),tf(f.x+m.y,f.y-m.x)],pathClose:!0,backgroundColor:d}]}var y=tB(tC(tw(n)),.5),x=tf(v-y.x,g-y.y),b=tf(v+y.x,g+y.y);return[{points:[tf(f.x+m.y,f.y-m.x),x,tf(v,g),b,tf(f.x-m.y,f.y+m.x)],pathClose:!1,strokeWidth:c,strokeColor:d,strokeJoin:u,strokeCap:h,bitmap:p}]},yr=(e,t)=>{var{anchor:r,solid:a,offset:n,normal:o,sizeHalf:l,strokeWidth:s,strokeColor:c}=e;return tF(t,n),a&&tF(t,tk(tw(o))),[{x:r.x,y:r.y,rx:l,ry:l,backgroundColor:a?c:void 0,strokeWidth:a?void 0:s,strokeColor:a?void 0:c}]},yi=e=>{var{anchor:t,offset:r,strokeWidth:a,strokeColor:n,strokeJoin:o,strokeCap:l,bitmap:s}=e;return[{points:[tf(t.x-r.y,t.y+r.x),tf(t.x+r.y,t.y-r.x)],strokeWidth:a,strokeColor:n,strokeJoin:o,strokeCap:l,bitmap:s}]},ya=(e,t)=>{var{anchor:r,solid:a,offset:n,normal:o,sizeHalf:l,strokeWidth:s,strokeColor:c}=e;return tF(t,n),[{x:r.x-l,y:r.y-l,width:2*l,height:2*l,rotation:tR(o),backgroundColor:a?c:void 0,strokeWidth:a?void 0:s,strokeColor:a?void 0:c}]},yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{if(t.lineStart||t.lineEnd){var r=[],{lineStart:a,lineEnd:n,strokeWidth:o,strokeColor:l,strokeJoin:s,strokeCap:c,bitmap:d}=t,u=tf(t.x1,t.y1),h=tf(t.x2,t.y2),p=[u,h];if(a){var[v,g]=a.split("-"),m=e[v];if(m){var f=ye(u,h,o,!!g);r.push(...m(ea(ea({},f),{},{strokeColor:l,strokeWidth:o,strokeJoin:s,strokeCap:c,bitmap:d}),u))}}if(n){var[$,y]=n.split("-"),x=e[$];if(x){var b=ye(h,u,o,!!y);r.push(...x(ea(ea({},b),{},{strokeColor:l,strokeWidth:o,strokeJoin:s,strokeCap:c,bitmap:d}),h))}}return[{points:p,strokeWidth:o,strokeColor:l,strokeJoin:s,strokeCap:c,bitmap:d},...r]}}},yo=()=>({arrow:yt,circle:yr,square:ya,bar:yi}),yl=(e,t)=>{var r=parseFloat(e)*t;return ez(e)?"".concat(r,"%"):r},ys=(e,t)=>ez(e)?nL(e,t):e,yc=e=>[ea(ea({},e),{},{frameStyle:"line",frameInset:0,frameOffset:0,frameSize:e.frameSize?yl(e.frameSize,2):"2.5%",frameRadius:e.frameRound?yl(e.frameSize,2):0})],yd=(e,t)=>{var{width:r,height:a,frameImage:n,frameSize:o="15%",frameOutset:l=0,frameSlices:s={x1:.15,y1:.15,x2:.85,y2:.85}}=e,{isPreview:c}=t;if(!n)return[];var d=Math.sqrt(r*a),u=ys(o,d),h=c?u:Math.round(u),p=ys(l,d),v=2*p,{x1:g,x2:m,y1:f,y2:$}=s,y={x0:0,y0:0,x1:h,y1:h,x2:r-h,y2:a-h,cw:h,ch:h,ew:r-h-h,eh:a-h-h},x=c?1:0,b=2*x,w=p>0,S={expandsCanvas:w,width:y.cw,height:y.ch,backgroundImage:n};return[{expandsCanvas:w,x:y.x1-x-p,y:y.y0-p,width:y.ew+b+v,height:y.ch,backgroundCorners:[{x:g,y:0},{x:m,y:0},{x:m,y:f},{x:g,y:f}],backgroundImage:n},{expandsCanvas:w,x:y.x1-x-p,y:y.y2+p,width:y.ew+b+v,height:y.ch,backgroundCorners:[{x:g,y:$},{x:m,y:$},{x:m,y:1},{x:g,y:1}],backgroundImage:n},{expandsCanvas:w,x:y.x0-p,y:y.y1-x-p,width:y.cw,height:y.eh+b+v,backgroundCorners:[{x:0,y:f},{x:g,y:f},{x:g,y:$},{x:0,y:$}],backgroundImage:n},{expandsCanvas:w,x:y.x2+p,y:y.y1-x-p,width:y.cw,height:y.eh+b+v,backgroundCorners:[{x:m,y:f},{x:1,y:f},{x:1,y:$},{x:m,y:$}],backgroundImage:n},ea(ea({},S),{},{x:y.x0-p,y:y.y0-p,backgroundCorners:[{x:0,y:0},{x:g,y:0},{x:g,y:f},{x:0,y:f}]}),ea(ea({},S),{},{x:y.x2+p,y:y.y0-p,backgroundCorners:[{x:m,y:0},{x:1,y:0},{x:1,y:f},{x:m,y:f}]}),ea(ea({},S),{},{x:y.x2+p,y:y.y2+p,backgroundCorners:[{x:m,y:$},{x:1,y:$},{x:1,y:1},{x:m,y:1}]}),ea(ea({},S),{},{x:y.x0-p,y:y.y2+p,backgroundCorners:[{x:0,y:$},{x:g,y:$},{x:g,y:1},{x:0,y:1}]})]},yu=(e,t)=>{var{x:r,y:a,width:n,height:o,frameInset:l="3.5%",frameSize:s=".25%",frameColor:c=[1,1,1],frameOffset:d="5%",frameAmount:u=1,frameRadius:h=0,expandsCanvas:p=!1}=e,{isPreview:v}=t,g=Math.sqrt(n*o),m=ys(s,g),f=ys(l,g),$=ys(d,g),y=0;v||(y=(m=Math.max(1,Math.round(m)))%2==0?0:.5);var x=ys(yl(h,u),g);return Array(u).fill(void 0).map((e,t)=>{var l=$*t,s=r+f+l,d=a+f+l,u=r+n-f-l,h=a+o-f-l;return v||(s=Math.round(s),d=Math.round(d),u=Math.round(u),h=Math.round(h)),{x:s+y,y:d+y,width:u-s,height:h-d,cornerRadius:x>0?x-l:0,strokeWidth:m,strokeColor:c,expandsCanvas:p}})},yh=(e,t)=>{var{x:r,y:a,width:n,height:o,frameSize:l=".25%",frameOffset:s=0,frameInset:c="2.5%",frameColor:d=[1,1,1]}=e,{isPreview:u}=t,h=Math.sqrt(n*o),p=ys(l,h),v=ys(c,h),g=ys(s,h),m=0;u||(p=Math.max(1,Math.round(p)),v=Math.round(v),g=Math.round(g),m=p%2==0?0:.5);var f=g-v,$=r+v+m,y=a+v+m,x=r+n-v-m,b=a+o-v-m;return[{points:[tf($+f,y),tf(x-f,y)]},{points:[tf(x,y+f),tf(x,b-f)]},{points:[tf(x-f,b),tf($+f,b)]},{points:[tf($,b-f),tf($,y+f)]}].map(e=>(e.strokeWidth=p,e.strokeColor=d,e))},yp=(e,t)=>{var{x:r,y:a,width:n,height:o,frameSize:l=".25%",frameInset:s="2.5%",frameLength:c="2.5%",frameColor:d=[1,1,1]}=e,{isPreview:u}=t,h=Math.sqrt(n*o),p=ys(l,h),v=ys(s,h),g=ys(c,h),m=0;u||(p=Math.max(1,Math.round(p)),v=Math.round(v),g=Math.round(g),m=p%2==0?0:.5);var f=r+v+m,$=a+v+m,y=r+n-v-m,x=a+o-v-m;return[{points:[tf(f,$+g),tf(f,$),tf(f+g,$)]},{points:[tf(y-g,$),tf(y,$),tf(y,$+g)]},{points:[tf(y,x-g),tf(y,x),tf(y-g,x)]},{points:[tf(f+g,x),tf(f,x),tf(f,x-g)]}].map(e=>(e.strokeWidth=p,e.strokeColor=d,e))},yv=(e,t)=>{var{x:r,y:a,width:n,height:o,frameColor:l=[1,1,1]}=e,{isPreview:s}=t,c=Math.sqrt(n*o),d=.1*c,u=.2*c,h=0,p=.5*d;return s?h=1:u=Math.ceil(u),l.length=3,[{id:"border",x:r-p+h,y:a-p+h,width:n+d-2*h,height:o+u-2*h,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:d,frameColor:l,expandsCanvas:!0},{id:"chin",x:r-p,y:o-h,width:n+d,height:u,backgroundColor:l,expandsCanvas:!0}].filter(Boolean)},yg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,r)=>{if(iZ(t,"frameStyle")){var a=e[t.frameStyle];if(a){var{frameStyle:n}=t;return a(er(t,et),r)}}}},ym=()=>({solid:yc,hook:yp,line:yu,edge:yh,polaroid:yv,nine:yd}),yf=()=>yn(yo()),y$=()=>yg(ym()),yy=()=>[y$(),yf()],yx=e=>function t(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isPreview:!0},n=e.map(e=>{var n=e(r,a);if(n)return n.map(e=>t(e,a))}).filter(Boolean).flat();return n.length?n.flat().map((e,t)=>(e.id=r.id+"_"+t,e)):r},yb=s2,yw=s5,yS=()=>({read:null,apply:eA}),yk=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{blurAmount:t,dataSizeScalar:r,scrambleAmount:a,backgroundColor:n}=e;return(e,o)=>cZ(e,ea(ea({blurAmount:t,scrambleAmount:a,backgroundColor:n},o),{},{dataSizeScalar:r||o.dataSizeScalar}))},yC={markupEditorToolbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"];return e.map(e=>ez(e)?gv(e):Array.isArray(e)?eI(e[1])?gv(e[0],void 0,e[1]):gv(e[0],e[1],e[2]):void 0).filter(Boolean)}(),markupEditorToolStyles:ea({sharpie:gp("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:gd,strokeColor:[...gc],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0}),eraser:gp("eraser"),path:gp("path",{pathClose:void 0,strokeWidth:gd,strokeColor:[...gc],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:gp("line",{strokeColor:[...gc],strokeWidth:gd}),arrow:gp("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...gc],strokeWidth:gd}),rectangle:gp("rectangle",{strokeColor:[...gu],backgroundColor:[...gc]}),ellipse:gp("ellipse",{strokeColor:[...gu],backgroundColor:[...gc]}),text:gp("text",{color:[...gc],fontSize:"2%"})},void 0),markupEditorShapeStyleControls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ea(ea({},gG),e),r={};return Object.entries(t).forEach(e=>{var[a,n]=e;if(!/Options$/.test(a)){if(gG[a]&&eI(n)&&!iY(n)){var{component:o,factory:l,items:s,options:c={}}=t[a];if(ez(l))r[a]=[l,c];else{var d=gG[a].items,u=ez(d)?t[d]||gW[d]():void 0;ez(s)&&gW[s]?u=t[s]?t[s].every(e=>!Array.isArray(e))?t[s].map(e=>[e,e]):t[s]:gW[s]():(s||c.items)&&(u=s||c.items);var h=l||gG[a].factory;eO(h)?r[a]=u?h(u,c):h(c):o&&(r[a]=[o,ea(ea({},c),{},{items:s})])}}else r[a]=n}}),r}()},yM=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];t.filter(e=>!!e.util).forEach(e=>{var[t,r,a=()=>!0]=e.util;v1.has(t)||(v1.set(t,{Component:r,isSupported:a}),dN(r).filter(e=>!vY.includes(e)).forEach(e=>{if(vJ.add(e),vQ[e]){vQ[e].push(t);return}vQ[e]=[t]}))})},yT={util:["crop",class extends lz{constructor(e){super(),lF(this,e,mq,mG,ow,{name:95,isActive:0,stores:96,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:97,cropAutoCenterImageSelectionTimeout:98,cropEnableZoomMatchImageAspectRatio:99,cropEnableRotateMatchImageAspectRatio:100,cropEnableRotationInput:101,cropEnableZoom:2,cropEnableZoomInput:102,cropEnableZoomAutoHide:103,cropEnableImageSelection:104,cropEnableInfoIndicator:105,cropEnableZoomTowardsWheelPosition:106,cropEnableLimitWheelInputToCropSelection:107,cropEnableCenterImageSelection:108,cropEnableButtonRotateLeft:109,cropEnableButtonRotateRight:110,cropEnableButtonFlipHorizontal:111,cropEnableButtonFlipVertical:112,cropSelectPresetOptions:113,cropEnableSelectPreset:114,cropEnableFilterMatchAspectRatio:115,cropSelectPresetFilter:94,cropEnableButtonToggleCropLimit:116,cropWillRenderTools:117,cropActiveTransformTool:118,cropMinimizeToolbar:119,cropInteractionFocus:120,cropRotationRange:3,cropMaskOpacity:121,locale:4},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[95]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),lg()}get stores(){return this.$$.ctx[96]}set stores(e){this.$$set({stores:e}),lg()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(e){this.$$set({cropImageSelectionCornerStyle:e}),lg()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[97]}set cropWillRenderImageSelectionGuides(e){this.$$set({cropWillRenderImageSelectionGuides:e}),lg()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[98]}set cropAutoCenterImageSelectionTimeout(e){this.$$set({cropAutoCenterImageSelectionTimeout:e}),lg()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[99]}set cropEnableZoomMatchImageAspectRatio(e){this.$$set({cropEnableZoomMatchImageAspectRatio:e}),lg()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableRotateMatchImageAspectRatio(e){this.$$set({cropEnableRotateMatchImageAspectRatio:e}),lg()}get cropEnableRotationInput(){return this.$$.ctx[101]}set cropEnableRotationInput(e){this.$$set({cropEnableRotationInput:e}),lg()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(e){this.$$set({cropEnableZoom:e}),lg()}get cropEnableZoomInput(){return this.$$.ctx[102]}set cropEnableZoomInput(e){this.$$set({cropEnableZoomInput:e}),lg()}get cropEnableZoomAutoHide(){return this.$$.ctx[103]}set cropEnableZoomAutoHide(e){this.$$set({cropEnableZoomAutoHide:e}),lg()}get cropEnableImageSelection(){return this.$$.ctx[104]}set cropEnableImageSelection(e){this.$$set({cropEnableImageSelection:e}),lg()}get cropEnableInfoIndicator(){return this.$$.ctx[105]}set cropEnableInfoIndicator(e){this.$$set({cropEnableInfoIndicator:e}),lg()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[106]}set cropEnableZoomTowardsWheelPosition(e){this.$$set({cropEnableZoomTowardsWheelPosition:e}),lg()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[107]}set cropEnableLimitWheelInputToCropSelection(e){this.$$set({cropEnableLimitWheelInputToCropSelection:e}),lg()}get cropEnableCenterImageSelection(){return this.$$.ctx[108]}set cropEnableCenterImageSelection(e){this.$$set({cropEnableCenterImageSelection:e}),lg()}get cropEnableButtonRotateLeft(){return this.$$.ctx[109]}set cropEnableButtonRotateLeft(e){this.$$set({cropEnableButtonRotateLeft:e}),lg()}get cropEnableButtonRotateRight(){return this.$$.ctx[110]}set cropEnableButtonRotateRight(e){this.$$set({cropEnableButtonRotateRight:e}),lg()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[111]}set cropEnableButtonFlipHorizontal(e){this.$$set({cropEnableButtonFlipHorizontal:e}),lg()}get cropEnableButtonFlipVertical(){return this.$$.ctx[112]}set cropEnableButtonFlipVertical(e){this.$$set({cropEnableButtonFlipVertical:e}),lg()}get cropSelectPresetOptions(){return this.$$.ctx[113]}set cropSelectPresetOptions(e){this.$$set({cropSelectPresetOptions:e}),lg()}get cropEnableSelectPreset(){return this.$$.ctx[114]}set cropEnableSelectPreset(e){this.$$set({cropEnableSelectPreset:e}),lg()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[115]}set cropEnableFilterMatchAspectRatio(e){this.$$set({cropEnableFilterMatchAspectRatio:e}),lg()}get cropSelectPresetFilter(){return this.$$.ctx[94]}set cropSelectPresetFilter(e){this.$$set({cropSelectPresetFilter:e}),lg()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[116]}set cropEnableButtonToggleCropLimit(e){this.$$set({cropEnableButtonToggleCropLimit:e}),lg()}get cropWillRenderTools(){return this.$$.ctx[117]}set cropWillRenderTools(e){this.$$set({cropWillRenderTools:e}),lg()}get cropActiveTransformTool(){return this.$$.ctx[118]}set cropActiveTransformTool(e){this.$$set({cropActiveTransformTool:e}),lg()}get cropMinimizeToolbar(){return this.$$.ctx[119]}set cropMinimizeToolbar(e){this.$$set({cropMinimizeToolbar:e}),lg()}get cropInteractionFocus(){return this.$$.ctx[120]}set cropInteractionFocus(e){this.$$set({cropInteractionFocus:e}),lg()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(e){this.$$set({cropRotationRange:e}),lg()}get cropMaskOpacity(){return this.$$.ctx[121]}set cropMaskOpacity(e){this.$$set({cropMaskOpacity:e}),lg()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),lg()}}]},yP={util:["filter",class extends lz{constructor(e){super(),lF(this,e,m2,m1,ow,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),lg()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),lg()}get stores(){return this.$$.ctx[34]}set stores(e){this.$$set({stores:e}),lg()}get locale(){return this.$$.ctx[2]}set locale(e){this.$$set({locale:e}),lg()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(e){this.$$set({filterFunctions:e}),lg()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(e){this.$$set({filterOptions:e}),lg()}}]},yR={util:["finetune",class extends lz{constructor(e){super(),lF(this,e,m7,m8,ow,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(e){this.$$set({stores:e}),lg()}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),lg()}get locale(){return this.$$.ctx[16]}set locale(e){this.$$set({locale:e}),lg()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(e){this.$$set({finetuneControlConfiguration:e}),lg()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(e){this.$$set({finetuneOptions:e}),lg()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(e){this.$$set({finetuneNudgePrecision:e}),lg()}}]},yE={util:["annotate",class extends lz{constructor(e){super(),lF(this,e,$E,$R,ow,{name:53,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,markupEditorWillStartInteraction:13,markupEditorGridSize:14,markupEditorSnapThreshold:15,markupEditorSnapToContext:16,annotateGridSize:17,annotateSnapToContext:18,willRenderShapePresetToolbar:19,annotateTools:20,annotateToolShapes:21,annotateShapeControls:22,annotateActiveTool:0,annotateEnableButtonFlipVertical:23,annotateEnableSelectImagePreset:24,annotateEnableDropImagePreset:25,annotatePresets:26,annotateWillRenderShapePresetToolbar:27,enableViewTool:28,enableSelectToolToAddShape:29,enableTapToAddText:30,enableAutoSelectMoveTool:31,enableMoveTool:32,willRenderShapeControls:33,willRenderShapeTextControls:34,beforeAddShape:35,beforeRemoveShape:36,beforeDeselectShape:37,beforeSelectShape:38,beforeUpdateShape:39},null,[-1,-1])}get name(){return this.$$.ctx[53]}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),lg()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),lg()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),lg()}get stores(){return this.$$.ctx[4]}set stores(e){this.$$set({stores:e}),lg()}get locale(){return this.$$.ctx[5]}set locale(e){this.$$set({locale:e}),lg()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(e){this.$$set({markupEditorToolbar:e}),lg()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(e){this.$$set({markupEditorToolStyles:e}),lg()}get markupEditorToolRetainStyles(){return this.$$.ctx[8]}set markupEditorToolRetainStyles(e){this.$$set({markupEditorToolRetainStyles:e}),lg()}get markupEditorShapeStyleControls(){return this.$$.ctx[9]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),lg()}get markupEditorToolSelectRadius(){return this.$$.ctx[10]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),lg()}get markupEditorTextInputMode(){return this.$$.ctx[11]}set markupEditorTextInputMode(e){this.$$set({markupEditorTextInputMode:e}),lg()}get markupEditorToolShareStyles(){return this.$$.ctx[12]}set markupEditorToolShareStyles(e){this.$$set({markupEditorToolShareStyles:e}),lg()}get markupEditorWillStartInteraction(){return this.$$.ctx[13]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),lg()}get markupEditorGridSize(){return this.$$.ctx[14]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),lg()}get markupEditorSnapThreshold(){return this.$$.ctx[15]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),lg()}get markupEditorSnapToContext(){return this.$$.ctx[16]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),lg()}get annotateGridSize(){return this.$$.ctx[17]}set annotateGridSize(e){this.$$set({annotateGridSize:e}),lg()}get annotateSnapToContext(){return this.$$.ctx[18]}set annotateSnapToContext(e){this.$$set({annotateSnapToContext:e}),lg()}get willRenderShapePresetToolbar(){return this.$$.ctx[19]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),lg()}get annotateTools(){return this.$$.ctx[20]}set annotateTools(e){this.$$set({annotateTools:e}),lg()}get annotateToolShapes(){return this.$$.ctx[21]}set annotateToolShapes(e){this.$$set({annotateToolShapes:e}),lg()}get annotateShapeControls(){return this.$$.ctx[22]}set annotateShapeControls(e){this.$$set({annotateShapeControls:e}),lg()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(e){this.$$set({annotateActiveTool:e}),lg()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[23]}set annotateEnableButtonFlipVertical(e){this.$$set({annotateEnableButtonFlipVertical:e}),lg()}get annotateEnableSelectImagePreset(){return this.$$.ctx[24]}set annotateEnableSelectImagePreset(e){this.$$set({annotateEnableSelectImagePreset:e}),lg()}get annotateEnableDropImagePreset(){return this.$$.ctx[25]}set annotateEnableDropImagePreset(e){this.$$set({annotateEnableDropImagePreset:e}),lg()}get annotatePresets(){return this.$$.ctx[26]}set annotatePresets(e){this.$$set({annotatePresets:e}),lg()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[27]}set annotateWillRenderShapePresetToolbar(e){this.$$set({annotateWillRenderShapePresetToolbar:e}),lg()}get enableViewTool(){return this.$$.ctx[28]}set enableViewTool(e){this.$$set({enableViewTool:e}),lg()}get enableSelectToolToAddShape(){return this.$$.ctx[29]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),lg()}get enableTapToAddText(){return this.$$.ctx[30]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),lg()}get enableAutoSelectMoveTool(){return this.$$.ctx[31]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),lg()}get enableMoveTool(){return this.$$.ctx[32]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),lg()}get willRenderShapeControls(){return this.$$.ctx[33]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),lg()}get willRenderShapeTextControls(){return this.$$.ctx[34]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),lg()}get beforeAddShape(){return this.$$.ctx[35]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),lg()}get beforeRemoveShape(){return this.$$.ctx[36]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),lg()}get beforeDeselectShape(){return this.$$.ctx[37]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),lg()}get beforeSelectShape(){return this.$$.ctx[38]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),lg()}get beforeUpdateShape(){return this.$$.ctx[39]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),lg()}}]},yA={util:["sticker",class extends lz{constructor(e){super(),lF(this,e,$I,$A,ow,{name:42,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerForceEnable:43,stickerStickToImage:6,stickerEnableSelectImagePreset:44,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:45,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,markupEditorGridSize:46,markupEditorSnapThreshold:47,markupEditorSnapToContext:48,annotateGridSize:49,annotateSnapToContext:50,decorateGridSize:51,decorateSnapToContext:52,willRenderShapeControls:12,willRenderShapeTextControls:13,markupEditorToolSelectRadius:14,willRenderShapePresetToolbar:15,beforeAddShape:16,beforeRemoveShape:17,beforeDeselectShape:18,beforeSelectShape:19,beforeUpdateShape:20,markupEditorWillStartInteraction:21},null,[-1,-1])}get name(){return this.$$.ctx[42]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),lg()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),lg()}get isVisible(){return this.$$.ctx[2]}set isVisible(e){this.$$set({isVisible:e}),lg()}get stores(){return this.$$.ctx[3]}set stores(e){this.$$set({stores:e}),lg()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),lg()}get stickers(){return this.$$.ctx[5]}set stickers(e){this.$$set({stickers:e}),lg()}get stickerForceEnable(){return this.$$.ctx[43]}set stickerForceEnable(e){this.$$set({stickerForceEnable:e}),lg()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(e){this.$$set({stickerStickToImage:e}),lg()}get stickerEnableSelectImagePreset(){return this.$$.ctx[44]}set stickerEnableSelectImagePreset(e){this.$$set({stickerEnableSelectImagePreset:e}),lg()}get stickerEnableDropImagePreset(){return this.$$.ctx[7]}set stickerEnableDropImagePreset(e){this.$$set({stickerEnableDropImagePreset:e}),lg()}get stickerEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickerEnableButtonFlipVertical(e){this.$$set({stickerEnableButtonFlipVertical:e}),lg()}get stickerWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickerWillRenderShapePresetToolbar(e){this.$$set({stickerWillRenderShapePresetToolbar:e}),lg()}get stickerEnableSelectImage(){return this.$$.ctx[45]}set stickerEnableSelectImage(e){this.$$set({stickerEnableSelectImage:e}),lg()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[10]}set stickersEnableButtonFlipVertical(e){this.$$set({stickersEnableButtonFlipVertical:e}),lg()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[11]}set stickersWillRenderShapePresetToolbar(e){this.$$set({stickersWillRenderShapePresetToolbar:e}),lg()}get markupEditorGridSize(){return this.$$.ctx[46]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),lg()}get markupEditorSnapThreshold(){return this.$$.ctx[47]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),lg()}get markupEditorSnapToContext(){return this.$$.ctx[48]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),lg()}get annotateGridSize(){return this.$$.ctx[49]}set annotateGridSize(e){this.$$set({annotateGridSize:e}),lg()}get annotateSnapToContext(){return this.$$.ctx[50]}set annotateSnapToContext(e){this.$$set({annotateSnapToContext:e}),lg()}get decorateGridSize(){return this.$$.ctx[51]}set decorateGridSize(e){this.$$set({decorateGridSize:e}),lg()}get decorateSnapToContext(){return this.$$.ctx[52]}set decorateSnapToContext(e){this.$$set({decorateSnapToContext:e}),lg()}get willRenderShapeControls(){return this.$$.ctx[12]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),lg()}get willRenderShapeTextControls(){return this.$$.ctx[13]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),lg()}get markupEditorToolSelectRadius(){return this.$$.ctx[14]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),lg()}get willRenderShapePresetToolbar(){return this.$$.ctx[15]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),lg()}get beforeAddShape(){return this.$$.ctx[16]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),lg()}get beforeRemoveShape(){return this.$$.ctx[17]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),lg()}get beforeDeselectShape(){return this.$$.ctx[18]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),lg()}get beforeSelectShape(){return this.$$.ctx[19]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),lg()}get beforeUpdateShape(){return this.$$.ctx[20]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),lg()}get markupEditorWillStartInteraction(){return this.$$.ctx[21]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),lg()}},e=>{var{stickers:t,stickerEnableSelectImage:r,stickerEnableSelectImagePreset:a,stickerEnableDropImagePreset:n,stickerForceEnable:o}=e;return t&&t.length||r||a||n||o}]},yI={util:["frame",class extends lz{constructor(e){super(),lF(this,e,$B,$O,ow,{name:16,isActive:0,stores:17,locale:1,frameStyles:18,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[16]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),lg()}get stores(){return this.$$.ctx[17]}set stores(e){this.$$set({stores:e}),lg()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),lg()}get frameStyles(){return this.$$.ctx[18]}set frameStyles(e){this.$$set({frameStyles:e}),lg()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(e){this.$$set({frameOptions:e}),lg()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),lg()}},e=>{var{src:t}=e;return t&&!p4(t)}]},yL={util:["redact",class extends lz{constructor(e){super(),lF(this,e,$q,$Y,ow,{name:19,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5})}get name(){return this.$$.ctx[19]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),lg()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),lg()}get isVisible(){return this.$$.ctx[2]}set isVisible(e){this.$$set({isVisible:e}),lg()}get stores(){return this.$$.ctx[3]}set stores(e){this.$$set({stores:e}),lg()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),lg()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),lg()}},e=>{var{src:t}=e;return t&&!p4(t)}]},yF={util:["resize",class extends lz{constructor(e){super(),lF(this,e,$Z,$X,ow,{name:29,isActive:0,stores:30,locale:1,resizeMinSize:31,resizeMaxSize:32,resizeAspectRatioLocked:28,resizeEnableButtonLockAspectRatio:33,resizeSizePresetOptions:34,resizeWidthPresetOptions:35,resizeHeightPresetOptions:36,resizeWillRenderFooter:37},null,[-1,-1,-1,-1])}get name(){return this.$$.ctx[29]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),lg()}get stores(){return this.$$.ctx[30]}set stores(e){this.$$set({stores:e}),lg()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),lg()}get resizeMinSize(){return this.$$.ctx[31]}set resizeMinSize(e){this.$$set({resizeMinSize:e}),lg()}get resizeMaxSize(){return this.$$.ctx[32]}set resizeMaxSize(e){this.$$set({resizeMaxSize:e}),lg()}get resizeAspectRatioLocked(){return this.$$.ctx[28]}set resizeAspectRatioLocked(e){this.$$set({resizeAspectRatioLocked:e}),lg()}get resizeEnableButtonLockAspectRatio(){return this.$$.ctx[33]}set resizeEnableButtonLockAspectRatio(e){this.$$set({resizeEnableButtonLockAspectRatio:e}),lg()}get resizeSizePresetOptions(){return this.$$.ctx[34]}set resizeSizePresetOptions(e){this.$$set({resizeSizePresetOptions:e}),lg()}get resizeWidthPresetOptions(){return this.$$.ctx[35]}set resizeWidthPresetOptions(e){this.$$set({resizeWidthPresetOptions:e}),lg()}get resizeHeightPresetOptions(){return this.$$.ctx[36]}set resizeHeightPresetOptions(e){this.$$set({resizeHeightPresetOptions:e}),lg()}get resizeWillRenderFooter(){return this.$$.ctx[37]}set resizeWillRenderFooter(e){this.$$set({resizeWillRenderFooter:e}),lg()}},e=>{var{src:t}=e;return t&&!p4(t)}]},yz={finetuneControlConfiguration:{gamma:{base:1,min:.15,max:4,getLabel:e=>e<1?vc((e-.15)/.85-1):vc((e-1)/3),getStore:e=>{var{imageGamma:t}=e;return t}},brightness:{base:0,min:-.25,max:.25,getLabel:e=>vc(e/.25),getStore:e=>{var{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.brightness)return e.brightness[4]},setValue:(e,t)=>e.update(e=>ea(ea({},e),{},{brightness:[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0]}))},contrast:{base:1,min:.5,max:1.5,getLabel:e=>vc(-1+(e-.5)*2),getStore:e=>{var{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.contrast)return e.contrast[0]},setValue:(e,t)=>e.update(e=>ea(ea({},e),{},{contrast:[t,0,0,0,.5*(1-t),0,t,0,0,.5*(1-t),0,0,t,0,.5*(1-t),0,0,0,1,0]}))},saturation:{base:1,min:0,max:2,getLabel:e=>vc(e-1),getStore:e=>{var{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.saturation)return(e.saturation[0]-.213)/.787},setValue:(e,t)=>e.update(e=>ea(ea({},e),{},{saturation:[.213+.787*t,.715-.715*t,.072-.072*t,0,0,.213-.213*t,.715+.285*t,.072-.072*t,0,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,0,1,0]}))},exposure:{base:1,min:.5,max:1.5,getLabel:e=>vc(-1+(e-.5)*2),getStore:e=>{var{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.exposure)return e.exposure[0]},setValue:(e,t)=>e.update(e=>ea(ea({},e),{},{exposure:[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0]}))},temperature:{base:0,min:-1,max:1,getStore:e=>{var{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.temperature){var t=e.temperature[0];return t>=1?(t-1)/.1:-((1-t)/.15)}},setValue:(e,t)=>e.update(e=>ea(ea({},e),{},{temperature:t>0?[1+.1*t,0,0,0,0,0,1,0,0,0,0,0,1+-(.1*t),0,0,0,0,0,1,0]:[1+.15*t,0,0,0,0,0,1+.05*t,0,0,0,0,0,1+-(.15*t),0,0,0,0,0,1,0]}))},clarity:{base:0,min:-1,max:1,getStore:e=>{var{imageConvolutionMatrix:t}=e;return t},getValue:e=>{if(e.clarity)return 0===e.clarity[0]?-(e.clarity[1]/1):-(e.clarity[1]/2)},setValue:(e,t)=>{e.update(e=>ea(ea({},e),{},{clarity:t>=0?[0,-1*t,0,-1*t,1+4*t,-1*t,0,-1*t,0]:[-1*t,-2*t,-1*t,-2*t,1+-3*t,-2*t,-1*t,-2*t,-1*t]}))}},vignette:{base:0,min:-1,max:1,getStore:e=>{var{imageVignette:t}=e;return t}}},finetuneOptions:ge},yO={filterFunctions:{chrome:()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],fade:()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],pastel:()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],cold:()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],warm:()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],monoDefault:()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],monoWash:()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],monoNoir:()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],monoStark:()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],sepiaDefault:()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],sepiaRust:()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],sepiaBlues:()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],sepiaColor:()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0]},filterOptions:[["Default",[[void 0,e=>e.labelDefault]]],["Classic",[["chrome",e=>e.filterLabelChrome],["fade",e=>e.filterLabelFade],["cold",e=>e.filterLabelCold],["warm",e=>e.filterLabelWarm],["pastel",e=>e.filterLabelPastel]]],["Monochrome",[["monoDefault",e=>e.filterLabelMonoDefault],["monoNoir",e=>e.filterLabelMonoNoir],["monoStark",e=>e.filterLabelMonoStark],["monoWash",e=>e.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",e=>e.filterLabelSepiaDefault],["sepiaRust",e=>e.filterLabelSepiaRust],["sepiaBlues",e=>e.filterLabelSepiaBlues],["sepiaColor",e=>e.filterLabelSepiaColor]]]]},yB={frameStyles:{solidSharp:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},solidRound:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},lineSingle:{shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:'<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},lineMultiple:{shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:'<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>'},edgeSeparate:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:'<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>'},edgeCross:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:'<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},edgeOverlap:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:'<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>'},hook:{shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:'<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>'},polaroid:{shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'}},frameOptions:[[void 0,e=>e.labelNone],["solidSharp",e=>e.frameLabelMatSharp],["solidRound",e=>e.frameLabelMatRound],["lineSingle",e=>e.frameLabelLineSingle],["lineMultiple",e=>e.frameLabelLineMultiple],["edgeCross",e=>e.frameLabelEdgeCross],["edgeSeparate",e=>e.frameLabelEdgeSeparate],["edgeOverlap",e=>e.frameLabelEdgeOverlap],["hook",e=>e.frameLabelCornerHooks],["polaroid",e=>e.frameLabelPolaroid]]},yD={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:e=>"".concat(e.join(", ")," not supported on this browser"),labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:$K,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:$K,statusLabelLoadImage:e=>e&&e.task?e.error?"IMAGE_TOO_SMALL"===e.error.code?"Minimum image size is {minWidth} &times; {minHeight}":"Error loading image":"blob-to-bitmap"===e.task?"Preparing image&hellip;":"Loading image&hellip;":"Waiting for image",statusLabelProcessImage:e=>{if(e&&e.task)return"store"===e.task?e.error?"Error uploading image":"Uploading image&hellip;":e.error?"Error processing image":"Processing image&hellip;"}},y_={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:"".concat($J),shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'.concat($J),shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'.concat($J),shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextOutline:"Text outline",shapeTitleTextOutlineWidth:"Width",shapeTitleTextShadow:"Text shadow",shapeTitleTextShadowBlur:"Blur",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:"Selection mode",shapeTitleBrushSize:"Brush size",shapeLabelSelectionModeNew:"New",shapeLabelSelectionModeAdd:"Add",shapeLabelSelectionModeSubtract:"Remove",shapeLabelToolSelectionBrush:"Brush",shapeLabelToolSelectionLassoo:"Lassoo",shapeLabelToolSelectionRectangle:"Rectangle marquee",shapeLabelToolSelectionEllipse:"Ellipse marquee",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'},yN={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(e,t)=>{var[r,a,n]=t?[t<1?1:.3,1===t?.85:.5,t>1?1:.3]:[.2,.3,.4];return'<g fill="currentColor">\n            <rect opacity="'.concat(r,'" x="2" y="4" width="10" height="18" rx="1"/>\n            <rect opacity="').concat(a,'" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="').concat(n,'" x="6" y="12" width="17" height="10" rx="1"/>\n        </g>')},cropIconCropBoundary:(e,t)=>{var[r,a,n,o]=t?[.3,1,0,0]:[0,0,.3,1];return'<g fill="currentColor">\n            <rect opacity="'.concat(r,'" x="2" y="3" width="20" height="20" rx="1"/>\n            <rect opacity="').concat(a,'" x="7" y="8" width="10" height="10" rx="1"/>\n            <rect opacity="').concat(n,'" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="').concat(o,'" x="12" y="4" width="10" height="10" rx="1"/>\n        </g>')},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},yW={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},yj={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},yV={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:(e,t)=>'<defs><mask id="mask1" x="0" y="0" width="24" height="24" ><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g  mask="url(#mask1)"><path transform="translate(0 '.concat((t-1)*3,')" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>')},yH={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},yU={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},yG={frameLabel:"Frame",frameIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n            <rect x="2" y="2" width="20" height="20" rx="4"/>\n            <rect x="6" y="6" width="12" height="12" rx="1"/>\n        </g>',frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},yX={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},yZ=$4,yY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,{sub:r,pub:a}=aa(),n={},o=$9(e,t),l=()=>{o.hide&&o.hide()},s=()=>{o.show&&o.show()},c=$0(o.root);$Q(c,n),n.handleEvent=ep,c.handleEvent=(e,t)=>{if("init"===e)return n.handleEvent(e,n);n.handleEvent(e,t)},c.on("close",eo(function*(){var{willClose:t}=e;if(!t)return l();(yield t())&&l()}));var d=(e,t)=>/show|hide/.test(e)?r(e,t):c.on(e,t),u=["show","hide"].map(e=>d(e,t=>n.handleEvent(e,t))),h=()=>{u.forEach(e=>e()),l(),o.$destroy(),c.destroy()};return lK(n,{on:d,destroy:h,hide:l,show:s}),Object.defineProperty(n,"modal",{get:()=>o.root,set:()=>void 0}),o.$on("close",c.close),o.$on("show",()=>a("show")),o.$on("hide",()=>{a("hide"),!1!==e.enableAutoDestroy&&h()}),!1!==e.enableAutoHide&&c.on("process",l),c.on("loadstart",s),!1!==e.enableButtonClose&&(e.enableButtonClose=!0),delete e.class,Object.assign(n,e),n},yq=(e,t)=>$4(e,ea(ea({},t),{},{layout:"overlay"})),yK=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return yx([...yy(),...e])}}}]);